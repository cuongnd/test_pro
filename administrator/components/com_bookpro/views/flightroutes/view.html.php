<?phpclass BookproViewflightroutes extends BookproJViewLegacy{	protected $items;	protected $state;	protected $pagination;	function display(){			$this->items = $this->get('Items');			$this->state = $this->get('State');			$this->pagination = $this->get('Pagination');			$this->addToolbar();			$this->from=$this->getFrom();			$this->to=$this->getTo();		 		parent::display();	}		protected function addToolbar()	{		JToolBarHelper::title(JText::_('Flight Route Manager'), 'flight');		JToolbarHelper::addNew('flightroute.add');		JToolbarHelper::editList('flightroute.edit');		JToolbarHelper::divider();		JToolbarHelper::publish('flightroutes.publish', 'Publish', true);		JToolbarHelper::unpublish('flightroutes.unpublish', 'UnPublish', true);		JToolbarHelper::divider();		JToolbarHelper::deleteList('', 'flightroutes.delete');			}		function getFrom($select, $field = 'from', $autoSubmit = false)	{		$state = $this->get('State');		$from=$state->get('filter.from');		$db =& JFactory::getDBO();		$query = $db->getQuery(true);		$query->select('id,title');		$query->from('#__bookpro_dest');		$query->where('air=1 AND state = 1 AND parent_id = 1');		$query->order('lft ASC');		$db->setQuery($query);		$options 	= array();		 		$options = array_merge($options, $db->loadObjectList()) ;			return AHtml::getFilterSelect($field,JText::_('COM_BOOKPRO_SELECT_DESTINATION'), $options, $from, $autoSubmit ,'','id', 'title') ;	}		function getTo($select, $field = 'to', $autoSubmit = false)	{		$state = $this->get('State');		$to=$state->get('filter.to');		$db =& JFactory::getDBO();		$query = $db->getQuery(true);		$query->select('id,title');		$query->from('#__bookpro_dest');		$query->where('air=1 AND state = 1 AND parent_id = 1');		$query->order('lft ASC');		$db->setQuery($query);		$options 	= array();	 		$options = array_merge($options, $db->loadObjectList()) ;	 		return AHtml::getFilterSelect($field, JText::_('COM_BOOKPRO_SELECT_DESTINATION'), $options, $to, $autoSubmit ,'','id', 'title') ;	}	 }