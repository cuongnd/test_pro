!function(){var moduleFactory=function($){var module=this,jQuery=$,exports=function(){!function($){$.fn.linger=function(str,arg,opts){var type="string"==typeof str?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;return 0!==type.indexOf("linger")&&(type="linger"+type),opts=(str==fn?arg:opts)||{},fn?this.bind(type,opts,fn):this.trigger(type)};var $event=$.event,$special=$event.special,linger=$special.linger={defaults:{speed:100,delay:100,persist:400},datakey:"lingerdata",add:function(obj){var data=$.data(this,linger.datakey),opts=obj.data||{};
data.related+=1,$.each(linger.defaults,function(key){void 0!==opts[key]&&(data[key]=opts[key])})},remove:function(){$.data(this,linger.datakey).related-=1},setup:function(){if(!$.data(this,linger.datakey)){var data=$.extend({related:0},linger.defaults);$.data(this,linger.datakey,data),$event.add(this,"mouseenter mouseleave",linger.handler,data)}},teardown:function(){$.data(this,linger.datakey).related||($.removeData(this,linger.datakey),$event.remove(this,"mouseenter mousemove mouseleave",linger.handler))},handler:function(event){var data=event.data||{};
if("mouseenter"!=event.type||data.lingered||(data.dist2=0,data.limit=Math.pow(data.speed*(data.delay/1e3),2),data.elem=this,linger.hijack(event,"lingerstart",this)&&(data.event=event,$event.add(this,"mousemove",linger.handler,data),data.timer=setTimeout(function(){data.dist2<=data.limit&&(data.lingered=linger.hijack(data.event,"linger",data.elem)),data.lingered?$event.remove(data.elem,"mousemove",linger.handler):data.timer=setTimeout(arguments.callee,data.delay),data.dist2=0},data.delay))),data.event)switch(event.type){case data.lingered&&"mouseenter":clearTimeout(data.timer);
break;case"mousemove":data.dist2+=Math.pow(event.pageX-data.event.pageX,2)+Math.pow(event.pageY-data.event.pageY,2),data.event=event;break;case data.lingered&&"mouseleave":data.timer=setTimeout(function(){data.lingered=!linger.hijack(event,"lingerend",data.elem),data.lingered&&setTimeout(arguments.callee,data.persist)},data.persist);break;case!data.lingered&&"mouseleave":clearTimeout(data.timer),$event.remove(data.elem,"mousemove",linger.handler),data.event=null}},hijack:function(event,type,elem){var result,orig={event:event.originalEvent,type:event.type};
return event.type=type,event.originalEvent=null,event.result=null,result=$event.handle.call(elem,event),event.type=orig.type,event.originalEvent=orig.event,result!==!1}};$special.lingerstart=$special.lingerend=linger}(jQuery)};exports(),module.resolveWith(exports)};FD31.module("event/linger",moduleFactory)}();