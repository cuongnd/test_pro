/**
 * jQuery Voice plugin 0.3 (31st May 2015)
 * Copyright Subin Siby - http://subinsb.com
 * 
 * ------------------
 * Licensed under MIT
 * ------------------
 * 
 * A jQuery plugin to record, play & download microphone input sound from the user.
 * NEEDS recorder.js and recorderWorker.js to work - https://github.com/mattdiamond/Recorderjs
 * 
 * To use MP3 conversion, NEEDS mp3Worker.js, libmp3lame.min.js and recorder.js from https://github.com/nusofthq/Recordmp3js/tree/master/js
 *
 * Full Documentation & Support - http://subinsb.com/html5-record-mic-voice
*/
!function(t){t.Fr=t.Fr||{},Fr.voice={workerPath:"js/recorderWorker.js",mp3WorkerPath:"js/mp3Worker.js",stream:!1,init_called:!1,init:function(){try{t.AudioContext=t.AudioContext||t.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t.URL=t.URL||t.webkitURL,navigator.getUserMedia===!1&&alert("getUserMedia() is not supported in your browser"),this.context=new AudioContext}catch(e){alert("Web Audio API is not supported in this browser")}},record:function(t,e){e=e||function(){},this.init_called===!1&&(this.init(),this.init_called=!0),$that=this,navigator.getUserMedia({audio:!0},function(r){var i=$that.context.createMediaStreamSource(r);t===!0&&i.connect($that.context.destination),$that.recorder=new Recorder(i,{workerPath:$that.workerPath,mp3WorkerPath:$that.mp3WorkerPath}),$that.stream=r,$that.recorder.record(),e(r)},function(){alert("No live audio input")})},stop:function(){return this.recorder.stop(),this.recorder.clear(),this.stream.stop(),this},"export":function(e,r){"mp3"==r?this.recorder.exportMP3(e):this.recorder.exportWAV(function(i){if(""==r||"blob"==r)e(i);else if("base64"==r){var o=new t.FileReader;o.readAsDataURL(i),o.onloadend=function(){base64data=o.result,e(base64data)}}else if("URL"==r){var a=URL.createObjectURL(i);e(a)}})}}}(window);
