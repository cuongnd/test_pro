/*
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>

 Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(h,d){function g(a){var b=a.length,c=l.type(a);return l.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"===typeof b&&0<b&&b-1 in a)}function b(a){var b=I[a]={};l.each(a.match(ma)||[],function(a,c){b[c]=!0});return b}function a(a,b,c,e){if(l.acceptData(a)){var f=l.expando,k="string"===typeof b,g=a.nodeType,n=g?l.cache:a,p=g?a[f]:a[f]&&f;if(p&&n[p]&&(e||n[p].data)||!k||c!==d){p||(g?a[f]=p=Q.pop()||l.guid++:p=f);n[p]||(n[p]={},g||(n[p].toJSON=l.noop));if("object"===
typeof b||"function"===typeof b)e?n[p]=l.extend(n[p],b):n[p].data=l.extend(n[p].data,b);a=n[p];e||(a.data||(a.data={}),a=a.data);c!==d&&(a[l.camelCase(b)]=c);k?(c=a[b],null==c&&(c=a[l.camelCase(b)])):c=a;return c}}}function c(a,b,c){if(l.acceptData(a)){var e,d,k,g=a.nodeType,n=g?l.cache:a,p=g?a[l.expando]:l.expando;if(n[p]){if(b&&(e=c?n[p]:n[p].data)){l.isArray(b)?b=b.concat(l.map(b,l.camelCase)):b in e?b=[b]:(b=l.camelCase(b),b=b in e?[b]:b.split(" "));d=0;for(k=b.length;d<k;d++)delete e[b[d]];if(!(c?
f:l.isEmptyObject)(e))return}if(!c&&(delete n[p].data,!f(n[p])))return;g?l.cleanData([a],!0):l.support.deleteExpando||n!=n.window?delete n[p]:n[p]=null}}}function e(a,b,c){if(c===d&&1===a.nodeType)if(c="data-"+b.replace(C,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:K.test(c)?l.parseJSON(c):c}catch(e){}l.data(a,b,c)}else c=d;return c}function f(a){for(var b in a)if(("data"!==b||!l.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;
return!0}function k(){return!1}function n(){return!0}function p(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function s(a,b,c){b=b||0;if(l.isFunction(b))return l.grep(a,function(a,e){return!!b.call(a,e,a)===c});if(b.nodeType)return l.grep(a,function(a){return a===b===c});if("string"===typeof b){var e=l.grep(a,function(a){return 1===a.nodeType});if(Kb.test(b))return l.filter(b,e,!c);b=l.filter(b,e)}return l.grep(a,function(a){return 0<=l.inArray(a,b)===c})}function r(a){var b=pb.split("|");a=a.createDocumentFragment();
if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function u(a){var b=a.getAttributeNode("type");a.type=(b&&b.specified)+"/"+a.type;return a}function q(a){var b=db.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function t(a,b){for(var c,e=0;null!=(c=a[e]);e++)l._data(c,"globalEval",!b||l._data(b[e],"globalEval"))}function m(a,b){if(1===b.nodeType&&l.hasData(a)){var c,e,f;e=l._data(a);var d=l._data(b,e),k=e.events;if(k)for(c in delete d.handle,d.events={},k)for(e=0,
f=k[c].length;e<f;e++)l.event.add(b,c,k[c][e]);d.data&&(d.data=l.extend({},d.data))}}function v(a,b){var c,e,f=0,k="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(b||"*"):d;if(!k)for(k=[],c=a.childNodes||a;null!=(e=c[f]);f++)!b||l.nodeName(e,b)?k.push(e):l.merge(k,v(e,b));return b===d||b&&l.nodeName(a,b)?l.merge([a],k):k}function z(a){eb.test(a.type)&&(a.defaultChecked=a.checked)}function A(a,b){if(b in a)return b;
for(var c=b.charAt(0).toUpperCase()+b.slice(1),e=b,f=fb.length;f--;)if(b=fb[f]+c,b in a)return b;return e}function w(a,b){a=b||a;return"none"===l.css(a,"display")||!l.contains(a.ownerDocument,a)}function B(a,b){for(var c,e=[],f=0,d=a.length;f<d;f++)c=a[f],c.style&&(e[f]=l._data(c,"olddisplay"),b?(e[f]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&w(c)&&(e[f]=l._data(c,"olddisplay",O(c.nodeName)))):e[f]||w(c)||l._data(c,"olddisplay",l.css(c,"display")));for(f=0;f<d;f++)c=a[f],
!c.style||b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none");return a}function x(a,b,c){return(a=gb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function R(a,b,c,e,f){b=c===(e?"border":"content")?4:"width"===b?1:0;for(var d=0;4>b;b+=2)"margin"===c&&(d+=l.css(a,c+va[b],!0,f)),e?("content"===c&&(d-=l.css(a,"padding"+va[b],!0,f)),"margin"!==c&&(d-=l.css(a,"border"+va[b]+"Width",!0,f))):(d+=l.css(a,"padding"+va[b],!0,f),"padding"!==c&&(d+=l.css(a,"border"+va[b]+
"Width",!0,f)));return d}function S(a,b,c){var e=!0,f="width"===b?a.offsetWidth:a.offsetHeight,d=Xa(a),k=l.support.boxSizing&&"border-box"===l.css(a,"boxSizing",!1,d);if(0>=f||null==f){f=Oa(a,b,d);if(0>f||null==f)f=a.style[b];if(ia.test(f))return f;e=k&&(l.support.boxSizingReliable||f===a.style[b]);f=parseFloat(f)||0}return f+R(a,b,c||(k?"border":"content"),e,d)+"px"}function O(a){var b=y,c=hb[a];c||(c=aa(a,b),"none"!==c&&c||(Ia=(Ia||l("<iframe frameborder='0' width='0' height='0'/>").css("cssText",
"display:block !important")).appendTo(b.documentElement),b=(Ia[0].contentWindow||Ia[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=aa(a,b),Ia.detach()),hb[a]=c);return c}function aa(a,b){var c=l(b.createElement(a)).appendTo(b.body),e=l.css(c[0],"display");c.remove();return e}function J(a,b,c,e){var f;if(l.isArray(b))l.each(b,function(b,f){c||Zb.test(a)?e(a,f):J(a+"["+("object"===typeof f?b:"")+"]",f,c,e)});else if(c||"object"!==l.type(b))e(a,b);else for(f in b)J(a+
"["+f+"]",b[f],c,e)}function L(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var e,f=0,d=b.toLowerCase().match(ma)||[];if(l.isFunction(c))for(;e=d[f++];)"+"===e[0]?(e=e.slice(1)||"*",(a[e]=a[e]||[]).unshift(c)):(a[e]=a[e]||[]).push(c)}}function V(a,b,c,e){function f(g){var n;d[g]=!0;l.each(a[g]||[],function(a,Ha){var g=Ha(b,c,e);if("string"===typeof g&&!k&&!d[g])return b.dataTypes.unshift(g),f(g),!1;if(k)return!(n=g)});return n}var d={},k=a===Pa;return f(b.dataTypes[0])||!d["*"]&&f("*")}
function H(a,b){var c,e,f=l.ajaxSettings.flatOptions||{};for(c in b)b[c]!==d&&((f[c]?a:e||(e={}))[c]=b[c]);e&&l.extend(!0,a,e);return a}function ha(){try{return new h.XMLHttpRequest}catch(a){}}function ra(){setTimeout(function(){Qa=d});return Qa=l.now()}function ba(a,b){l.each(b,function(b,c){for(var e=(ib[b]||[]).concat(ib["*"]),f=0,d=e.length;f<d&&!e[f].call(a,b,c);f++);})}function sa(a,b,c){var e,f=0,d=Ra.length,k=l.Deferred().always(function(){delete g.elem}),g=function(){if(e)return!1;for(var b=
Qa||ra(),b=Math.max(0,n.startTime+n.duration-b),c=1-(b/n.duration||0),f=0,d=n.tweens.length;f<d;f++)n.tweens[f].run(c);k.notifyWith(a,[n,c,b]);if(1>c&&d)return b;k.resolveWith(a,[n]);return!1},n=k.promise({elem:a,props:l.extend({},b),opts:l.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Qa||ra(),duration:c.duration,tweens:[],createTween:function(b,c){var e=l.Tween(a,n.opts,b,c,n.opts.specialEasing[b]||n.opts.easing);n.tweens.push(e);return e},stop:function(b){var c=
0,f=b?n.tweens.length:0;if(e)return this;for(e=!0;c<f;c++)n.tweens[c].run(1);b?k.resolveWith(a,[n,b]):k.rejectWith(a,[n,b]);return this}});c=n.props;for(Sa(c,n.opts.specialEasing);f<d;f++)if(b=Ra[f].call(n,a,c,n.opts))return b;ba(n,c);l.isFunction(n.opts.start)&&n.opts.start.call(a,n);l.fx.timer(l.extend(g,{anim:n,queue:n.opts.queue,elem:a}));return n.progress(n.opts.progress).done(n.opts.done,n.opts.complete).fail(n.opts.fail).always(n.opts.always)}function Sa(a,b){var c,e,f,d,k;for(c in a)if(e=
l.camelCase(c),f=b[e],d=a[c],l.isArray(d)&&(f=d[1],d=a[c]=d[0]),c!==e&&(a[e]=d,delete a[c]),(k=l.cssHooks[e])&&"expand"in k)for(c in d=k.expand(d),delete a[e],d)c in a||(a[c]=d[c],b[c]=f);else b[e]=f}function P(a,b,c,e,f){return new P.prototype.init(a,b,c,e,f)}function na(a,b){var c,e={height:a},f=0;for(b=b?1:0;4>f;f+=2-b)c=va[f],e["margin"+c]=e["padding"+c]=a;b&&(e.opacity=e.width=a);return e}function F(a){return l.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var Y,U,y=h.document,
W=h.location,oa={},Q=[],T=Q.concat,Z=Q.push,M=Q.slice,ea=Q.indexOf,ja=oa.toString,ga=oa.hasOwnProperty,pa="1.9.0pre".trim,l=function(a,b){return new l.fn.init(a,b,Y)},N=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ma=/\S+/g,wa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,jb=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,da=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,kb=/^[\],:{}\s]*$/,lb=/(?:^|:|,)(?:\s*\[)+/g,mb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Ya=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,xa=/^-ms-/,Za=
/-([\da-z])/gi,G=function(a,b){return b.toUpperCase()},E=function(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",E,!1),l.ready()):"complete"===y.readyState&&(y.detachEvent("onreadystatechange",E),l.ready())};l.fn=l.prototype={jquery:"1.9.0pre",constructor:l,init:function(a,b,c){var e;if(!a)return this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:jb.exec(a);if(!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);
if(e[1]){if(b=b instanceof l?b[0]:b,l.merge(this,l.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),da.test(e[1])&&l.isPlainObject(b))for(e in b)if(l.isFunction(this[e]))this[e](b[e]);else this.attr(e,b[e])}else{if((b=y.getElementById(e[2]))&&b.parentNode){if(b.id!==e[2])return c.find(a);this.length=1;this[0]=b}this.context=y;this.selector=a}return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(l.isFunction(a))return c.ready(a);a.selector!==d&&(this.selector=a.selector,
this.context=a.context);return l.makeArray(a,this)},selector:"",length:0,size:function(){return this.length},toArray:function(){return M.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){a=l.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,b){return l.each(this,a,b)},ready:function(a){l.ready.promise().done(a);return this},slice:function(){return this.pushStack(M.apply(this,arguments))},first:function(){return this.eq(0)},
last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},map:function(a){return this.pushStack(l.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice};l.fn.init.prototype=l.fn;l.extend=l.fn.extend=function(){var a,b,c,e,f,k=arguments[0]||{},n=1,g=arguments.length,p=!1;"boolean"===typeof k&&(p=k,k=arguments[1]||{},n=2);"object"===typeof k||
l.isFunction(k)||(k={});g===n&&(k=this,--n);for(;n<g;n++)if(null!=(a=arguments[n]))for(b in a)c=k[b],e=a[b],k!==e&&(p&&e&&(l.isPlainObject(e)||(f=l.isArray(e)))?(f?(f=!1,c=c&&l.isArray(c)?c:[]):c=c&&l.isPlainObject(c)?c:{},k[b]=l.extend(p,c,e)):e!==d&&(k[b]=e));return k};l.extend({noConflict:function(){return l},isReady:!1,readyWait:1,holdReady:function(a){a?l.readyWait++:l.ready(!0)},ready:function(a){if(!0===a?!--l.readyWait:!l.isReady){if(!y.body)return setTimeout(l.ready);l.isReady=!0;!0!==a&&
0<--l.readyWait||(U.resolveWith(y,[l]),l.fn.trigger&&l(y).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===l.type(a)},isArray:Array.isArray||function(a){return"array"===l.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?oa[ja.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==l.type(a)||a.nodeType||
l.isWindow(a))return!1;try{if(a.constructor&&!ga.call(a,"constructor")&&!ga.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var c in a);return c===d||ga.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||y;var e=da.exec(a);c=!c&&[];if(e)return[b.createElement(e[1])];e=l.buildFragment([a],b,c);c&&l(c).remove();return l.merge([],
e.childNodes)},parseJSON:function(a){if(h.JSON&&h.JSON.parse)return h.JSON.parse(a);if(null===a)return a;if("string"===typeof a&&(a=l.trim(a))&&kb.test(a.replace(mb,"@").replace(Ya,"]").replace(lb,"")))return(new Function("return "+a))();l.error("Invalid JSON: "+a)},parseXML:function(a){var b,c;if(!a||"string"!==typeof a)return null;try{h.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(e){b=d}b&&b.documentElement&&
!b.getElementsByTagName("parsererror").length||l.error("Invalid XML: "+a);return b},noop:function(){},globalEval:function(a){a&&l.trim(a)&&(h.execScript||function(a){h.eval.call(h,a)})(a)},camelCase:function(a){return a.replace(xa,"ms-").replace(Za,G)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e,f=0,d=a.length;e=g(a);if(c)if(e)for(;f<d&&(e=b.apply(a[f],c),!1!==e);f++);else for(f in a){if(e=b.apply(a[f],c),!1===e)break}else if(e)for(;f<
d&&(e=b.call(a[f],f,a[f]),!1!==e);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),!1===e)break;return a},trim:pa&&!pa.call("\ufeff\u00a0")?function(a){return null==a?"":pa.call(a)}:function(a){return null==a?"":(a+"").replace(wa,"")},makeArray:function(a,b){var c=b||[];null!=a&&(g(Object(a))?l.merge(c,"string"===typeof a?[a]:a):Z.call(c,a));return c},inArray:function(a,b,c){var e;if(b){if(ea)return ea.call(b,a,c);e=b.length;for(c=c?0>c?Math.max(0,e+c):c:0;c<e;c++)if(c in b&&b[c]===a)return c}return-1},
merge:function(a,b){var c=b.length,e=a.length,f=0;if("number"===typeof c)for(;f<c;f++)a[e++]=b[f];else for(;b[f]!==d;)a[e++]=b[f++];a.length=e;return a},grep:function(a,b,c){var e,f=[],d=0,k=a.length;for(c=!!c;d<k;d++)e=!!b(a[d],d),c!==e&&f.push(a[d]);return f},map:function(a,b,c){var e,f=0,d=a.length,k=[];if(g(a))for(;f<d;f++)e=b(a[f],f,c),null!=e&&(k[k.length]=e);else for(f in a)e=b(a[f],f,c),null!=e&&(k[k.length]=e);return T.apply([],k)},guid:1,proxy:function(a,b){var c,e;"string"===typeof b&&
(c=a[b],b=a,a=c);if(!l.isFunction(a))return d;e=M.call(arguments,2);c=function(){return a.apply(b||this,e.concat(M.call(arguments)))};c.guid=a.guid=a.guid||l.guid++;return c},access:function(a,b,c,e,f,k,n){var g=0,p=a.length,m=null==c;if("object"===l.type(c))for(g in f=!0,c)l.access(a,b,g,c[g],!0,k,n);else if(e!==d&&(f=!0,l.isFunction(e)||(n=!0),m&&(n?(b.call(a,e),b=null):(m=b,b=function(a,b,c){return m.call(l(a),c)})),b))for(;g<p;g++)b(a[g],c,n?e:e.call(a[g],g,b(a[g],c)));return f?a:m?b.call(a):
p?b(a[0],c):k},now:function(){return(new Date).getTime()}});l.ready.promise=function(a){if(!U)if(U=l.Deferred(),"complete"===y.readyState)setTimeout(l.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",E,!1),h.addEventListener("load",l.ready,!1);else{y.attachEvent("onreadystatechange",E);h.attachEvent("onload",l.ready);var b=!1;try{b=null==h.frameElement&&y.documentElement}catch(c){}b&&b.doScroll&&function ac(){if(!l.isReady){try{b.doScroll("left")}catch(a){return setTimeout(ac,
50)}l.ready()}}()}return U.promise(a)};l.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){oa["[object "+b+"]"]=b.toLowerCase()});Y=l(y);var I={};l.Callbacks=function(a){a="string"===typeof a?I[a]||b(a):l.extend({},a);var c,e,f,k,n,g,p=[],m=!a.once&&[],h=function(b){c=a.memory&&b;e=!0;g=k||0;k=0;n=p.length;for(f=!0;p&&g<n;g++)if(!1===p[g].apply(b[0],b[1])&&a.stopOnFalse){c=!1;break}f=!1;p&&(m?m.length&&h(m.shift()):c?p=[]:q.disable())},q={add:function(){if(p){var b=
p.length;(function bc(b){l.each(b,function(b,c){var e=l.type(c);"function"===e?a.unique&&q.has(c)||p.push(c):c&&c.length&&"string"!==e&&bc(c)})})(arguments);f?n=p.length:c&&(k=b,h(c))}return this},remove:function(){p&&l.each(arguments,function(a,b){for(var c;-1<(c=l.inArray(b,p,c));)p.splice(c,1),f&&(c<=n&&n--,c<=g&&g--)});return this},has:function(a){return-1<l.inArray(a,p)},empty:function(){p=[];return this},disable:function(){p=m=c=d;return this},disabled:function(){return!p},lock:function(){m=
d;c||q.disable();return this},locked:function(){return!m},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];!p||e&&!m||(f?m.push(b):h(b));return this},fire:function(){q.fireWith(this,arguments);return this},fired:function(){return!!e}};return q};l.extend({Deferred:function(a){var b=[["resolve","done",l.Callbacks("once memory"),"resolved"],["reject","fail",l.Callbacks("once memory"),"rejected"],["notify","progress",l.Callbacks("memory")]],c="pending",e={state:function(){return c},always:function(){f.done(arguments).fail(arguments);
return this},then:function(){var a=arguments;return l.Deferred(function(c){l.each(b,function(b,d){var k=d[0],n=l.isFunction(a[b])&&a[b];f[d[1]](function(){var a=n&&n.apply(this,arguments);if(a&&l.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[k+"With"](this===e?c.promise():this,n?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?l.extend(a,e):e}},f={};e.pipe=e.then;l.each(b,function(a,d){var k=d[2],n=d[3];e[d[1]]=k.add;n&&k.add(function(){c=
n},b[a^1][2].disable,b[2][2].lock);f[d[0]]=function(){f[d[0]+"With"](this===f?e:this,arguments);return this};f[d[0]+"With"]=k.fireWith});e.promise(f);a&&a.call(f,f);return f},when:function(a){var b=0,c=M.call(arguments),e=c.length,f=1!==e||a&&l.isFunction(a.promise)?e:0,d=1===f?a:l.Deferred(),k=function(a,b,c){return function(e){b[a]=this;c[a]=1<arguments.length?M.call(arguments):e;c===n?d.notifyWith(b,c):--f||d.resolveWith(b,c)}},n,g,p;if(1<e)for(n=Array(e),g=Array(e),p=Array(e);b<e;b++)c[b]&&l.isFunction(c[b].promise)?
c[b].promise().done(k(b,p,c)).fail(d.reject).progress(k(b,g,n)):--f;f||d.resolveWith(p,c);return d.promise()}});l.support=function(){var a,b,c,e,f,d,k,n=y.createElement("div");n.setAttribute("className","t");n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";b=n.getElementsByTagName("*");c=n.getElementsByTagName("a")[0];if(!b||!c||!b.length)return{};e=y.createElement("select");f=e.appendChild(y.createElement("option"));b=n.getElementsByTagName("input")[0];c.style.cssText=
"top:1px;float:left;opacity:.5";a={getSetAttribute:"t"!==n.className,leadingWhitespace:3===n.firstChild.nodeType,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(c.getAttribute("style")),hrefNormalized:"/a"===c.getAttribute("href"),opacity:/^0.5/.test(c.style.opacity),cssFloat:!!c.style.cssFloat,checkOn:!!b.value,optSelected:f.selected,enctype:!!y.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,
boxModel:"CSS1Compat"===y.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};b.checked=!0;a.noCloneChecked=b.cloneNode(!0).checked;e.disabled=!0;a.optDisabled=!f.disabled;try{delete n.test}catch(g){a.deleteExpando=!1}b=y.createElement("input");b.setAttribute("value","");a.input=""===b.getAttribute("value");b.value="t";b.setAttribute("type","radio");a.radioValue="t"===b.value;b.setAttribute("checked",
"t");b.setAttribute("name","t");c=y.createDocumentFragment();c.appendChild(b);a.appendChecked=b.checked;a.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked;n.attachEvent&&(n.attachEvent("onclick",function(){a.noCloneEvent=!1}),n.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})n.setAttribute(c="on"+k,"t"),a[k+"Bubbles"]=c in h||!1===n.attributes[c].expando;n.style.backgroundClip="content-box";n.cloneNode(!0).style.backgroundClip="";a.clearCloneStyle="content-box"===n.style.backgroundClip;
l(function(){var b,c,e=y.getElementsByTagName("body")[0];e&&(b=y.createElement("div"),b.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e.appendChild(b).appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=n.getElementsByTagName("td"),c[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",a.reliableHiddenOffsets=d&&0===c[0].offsetHeight,n.innerHTML="",
n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",a.boxSizing=4===n.offsetWidth,a.doesNotIncludeMarginInBodyOffset=1!==e.offsetTop,h.getComputedStyle&&(a.pixelPosition="1%"!==(h.getComputedStyle(n,null)||{}).top,a.boxSizingReliable="4px"===(h.getComputedStyle(n,null)||{width:"4px"}).width,c=n.appendChild(y.createElement("div")),c.style.cssText=n.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
c.style.marginRight=c.style.width="0",n.style.width="1px",a.reliableMarginRight=!parseFloat((h.getComputedStyle(c,null)||{}).marginRight)),"undefined"!==typeof n.style.zoom&&(n.innerHTML="",n.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",a.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.innerHTML="<div></div>",n.firstChild.style.width="5px",a.shrinkWrapBlocks=
3!==n.offsetWidth,e.style.zoom=1),e.removeChild(b),n=null)});b=e=c=f=c=b=null;return a}();var K=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,C=/([A-Z])/g;l.extend({cache:{},expando:"jQuery"+("1.9.0pre"+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?l.cache[a[l.expando]]:a[l.expando];return!!a&&!f(a)},data:function(b,c,e){return a(b,c,e,!1)},removeData:function(a,b){return c(a,b,!1)},_data:function(b,c,e){return a(b,
c,e,!0)},_removeData:function(a,b){return c(a,b,!0)},acceptData:function(a){var b=a.nodeName&&l.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}});l.fn.extend({data:function(a,b){var c,f,k=this[0],n=0,g=null;if(a===d){if(this.length&&(g=l.data(k),1===k.nodeType&&!l._data(k,"parsedAttrs"))){for(c=k.attributes;n<c.length;n++)f=c[n].name,f.indexOf("data-")||(f=l.camelCase(f.substring(5)),e(k,f,g[f]));l._data(k,"parsedAttrs",!0)}return g}return"object"===typeof a?this.each(function(){l.data(this,
a)}):l.access(this,function(b){if(b===d)return k?e(k,a,l.data(k,a)):null;this.each(function(){l.data(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){l.removeData(this,a)})}});l.extend({queue:function(a,b,c){var e;if(a)return b=(b||"fx")+"queue",e=l._data(a,b),c&&(!e||l.isArray(c)?e=l._data(a,b,l.makeArray(c)):e.push(c)),e||[]},dequeue:function(a,b){b=b||"fx";var c=l.queue(a,b),e=c.length,f=c.shift(),d=l._queueHooks(a,b),k=function(){l.dequeue(a,
b)};"inprogress"===f&&(f=c.shift(),e--);if(d.cur=f)"fx"===b&&c.unshift("inprogress"),delete d.stop,f.call(a,k,d);!e&&d&&d.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return l._data(a,c)||l._data(a,c,{empty:l.Callbacks("once memory").add(function(){l._removeData(a,b+"queue");l._removeData(a,c)})})}});l.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?l.queue(this[0],a):b===d?this:this.each(function(){var c=l.queue(this,a,b);l._queueHooks(this,
a);"fx"===a&&"inprogress"!==c[0]&&l.dequeue(this,a)})},dequeue:function(a){return this.each(function(){l.dequeue(this,a)})},delay:function(a,b){a=l.fx?l.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var e=setTimeout(b,a);c.stop=function(){clearTimeout(e)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,e=1,f=l.Deferred(),k=this,n=this.length,g=function(){--e||f.resolveWith(k,[k])};"string"!==typeof a&&(b=a,a=d);for(a=a||"fx";n--;)(c=l._data(k[n],a+
"queueHooks"))&&c.empty&&(e++,c.empty.add(g));g();return f.promise(b)}});var Da,Ba,$a=/[\t\r\n]/g,Ta=/\r/g,ta=/^(?:input|select|textarea|button|object)$/i,ya=/^(?:a|area)$/i,X=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Ua=/^(?:checked|selected)$/i,Ea=l.support.getSetAttribute,Wa=l.support.input;l.fn.extend({attr:function(a,b){return l.access(this,l.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){l.removeAttr(this,
a)})},prop:function(a,b){return l.access(this,l.prop,a,b,1<arguments.length)},removeProp:function(a){a=l.propFix[a]||a;return this.each(function(){try{this[a]=d,delete this[a]}catch(b){}})},addClass:function(a){var b,c,e,f,d,k=0,n=this.length;b="string"===typeof a&&a;if(l.isFunction(a))return this.each(function(b){l(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ma)||[];k<n;k++)if(c=this[k],e=1===c.nodeType&&(c.className?(" "+c.className+" ").replace($a," "):" ")){for(d=
0;f=b[d++];)0>e.indexOf(" "+f+" ")&&(e+=f+" ");c.className=l.trim(e)}return this},removeClass:function(a){var b,c,e,f,d,k=0,n=this.length;b=0===arguments.length||"string"===typeof a&&a;if(l.isFunction(a))return this.each(function(b){l(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ma)||[];k<n;k++)if(c=this[k],e=1===c.nodeType&&(c.className?(" "+c.className+" ").replace($a," "):"")){for(d=0;f=b[d++];)for(;0<=e.indexOf(" "+f+" ");)e=e.replace(" "+f+" "," ");c.className=
a?l.trim(e):""}return this},toggleClass:function(a,b){var c=typeof a,e="boolean"===typeof b;return l.isFunction(a)?this.each(function(c){l(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var f,d=0,k=l(this),n=b,g=a.match(ma)||[];f=g[d++];)n=e?n:!k.hasClass(f),k[n?"addClass":"removeClass"](f);else if("undefined"===c||"boolean"===c)this.className&&l._data(this,"__className__",this.className),this.className=this.className||!1===a?"":l._data(this,"__className__")||
""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace($a," ").indexOf(a))return!0;return!1},val:function(a){var b,c,e,f=this[0];if(arguments.length)return e=l.isFunction(a),this.each(function(c){var f=l(this);1===this.nodeType&&(c=e?a.call(this,c,f.val()):a,null==c?c="":"number"===typeof c?c+="":l.isArray(c)&&(c=l.map(c,function(a){return null==a?"":a+""})),b=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],
b&&"set"in b&&b.set(this,c,"value")!==d||(this.value=c))});if(f){if((b=l.valHooks[f.type]||l.valHooks[f.nodeName.toLowerCase()])&&"get"in b&&(c=b.get(f,"value"))!==d)return c;c=f.value;return"string"===typeof c?c.replace(Ta,""):null==c?"":c}}});l.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c=a.options,e=a.selectedIndex,f=(a="select-one"===a.type||0>e)?null:[],d=a?e+1:c.length,k=0>e?d:a?e:0;k<d;k++)if(b=
c[k],!(!b.selected&&k!==e||(l.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&l.nodeName(b.parentNode,"optgroup"))){b=l(b).val();if(a)return b;f.push(b)}return f},set:function(a,b){var c=l.makeArray(b);l(a).find("option").each(function(){this.selected=0<=l.inArray(l(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attr:function(a,b,c){var e,f,k;k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if("undefined"===typeof a.getAttribute)return l.prop(a,b,c);if(k=
1!==k||!l.isXMLDoc(a))b=b.toLowerCase(),f=l.attrHooks[b]||(X.test(b)?Ba:Da);if(c!==d)if(null===c)l.removeAttr(a,b);else{if(f&&k&&"set"in f&&(e=f.set(a,c,b))!==d)return e;a.setAttribute(b,c+"");return c}else{if(f&&k&&"get"in f&&null!==(e=f.get(a,b)))return e;"undefined"!==typeof a.getAttribute&&(e=a.getAttribute(b));return null==e?d:e}}},removeAttr:function(a,b){var c,e,f=0,d=b&&b.match(ma);if(d&&1===a.nodeType)for(;c=d[f++];)e=l.propFix[c]||c,X.test(c)?!Ea&&Ua.test(c)?a[l.camelCase("default-"+c)]=
a[e]=!1:a[e]=!1:l.attr(a,c,""),a.removeAttribute(Ea?c:e)},attrHooks:{type:{set:function(a,b){if(!l.support.radioValue&&"radio"===b&&l.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,
b,c){var e,f,k;k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(k=1!==k||!l.isXMLDoc(a))b=l.propFix[b]||b,f=l.propHooks[b];return c!==d?f&&"set"in f&&(e=f.set(a,c,b))!==d?e:a[b]=c:f&&"get"in f&&null!==(e=f.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):ta.test(a.nodeName)||ya.test(a.nodeName)&&a.href?0:d}}}});Ba={get:function(a,b){var c=l.prop(a,b),e="boolean"===typeof c&&a.getAttribute(b);return(c="boolean"===typeof c?
Wa&&Ea?null!=e:Ua.test(b)?a[l.camelCase("default-"+b)]:!!e:a.getAttributeNode(b))&&!1!==c.value?b.toLowerCase():d},set:function(a,b,c){!1===b?l.removeAttr(a,c):Wa&&Ea||!Ua.test(c)?a.setAttribute(!Ea&&l.propFix[c]||c,c):a[l.camelCase("default-"+c)]=a[c]=!0;return c}};Wa&&Ea||(l.attrHooks.value={get:function(a,b){var c=a.getAttributeNode(b);return l.nodeName(a,"input")?a.defaultValue:c&&c.specified?c.value:d},set:function(a,b,c){if(l.nodeName(a,"input"))a.defaultValue=b;else return Da&&Da.set(a,b,c)}});
Ea||(Da=l.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&("id"===b||"name"===b||"coords"===b?""!==c.value:c.specified)?c.value:d},set:function(a,b,c){var e=a.getAttributeNode(c);e||a.setAttributeNode(e=a.ownerDocument.createAttribute(c));e.value=b+="";return"value"===c||b===a.getAttribute(c)?b:d}},l.attrHooks.contenteditable={get:Da.get,set:function(a,b,c){Da.set(a,""===b?!1:b,c)}},l.each(["width","height"],function(a,b){l.attrHooks[b]=l.extend(l.attrHooks[b],{set:function(a,
c){if(""===c)return a.setAttribute(b,"auto"),c}})}));l.support.hrefNormalized||(l.each(["href","src","width","height"],function(a,b){l.attrHooks[b]=l.extend(l.attrHooks[b],{get:function(a){a=a.getAttribute(b,2);return null==a?d:a}})}),l.each(["href","src"],function(a,b){l.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}));l.support.style||(l.attrHooks.style={get:function(a){return a.style.cssText||d},set:function(a,b){return a.style.cssText=b+""}});l.support.optSelected||(l.propHooks.selected=
l.extend(l.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));l.support.enctype||(l.propFix.enctype="encoding");l.support.checkOn||l.each(["radio","checkbox"],function(){l.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});l.each(["radio","checkbox"],function(){l.valHooks[this]=l.extend(l.valHooks[this],{set:function(a,b){if(l.isArray(b))return a.checked=0<=l.inArray(l(a).val(),b)}})});
var ab=/^(?:input|select|textarea)$/i,Lb=/^key/,Mb=/^(?:mouse|contextmenu)|click/,Ab=/^(?:focusinfocus|focusoutblur)$/,qb=/^([^.]*)(?:\.(.+)|)$/;l.event={add:function(a,b,c,e,f){var k,n,g,p,m,h,q,r,s=0;if(3!==a.nodeType&&8!==a.nodeType&&b&&c&&(k=l._data(a))){c.handler&&(h=c,c=h.handler,f=h.selector);c.guid||(c.guid=l.guid++);g=k.events;g||(k.events=g={});n=k.handle;n||(k.handle=n=function(a){return"undefined"===typeof l||a&&l.event.triggered===a.type?d:l.event.dispatch.apply(n.elem,arguments)},n.elem=
a);for(b=(b||"").match(ma)||[""];s<b.length;s++)p=qb.exec(b[s])||[],k=p[1],m=(p[2]||"").split(".").sort(),r=l.event.special[k]||{},k=(f?r.delegateType:r.bindType)||k,r=l.event.special[k]||{},p=l.extend({type:k,origType:p[1],data:e,handler:c,guid:c.guid,selector:f,needsContext:f&&l.expr.match.needsContext.test(f),namespace:m.join(".")},h),q=g[k],q||(q=g[k]=[],q.delegateCount=0,r.setup&&!1!==r.setup.call(a,e,m,n)||(a.addEventListener?a.addEventListener(k,n,!1):a.attachEvent&&a.attachEvent("on"+k,n))),
r.add&&(r.add.call(a,p),p.handler.guid||(p.handler.guid=c.guid)),f?q.splice(q.delegateCount++,0,p):q.push(p),l.event.global[k]=!0;a=null}},global:{},remove:function(a,b,c,e,f){var d,k,n,g,p,m,h,q,r,s=0,t=l.hasData(a)&&l._data(a);if(t&&(m=t.events)){for(b=(b||"").match(ma)||[""];s<b.length;s++)if(d=qb.exec(b[s])||[],k=n=d[1],d=d[2],k){h=l.event.special[k]||{};k=(e?h.delegateType:h.bindType)||k;q=m[k]||[];g=q.length;d=d?RegExp("(^|\\.)"+d.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(p=
0;p<q.length;p++)r=q[p],!f&&n!==r.origType||c&&c.guid!==r.guid||d&&!d.test(r.namespace)||e&&!(e===r.selector||"**"===e&&r.selector)||(q.splice(p--,1),r.selector&&q.delegateCount--,h.remove&&h.remove.call(a,r));0===q.length&&g!==q.length&&(h.teardown&&!1!==h.teardown.call(a,d,t.handle)||l.removeEvent(a,k,t.handle),delete m[k])}else for(k in m)l.event.remove(a,k+b[s],c,e,!0);l.isEmptyObject(m)&&(delete t.handle,l._removeData(a,"events"))}},trigger:function(a,b,c,e){var f,k,n,g,p,m,q=a.type||a;k=a.namespace?
a.namespace.split("."):[];c=c||y;if(3!==c.nodeType&&8!==c.nodeType&&!Ab.test(q+l.event.triggered)&&(0<=q.indexOf(".")&&(k=q.split("."),q=k.shift(),k.sort()),a="object"===typeof a?a[l.expando]?a:new l.Event(q,a):new l.Event(q),a.type=q,a.isTrigger=!0,a.namespace=k.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n=0>q.indexOf(":")?"on"+q:"",a.result=d,a.target||(a.target=c),b=null!=b?l.makeArray(b):[],b.unshift(a),g=l.event.special[q]||{},e||!g.trigger||
!1!==g.trigger.apply(c,b))){m=[[c,g.bindType||q]];if(!e&&!g.noBubble&&!l.isWindow(c)){p=g.delegateType||q;k=Ab.test(p+q)?c:c.parentNode;for(f=c;k;k=k.parentNode)m.push([k,p]),f=k;f===(c.ownerDocument||y)&&m.push([f.defaultView||f.parentWindow||h,p])}for(f=0;f<m.length&&!a.isPropagationStopped();f++)k=m[f][0],a.type=m[f][1],(p=(l._data(k,"events")||{})[a.type]&&l._data(k,"handle"))&&p.apply(k,b),(p=n&&k[n])&&l.acceptData(k)&&p.apply&&!1===p.apply(k,b)&&a.preventDefault();a.type=q;if(!(e||a.isDefaultPrevented()||
g._default&&!1!==g._default.apply(c.ownerDocument,b)||"click"===q&&l.nodeName(c,"a"))&&l.acceptData(c)&&n&&c[q]&&!l.isWindow(c)){(f=c[n])&&(c[n]=null);l.event.triggered=q;try{c[q]()}catch(r){}l.event.triggered=d;f&&(c[n]=f)}return a.result}},dispatch:function(a){a=l.event.fix(a);var b,c,e,f,k,n,g=(l._data(this,"events")||{})[a.type]||[],p=g.delegateCount,m=M.call(arguments),q=l.event.special[a.type]||{},h=[];m[0]=a;a.delegateTarget=this;if(!q.preDispatch||!1!==q.preDispatch.call(this,a)){if(p&&(!a.button||
"click"!==a.type))for(c=a.target;c!=this;c=c.parentNode||this)if(!0!==c.disabled||"click"!==a.type){f={};k=[];for(b=0;b<p;b++)e=g[b],n=e.selector,f[n]===d&&(f[n]=e.needsContext?0<=l(n,this).index(c):l.find(n,this,null,[c]).length),f[n]&&k.push(e);k.length&&h.push({elem:c,matches:k})}g.length>p&&h.push({elem:this,matches:g.slice(p)});for(b=0;b<h.length&&!a.isPropagationStopped();b++)for(f=h[b],a.currentTarget=f.elem,c=0;c<f.matches.length&&!a.isImmediatePropagationStopped();c++)if(e=f.matches[c],!a.namespace||
a.namespace_re&&a.namespace_re.test(e.namespace))a.data=e.data,a.handleObj=e,e=((l.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,m),e!==d&&(a.result=e,!1===e&&(a.preventDefault(),a.stopPropagation()));q.postDispatch&&q.postDispatch.call(this,a);return a.result}},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==
a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f=b.button,k=b.fromElement;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||y,e=c.documentElement,c=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||
c&&c.clientTop||0));!a.relatedTarget&&k&&(a.relatedTarget=k===a.target?b.toElement:k);a.which||f===d||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[l.expando])return a;var b,c,e=a,f=l.event.fixHooks[a.type]||{},d=f.props?this.props.concat(f.props):this.props;a=l.Event(e);for(b=d.length;b;)c=d[--b],a[c]=e[c];a.target||(a.target=e.srcElement||y);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return f.filter?f.filter(a,e):a},special:{load:{noBubble:!0},click:{trigger:function(){if(l.nodeName(this,
"input")&&"checkbox"===this.type&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==y.activeElement&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===y.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==d&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,e){a=l.extend(new l.Event,c,{type:a,isSimulated:!0,originalEvent:{}});e?l.event.trigger(a,
null,b):l.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};l.event.handle=l.event.dispatch;l.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,c))};l.Event=function(a,b){if(!(this instanceof l.Event))return new l.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||
a.getPreventDefault&&a.getPreventDefault()?n:k):this.type=a;b&&l.extend(this,b);this.timeStamp=a&&a.timeStamp||l.now();this[l.expando]=!0};l.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=n;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=
n;this.stopPropagation()},isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k};l.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){l.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,e=a.relatedTarget,f=a.handleObj;if(!e||e!==this&&!l.contains(this,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}});l.support.submitBubbles||(l.event.special.submit={setup:function(){if(l.nodeName(this,"form"))return!1;l.event.add(this,
"click._submit keypress._submit",function(a){a=a.target;(a=l.nodeName(a,"input")||l.nodeName(a,"button")?a.form:d)&&!l._data(a,"_submit_attached")&&(l.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),l._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&l.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(l.nodeName(this,"form"))return!1;l.event.remove(this,"._submit")}});l.support.changeBubbles||
(l.event.special.change={setup:function(){if(ab.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)l.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),l.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);l.event.simulate("change",this,a,!0)});return!1}l.event.add(this,"beforeactivate._change",function(a){a=a.target;ab.test(a.nodeName)&&!l._data(a,"_change_attached")&&
(l.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||l.event.simulate("change",this.parentNode,a,!0)}),l._data(a,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){l.event.remove(this,"._change");return!ab.test(this.nodeName)}});l.support.focusinBubbles||l.each({focus:"focusin",blur:"focusout"},function(a,
b){var c=0,e=function(a){l.event.simulate(b,a.target,l.event.fix(a),!0)};l.event.special[b]={setup:function(){0===c++&&y.addEventListener(a,e,!0)},teardown:function(){0===--c&&y.removeEventListener(a,e,!0)}}});l.fn.extend({on:function(a,b,c,e,f){var n,g;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=d);for(g in a)this.on(g,b,c,a[g],f);return this}null==c&&null==e?(e=b,c=b=d):null==e&&("string"===typeof b?(e=c,c=d):(e=c,c=b,b=d));if(!1===e)e=k;else if(!e)return this;1===f&&(n=e,e=function(a){l().off(a);
return n.apply(this,arguments)},e.guid=n.guid||(n.guid=l.guid++));return this.each(function(){l.event.add(this,a,e,c,b)})},one:function(a,b,c,e){return this.on(a,b,c,e,1)},off:function(a,b,c){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,l(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,b,a[e]);return this}if(!1===b||"function"===typeof b)c=b,b=d;!1===c&&(c=k);return this.each(function(){l.event.remove(this,
a,c,b)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){l.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return l.event.trigger(a,b,this[0],!0)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});l.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){l.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};Lb.test(b)&&(l.event.fixHooks[b]=l.event.keyHooks);Mb.test(b)&&(l.event.fixHooks[b]=l.event.mouseHooks)});(function(a,b){function c(a){return W.test(a+"")}function e(){var a,b=[];return a=function(c,e){b.push(c+=" ")>D.cacheLength&&delete a[b.shift()];return a[c]=e}}function f(a){a[L]=!0;return a}function d(a){var b=J.createElement("div");try{return a(b)}catch(c){return!1}finally{}}function k(a,b,c,
e){var f,d,n,g,p;(b?b.ownerDocument||b:S)!==J&&Ca(b);b=b||J;c=c||[];if(!a||"string"!==typeof a)return c;if(1!==(g=b.nodeType)&&9!==g)return[];if(!x&&!e){if(f=Q.exec(a))if(n=f[1])if(9===g)if((d=b.getElementById(n))&&d.parentNode){if(d.id===n)return c.push(d),c}else return c;else{if(b.ownerDocument&&(d=b.ownerDocument.getElementById(n))&&ra(b,d)&&d.id===n)return c.push(d),c}else{if(f[2])return Ra.apply(c,aa.call(b.getElementsByTagName(a),0)),c;if((n=f[3])&&ba.getByClassName&&b.getElementsByClassName)return Ra.apply(c,
aa.call(b.getElementsByClassName(n),0)),c}if(ba.qsa&&!ha.test(a)){f=!0;d=L;n=b;p=9===g&&a;if(1===g&&"object"!==b.nodeName.toLowerCase()){g=q(a);(f=b.getAttribute("id"))?d=f.replace(T,"\\$&"):b.setAttribute("id",d);d="[id='"+d+"'] ";for(n=g.length;n--;)g[n]=d+h(g[n]);n=I.test(a)&&b.parentNode||b;p=g.join(",")}if(p)try{return Ra.apply(c,aa.call(n.querySelectorAll(p),0)),c}catch(l){}finally{f||b.removeAttribute("id")}}}var m;a:{a=a.replace(ma,"$1");d=q(a);if(!e&&1===d.length){f=d[0]=d[0].slice(0);if(2<
f.length&&"ID"===(m=f[0]).type&&9===b.nodeType&&!x&&D.relative[f[1].type]){b=D.find.ID(m.matches[0].replace(wa,Y),b)[0];if(!b){m=c;break a}a=a.slice(f.shift().value.length)}for(g=G.needsContext.test(a)?-1:f.length-1;0<=g;g--){m=f[g];if(D.relative[n=m.type])break;if(n=D.find[n])if(e=n(m.matches[0].replace(wa,Y),I.test(f[0].type)&&b.parentNode||b)){f.splice(g,1);a=e.length&&h(f);if(!a){Ra.apply(c,aa.call(e,0));m=c;break a}break}}}B(a,d)(e,b,x,c,I.test(a));m=c}return m}function n(a,b){for(var c=a&&b&&
a.nextSibling;c;c=c.nextSibling)if(c===b)return-1;return a?1:-1}function g(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function p(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function m(a){return f(function(b){b=+b;return f(function(c,e){for(var f,d=a([],c.length,b),k=d.length;k--;)c[f=d[k]]&&(c[f]=!(e[f]=c[f]))})})}function q(a,b){var c,e,f,d,n,g,p;if(n=y[a+" "])return b?0:n.slice(0);n=a;g=[];for(p=D.preFilter;n;){if(!c||
(e=na.exec(n)))e&&(n=n.slice(e[0].length)||n),g.push(f=[]);c=!1;if(e=E.exec(n))c=e.shift(),f.push({value:c,type:e[0].replace(ma," ")}),n=n.slice(c.length);for(d in D.filter)!(e=G[d].exec(n))||p[d]&&!(e=p[d](e))||(c=e.shift(),f.push({value:c,type:d,matches:e}),n=n.slice(c.length));if(!c)break}return b?n.length:n?k.error(a):y(a,g).slice(0)}function h(a){for(var b=0,c=a.length,e="";b<c;b++)e+=a[b].value;return e}function r(a,b,c){var e=b.dir,f=c&&"parentNode"===b.dir,d=$b++;return b.first?function(b,
c,d){for(;b=b[e];)if(1===b.nodeType||f)return a(b,c,d)}:function(b,c,k){var n,g,p,l=Na+" "+d;if(k)for(;b=b[e];){if((1===b.nodeType||f)&&a(b,c,k))return!0}else for(;b=b[e];)if(1===b.nodeType||f)if(p=b[L]||(b[L]={}),(g=p[e])&&g[0]===l){if(!0===(n=g[1])||n===z)return!0===n}else if(g=p[e]=[l],g[1]=a(b,c,k)||z,!0===g[1])return!0}}function s(a){return 1<a.length?function(b,c,e){for(var f=a.length;f--;)if(!a[f](b,c,e))return!1;return!0}:a[0]}function t(a,b,c,e,f){for(var d,k=[],n=0,g=a.length,p=null!=b;n<
g;n++)if(d=a[n])if(!c||c(d,e,f))k.push(d),p&&b.push(n);return k}function v(a,b,c,e,d,n){e&&!e[L]&&(e=v(e));d&&!d[L]&&(d=v(d,n));return f(function(f,n,g,p){var l,m,q=[],h=[],r=n.length,s;if(!(s=f)){s=b||"*";for(var v=g.nodeType?[g]:g,u=[],Ha=0,V=v.length;Ha<V;Ha++)k(s,v[Ha],u);s=u}s=!a||!f&&b?s:t(s,q,a,g,p);v=c?d||(f?a:r||e)?[]:n:s;c&&c(s,v,g,p);if(e)for(l=t(v,h),e(l,[],g,p),g=l.length;g--;)if(m=l[g])v[h[g]]=!(s[h[g]]=m);if(f){if(d||a){if(d){l=[];for(g=v.length;g--;)(m=v[g])&&l.push(s[g]=m);d(null,
v=[],l,p)}for(g=v.length;g--;)(m=v[g])&&-1<(l=d?Sa.call(f,m):q[g])&&(f[l]=!(n[l]=m))}}else v=t(v===n?v.splice(r,v.length):v),d?d(null,n,v,p):Ra.apply(n,v)})}function u(a){var b,c,e,f=a.length,d=D.relative[a[0].type];c=d||D.relative[" "];for(var k=d?1:0,n=r(function(a){return a===b},c,!0),g=r(function(a){return-1<Sa.call(b,a)},c,!0),p=[function(a,c,e){return!d&&(e||c!==qa)||((b=c).nodeType?n(a,c,e):g(a,c,e))}];k<f;k++)if(c=D.relative[a[k].type])p=[r(s(p),c)];else{c=D.filter[a[k].type].apply(null,a[k].matches);
if(c[L]){for(e=++k;e<f&&!D.relative[a[e].type];e++);return v(1<k&&s(p),1<k&&h(a.slice(0,k-1)).replace(ma,"$1"),c,k<e&&u(a.slice(k,e)),e<f&&u(a=a.slice(e)),e<f&&h(a))}p.push(c)}return s(p)}function V(a,b){var c=0,e=0<b.length,d=0<a.length,n=function(f,n,g,p,l){var m,q,h=[],r=0,s="0",v=f&&[],u=null!=l,Ha=qa,V=f||d&&D.find.TAG("*",l&&n.parentNode||n),w=Na+=null==Ha?1:Math.E;u&&(qa=n!==J&&n,z=c);for(;null!=(l=V[s]);s++){if(d&&l){for(m=0;q=a[m];m++)if(q(l,n,g)){p.push(l);break}u&&(Na=w,z=++c)}e&&((l=!q&&
l)&&r--,f&&v.push(l))}r+=s;if(e&&s!==r){for(m=0;q=b[m];m++)q(v,h,n,g);if(f){if(0<r)for(;s--;)v[s]||h[s]||(h[s]=F.call(p));h=t(h)}Ra.apply(p,h);u&&!f&&0<h.length&&1<r+b.length&&k.uniqueSort(p)}u&&(Na=w,qa=Ha);return v};return e?f(n):n}function w(){}var $,z,D,H,A,B,ca,qa,Ca,J,N,x,ha,R,Qa,ra,cb,L="sizzle"+-new Date,S=a.document,ba={},Na=0,$b=0,Yb=e(),y=e(),Wa=e(),O=typeof b,sa=[],F=sa.pop,Ra=sa.push,aa=sa.slice,Sa=sa.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},
sa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),P="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+sa+")|)|)[\\x20\\t\\r\\n\\f]*\\]",C=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",ma=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,na=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,E=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,
ib=RegExp(C),U=RegExp("^"+sa+"$"),G={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[\w-]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+C),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},I=/[\x20\t\r\n\f]*[+~]/,W=/\{\s*\[native code\]\s*\}/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/^(?:input|select|textarea|button)$/i,ab=/^h\d$/i,T=/'|\\/g,M=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,wa=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,Y=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,c&1023|56320)};try{aa.call(N.childNodes,0)[0].nodeType}catch(X){aa=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}A=k.isXML=
function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};Ca=k.setDocument=function(a){var e=a?a.ownerDocument||a:S;if(e===J||9!==e.nodeType||!e.documentElement)return J;J=e;N=e.documentElement;x=A(e);ba.tagNameNoComments=d(function(a){a.appendChild(e.createComment(""));return!a.getElementsByTagName("*").length});ba.attributes=d(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a});ba.getByClassName=
d(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length});ba.getByName=d(function(a){a.id=L+0;a.innerHTML="<a name='"+L+"'></a><div name='"+L+"'></div>";N.insertBefore(a,N.firstChild);var b=e.getElementsByName&&e.getElementsByName(L).length===2+e.getElementsByName(L+0).length;ba.getIdNotName=!e.getElementById(L);N.removeChild(a);
return b});D.attrHandle=d(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&typeof a.firstChild.getAttribute!==O&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}};ba.getIdNotName?(D.find.ID=function(a,b){if(typeof b.getElementById!==O&&!x){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},D.filter.ID=function(a){var b=a.replace(wa,Y);return function(a){return a.getAttribute("id")===
b}}):(D.find.ID=function(a,c){if(typeof c.getElementById!==O&&!x){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==O&&e.getAttributeNode("id").value===a?[e]:b:[]}},D.filter.ID=function(a){var b=a.replace(wa,Y);return function(a){return(a=typeof a.getAttributeNode!==O&&a.getAttributeNode("id"))&&a.value===b}});D.find.TAG=ba.tagNameNoComments?function(a,b){if(typeof b.getElementsByTagName!==O)return b.getElementsByTagName(a)}:function(a,b){var c,e=[],f=0,d=b.getElementsByTagName(a);
if("*"===a){for(;c=d[f];f++)1===c.nodeType&&e.push(c);return e}return d};D.find.NAME=ba.getByName&&function(a,b){if(typeof b.getElementsByName!==O)return b.getElementsByName(name)};D.find.CLASS=ba.getByClassName&&function(a,b){if(typeof b.getElementsByClassName!==O&&!x)return b.getElementsByClassName(a)};R=[];ha=[":focus"];if(ba.qsa=c(e.querySelectorAll))d(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||ha.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");
a.querySelectorAll(":checked").length||ha.push(":checked")}),d(function(a){a.innerHTML="<input type='hidden' i=''/>";a.querySelectorAll("[i^='']").length&&ha.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.querySelectorAll(":enabled").length||ha.push(":enabled",":disabled");a.querySelectorAll("*,:x");ha.push(",.*:")});(ba.matchesSelector=c(Qa=N.matchesSelector||N.mozMatchesSelector||N.webkitMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&d(function(a){ba.disconnectedMatch=Qa.call(a,"div");
Qa.call(a,"[s!='']:x");R.push("!=",C)});ha=RegExp(ha.join("|"));R=RegExp(R.join("|"));ra=c(N.contains)||N.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,e=b&&b.parentNode;return a===e||!!(e&&1===e.nodeType&&(c.contains?c.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};cb=N.compareDocumentPosition?function(a,b){var c;return a===b?(ca=!0,0):(c=b.compareDocumentPosition&&a.compareDocumentPosition&&
a.compareDocumentPosition(b))?c&1||a.parentNode&&11===a.parentNode.nodeType?a===e||ra(S,a)?-1:b===e||ra(S,b)?1:0:c&4?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var c,f=0;c=a.parentNode;var d=b.parentNode,k=[a],g=[b];if(a===b)return ca=!0,0;if(a.sourceIndex&&b.sourceIndex)return(~b.sourceIndex||-2147483648)-(ra(S,a)&&~a.sourceIndex||-2147483648);if(!c||!d)return a===e?-1:b===e?1:c?-1:d?1:0;if(c===d)return n(a,b);for(c=a;c=c.parentNode;)k.unshift(c);for(c=b;c=c.parentNode;)g.unshift(c);for(;k[f]===
g[f];)f++;return f?n(k[f],g[f]):k[f]===S?-1:g[f]===S?1:0};ca=!1;[0,0].sort(cb);ba.detectDuplicates=ca;return J};k.matches=function(a,b){return k(a,null,null,b)};k.matchesSelector=function(a,b){(a.ownerDocument||a)!==J&&Ca(a);b=b.replace(M,"='$1']");if(ba.matchesSelector&&!(x||R&&R.test(b)||ha.test(b)))try{var c=Qa.call(a,b);if(c||ba.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(e){}return 0<k(b,J,null,[a]).length};k.contains=function(a,b){(a.ownerDocument||a)!==J&&Ca(a);return ra(a,
b)};k.attr=function(a,b){var c;(a.ownerDocument||a)!==J&&Ca(a);x||(b=b.toLowerCase());return(c=D.attrHandle[b])?c(a):x||ba.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&!0===a[b]?b:c&&c.specified?c.value:null};k.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};k.uniqueSort=function(a){var b,c=[],e=1,f=0;ca=!ba.detectDuplicates;a.sort(cb);if(ca){for(;b=a[e];e++)b===a[e-1]&&(f=c.push(e));for(;f--;)a.splice(c[f],1)}return a};H=k.getText=function(a){var b,
c="",e=0;b=a.nodeType;if(!b)for(;b=a[e];e++)c+=H(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=H(a)}else if(3===b||4===b)return a.nodeValue;return c};D=k.selectors={cacheLength:50,createPseudo:f,match:G,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(wa,Y);a[3]=(a[4]||a[5]||"").replace(wa,
Y);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||k.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&k.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[5]&&a[2];if(G.CHILD.test(a[0]))return null;a[4]?a[2]=a[4]:c&&ib.test(c)&&(b=q(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){if("*"===
a)return function(){return!0};a=a.replace(wa,Y).toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=Yb[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&Yb(a,function(a){return b.test(a.className||typeof a.getAttribute!==O&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(e){e=k.attr(e,a);if(null==e)return"!="===b;if(!b)return!0;e+="";return"="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):
"*="===b?c&&-1<e.indexOf(c):"$="===b?c&&e.substr(e.length-c.length)===c:"~="===b?-1<(" "+e+" ").indexOf(c):"|="===b?e===c||e.substr(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,c,e,f){var d="nth"!==a.slice(0,3),k="last"!==a.slice(-4),n="of-type"===b;return 1===e&&0===f?function(a){return!!a.parentNode}:function(b,c,g){var p,l,m,q,h;c=d!==k?"nextSibling":"previousSibling";var r=b.parentNode,s=n&&b.nodeName.toLowerCase();g=!g&&!n;if(r){if(d){for(;c;){for(l=b;l=l[c];)if(n?l.nodeName.toLowerCase()===
s:1===l.nodeType)return!1;h=c="only"===a&&!h&&"nextSibling"}return!0}h=[k?r.firstChild:r.lastChild];if(k&&g)for(g=r[L]||(r[L]={}),p=g[a]||[],q=p[0]===Na&&p[1],m=p[0]===Na&&p[2],l=q&&r.childNodes[q];l=++q&&l&&l[c]||(m=q=0)||h.pop();){if(1===l.nodeType&&++m&&l===b){g[a]=[Na,q,m];break}}else if(g&&(p=(b[L]||(b[L]={}))[a])&&p[0]===Na)m=p[1];else for(;(l=++q&&l&&l[c]||(m=q=0)||h.pop())&&((n?l.nodeName.toLowerCase()!==s:1!==l.nodeType)||!++m||(g&&((l[L]||(l[L]={}))[a]=[Na,m]),l!==b)););m-=f;return m===
e||0===m%e&&0<=m/e}}},PSEUDO:function(a,b){var c,e=D.pseudos[a]||D.setFilters[a.toLowerCase()]||k.error("unsupported pseudo: "+a);return e[L]?e(b):1<e.length?(c=[a,a,"",b],D.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,c){for(var f,d=e(a,b),k=d.length;k--;)f=Sa.call(a,d[k]),a[f]=!(c[f]=d[k])}):function(a){return e(a,0,c)}):e}},pseudos:{not:f(function(a){var b=[],c=[],e=B(a.replace(ma,"$1"));return e[L]?f(function(a,b,c,f){f=e(a,null,f,[]);for(var d=a.length;d--;)if(c=f[d])a[d]=!(b[d]=c)}):
function(a,f,d){b[0]=a;e(b,null,d,c);return!c.pop()}}),has:f(function(a){return function(b){return 0<k(a,b).length}}),contains:f(function(a){return function(b){return-1<(b.textContent||b.innerText||H(b)).indexOf(a)}}),lang:f(function(a){U.test(a||"")||k.error("unsupported lang: "+a);a=a.replace(wa,Y).toLowerCase();return function(b){var c;do if(c=x?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);
return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===N},focus:function(a){return a===J.activeElement&&(!J.hasFocus||J.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===
a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!D.pseudos.empty(a)},header:function(a){return ab.test(a.nodeName)},input:function(a){return K.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===
a.type)},first:m(function(){return[0]}),last:m(function(a,b){return[b-1]}),eq:m(function(a,b,c){return[0>c?c+b:c]}),even:m(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:m(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:m(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:m(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};for($ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[$]=g($);for($ in{submit:!0,reset:!0})D.pseudos[$]=p($);B=
k.compile=function(a,b){var c,e=[],f=[],d=Wa[a+" "];if(!d){b||(b=q(a));for(c=b.length;c--;)d=u(b[c]),d[L]?e.push(d):f.push(d);d=Wa(a,V(f,e))}return d};D.pseudos.nth=D.pseudos.eq;D.filters=w.prototype=D.pseudos;D.setFilters=new w;Ca();k.attr=l.attr;l.find=k;l.expr=k.selectors;l.expr[":"]=l.expr.pseudos;l.unique=k.uniqueSort;l.text=k.getText;l.isXMLDoc=k.isXML;l.contains=k.contains})(h);var Nb=/Until$/,Bb=/^(?:parents|prev(?:Until|All))/,Kb=/^.[^:#\[\.,]*$/,Cb=l.expr.match.needsContext,Ob={children:!0,
contents:!0,next:!0,prev:!0};l.fn.extend({find:function(a){var b,c,e;if("string"!==typeof a)return e=this,this.pushStack(l(a).filter(function(){for(b=0;b<e.length;b++)if(l.contains(e[b],this))return!0}));c=[];for(b=0;b<this.length;b++)l.find(a,this[b],c);c=this.pushStack(l.unique(c));c.selector=(this.selector?this.selector+" ":"")+a;return c},has:function(a){var b,c=l(a,this),e=c.length;return this.filter(function(){for(b=0;b<e;b++)if(l.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(s(this,
a,!1))},filter:function(a){return this.pushStack(s(this,a,!0))},is:function(a){return!!a&&("string"===typeof a?Cb.test(a)?0<=l(a,this.context).index(this[0]):0<l.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){for(var c,e=0,f=this.length,d=[],k=Cb.test(a)||"string"!==typeof a?l(a,b||this.context):0;e<f;e++)for(c=this[e];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(k?-1<k.index(c):l.find.matchesSelector(c,a)){d.push(c);break}c=c.parentNode}return this.pushStack(1<d.length?
l.unique(d):d)},index:function(a){return a?"string"===typeof a?l.inArray(this[0],l(a)):l.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"===typeof a?l(a,b):l.makeArray(a&&a.nodeType?[a]:a),c=l.merge(this.get(),c);return this.pushStack(l.unique(c))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});l.fn.andSelf=l.fn.addBack;l.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?
a:null},parents:function(a){return l.dir(a,"parentNode")},parentsUntil:function(a,b,c){return l.dir(a,"parentNode",c)},next:function(a){return p(a,"nextSibling")},prev:function(a){return p(a,"previousSibling")},nextAll:function(a){return l.dir(a,"nextSibling")},prevAll:function(a){return l.dir(a,"previousSibling")},nextUntil:function(a,b,c){return l.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return l.dir(a,"previousSibling",c)},siblings:function(a){return l.sibling((a.parentNode||{}).firstChild,
a)},children:function(a){return l.sibling(a.firstChild)},contents:function(a){return l.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:l.merge([],a.childNodes)}},function(a,b){l.fn[a]=function(c,e){var f=l.map(this,b,c);Nb.test(a)||(e=c);e&&"string"===typeof e&&(f=l.filter(e,f));f=1<this.length&&!Ob[a]?l.unique(f):f;1<this.length&&Bb.test(a)&&(f=f.reverse());return this.pushStack(f)}});l.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?l.find.matchesSelector(b[0],
a)?[b[0]]:[]:l.find.matches(a,b)},dir:function(a,b,c){var e=[];for(a=a[b];a&&9!==a.nodeType&&(c===d||1!==a.nodeType||!l(a).is(c));)1===a.nodeType&&e.push(a),a=a[b];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var pb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Pb=/ jQuery\d+="(?:null|\d+)"/g,Db=RegExp("<(?:"+pb+")[\\s/>]","i"),
nb=/^\s+/,Eb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fb=/<([\w:]+)/,za=/<tbody/i,ob=/<|&#?\w+;/,rb=/<(?:script|style|link)/i,eb=/^(?:checkbox|radio)$/i,Ja=/checked\s*(?:[^=]|=\s*.checked.)/i,Qb=/^$|\/(?:java|ecma)script/i,db=/^true\/(.*)/,Gb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,fa={option:[1,"<select multiple='multiple'>"],legend:[1,"<fieldset>"],area:[1,"<map>"],param:[1,"<object>"],thead:[1,"<table>"],tr:[2,"<table><tbody>"],col:[2,"<table><tbody></tbody><colgroup>",
"</table>"],td:[3,"<table><tbody><tr>"],_default:l.support.htmlSerialize?[0,""]:[1,"X<div>"]},Rb=r(y),ua=Rb.appendChild(y.createElement("div"));fa.optgroup=fa.option;fa.tbody=fa.tfoot=fa.colgroup=fa.caption=fa.thead;fa.th=fa.td;l.fn.extend({text:function(a){return l.access(this,function(a){return a===d?l.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(l.isFunction(a))return this.each(function(b){l(this).wrapAll(a.call(this,
b))});if(this[0]){var b=l(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return l.isFunction(a)?this.each(function(b){l(this).wrapInner(a.call(this,b))}):this.each(function(){var b=l(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=l.isFunction(a);return this.each(function(c){l(this).wrapAll(b?
a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){l.nodeName(this,"body")||l(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,
!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,e=0;null!=(c=this[e]);e++)if(!a||0<l.filter(a,[c]).length)b||1!==c.nodeType||l.cleanData(v(c)),c.parentNode&&(b&&l.contains(c.ownerDocument,c)&&t(v(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&
l.cleanData(v(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&l.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return l.clone(this,a,b)})},html:function(a){return l.access(this,function(a){var b=this[0]||{},c=0,e=this.length;if(a===d)return 1===b.nodeType?b.innerHTML.replace(Pb,""):d;if("string"===typeof a&&!(rb.test(a)||!l.support.htmlSerialize&&Db.test(a)||!l.support.leadingWhitespace&&nb.test(a)||fa[(Fb.exec(a)||
["",""])[1].toLowerCase()])){a=a.replace(Eb,"<$1></$2>");try{for(;c<e;c++)b=this[c]||{},1===b.nodeType&&(l.cleanData(v(b,!1)),b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){l.isFunction(a)||"string"===typeof a||(a=l(a).not(this).detach());return this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;if(c&&1===this.nodeType||11===this.nodeType)l(this).remove(),b?b.parentNode.insertBefore(a,b):c.appendChild(a)})},detach:function(a){return this.remove(a,
!0)},domManip:function(a,b,c){a=T.apply([],a);var e,f,k,n,g=0,p=this.length,m=this,h=p-1,r=a[0],s=l.isFunction(r);if(s||!(1>=p||"string"!==typeof r||l.support.checkClone)&&Ja.test(r))return this.each(function(e){var f=m.eq(e);s&&(a[0]=r.call(this,e,b?f.html():d));f.domManip(a,b,c)});if(this[0]&&(e=this[0].ownerDocument,e=l.buildFragment(a,e,!1,this),f=e.firstChild,1===e.childNodes.length&&(e=f),f)){b=b&&l.nodeName(f,"tr");f=l.map(v(e,"script"),u);for(k=f.length;g<p;g++)n=e,g!==h&&(n=l.clone(n,!0,
!0),k&&l.merge(f,v(n,"script"))),c.call(b&&l.nodeName(this[g],"table")?this[g].getElementsByTagName("tbody")[0]||this[g].appendChild(this[g].ownerDocument.createElement("tbody")):this[g],n,g);if(k)for(e=f[f.length-1].ownerDocument,l.map(f,q),g=0;g<k;g++)n=f[g],Qb.test(n.type||"")&&!l._data(n,"globalEval")&&l.contains(e,n)&&(n.src?l.ajax({url:n.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):l.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Gb,"")));e=f=null}return this}});
l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){l.fn[a]=function(a){for(var c=0,e=[],f=l(a),d=f.length-1;c<=d;c++)a=c===d?this:this.clone(!0),l(f[c])[b](a),Z.apply(e,a.get());return this.pushStack(e)}});l.extend({clone:function(a,b,c){var e,f,d,k,n,g=l.contains(a.ownerDocument,a);l.support.html5Clone||l.isXMLDoc(a)||!Db.test("<"+a.nodeName+">")?n=a.cloneNode(!0):(ua.innerHTML=a.outerHTML,ua.removeChild(n=ua.firstChild));
if(!(l.support.noCloneEvent&&l.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||l.isXMLDoc(a)))for(e=v(n),f=v(a),k=0;null!=(d=f[k]);++k)if(e[k]){var p=e[k],h=void 0,r=void 0,s=void 0;if(1===p.nodeType){h=p.nodeName.toLowerCase();if(!l.support.noCloneEvent&&p[l.expando]){r=l._data(p);for(s in r.events)l.removeEvent(p,s,r.handle);p.removeAttribute(l.expando)}if("script"===h&&p.text!==d.text)u(p).text=d.text,q(p);else if("object"===h)p.parentNode&&(p.outerHTML=d.outerHTML),l.support.html5Clone&&
d.innerHTML&&!l.trim(p.innerHTML)&&(p.innerHTML=d.innerHTML);else if("input"===h&&eb.test(d.type))p.defaultChecked=p.checked=d.checked,p.value!==d.value&&(p.value=d.value);else if("option"===h)p.defaultSelected=p.selected=d.defaultSelected;else if("input"===h||"textarea"===h)p.defaultValue=d.defaultValue}}if(b)if(c)for(f=f||v(a),e=e||v(n),k=0;null!=(d=f[k]);k++)m(d,e[k]);else m(a,n);e=v(n,"script");0<e.length&&t(e,!g&&v(a,"script"));return n},buildFragment:function(a,b,c,e){var f,d,k,n,g,p,m=[],h=
0,q=a.length,s=b.createDocumentFragment(),u=b===y&&Rb;for(b&&"undefined"!==typeof b.createDocumentFragment||(b=y);h<q;h++)if((f=a[h])||0===f)if("object"===l.type(f))l.merge(m,f.nodeType?[f]:f);else if(ob.test(f)){u=u||r(b);k=k||u.appendChild(b.createElement("div"));n=(Fb.exec(f)||["",""])[1].toLowerCase();g=fa[n]||fa._default;k.innerHTML=g[1]+f.replace(Eb,"<$1></$2>")+(g[2]||"");for(d=g[0];d--;)k=k.lastChild;!l.support.leadingWhitespace&&nb.test(f)&&m.push(b.createTextNode(nb.exec(f)[0]));if(!l.support.tbody)for(d=
(f="table"!==n||za.test(f)?"<table>"!==g[1]||za.test(f)?0:k:k.firstChild)&&f.childNodes.length;d--;)l.nodeName(p=f.childNodes[d],"tbody")&&!p.childNodes.length&&f.removeChild(p);l.merge(m,k.childNodes);for(k.textContent="";k.firstChild;)k.removeChild(k.firstChild);k=u.lastChild}else m.push(b.createTextNode(f));k&&u.removeChild(k);l.support.appendChecked||l.grep(v(m,"input"),z);for(h=0;f=m[h++];)if(u=l.contains(f.ownerDocument,f),e&&-1!==l.inArray(f,e)||s.appendChild(f),k=v(f,"script"),u&&t(k),c)for(d=
0;f=k[d++];)Qb.test(f.type||"")&&c.push(f);return s},cleanData:function(a,b){for(var c,e,f,d,k=0,n=l.expando,g=l.cache,p=l.support.deleteExpando,m=l.event.special;null!=(f=a[k]);k++)if(b||l.acceptData(f))if(c=(e=f[n])&&g[e]){if(c.events)for(d in c.events)m[d]?l.event.remove(f,d):l.removeEvent(f,d,c.handle);g[e]&&(delete g[e],p?delete f[n]:"undefined"!==typeof f.removeAttribute?f.removeAttribute(n):f[n]=null,Q.push(e))}}});var Oa,Xa,Ia,Hb=/alpha\([^)]*\)/i,sb=/opacity\s*=\s*([^)]*)/,bb=/^(top|right|bottom|left)$/,
Sb=/^(none|table(?!-c[ea]).+)/,Tb=/^margin/,gb=RegExp("^("+N+")(.*)$","i"),ia=RegExp("^("+N+")(?!px)[a-z%]+$","i"),tb=RegExp("^([+-])=("+N+")","i"),hb={BODY:"block"},ub={position:"absolute",visibility:"hidden",display:"block"},Aa={letterSpacing:0,fontWeight:400},va=["Top","Right","Bottom","Left"],fb=["Webkit","O","Moz","ms"];l.fn.extend({css:function(a,b){return l.access(this,function(a,b,c){var e,f={},k=0;if(l.isArray(b)){c=Xa(a);for(e=b.length;k<e;k++)f[b[k]]=l.css(a,b[k],!1,c);return f}return c!==
d?l.style(a,b,c):l.css(a,b)},a,b,1<arguments.length)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){var b="boolean"===typeof a;return this.each(function(){(b?a:w(this))?l(this).show():l(this).hide()})}});l.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.support.cssFloat?"cssFloat":
"styleFloat"},style:function(a,b,c,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,k,n,g=l.camelCase(b),p=a.style;b=l.cssProps[g]||(l.cssProps[g]=A(p,g));n=l.cssHooks[b]||l.cssHooks[g];if(c!==d){if(k=typeof c,"string"===k&&(f=tb.exec(c))&&(c=(f[1]+1)*f[2]+parseFloat(l.css(a,b)),k="number"),!(null==c||"number"===k&&isNaN(c)||("number"!==k||l.cssNumber[g]||(c+="px"),l.support.clearCloneStyle||""!==c||0!==b.indexOf("background")||(p[b]="inherit"),n&&"set"in n&&(c=n.set(a,c,e))===d)))try{p[b]=
c}catch(m){}}else return n&&"get"in n&&(f=n.get(a,!1,e))!==d?f:p[b]}},css:function(a,b,c,e){var f,k;k=l.camelCase(b);b=l.cssProps[k]||(l.cssProps[k]=A(a.style,k));(k=l.cssHooks[b]||l.cssHooks[k])&&"get"in k&&(f=k.get(a,!0,c));f===d&&(f=Oa(a,b,e));"normal"===f&&b in Aa&&(f=Aa[b]);return c?(a=parseFloat(f),!0===c||l.isNumeric(a)?a||0:f):f},swap:function(a,b,c,e){var f,d={};for(f in b)d[f]=a.style[f],a.style[f]=b[f];c=c.apply(a,e||[]);for(f in b)a.style[f]=d[f];return c}});h.getComputedStyle?(Xa=function(a){return h.getComputedStyle(a,
null)},Oa=function(a,b,c){var e,f=(c=c||Xa(a))?c.getPropertyValue(b)||c[b]:d,k=a.style;c&&(""!==f||l.contains(a.ownerDocument,a)||(f=l.style(a,b)),ia.test(f)&&Tb.test(b)&&(a=k.width,b=k.minWidth,e=k.maxWidth,k.minWidth=k.maxWidth=k.width=f,f=c.width,k.width=a,k.minWidth=b,k.maxWidth=e));return f}):y.documentElement.currentStyle&&(Xa=function(a){return a.currentStyle},Oa=function(a,b,c){var e,f,k=(c=c||Xa(a))?c[b]:d,n=a.style;null==k&&n&&n[b]&&(k=n[b]);if(ia.test(k)&&!bb.test(b)){c=n.left;if(f=(e=
a.runtimeStyle)&&e.left)e.left=a.currentStyle.left;n.left="fontSize"===b?"1em":k;k=n.pixelLeft+"px";n.left=c;f&&(e.left=f)}return""===k?"auto":k});l.each(["height","width"],function(a,b){l.cssHooks[b]={get:function(a,c,e){if(c)return 0===a.offsetWidth&&Sb.test(l.css(a,"display"))?l.swap(a,ub,function(){return S(a,b,e)}):S(a,b,e)},set:function(a,c,e){var f=e&&Xa(a);return x(a,c,e?R(a,b,e,l.support.boxSizing&&"border-box"===l.css(a,"boxSizing",!1,f),f):0)}}});l.support.opacity||(l.cssHooks.opacity=
{get:function(a,b){return sb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,e=a.currentStyle,f=l.isNumeric(b)?"alpha(opacity="+100*b+")":"",d=e&&e.filter||c.filter||"";c.zoom=1;if((1<=b||""===b)&&""===l.trim(d.replace(Hb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||e&&!e.filter))return;c.filter=Hb.test(d)?d.replace(Hb,f):d+" "+f}});l(function(){l.support.reliableMarginRight||(l.cssHooks.marginRight=
{get:function(a,b){if(b)return l.swap(a,{display:"inline-block"},Oa,[a,"marginRight"])}});!l.support.pixelPosition&&l.fn.position&&l.each(["top","left"],function(a,b){l.cssHooks[b]={get:function(a,c){if(c)return c=Oa(a,b),ia.test(c)?l(a).position()[b]+"px":c}}})});l.expr&&l.expr.filters&&(l.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!l.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||l.css(a,"display"))},l.expr.filters.visible=function(a){return!l.expr.filters.hidden(a)});
l.each({margin:"",padding:"",border:"Width"},function(a,b){l.cssHooks[a+b]={expand:function(c){var e=0,f={};for(c="string"===typeof c?c.split(" "):[c];4>e;e++)f[a+va[e]+b]=c[e]||c[e-2]||c[0];return f}};Tb.test(a)||(l.cssHooks[a+b].set=x)});var Ib=/%20/g,Zb=/\[\]$/,Ub=/\r?\n/g,vb=/^(?:submit|button|image|reset)$/i,Ka=/^(?:input|select|textarea|keygen)/i;l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=l.prop(this,"elements");
return a?l.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!l(this).is(":disabled")&&Ka.test(this.nodeName)&&!vb.test(a)&&(this.checked||!eb.test(a))}).map(function(a,b){var c=l(this).val();return null==c?null:l.isArray(c)?l.map(c,function(a){return{name:b.name,value:a.replace(Ub,"\r\n")}}):{name:b.name,value:c.replace(Ub,"\r\n")}}).get()}});l.param=function(a,b){var c,e=[],f=function(a,b){b=l.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};
b===d&&(b=l.ajaxSettings&&l.ajaxSettings.traditional);if(l.isArray(a)||a.jquery&&!l.isPlainObject(a))l.each(a,function(){f(this.name,this.value)});else for(c in a)J(c,a[c],b,f);return e.join("&").replace(Ib,"+")};var La,Ma,wb=l.now(),ka=/\?/,Va=/#.*$/,Jb=/([?&])_=[^&]*/,Fa=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Ga=/^(?:GET|HEAD)$/,Vb=/^\/\//,Wb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,xb=l.fn.load,yb={},Pa={},la="*/".concat("*");try{Ma=W.href}catch(Xb){Ma=y.createElement("a"),Ma.href="",Ma=Ma.href}La=
Wb.exec(Ma.toLowerCase())||[];l.fn.load=function(a,b,c){if("string"!==typeof a&&xb)return xb.apply(this,arguments);var e,f,k,n=this,g=a.indexOf(" ");0<=g&&(e=a.slice(g,a.length),a=a.slice(0,g));l.isFunction(b)?(c=b,b=d):b&&"object"===typeof b&&(f="POST");0<n.length&&l.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){k=arguments;n.html(e?l("<div>").append(l.parseHTML(a)).find(e):a)}).complete(c&&function(a,b){n.each(c,k||[a.responseText,b,a])});return this};l.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){l.fn[b]=function(a){return this.on(b,a)}});l.each(["get","post"],function(a,b){l[b]=function(a,c,e,f){l.isFunction(c)&&(f=f||e,e=c,c=d);return l.ajax({url:a,type:b,dataType:f,data:c,success:e})}});l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ma,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(La[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":la,text:"text/plain",html:"text/html",
xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":h.String,"text html":!0,"text json":l.parseJSON,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?H(H(a,l.ajaxSettings),b):H(l.ajaxSettings,a)},ajaxPrefilter:L(yb),ajaxTransport:L(Pa),ajax:function(a,b){function c(a,b,n,p){var h,V,w,$,D=b;if(2!==z){z=2;g&&clearTimeout(g);
e=d;k=p||"";H.readyState=0<a?4:0;if(n){$=q;p=H;var A,ca,B,Ha,Ca=$.contents,qa=$.dataTypes,J=$.responseFields;for(ca in J)ca in n&&(p[J[ca]]=n[ca]);for(;"*"===qa[0];)qa.shift(),A===d&&(A=$.mimeType||p.getResponseHeader("Content-Type"));if(A)for(ca in Ca)if(Ca[ca]&&Ca[ca].test(A)){qa.unshift(ca);break}if(qa[0]in n)B=qa[0];else{for(ca in n){if(!qa[0]||$.converters[ca+" "+qa[0]]){B=ca;break}Ha||(Ha=ca)}B=B||Ha}B?(B!==qa[0]&&qa.unshift(B),$=n[B]):$=void 0}if(200<=a&&300>a||304===a)if(q.ifModified&&((n=
H.getResponseHeader("Last-Modified"))&&(l.lastModified[f]=n),(n=H.getResponseHeader("etag"))&&(l.etag[f]=n)),304===a)h=!0,D="notmodified";else{a:{V=q;w=$;var N,x,D={};A=0;ca=V.dataTypes.slice();B=ca[0];V.dataFilter&&(w=V.dataFilter(w,V.dataType));if(ca[1])for(N in V.converters)D[N.toLowerCase()]=V.converters[N];for(;n=ca[++A];)if("*"!==n){if("*"!==B&&B!==n){N=D[B+" "+n]||D["* "+n];if(!N)for(x in D)if(h=x.split(" "),h[1]===n&&(N=D[B+" "+h[0]]||D["* "+h[0]])){!0===N?N=D[x]:!0!==D[x]&&(n=h[0],ca.splice(A--,
0,n));break}if(!0!==N)if(N&&V["throws"])w=N(w);else try{w=N(w)}catch(ha){h={state:"parsererror",error:N?ha:"No conversion from "+B+" to "+n};break a}}B=n}h={state:"success",data:w}}D=h.state;V=h.data;w=h.error;h=!w}else if(w=D,a||!D)D="error",0>a&&(a=0);H.status=a;H.statusText=(b||D)+"";h?t.resolveWith(r,[V,D,H]):t.rejectWith(r,[H,D,w]);H.statusCode(u);u=d;m&&s.trigger(h?"ajaxSuccess":"ajaxError",[H,q,h?V:w]);v.fireWith(r,[H,D]);m&&(s.trigger("ajaxComplete",[H,q]),--l.active||l.event.trigger("ajaxStop"))}}
"object"===typeof a&&(b=a,a=d);b=b||{};var e,f,k,n,g,p,m,h,q=l.ajaxSetup({},b),r=q.context||q,s=q.context&&(r.nodeType||r.jquery)?l(r):l.event,t=l.Deferred(),v=l.Callbacks("once memory"),u=q.statusCode||{},w={},$={},z=0,D="canceled",H={readyState:0,getResponseHeader:function(a){var b;if(2===z){if(!n)for(n={};b=Fa.exec(k);)n[b[1].toLowerCase()]=b[2];b=n[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===z?k:null},setRequestHeader:function(a,b){var c=a.toLowerCase();
z||(a=$[c]=$[c]||a,w[a]=b);return this},overrideMimeType:function(a){z||(q.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>z)for(b in a)u[b]=[u[b],a[b]];else H.always(a[H.status]);return this},abort:function(a){a=a||D;e&&e.abort(a);c(0,a);return this}};t.promise(H).complete=v.add;H.success=H.done;H.error=H.fail;q.url=((a||q.url||Ma)+"").replace(Va,"").replace(Vb,La[1]+"//");q.type=b.method||b.type||q.method||q.type;q.dataTypes=l.trim(q.dataType||"*").toLowerCase().match(ma)||[""];
null==q.crossDomain&&(p=Wb.exec(q.url.toLowerCase()),q.crossDomain=!(!p||p[1]===La[1]&&p[2]===La[2]&&(p[3]||("http:"===p[1]?80:443))==(La[3]||("http:"===La[1]?80:443))));q.data&&q.processData&&"string"!==typeof q.data&&(q.data=l.param(q.data,q.traditional));V(yb,q,b,H);if(2===z)return H;(m=q.global)&&0===l.active++&&l.event.trigger("ajaxStart");q.type=q.type.toUpperCase();q.hasContent=!Ga.test(q.type);f=q.url;q.hasContent||(q.data&&(f=q.url+=(ka.test(f)?"&":"?")+q.data,delete q.data),!1===q.cache&&
(q.url=Jb.test(f)?f.replace(Jb,"$1_="+wb++):f+(ka.test(f)?"&":"?")+"_="+wb++));q.ifModified&&(l.lastModified[f]&&H.setRequestHeader("If-Modified-Since",l.lastModified[f]),l.etag[f]&&H.setRequestHeader("If-None-Match",l.etag[f]));(q.data&&q.hasContent&&!1!==q.contentType||b.contentType)&&H.setRequestHeader("Content-Type",q.contentType);H.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+("*"!==q.dataTypes[0]?", "+la+"; q=0.01":""):q.accepts["*"]);for(h in q.headers)H.setRequestHeader(h,
q.headers[h]);if(q.beforeSend&&(!1===q.beforeSend.call(r,H,q)||2===z))return H.abort();D="abort";for(h in{success:1,error:1,complete:1})H[h](q[h]);if(e=V(Pa,q,b,H)){H.readyState=1;m&&s.trigger("ajaxSend",[H,q]);q.async&&0<q.timeout&&(g=setTimeout(function(){H.abort("timeout")},q.timeout));try{z=1,e.send(w,c)}catch(A){if(2>z)c(-1,A);else throw A;}}else c(-1,"No Transport");return H},getScript:function(a,b){return l.get(a,d,b,"script")},getJSON:function(a,b,c){return l.get(a,b,c,"json")}});l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){l.globalEval(a);return a}}});l.ajaxPrefilter("script",function(a){a.cache===d&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});l.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||l("head")[0]||y.documentElement;return{send:function(e,f){b=y.createElement("script");b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||
/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||f(200,"success")};c.insertBefore(b,c.firstChild)},abort:function(){if(b)b.onload(d,!0)}}}});var zb=[],Ca=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=zb.pop()||l.expando+"_"+wb++;this[a]=!0;return a}});l.ajaxPrefilter("json jsonp",function(a,b,c){var e,f,k,n=!1!==a.jsonp&&(Ca.test(a.url)?"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&
Ca.test(a.data)&&"data");if(n||"jsonp"===a.dataTypes[0])return e=a.jsonpCallback=l.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,n?a[n]=a[n].replace(Ca,"$1"+e):!1!==a.jsonp&&(a.url+=(ka.test(a.url)?"&":"?")+a.jsonp+"="+e),a.converters["script json"]=function(){k||l.error(e+" was not called");return k[0]},a.dataTypes[0]="json",f=h[e],h[e]=function(){k=arguments},c.always(function(){h[e]=f;a[e]&&(a.jsonpCallback=b.jsonpCallback,zb.push(e));k&&l.isFunction(f)&&f(k[0]);k=f=d}),"script"});
var $,D,ca=0,qa=h.ActiveXObject&&function(){for(var a in $)$[a](d,!0)};l.ajaxSettings.xhr=h.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&ha()))a:{try{a=new h.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:ha;D=l.ajaxSettings.xhr();l.support.cors=!!D&&"withCredentials"in D;(D=l.support.ajax=!!D)&&l.ajaxTransport(function(a){if(!a.crossDomain||l.support.cors){var b;return{send:function(c,e){var f,k,n=a.xhr();a.username?n.open(a.type,a.url,a.async,a.username,a.password):
n.open(a.type,a.url,a.async);if(a.xhrFields)for(k in a.xhrFields)n[k]=a.xhrFields[k];a.mimeType&&n.overrideMimeType&&n.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");try{for(k in c)n.setRequestHeader(k,c[k])}catch(g){}n.send(a.hasContent&&a.data||null);b=function(c,k){var g,p,q,m,h;try{if(b&&(k||4===n.readyState))if(b=d,f&&(n.onreadystatechange=l.noop,qa&&delete $[f]),k)4!==n.readyState&&n.abort();else{m={};g=n.status;h=n.responseXML;q=
n.getAllResponseHeaders();h&&h.documentElement&&(m.xml=h);"string"===typeof n.responseText&&(m.text=n.responseText);try{p=n.statusText}catch(r){p=""}g||!a.isLocal||a.crossDomain?1223===g&&(g=204):g=m.text?200:404}}catch(s){k||e(-1,s)}m&&e(g,p,m,q)};a.async?4===n.readyState?setTimeout(b):(f=++ca,qa&&($||($={},l(h).unload(qa)),$[f]=b),n.onreadystatechange=b):b()},abort:function(){b&&b(d,!0)}}}});var Qa,cb,Na=/^(?:toggle|show|hide)$/,$b=RegExp("^(?:([+-])=|)("+N+")([a-z%]*)$","i"),Yb=/queueHooks$/,Ra=
[function(a,b,c){var e,f,d,k,n,g,p=this,q=a.style,m={},h=[],r=a.nodeType&&w(a);c.queue||(n=l._queueHooks(a,"fx"),null==n.unqueued&&(n.unqueued=0,g=n.empty.fire,n.empty.fire=function(){n.unqueued||g()}),n.unqueued++,p.always(function(){p.always(function(){n.unqueued--;l.queue(a,"fx").length||n.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[q.overflow,q.overflowX,q.overflowY],"inline"===l.css(a,"display")&&"none"===l.css(a,"float")&&(l.support.inlineBlockNeedsLayout&&"inline"!==
O(a.nodeName)?q.zoom=1:q.display="inline-block"));c.overflow&&(q.overflow="hidden",l.support.shrinkWrapBlocks||p.done(function(){q.overflow=c.overflow[0];q.overflowX=c.overflow[1];q.overflowY=c.overflow[2]}));for(e in b)d=b[e],Na.exec(d)&&(delete b[e],f=f||"toggle"===d,d!==(r?"hide":"show")&&h.push(e));if(b=h.length)for(d=l._data(a,"fxshow")||l._data(a,"fxshow",{}),("hidden"in d)&&(r=d.hidden),f&&(d.hidden=!r),r?l(a).show():p.done(function(){l(a).hide()}),p.done(function(){var b;l._removeData(a,"fxshow");
for(b in m)l.style(a,b,m[b])}),e=0;e<b;e++)f=h[e],k=p.createTween(f,r?d[f]:0),m[f]=d[f]||l.style(a,f),f in d||(d[f]=k.start,r&&(k.end=k.start,k.start="width"===f||"height"===f?1:0))}],ib={"*":[function(a,b){var c,e,f=this.createTween(a,b),d=$b.exec(b),k=f.cur(),n=+k||0,g=1,p=20;if(d){c=+d[2];e=d[3]||(l.cssNumber[a]?"":"px");if("px"!==e&&n){n=l.css(f.elem,a,!0)||c||1;do g=g||".5",n/=g,l.style(f.elem,a,n+e);while(g!==(g=f.cur()/k)&&1!==g&&--p)}f.unit=e;f.start=n;f.end=d[1]?n+(d[1]+1)*c:c}return f}]};
l.Animation=l.extend(sa,{tweener:function(a,b){l.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,e=0,f=a.length;e<f;e++)c=a[e],ib[c]=ib[c]||[],ib[c].unshift(b)},prefilter:function(a,b){b?Ra.unshift(a):Ra.push(a)}});l.Tween=P;P.prototype={constructor:P,init:function(a,b,c,e,f,d){this.elem=a;this.prop=c;this.easing=f||"swing";this.options=b;this.start=this.now=this.cur();this.end=e;this.unit=d||(l.cssNumber[c]?"":"px")},cur:function(){var a=P.propHooks[this.prop];return a&&a.get?a.get(this):P.propHooks._default.get(this)},
run:function(a){var b,c=P.propHooks[this.prop];this.pos=this.options.duration?b=l.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):P.propHooks._default.set(this);return this}};P.prototype.init.prototype=P.prototype;P.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=l.css(a.elem,a.prop,
"auto"))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(l.fx.step[a.prop])l.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[l.cssProps[a.prop]]||l.cssHooks[a.prop])?l.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};l.each(["toggle","show","hide"],function(a,b){var c=l.fn[b];l.fn[b]=function(a,e,f){return null==a||"boolean"===typeof a?c.apply(this,arguments):
this.animate(na(b,!0),a,e,f)}});l.fn.extend({fadeTo:function(a,b,c,e){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,e)},animate:function(a,b,c,e){var f=l.isEmptyObject(a),d=l.speed(b,c,e),k=function(){var b=sa(this,l.extend({},a),d);k.finish=function(){b.stop(!0)};(f||l._data(this,"finish"))&&b.stop(!0)};k.finish=k;return f||!1===d.queue?this.each(k):this.queue(d.queue,k)},stop:function(a,b,c){var e=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=
b,b=a,a=d);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,f=null!=a&&a+"queueHooks",d=l.timers,k=l._data(this);if(f)k[f]&&k[f].stop&&e(k[f]);else for(f in k)k[f]&&k[f].stop&&Yb.test(f)&&e(k[f]);for(f=d.length;f--;)d[f].elem!==this||null!=a&&d[f].queue!==a||(d[f].anim.stop(c),b=!1,d.splice(f,1));!b&&c||l.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=l._data(this),e=c[a+"queue"];b=c[a+"queueHooks"];var f=l.timers,d=e?e.length:0;
c.finish=!0;l.queue(this,a,[]);b&&b.cur&&b.cur.finish&&b.cur.finish.call(this);for(b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<d;b++)e[b]&&e[b].finish&&e[b].finish.call(this);delete c.finish})}});l.each({slideDown:na("show"),slideUp:na("hide"),slideToggle:na("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){l.fn[a]=function(a,c,e){return this.animate(b,a,c,e)}});l.speed=function(a,b,c){var e=a&&
"object"===typeof a?l.extend({},a):{complete:c||!c&&b||l.isFunction(a)&&a,duration:a,easing:c&&b||b&&!l.isFunction(b)&&b};e.duration=l.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in l.fx.speeds?l.fx.speeds[e.duration]:l.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;e.complete=function(){l.isFunction(e.old)&&e.old.call(this);e.queue&&l.dequeue(this,e.queue)};return e};l.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/
2}};l.timers=[];l.fx=P.prototype.init;l.fx.tick=function(){var a,b=l.timers,c=0;for(Qa=l.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||l.fx.stop();Qa=d};l.fx.timer=function(a){a()&&l.timers.push(a)&&l.fx.start()};l.fx.interval=13;l.fx.start=function(){cb||(cb=setInterval(l.fx.tick,l.fx.interval))};l.fx.stop=function(){clearInterval(cb);cb=null};l.fx.speeds={slow:600,fast:200,_default:400};l.fx.step={};l.expr&&l.expr.filters&&(l.expr.filters.animated=function(a){return l.grep(l.timers,
function(b){return a===b.elem}).length});l.fn.offset=function(a){if(arguments.length)return a===d?this:this.each(function(b){l.offset.setOffset(this,a,b)});var b,c,e={top:0,left:0},f=(c=this[0])&&c.ownerDocument;if(f){b=f.documentElement;if(!l.contains(b,c))return e;"undefined"!==typeof c.getBoundingClientRect&&(e=c.getBoundingClientRect());c=F(f);return{top:e.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:e.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}};l.offset={setOffset:function(a,
b,c){var e=l.css(a,"position");"static"===e&&(a.style.position="relative");var f=l(a),d=f.offset(),k=l.css(a,"top"),n=l.css(a,"left"),g={},p={};("absolute"===e||"fixed"===e)&&-1<l.inArray("auto",[k,n])?(p=f.position(),e=p.top,n=p.left):(e=parseFloat(k)||0,n=parseFloat(n)||0);l.isFunction(b)&&(b=b.call(a,c,d));null!=b.top&&(g.top=b.top-d.top+e);null!=b.left&&(g.left=b.left-d.left+n);"using"in b?b.using.call(a,g):f.css(g)}};l.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},e=this[0];
"fixed"===l.css(e,"position")?b=e.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),l.nodeName(a[0],"html")||(c=a.offset()),c.top+=l.css(a[0],"borderTopWidth",!0),c.left+=l.css(a[0],"borderLeftWidth",!0));return{top:b.top-c.top-l.css(e,"marginTop",!0),left:b.left-c.left-l.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||y.documentElement;a&&!l.nodeName(a,"html")&&"static"===l.css(a,"position");)a=a.offsetParent;return a||y.documentElement})}});
l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);l.fn[a]=function(e){return l.access(this,function(a,e,f){var k=F(a);if(f===d)return k?b in k?k[b]:k.document.documentElement[e]:a[e];k?k.scrollTo(c?l(k).scrollLeft():f,c?f:l(k).scrollTop()):a[e]=f},a,e,arguments.length,null)}});l.each({Height:"height",Width:"width"},function(a,b){l.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,e){l.fn[e]=function(e,f){var k=arguments.length&&(c||"boolean"!==typeof e),
n=c||(!0===e||!0===f?"margin":"border");return l.access(this,function(b,c,e){return l.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):e===d?l.css(b,c,n):l.style(b,c,e,n)},b,k?e:d,k,null)}})});(function(){var a,b,c,e,f=l.fn.toggle,d=/(?:^|\s)hover(\.\S+|)\b/,k=function(a){return l.event.special.hover?a:a.replace(d,"mouseenter$1 mouseleave$1")};l.uaMatch=function(a){a=a.toLowerCase();
a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a=l.uaMatch(navigator.userAgent);b={};a.browser&&(b[a.browser]=!0,b.version=a.version);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);l.browser=b;l.sub=function(){function a(b,c){return new a.fn.init(b,c)}l.extend(!0,a,this);a.superclass=this;a.fn=
a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,e){e&&e instanceof l&&!(e instanceof a)&&(e=a(e));return l.fn.init.call(this,c,e,b)};a.fn.init.prototype=a.fn;var b=a(y);return a};l.fn.toggle=function(a,b){if(!l.isFunction(a)||!l.isFunction(b))return f.apply(this,arguments);var c=arguments,e=a.guid||l.guid++,d=0,k=function(b){var e=(l._data(this,"lastToggle"+a.guid)||0)%d;l._data(this,"lastToggle"+a.guid,e+1);b.preventDefault();return c[e].apply(this,arguments)||!1};for(k.guid=
e;d<c.length;)c[d++].guid=e;return this.click(k)};c=l.event.add;l.event.add=function(a,b,e,f,d){b&&(b=k(b));c.call(this,a,b,e,f,d)};e=l.event.remove;l.event.remove=function(a,b,c,f,d){b&&(b=k(b));e.call(this,a,b,c,f,d)};l.attrFn={}})();l.version="3.1";l.long_version="3.1.6";l.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")};l.globalNamespace=l.uid("Foundry");h[l.globalNamespace]=l;l.run=function(a){return l.isFunction(a)?a(l):null};l.initialize=function(a){l.initialized||
(l.extend(l,a),"development"==l.environment&&(h.F=l),l.initialized=!0,FD31.module.execute())};FD31.jquery(l)})(window);
FD31.plugin("lodash",function(h){function d(a,b,c){c=(c||0)-1;for(var e=a.length;++c<e;)if(a[c]===b)return c;return-1}function g(a,b){var c=typeof b;a=a.cache;if("boolean"==c||null==b)return a[b];"number"!=c&&"string"!=c&&(c="object");var e="number"==c?b:A+b;a=a[c]||(a[c]={});return"object"==c?a[e]&&-1<d(a[e],b)?0:-1:a[e]?0:-1}function b(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var e="number"==c?a:A+a,f=b[c]||(b[c]={});"object"==c?
(f[e]||(f[e]=[])).push(a)==this.array.length&&(b[c]=!1):f[e]=!0}}function a(a){return a.charCodeAt(0)}function c(a,b){var c=a.index,e=b.index;a=a.criteria;b=b.criteria;if(a!==b){if(a>b||"undefined"==typeof a)return 1;if(a<b||"undefined"==typeof b)return-1}return c<e?-1:1}function e(a){var c=-1,e=a.length,f=n();f["false"]=f["null"]=f["true"]=f.undefined=!1;var d=n();d.array=a;d.cache=f;for(d.push=b;++c<e;)d.push(a[c]);return!1===f.object?(s(d),null):d}function f(a){return"\\"+ea[a]}function k(){return t.pop()||
[]}function n(){return m.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function p(a){a.length=0;t.length<B&&t.push(a)}function s(a){var b=a.cache;b&&s(b);a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null;m.length<B&&m.push(a)}function r(a,b,c){b||(b=0);"undefined"==typeof c&&(c=a?a.length:0);var e=-1;c=c-b||0;for(var f=Array(0>c?0:c);++e<c;)f[e]=
a[b+e];return f}function u(b){function m(a){return a&&"object"==typeof a&&!Fa(a)&&ia.call(a,"__wrapped__")?a:new h(a)}function h(a){this.__wrapped__=a}function t(a,b,c,e){function f(){var e=arguments,p=k?this:b;d||(a=b[n]);c.length&&(e=e.length?(e=ka.call(e),g?e.concat(c):c.concat(e)):c);return this instanceof f?(p=I(a.prototype)?fb(a.prototype):{},e=a.apply(p,e),I(e)?e:p):a.apply(p,e)}var d=E(a),k=!c,n=b;if(k){var g=e;c=b}else if(!d){if(!e)throw new Rb;b=a}return f}function B(a){return Vb[a]}function da(a,
b,c){var e=(e=m.indexOf)===Nb?d:e;return e}function ea(a){return function(b,c,e,f){"boolean"!=typeof c&&null!=c&&(e=(f=e)&&f[c]===b?q:c,c=!1);null!=e&&(e=m.createCallback(e,f));return a(b,c,e,f)}}function ja(a){var b,c;if(!a||Aa.call(a)!=oa||(b=a.constructor,E(b)&&!(b instanceof b)))return!1;Pa(a,function(a,b){c=b});return c===q||ia.call(a,c)}function mb(a){return Wb[a]}function Ya(a,b,c,e,f,d){var n=a;"boolean"!=typeof b&&null!=b&&(e=c,c=b,b=!1);if("function"==typeof c){c="undefined"==typeof e?c:
m.createCallback(c,e,1);n=c(n);if("undefined"!=typeof n)return n;n=a}if(e=I(n)){var g=Aa.call(n);if(!Z[g])return n;var h=Fa(n)}if(!e||!b)return e?h?r(n):xb({},n):n;e=Va[g];switch(g){case Y:case U:return new e(+n);case W:case T:return new e(n);case Q:return e(n.source,J.exec(n))}g=!f;f||(f=k());d||(d=k());for(var l=f.length;l--;)if(f[l]==a)return d[l];n=h?e(n.length):{};h&&(ia.call(a,"index")&&(n.index=a.index),ia.call(a,"input")&&(n.input=a.input));f.push(a);d.push(n);(h?X:la)(a,function(a,e){n[e]=
Ya(a,b,c,q,f,d)});g&&(p(f),p(d));return n}function xa(a){var b=[];Pa(a,function(a,c){E(a)&&b.push(c)});return b.sort()}function Za(a){for(var b=-1,c=Ga(a),e=c.length,f={};++b<e;){var d=c[b];f[a[d]]=d}return f}function G(a,b,c,e,f,d){var n=c===z;if("function"==typeof c&&!n){c=m.createCallback(c,e,2);var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var q=typeof a,h=typeof b;if(a===a&&(!a||"function"!=q&&"object"!=q)&&(!b||"function"!=h&&"object"!=h))return!1;if(null==
a||null==b)return a===b;h=Aa.call(a);q=Aa.call(b);h==na&&(h=oa);q==na&&(q=oa);if(h!=q)return!1;switch(h){case Y:case U:return+a==+b;case W:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Q:case T:return a==fa(b)}q=h==F;if(!q){if(ia.call(a,"__wrapped__ ")||ia.call(b,"__wrapped__"))return G(a.__wrapped__||a,b.__wrapped__||b,c,e,f,d);if(h!=oa)return!1;var h=a.constructor,l=b.constructor;if(h!=l&&!(E(h)&&h instanceof h&&E(l)&&l instanceof l))return!1}l=!f;f||(f=k());d||(d=k());for(h=f.length;h--;)if(f[h]==
a)return d[h]==b;var r=0,g=!0;f.push(a);d.push(b);if(q){h=a.length;r=b.length;g=r==a.length;if(!g&&!n)return g;for(;r--;)if(q=h,l=b[r],n)for(;q--&&!(g=G(a[q],l,c,e,f,d)););else if(!(g=G(a[r],l,c,e,f,d)))break;return g}Pa(b,function(b,k,n){if(ia.call(n,k))return r++,g=ia.call(a,k)&&G(a[k],b,c,e,f,d)});g&&!n&&Pa(a,function(a,b,c){if(ia.call(c,b))return g=-1<--r});l&&(p(f),p(d));return g}function E(a){return"function"==typeof a}function I(a){return!(!a||!M[typeof a])}function K(a){return"number"==typeof a||
Aa.call(a)==W}function C(a){return"string"==typeof a||Aa.call(a)==T}function Da(a,b,c){var e=arguments,f=0,d=2;if(!I(a))return a;if(c===z)var n=e[3],g=e[4],q=e[5];else{var h=!0,g=k(),q=k();"number"!=typeof c&&(d=e.length);3<d&&"function"==typeof e[d-2]?n=m.createCallback(e[--d-1],e[d--],2):2<d&&"function"==typeof e[d-1]&&(n=e[--d])}for(;++f<d;)(Fa(e[f])?X:la)(e[f],function(b,c){var e,f,d=b,k=a[c];if(b&&((f=Fa(b))||Xb(b))){for(d=g.length;d--;)if(e=g[d]==b){k=q[d];break}if(!e){var p;n&&(d=n(k,b),p=
"undefined"!=typeof d)&&(k=d);p||(k=f?Fa(k)?k:[]:Xb(k)?k:{});g.push(b);q.push(k);p||(k=Da(k,b,z,n,g,q))}}else n&&(d=n(k,b),"undefined"==typeof d&&(d=b)),"undefined"!=typeof d&&(k=d);a[c]=k});h&&(p(g),p(q));return a}function Ba(a){for(var b=-1,c=Ga(a),e=c.length,f=za(e);++b<e;)f[b]=a[c[b]];return f}function $a(a,b,c){var e=-1,f=da(),d=a?a.length:0,k=!1;c=(0>c?Ka(0,d+c):c)||0;d&&"number"==typeof d?k=-1<(C(a)?a.indexOf(b,c):f(a,b,c)):la(a,function(a){if(++e>=c)return!(k=a===b)});return k}function Ta(a,
b,c){var e=!0;b=m.createCallback(b,c);c=-1;var f=a?a.length:0;if("number"==typeof f)for(;++c<f&&(e=!!b(a[c],c,a)););else la(a,function(a,c,f){return e=!!b(a,c,f)});return e}function ta(a,b,c){var e=[];b=m.createCallback(b,c);c=-1;var f=a?a.length:0;if("number"==typeof f)for(;++c<f;){var d=a[c];b(d,c,a)&&e.push(d)}else la(a,function(a,c,f){b(a,c,f)&&e.push(a)});return e}function ya(a,b,c){b=m.createCallback(b,c);c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e;){var f=a[c];if(b(f,c,a))return f}else{var d;
la(a,function(a,c,e){if(b(a,c,e))return d=a,!1});return d}}function X(a,b,c){var e=-1,f=a?a.length:0;b=b&&"undefined"==typeof c?b:m.createCallback(b,c);if("number"==typeof f)for(;++e<f&&!1!==b(a[e],e,a););else la(a,b);return a}function Ua(a,b,c){var e=-1,f=a?a.length:0;b=m.createCallback(b,c);if("number"==typeof f)for(var d=za(f);++e<f;)d[e]=b(a[e],e,a);else d=[],la(a,function(a,c,f){d[++e]=b(a,c,f)});return d}function Ea(b,c,e){var f=-Infinity,d=f;if(!c&&Fa(b)){e=-1;for(var k=b.length;++e<k;){var n=
b[e];n>d&&(d=n)}}else c=!c&&C(b)?a:m.createCallback(c,e),X(b,function(a,b,e){b=c(a,b,e);b>f&&(f=b,d=a)});return d}function Wa(a,b){var c=-1,e=a?a.length:0;if("number"==typeof e)for(var f=za(e);++c<e;)f[c]=a[c][b];return f||Ua(a,b)}function ab(a,b,c,e){if(!a)return c;var f=3>arguments.length;b=m.createCallback(b,e,4);var d=-1,k=a.length;if("number"==typeof k)for(f&&(c=a[++d]);++d<k;)c=b(c,a[d],d,a);else la(a,function(a,e,d){c=f?(f=!1,a):b(c,a,e,d)});return c}function Lb(a,b,c,e){var f=a?a.length:0,
d=3>arguments.length;if("number"!=typeof f)var k=Ga(a),f=k.length;b=m.createCallback(b,e,4);X(a,function(e,n,g){n=k?k[--f]:--f;c=d?(d=!1,a[n]):b(c,a[n],n,g)});return c}function Mb(a,b,c){var e;b=m.createCallback(b,c);c=-1;var f=a?a.length:0;if("number"==typeof f)for(;++c<f&&!(e=b(a[c],c,a)););else la(a,function(a,c,f){return!(e=b(a,c,f))});return!!e}function Ab(a){var b=-1,c=da(),f=a?a.length:0,k=bb.apply(ua,ka.call(arguments,1)),n=[],p=f>=w&&c===d;if(p){var m=e(k);m?(c=g,k=m):p=!1}for(;++b<f;)m=
a[b],0>c(k,m)&&n.push(m);p&&s(k);return n}function qb(a,b,c){if(a){var e=0,f=a.length;if("number"!=typeof b&&null!=b){var d=-1;for(b=m.createCallback(b,c);++d<f&&b(a[d],d,a);)e++}else if(e=b,null==e||c)return a[0];return r(a,0,La(Ka(0,e),f))}}function Nb(a,b,c){if("number"==typeof c){var e=a?a.length:0;c=0>c?Ka(0,e+c):c||0}else if(c)return c=Kb(a,b),a[c]===b?c:-1;return a?d(a,b,c):-1}function Bb(a,b,c){if("number"!=typeof b&&null!=b){var e=0,f=-1,d=a?a.length:0;for(b=m.createCallback(b,c);++f<d&&
b(a[f],f,a);)e++}else e=null==b||c?1:Ka(0,b);return r(a,e)}function Kb(a,b,c,e){var f=0,d=a?a.length:f;c=c?m.createCallback(c,e,1):nb;for(b=c(b);f<d;)e=f+d>>>1,c(a[e])<b?f=e+1:d=e;return f}function Cb(a){for(var b=-1,c=a?Ea(Wa(a,"length")):0,e=za(0>c?0:c);++b<c;)e[b]=Wa(a,b);return e}function Ob(a,b){for(var c=-1,e=a?a.length:0,f={};++c<e;){var d=a[c];b?f[d]=b[c]:f[d[0]]=d[1]}return f}function pb(a,b){return Jb.fastBind||va&&2<arguments.length?va.call.apply(va,arguments):t(a,b,ka.call(arguments,2))}
function Pb(a,b,c){function e(){sb(h);sb(l);p=0;h=l=null}function f(){var b=r&&(!s||1<p);e();b&&(!1!==q&&(m=new rb),n=a.apply(g,k))}function d(){e();if(r||q!==b)m=new rb,n=a.apply(g,k)}var k,n,g,p=0,m=0,q=!1,h=null,l=null,r=!0;b=Ka(0,b||0);if(!0===c)var s=!0,r=!1;else I(c)&&(s=c.leading,q="maxWait"in c&&Ka(b,c.maxWait||0),r="trailing"in c?c.trailing:r);return function(){k=arguments;g=this;p++;sb(l);if(!1===q)s&&2>p&&(n=a.apply(g,k));else{var c=new rb;h||s||(m=c);var e=q-(c-m);0>=e?(sb(h),h=null,m=
c,n=a.apply(g,k)):h||(h=ub(d,e))}b!==q&&(l=ub(f,b));return n}}function Db(a){var b=ka.call(arguments,1);return ub(function(){a.apply(q,b)},1)}function nb(a){return a}function Eb(a){X(xa(a),function(b){var c=m[b]=a[b];m.prototype[b]=function(){var a=this.__wrapped__,b=[a];tb.apply(b,arguments);b=c.apply(m,b);return a&&"object"==typeof a&&a===b?this:new h(b)}})}function Fb(){return this.__wrapped__}b=b?pa.defaults(window.Object(),b,pa.pick(window,Sa)):window;var za=b.Array,ob=b.Boolean,rb=b.Date,eb=
b.Function,Ja=b.Math,Qb=b.Number,db=b.Object,Gb=b.RegExp,fa=b.String,Rb=b.TypeError,ua=[],Oa=db.prototype,Xa=b._,Ia=Gb("^"+fa(Oa.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Hb=Ja.ceil,sb=b.clearTimeout,bb=ua.concat,Sb=Ja.floor,Tb=eb.prototype.toString,gb=Ia.test(gb=db.getPrototypeOf)&&gb,ia=Oa.hasOwnProperty,tb=ua.push,hb=b.setImmediate,ub=b.setTimeout,Aa=Oa.toString,va=Ia.test(va=Aa.bind)&&va,fb=Ia.test(fb=db.create)&&fb,Ib=Ia.test(Ib=za.isArray)&&Ib,
Zb=b.isFinite,Ub=b.isNaN,vb=Ia.test(vb=db.keys)&&vb,Ka=Ja.max,La=Ja.min,Ma=b.parseInt,wb=Ja.random,ka=ua.slice,Ja=Ia.test(b.attachEvent),Ja=va&&!/\n|true/.test(va+Ja),Va={};Va[F]=za;Va[Y]=ob;Va[U]=rb;Va[y]=eb;Va[oa]=db;Va[W]=Qb;Va[Q]=Gb;Va[T]=fa;h.prototype=m.prototype;var Jb=m.support={};Jb.fastBind=va&&!Ja;m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:L,variable:"",imports:{_:m}};var Fa=Ib,ob=function(a){var b,c=[];if(!a||!M[typeof a])return c;for(b in a)ia.call(a,
b)&&c.push(b);return c},Ga=vb?function(a){return I(a)?vb(a):[]}:ob,Vb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wb=Za(Vb),xb=function(a,b,c){var e,f=a,d=f;if(!f)return d;var k=arguments,n=0,g="number"==typeof c?2:k.length;if(3<g&&"function"==typeof k[g-2])var p=m.createCallback(k[--g-1],k[g--],2);else 2<g&&"function"==typeof k[g-1]&&(p=k[--g]);for(;++n<g;)if((f=k[n])&&M[typeof f])for(var q=-1,h=M[typeof f]&&Ga(f),l=h?h.length:0;++q<l;)e=h[q],d[e]=p?p(d[e],f[e]):f[e];return d},yb=
function(a,b,c){var e,f=a,d=f;if(!f)return d;for(var k=arguments,n=0,g="number"==typeof c?2:k.length;++n<g;)if((f=k[n])&&M[typeof f])for(var p=-1,m=M[typeof f]&&Ga(f),q=m?m.length:0;++p<q;)e=m[p],"undefined"==typeof d[e]&&(d[e]=f[e]);return d},Pa=function(a,b,c){var e;if(!a||!M[typeof a])return a;b=b&&"undefined"==typeof c?b:m.createCallback(b,c);for(e in a)if(!1===b(a[e],e,a))break;return a},la=function(a,b,c){if(!a||!M[typeof a])return a;b=b&&"undefined"==typeof c?b:m.createCallback(b,c);for(var e=
-1,f=M[typeof a]&&Ga(a),d=f?f.length:0;++e<d&&(c=f[e],!1!==b(a[c],c,a)););return a},Xb=function(a){if(!a||Aa.call(a)!=oa)return!1;var b=a.valueOf,c="function"==typeof b&&(c=gb(b))&&gb(c);return c?a==c||gb(a)==c:ja(a)},ob=ea(function $(a,b,c){for(var e=-1,f=a?a.length:0,d=[];++e<f;){var k=a[e];c&&(k=c(k,e,a));Fa(k)?tb.apply(d,b?k:$(k)):d.push(k)}return d}),zb=ea(function(a,b,c){var f=-1,n=da(),m=a?a.length:0,q=[],h=!b&&m>=w&&n===d,l=c||h?k():q;if(h){var r=e(l);r?(n=g,l=r):(h=!1,l=c?l:(p(l),q))}for(;++f<
m;){var r=a[f],t=c?c(r,f,a):r;if(b?!f||l[l.length-1]!==t:0>n(l,t))(c||h)&&l.push(t),q.push(r)}h?(p(l.array),s(l)):c&&p(l);return q});Ja&&ga&&"function"==typeof hb&&(Db=pb(hb,b));hb=8==Ma(H+"08")?Ma:function(a,b){return Ma(C(a)?a.replace(ha,""):a,b||0)};m.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}};m.assign=xb;m.at=function(a){for(var b=-1,c=bb.apply(ua,ka.call(arguments,1)),e=c.length,f=za(e);++b<e;)f[b]=a[c[b]];return f};m.bind=pb;m.bindAll=function(a){for(var b=
1<arguments.length?bb.apply(ua,ka.call(arguments,1)):xa(a),c=-1,e=b.length;++c<e;){var f=b[c];a[f]=pb(a[f],a)}return a};m.bindKey=function(a,b){return t(a,b,ka.call(arguments,2),z)};m.compact=function(a){for(var b=-1,c=a?a.length:0,e=[];++b<c;){var f=a[b];f&&e.push(f)}return e};m.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}};m.countBy=function(a,b,c){var e={};b=m.createCallback(b,c);X(a,function(a,c,f){c=fa(b(a,c,f));
ia.call(e,c)?e[c]++:e[c]=1});return e};m.createCallback=function(a,b,c){if(null==a)return nb;var e=typeof a;if("function"!=e){if("object"!=e)return function(b){return b[a]};var f=Ga(a);return function(b){for(var c=f.length,e=!1;c--&&(e=G(b[f[c]],a[f[c]],z)););return e}}return"undefined"==typeof b||V&&!V.test(Tb.call(a))?a:1===c?function(c){return a.call(b,c)}:2===c?function(c,e){return a.call(b,c,e)}:4===c?function(c,e,f,d){return a.call(b,c,e,f,d)}:function(c,e,f){return a.call(b,c,e,f)}};m.debounce=
Pb;m.defaults=yb;m.defer=Db;m.delay=function(a,b){var c=ka.call(arguments,2);return ub(function(){a.apply(q,c)},b)};m.difference=Ab;m.filter=ta;m.flatten=ob;m.forEach=X;m.forIn=Pa;m.forOwn=la;m.functions=xa;m.groupBy=function(a,b,c){var e={};b=m.createCallback(b,c);X(a,function(a,c,f){c=fa(b(a,c,f));(ia.call(e,c)?e[c]:e[c]=[]).push(a)});return e};m.initial=function(a,b,c){if(!a)return[];var e=0,f=a.length;if("number"!=typeof b&&null!=b){var d=f;for(b=m.createCallback(b,c);d--&&b(a[d],d,a);)e++}else e=
null==b||c?1:b||e;return r(a,0,La(Ka(0,f-e),f))};m.intersection=function(a){for(var b=arguments,c=b.length,f=-1,n=k(),m=-1,q=da(),h=a?a.length:0,l=[],r=k();++f<c;){var t=b[f];n[f]=q===d&&(t?t.length:0)>=w&&e(f?b[f]:r)}a:for(;++m<h;){var v=n[0],t=a[m];if(0>(v?g(v,t):q(r,t))){f=c;for((v||r).push(t);--f;)if(v=n[f],0>(v?g(v,t):q(b[f],t)))continue a;l.push(t)}}for(;c--;)(v=n[c])&&s(v);p(n);p(r);return l};m.invert=Za;m.invoke=function(a,b){var c=ka.call(arguments,2),e=-1,f="function"==typeof b,d=a?a.length:
0,k=za("number"==typeof d?d:0);X(a,function(a){k[++e]=(f?b:a[b]).apply(a,c)});return k};m.keys=Ga;m.map=Ua;m.max=Ea;m.memoize=function(a,b){function c(){var e=c.cache,f=A+(b?b.apply(this,arguments):arguments[0]);return ia.call(e,f)?e[f]:e[f]=a.apply(this,arguments)}c.cache={};return c};m.merge=Da;m.min=function(b,c,e){var f=Infinity,d=f;if(!c&&Fa(b)){e=-1;for(var k=b.length;++e<k;){var n=b[e];n<d&&(d=n)}}else c=!c&&C(b)?a:m.createCallback(c,e),X(b,function(a,b,e){b=c(a,b,e);b<f&&(f=b,d=a)});return d};
m.omit=function(a,b,c){var e=da(),f="function"==typeof b,d={};if(f)b=m.createCallback(b,c);else var k=bb.apply(ua,ka.call(arguments,1));Pa(a,function(a,c,n){if(f?!b(a,c,n):0>e(k,c))d[c]=a});return d};m.once=function(a){var b,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};m.pairs=function(a){for(var b=-1,c=Ga(a),e=c.length,f=za(e);++b<e;){var d=c[b];f[b]=[d,a[d]]}return f};m.partial=function(a){return t(a,ka.call(arguments,1))};m.partialRight=function(a){return t(a,
ka.call(arguments,1),null,z)};m.pick=function(a,b,c){var e={};if("function"!=typeof b)for(var f=-1,d=bb.apply(ua,ka.call(arguments,1)),k=I(a)?d.length:0;++f<k;){var n=d[f];n in a&&(e[n]=a[n])}else b=m.createCallback(b,c),Pa(a,function(a,c,f){b(a,c,f)&&(e[c]=a)});return e};m.pluck=Wa;m.range=function(a,b,c){a=+a||0;c=+c||1;null==b&&(b=a,a=0);var e=-1;b=Ka(0,Hb((b-a)/c));for(var f=za(b);++e<b;)f[e]=a,a+=c;return f};m.reject=function(a,b,c){b=m.createCallback(b,c);return ta(a,function(a,c,e){return!b(a,
c,e)})};m.rest=Bb;m.shuffle=function(a){var b=-1,c=a?a.length:0,e=za("number"==typeof c?c:0);X(a,function(a){var c=Sb(wb()*(++b+1));e[b]=e[c];e[c]=a});return e};m.sortBy=function(a,b,e){var f=-1,d=a?a.length:0,k=za("number"==typeof d?d:0);b=m.createCallback(b,e);X(a,function(a,c,e){var d=k[++f]=n();d.criteria=b(a,c,e);d.index=f;d.value=a});d=k.length;for(k.sort(c);d--;)a=k[d],k[d]=a.value,s(a);return k};m.tap=function(a,b){b(a);return a};m.throttle=function(a,b,c){var e=!0,f=!0;!1===c?e=!1:I(c)&&
(e="leading"in c?c.leading:e,f="trailing"in c?c.trailing:f);c=n();c.leading=e;c.maxWait=b;c.trailing=f;a=Pb(a,b,c);s(c);return a};m.times=function(a,b,c){a=-1<(a=+a)?a:0;var e=-1,f=za(a);for(b=m.createCallback(b,c,1);++e<a;)f[e]=b(e);return f};m.toArray=function(a){return a&&"number"==typeof a.length?r(a):Ba(a)};m.transform=function(a,b,c,e){var f=Fa(a);b=m.createCallback(b,e,4);null==c&&(f?c=[]:(e=(e=a&&a.constructor)&&e.prototype,c=I(e)?fb(e):{}));(f?X:la)(a,function(a,e,f){return b(c,a,e,f)});
return c};m.union=function(a){Fa(a)||(arguments[0]=a?ka.call(a):ua);return zb(bb.apply(ua,arguments))};m.uniq=zb;m.unzip=Cb;m.values=Ba;m.where=ta;m.without=function(a){return Ab(a,ka.call(arguments,1))};m.wrap=function(a,b){return function(){var c=[a];tb.apply(c,arguments);return b.apply(this,c)}};m.zip=function(a){return a?Cb(arguments):[]};m.zipObject=Ob;m.collect=Ua;m.drop=Bb;m.each=X;m.extend=xb;m.methods=xa;m.object=Ob;m.select=ta;m.tail=Bb;m.unique=zb;Eb(m);m.chain=m;m.prototype.chain=function(){return this};
m.clone=Ya;m.cloneDeep=function(a,b,c){return Ya(a,!0,b,c)};m.contains=$a;m.escape=function(a){return null==a?"":fa(a).replace(ba,B)};m.every=Ta;m.find=ya;m.findIndex=function(a,b,c){var e=-1,f=a?a.length:0;for(b=m.createCallback(b,c);++e<f;)if(b(a[e],e,a))return e;return-1};m.findKey=function(a,b,c){var e;b=m.createCallback(b,c);la(a,function(a,c,f){if(b(a,c,f))return e=c,!1});return e};m.has=function(a,b){return a?ia.call(a,b):!1};m.identity=nb;m.indexOf=Nb;m.isArguments=function(a){return Aa.call(a)==
na};m.isArray=Fa;m.isBoolean=function(a){return!0===a||!1===a||Aa.call(a)==Y};m.isDate=function(a){return a?"object"==typeof a&&Aa.call(a)==U:!1};m.isElement=function(a){return a?1===a.nodeType:!1};m.isEmpty=function(a){var b=!0;if(!a)return b;var c=Aa.call(a),e=a.length;if(c==F||c==T||c==na||c==oa&&"number"==typeof e&&E(a.splice))return!e;la(a,function(){return b=!1});return b};m.isEqual=G;m.isFinite=function(a){return Zb(a)&&!Ub(parseFloat(a))};m.isFunction=E;m.isNaN=function(a){return K(a)&&a!=
+a};m.isNull=function(a){return null===a};m.isNumber=K;m.isObject=I;m.isPlainObject=Xb;m.isRegExp=function(a){return a?"object"==typeof a&&Aa.call(a)==Q:!1};m.isString=C;m.isUndefined=function(a){return"undefined"==typeof a};m.lastIndexOf=function(a,b,c){var e=a?a.length:0;for("number"==typeof c&&(e=(0>c?Ka(0,e+c):La(c,e-1))+1);e--;)if(a[e]===b)return e;return-1};m.mixin=Eb;m.noConflict=function(){b._=Xa;return this};m.parseInt=hb;m.random=function(a,b){null==a&&null==b&&(b=1);a=+a||0;null==b?(b=
a,a=0):b=+b||0;var c=wb();return a%1||b%1?a+La(c*(b-a+parseFloat("1e-"+((c+"").length-1))),b):a+Sb(c*(b-a+1))};m.reduce=ab;m.reduceRight=Lb;m.result=function(a,b){var c=a?a[b]:q;return E(c)?a[b]():c};m.runInContext=u;m.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Ga(a).length};m.some=Mb;m.sortedIndex=Kb;m.template=function(a,b,c){var e=m.templateSettings;a||(a="");c=yb({},c,e);var d=yb({},c.imports,e.imports),e=Ga(d),d=Ba(d),k,n=0,g=c.interpolate||ra,p="__p += '",g=Gb((c.escape||
ra).source+"|"+g.source+"|"+(g===L?aa:ra).source+"|"+(c.evaluate||ra).source+"|$","g");a.replace(g,function(b,c,e,d,g,m){e||(e=d);p+=a.slice(n,m).replace(sa,f);c&&(p+="' +\n__e("+c+") +\n'");g&&(k=!0,p+="';\n"+g+";\n__p += '");e&&(p+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'");n=m+b.length;return b});var p=p+"';\n",h=g=c.variable;h||(g="obj",p="with ("+g+") {\n"+p+"\n}\n");p=(k?p.replace(x,""):p).replace(R,"$1").replace(S,"$1;");p="function("+g+") {\n"+(h?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+
(k?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";c="\n/*\n//@ sourceURL="+(c.sourceURL||"/lodash/template/source["+P++ +"]")+"\n*/";try{var l=eb(e,"return "+p+c).apply(q,d)}catch(r){throw r.source=p,r;}if(b)return l(b);l.source=p;return l};m.unescape=function(a){return null==a?"":fa(a).replace(O,mb)};m.uniqueId=function(a){var b=++v;return fa(null==a?"":a)+b};m.all=Ta;m.any=Mb;m.detect=ya;m.findWhere=ya;m.foldl=ab;m.foldr=Lb;m.include=
$a;m.inject=ab;la(m,function(a,b){m.prototype[b]||(m.prototype[b]=function(){var b=[this.__wrapped__];tb.apply(b,arguments);return a.apply(m,b)})});m.first=qb;m.last=function(a,b,c){if(a){var e=0,f=a.length;if("number"!=typeof b&&null!=b){var d=f;for(b=m.createCallback(b,c);d--&&b(a[d],d,a);)e++}else if(e=b,null==e||c)return a[f-1];return r(a,Ka(0,f-e))}};m.take=qb;m.head=qb;la(m,function(a,b){m.prototype[b]||(m.prototype[b]=function(b,c){var e=a(this.__wrapped__,b,c);return null==b||c&&"function"!=
typeof b?e:new h(e)})});m.VERSION="1.3.1";m.prototype.toString=function(){return fa(this.__wrapped__)};m.prototype.value=Fb;m.prototype.valueOf=Fb;X(["join","pop","shift"],function(a){var b=ua[a];m.prototype[a]=function(){return b.apply(this.__wrapped__,arguments)}});X(["push","reverse","sort","unshift"],function(a){var b=ua[a];m.prototype[a]=function(){b.apply(this.__wrapped__,arguments);return this}});X(["concat","slice","splice"],function(a){var b=ua[a];m.prototype[a]=function(){return new h(b.apply(this.__wrapped__,
arguments))}});return m}var q,t=[],m=[],v=0,z={},A=+new Date+"",w=75,B=40,x=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,S=/(__e\(.*?\)|\b__t\)) \+\n'';/g,O=/&(?:amp|lt|gt|quot|#39);/g,aa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,J=/\w*$/,L=/<%=([\s\S]+?)%>/g,V=(V=/\bthis\b/)&&V.test(u)&&V,H=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",ha=RegExp("^["+H+"]*0+(?=.$)"),ra=/($^)/,ba=/[&<>"']/g,sa=/['\n\r\t\u2028\u2029\\]/g,
Sa="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),P=0,na="[object Arguments]",F="[object Array]",Y="[object Boolean]",U="[object Date]",y="[object Function]",W="[object Number]",oa="[object Object]",Q="[object RegExp]",T="[object String]",Z={};Z[y]=!1;Z[na]=Z[F]=Z[Y]=Z[U]=Z[W]=Z[oa]=Z[Q]=Z[T]=!0;var M={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},ea={"\\":"\\","'":"'","\n":"n",
"\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},ja=M[typeof exports]&&exports,ga=M[typeof module]&&module&&module.exports==ja&&module,ja=M[typeof global]&&global;!ja||ja.global!==ja&&ja.window!==ja||(window=ja);var pa=h._=u();h.each(pa,function(a,b){Object.hasOwnProperty.call(pa,a)&&!/VERSION/.test(name)&&(h[a]||(h[a]=b))})});
FD31.plugin("bootstrap",function(h){!function(d){d(function(){var g=d.support,b;a:{b=document.createElement("bootstrap");var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in a)if(void 0!==b.style[c]){b=a[c];break a}b=void 0}g.transition=b&&{end:b}})}(h);!function(d){var g=function(b){d(b).on("click",'[data-foundry-dismiss="alert"]',this.close)};g.prototype.close=function(b){function a(){f.trigger("closed").remove()}
var c=d(this),e=c.attr("data-target"),f;e||(e=(e=c.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,""));f=d(e);b&&b.preventDefault();f.length||(f=c.hasClass("alert")?c:c.parent());f.trigger(b=d.Event("close"));b.isDefaultPrevented()||(f.removeClass("in"),d.support.transition&&f.hasClass("fade")?f.on(d.support.transition.end,a):a())};d.fn.alert=function(b){return this.each(function(){var a=d(this),c=a.data("alert");c||a.data("alert",c=new g(this));"string"==typeof b&&c[b].call(a)})};d.fn.alert.Constructor=
g;d(document).on("click.alert.data-api",'[data-foundry-dismiss="alert"]',g.prototype.close)}(h);!function(d){var g=function(b,a){this.$element=d(b);this.options=d.extend({},d.fn.button.defaults,a)};g.prototype.setState=function(b){var a=this.$element,c=a.data(),e=a.is("input")?"val":"html";b+="Text";c.resetText||a.data("resetText",a[e]());a[e](c[b]||this.options[b]);setTimeout(function(){"loadingText"==b?a.addClass("disabled").attr("disabled","disabled"):a.removeClass("disabled").removeAttr("disabled")},
0)};g.prototype.toggle=function(){var b=this.$element.closest('[data-foundry-toggle="buttons-radio"]');b.hasClass("disabled")||(b&&b.find(".active").removeClass("active"),this.$element.toggleClass("active"))};d.fn.button=function(b){return this.each(function(){var a=d(this),c=a.data("button"),e="object"==typeof b&&b;c||a.data("button",c=new g(this,e));"toggle"==b?c.toggle():b&&c.setState(b)})};d.fn.button.defaults={loadingText:"loading..."};d.fn.button.Constructor=g;d(document).on("click.button.data-api",
"[data-foundry-toggle^=button]",function(b){b=d(b.target);b.hasClass("btn")||(b=b.closest(".btn"));b.button("toggle")})}(h);!function(d){var g=function(b,a){this.$element=d(b);this.options=a;this.options.slide&&this.slide(this.options.slide);"hover"==this.options.pause&&this.$element.on("mouseenter",d.proxy(this.pause,this)).on("mouseleave",d.proxy(this.cycle,this))};g.prototype={cycle:function(b){b||(this.paused=!1);this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,
this),this.options.interval));return this},to:function(b){var a=this.$element.find(".item.active"),c=a.parent().children(),a=c.index(a),e=this;if(!(b>c.length-1||0>b))return this.sliding?this.$element.one("slid",function(){e.to(b)}):a==b?this.pause().cycle():this.slide(b>a?"next":"prev",d(c[b]))},pause:function(b){b||(this.paused=!0);this.$element.find(".next, .prev").length&&d.support.transition.end&&(this.$element.trigger(d.support.transition.end),this.cycle());clearInterval(this.interval);this.interval=
null;return this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(b,a){var c=this.$element.find(".item.active"),e=a||c[b](),f=this.interval,k="next"==b?"left":"right",n="next"==b?"first":"last",g=this;this.sliding=!0;f&&this.pause();e=e.length?e:this.$element.find(".item")[n]();n=d.Event("slide",{relatedTarget:e[0]});if(!e.hasClass("active")){if(d.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(n);
if(n.isDefaultPrevented())return;e.addClass(b);e[0].offsetWidth;c.addClass(k);e.addClass(k);this.$element.one(d.support.transition.end,function(){e.removeClass([b,k].join(" ")).addClass("active");c.removeClass(["active",k].join(" "));g.sliding=!1;setTimeout(function(){g.$element.trigger("slid")},0)})}else{this.$element.trigger(n);if(n.isDefaultPrevented())return;c.removeClass("active");e.addClass("active");this.sliding=!1;this.$element.trigger("slid")}f&&this.cycle();return this}}};d.fn.carousel=
function(b){return this.each(function(){var a=d(this),c=a.data("carousel"),e=d.extend({},d.fn.carousel.defaults,"object"==typeof b&&b),f="string"==typeof b?b:e.slide;c||a.data("carousel",c=new g(this,e));if("number"==typeof b)c.to(b);else if(f)c[f]();else e.interval&&c.cycle()})};d.fn.carousel.defaults={interval:5E3,pause:"hover"};d.fn.carousel.Constructor=g;d(document).on("click.carousel.data-api","[data-foundry-slide]",function(b){var a=d(this),c,e=d(a.attr("data-target")||(c=a.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,
"")),a=d.extend({},e.data(),a.data());e.carousel(a);b.preventDefault()})}(h);!function(d){var g=function(b,a){this.$element=d(b);this.options=d.extend({},d.fn.collapse.defaults,a);this.options.parent&&(this.$parent=d(this.options.parent));this.options.toggle&&this.toggle()};g.prototype={constructor:g,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var b,a,c,e;if(!this.transitioning){b=this.dimension();a=d.camelCase(["scroll",b].join("-"));if((c=this.$parent&&
this.$parent.find("> .accordion-group > .in"))&&c.length){if((e=c.data("collapse"))&&e.transitioning)return;c.collapse("hide");e||c.data("collapse",null)}this.$element[b](0);d.support.transition&&this.$element[b](this.$element[0][a]);this.transition("addClass",d.Event("bootstrap-show"),"shown")}},hide:function(){var b;this.transitioning||(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",d.Event("bootstrap-hide"),"hidden"),this.$element[b](0))},reset:function(b){var a=
this.dimension();this.$element.removeClass("collapse")[a](b||"auto")[0].offsetWidth;this.$element[null!==b?"addClass":"removeClass"]("collapse");return this},transition:function(b,a,c){var e=this,f=function(){"bootstrap-show"==a.type&&e.reset();e.transitioning=0;e.$element.trigger(c)};this.$element.trigger(a);a.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),d.support.transition&&this.$element.hasClass("collapse")?this.$element.one(d.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?
"hide":"show"]()}};d.fn.collapse=function(b){return this.each(function(){var a=d(this),c=a.data("collapse"),e="object"==typeof b&&b;c||a.data("collapse",c=new g(this,e));if("string"==typeof b)c[b]()})};d.fn.collapse.defaults={toggle:!0};d.fn.collapse.Constructor=g;d(document).on("click.collapse.data-api","[data-foundry-toggle=collapse]",function(b){var a=d(this),c;b=a.attr("data-target")||b.preventDefault()||(c=a.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");c=d(b).data("collapse")?"toggle":a.data();
a[d(b).hasClass("in")?"addClass":"removeClass"]("collapsed");d(b).collapse(c)})}(h);!function(d){function g(c){d(a).each(function(){var a=b(d(this)),k=a.hasClass("open");a.removeClass("open");k&&a.trigger("dropdownClose",[c.target])})}function b(a){var b=a.attr("data-target");b||(b=(b=a.attr("href"))&&/#/.test(b)&&b.replace(/.*(?=#[^\s]*$)/,""));b=d(b);b.length||(b=a.parent());return b}var a="[data-foundry-toggle=dropdown]",c=function(a){var b=d(a).on("click.dropdown.data-api",this.toggle);d("html").on("click.dropdown.data-api",
function(){b.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(a){var c=d(this),k,n;if(!c.is(".disabled, :disabled"))return k=b(c),n=k.hasClass("open"),g(a),n||(k.toggleClass("open"),k.trigger("dropdownOpen",[a.target]),c.focus()),!1},keydown:function(a){var c,k,n;if(/(38|40|27)/.test(a.keyCode)&&(c=d(this),a.preventDefault(),a.stopPropagation(),!c.is(".disabled, :disabled"))){k=b(c);n=k.hasClass("open");if(!n||n&&27==a.keyCode)return c.click();c=d("[role=menu] li:not(.divider) a",
k);c.length&&(k=c.index(c.filter(":focus")),38==a.keyCode&&0<k&&k--,40==a.keyCode&&k<c.length-1&&k++,~k||(k=0),c.eq(k).focus())}}};d.fn.dropdown=function(a){return this.each(function(){var b=d(this),k=b.data("dropdown");k||b.data("dropdown",k=new c(this));"string"==typeof a&&k[a].call(b)})};d.fn.dropdown.Constructor=c;d(document).on("click.dropdown.data-api",g).on("click.dropdown",".dropdown_ form, .dropdown-static",function(a){a.stopPropagation()}).on("click.dropdown.data-api",a,c.prototype.toggle).on("keydown.dropdown.data-api",
a+", [role=menu]",c.prototype.keydown)}(h);!function(d){var g=function(b,a){this.options=a;this.$element=d(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",d.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};g.prototype={constructor:g,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,a=d.Event("show");this.$element.trigger(a);this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var a=
d.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body);b.$element.show();a&&b.$element[0].offsetWidth;b.$element.addClass("in").attr("aria-hidden",!1).focus();b.enforceFocus();a?b.$element.one(d.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=d.Event("hide");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,
this.escape(),d(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),d.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;d(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var b=this;if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.modal",function(a){27==a.which&&b.hide()});
else this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,a=setTimeout(function(){b.$element.off(d.support.transition.end);b.hideModal()},500);this.$element.one(d.support.transition.end,function(){clearTimeout(a);b.hideModal()})},hideModal:function(b){this.$element.hide().trigger("hidden");this.backdrop()},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(b){var a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&
this.options.backdrop){var c=d.support.transition&&a;this.$backdrop=d('<div class="modal-backdrop '+a+'" />').appendTo(document.body);this.$backdrop.click("static"==this.options.backdrop?d.proxy(this.$element[0].focus,this.$element[0]):d.proxy(this.hide,this));c&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");c?this.$backdrop.one(d.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),d.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(d.support.transition.end,
d.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}};d.fn.modal=function(b){return this.each(function(){var a=d(this),c=a.data("modal"),e=d.extend({},d.fn.modal.defaults,a.data(),"object"==typeof b&&b);c||a.data("modal",c=new g(this,e));if("string"==typeof b)c[b]();else e.show&&c.show()})};d.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};d.fn.modal.Constructor=g;d(document).on("click.modal.data-api",'[data-foundry-toggle="modal"]',function(b){var a=d(this),c=a.attr("href"),e=d(a.attr("data-target")||
c&&c.replace(/.*(?=#[^\s]+$)/,"")),c=e.data("modal")?"toggle":d.extend({remote:!/#/.test(c)&&c},e.data(),a.data());b.preventDefault();e.modal(c).one("hide",function(){a.focus()})})}(h);!function(d){var g=function(b,a){this.init("tooltip",b,a)};g.prototype={constructor:g,init:function(b,a,c){this.type=b;this.$element=d(a);this.options=this.getOptions(c);this.enabled=!0;if("click"==this.options.trigger)this.$element.on("click."+this.type,this.options.selector,d.proxy(this.toggle,this));else"manual"!=
this.options.trigger&&(b="hover"==this.options.trigger?"mouseenter":"focus",a="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(b+"."+this.type,this.options.selector,d.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,d.proxy(this.leave,this)));this.options.selector?this._options=d.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=d.extend({},d.fn[this.type].defaults,b,this.$element.data());b.delay&&"number"==
typeof b.delay&&(b.delay={show:b.delay,hide:b.delay});return b},enter:function(b){var a=d(b.currentTarget)[this.type](this._options).data(this.type);if(!a.options.delay||!a.options.delay.show)return a.show();clearTimeout(this.timeout);a.hoverState="in";this.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show)},leave:function(b){var a=d(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!a.options.delay||!a.options.delay.hide)return a.hide();
a.hoverState="out";this.timeout=setTimeout(function(){"out"==a.hoverState&&a.hide()},a.options.delay.hide)},show:function(){var b,a,c,e,f,k,n;if(this.hasContent()&&this.enabled){b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");k="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement;a=/in/.test(k);b.detach().css({top:0,left:0,display:"block"});switch(this.options.container||"parent"){case "parent":b.insertAfter(this.$element);
break;case "body":b.appendTo(document.body);break;default:c=d(this.options.container),c.length?b.appendTo(c):b.insertAfter(this.$element)}c=this.getPosition(a);e=b[0].offsetWidth;f=b[0].offsetHeight;switch(a?k.split(" ")[1]:k){case "bottom":n={top:c.top+c.height,left:c.left+c.width/2-e/2};break;case "top":n={top:c.top-f,left:c.left+c.width/2-e/2};break;case "left":n={top:c.top+c.height/2-f/2,left:c.left-e};break;case "right":n={top:c.top+c.height/2-f/2,left:c.left+c.width}}b.offset(n).addClass(k).addClass("in")}},
setContent:function(){var b=this.tip(),a=this.getTitle();b.find(".tooltip-inner")[this.options.html?"html":"text"](a);b.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){a.off(d.support.transition.end).detach()},500);a.one(d.support.transition.end,function(){clearTimeout(b);a.detach()})}var a=this.tip();a.removeClass("in");d.support.transition&&this.$tip.hasClass("fade")?b():a.detach();return this},fixTitle:function(){var b=this.$element;(b.attr("title")||
"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return d.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var b=this.$element,a=this.options;return b.attr("data-original-title")||("function"==typeof a.title?a.title.call(b[0]):a.title)},tip:function(){return this.$tip=
this.$tip||d(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){b=d(b.currentTarget)[this.type](this._options).data(this.type);b[b.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};d.fn.tooltip=function(b){return this.each(function(){var a=
d(this),c=a.data("tooltip"),e="object"==typeof b&&b;c||a.data("tooltip",c=new g(this,e));if("string"==typeof b)c[b]()})};d.fn.tooltip.Constructor=g;d.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1,container:"parent"}}(h);!function(d){var g=function(b,a){this.init("popover",b,a)};g.prototype=d.extend({},d.fn.tooltip.Constructor.prototype,{constructor:g,
setContent:function(){var b=this.tip(),a=this.getTitle(),c=this.getContent();b.find(".popover-title")[this.options.html?"html":"text"](a);b.find(".popover-content > *")[this.options.html?"html":"text"](c);b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var b=this.$element,a=this.options;return b.attr("data-content")||("function"==typeof a.content?a.content.call(b[0]):a.content)},tip:function(){this.$tip||(this.$tip=
d(this.options.template));return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});d.fn.popover=function(b){return this.each(function(){var a=d(this),c=a.data("popover"),e="object"==typeof b&&b;c||a.data("popover",c=new g(this,e));if("string"==typeof b)c[b]()})};d.fn.popover.Constructor=g;d.fn.popover.defaults=d.extend({},d.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover popover-fd"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(h);
!function(d){function g(b,a){var c=d.proxy(this.process,this),e=d(b).is("body")?d(window):d(b),f;this.options=d.extend({},d.fn.scrollspy.defaults,a);this.$scrollElement=e.on("scroll.scroll-spy.data-api",c);this.selector=(this.options.target||(f=d(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=d("body");this.refresh();this.process()}g.prototype={constructor:g,refresh:function(){var b=this;this.offsets=d([]);this.targets=d([]);this.$body.find(this.selector).map(function(){var a=
d(this),a=a.data("target")||a.attr("href"),b=/^#\w/.test(a)&&d(a);return b&&b.length&&[[b.position().top,a]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]);b.targets.push(this[1])})},process:function(){var b=this.$scrollElement.scrollTop()+this.options.offset,a=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),c=this.offsets,e=this.targets,f=this.activeTarget,d;if(b>=a)return f!=(d=e.last()[0])&&this.activate(d);for(d=
c.length;d--;)f!=e[d]&&b>=c[d]&&(!c[d+1]||b<=c[d+1])&&this.activate(e[d])},activate:function(b){this.activeTarget=b;d(this.selector).parent(".active").removeClass("active");b=d(this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]').parent("li").addClass("active");b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active"));b.trigger("activate")}};d.fn.scrollspy=function(b){return this.each(function(){var a=d(this),c=a.data("scrollspy"),e="object"==typeof b&&b;
c||a.data("scrollspy",c=new g(this,e));if("string"==typeof b)c[b]()})};d.fn.scrollspy.Constructor=g;d.fn.scrollspy.defaults={offset:10};d(window).on("load",function(){d('[data-foundry-spy="scroll"]').each(function(){var b=d(this);b.scrollspy(b.data())})})}(h);!function(d){var g=function(b){this.element=d(b)};g.prototype={constructor:g,show:function(){var b=this.element,a=b.closest("ul:not(.dropdown-menu)"),c=b.attr("data-target"),e,f;c||(c=(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]*$)/,""));b.parent("li").hasClass("active")||
(e=a.find(".active:last a")[0],f=d.Event("show",{relatedTarget:e}),b.trigger(f),f.isDefaultPrevented()||(c=d(c),this.activate(b.parent("li"),a),this.activate(c,c.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})))},activate:function(b,a,c){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");k?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");
c&&c()}var f=a.find("> .active"),k=c&&d.support.transition&&f.hasClass("fade");k?f.one(d.support.transition.end,e):e();f.removeClass("in")}};d.fn.tab=function(b){return this.each(function(){var a=d(this),c=a.data("tab");c||a.data("tab",c=new g(this));if("string"==typeof b)c[b]()})};d.fn.tab.Constructor=g;d(document).on("click.tab.data-api",'[data-foundry-toggle="tab"], [data-foundry-toggle="pill"]',function(b){b.preventDefault();d(this).tab("show")})}(h);!function(d){var g=function(b,a){this.$element=
d(b);this.options=d.extend({},d.fn.typeahead.defaults,a);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=d(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=!1;this.listen()};g.prototype={constructor:g,select:function(){var b=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(b)).change();
return this.hide()},updater:function(b){return b},show:function(){var b=d.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:b.top+b.height,left:b.left});this.$menu.show();this.shown=!0;return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(b){this.query=this.$element.val();return!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=d.isFunction(this.source)?this.source(this.query,d.proxy(this.process,
this)):this.source)?this.process(b):this},process:function(b){var a=this;b=d.grep(b,function(b){return a.matcher(b)});b=this.sorter(b);return b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(b){return~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(b){for(var a=[],c=[],e=[],f;f=b.shift();)f.toLowerCase().indexOf(this.query.toLowerCase())?~f.indexOf(this.query)?c.push(f):e.push(f):a.push(f);return a.concat(c,e)},highlighter:function(b){var a=
this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return b.replace(RegExp("("+a+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var a=this;b=d(b).map(function(b,e){b=d(a.options.item).attr("data-value",e);b.find("a").html(a.highlighter(e));return b[0]});b.first().addClass("active");this.$menu.html(b);return this},next:function(b){b=this.$menu.find(".active").removeClass("active").next();b.length||(b=d(this.$menu.find("li")[0]));b.addClass("active")},prev:function(b){b=
this.$menu.find(".active").removeClass("active").prev();b.length||(b=this.$menu.find("li").last());b.addClass("active")},listen:function(){this.$element.on("blur",d.proxy(this.blur,this)).on("keypress",d.proxy(this.keypress,this)).on("keyup",d.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",d.proxy(this.keydown,this));this.$menu.on("click",d.proxy(this.click,this)).on("mouseenter","li",d.proxy(this.mouseenter,this))},eventSupported:function(b){var a=b in this.$element;
a||(this.$element.setAttribute(b,"return;"),a="function"===typeof this.$element[b]);return a},move:function(b){if(this.shown){switch(b.keyCode){case 9:case 13:case 27:b.preventDefault();break;case 38:b.preventDefault();this.prev();break;case 40:b.preventDefault(),this.next()}b.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=!~d.inArray(b.keyCode,[40,38,9,13,27]);this.move(b)},keypress:function(b){this.suppressKeyPressRepeat||this.move(b)},keyup:function(b){switch(b.keyCode){case 40:case 38:case 16:case 17:case 18:break;
case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}b.stopPropagation();b.preventDefault()},blur:function(b){var a=this;setTimeout(function(){a.hide()},150)},click:function(b){b.stopPropagation();b.preventDefault();this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active");d(b.currentTarget).addClass("active")}};d.fn.typeahead=function(b){return this.each(function(){var a=d(this),c=a.data("typeahead"),
e="object"==typeof b&&b;c||a.data("typeahead",c=new g(this,e));if("string"==typeof b)c[b]()})};d.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};d.fn.typeahead.Constructor=g;d(document).on("focus.typeahead.data-api",'[data-foundry-provide="typeahead"]',function(b){var a=d(this);a.data("typeahead")||(b.preventDefault(),a.typeahead(a.data()))})}(h);!function(d){var g=function(b,a){this.options=d.extend({},d.fn.affix.defaults,
a);this.$window=d(window).on("scroll.affix.data-api",d.proxy(this.checkPosition,this)).on("click.affix.data-api",d.proxy(function(){setTimeout(d.proxy(this.checkPosition,this),1)},this));this.$element=d(b);this.checkPosition()};g.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=d(document).height(),a=this.$window.scrollTop(),c=this.$element.offset(),e=this.options.offset,f=e.bottom,k=e.top;"object"!=typeof e&&(f=k=e);"function"==typeof k&&(k=e.top());"function"==typeof f&&
(f=e.bottom());b=null!=this.unpin&&a+this.unpin<=c.top?!1:null!=f&&c.top+this.$element.height()>=b-f?"bottom":null!=k&&a<=k?"top":!1;this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?c.top-a:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(b?"-"+b:"")))}};d.fn.affix=function(b){return this.each(function(){var a=d(this),c=a.data("affix"),e="object"==typeof b&&b;c||a.data("affix",c=new g(this,e));if("string"==typeof b)c[b]()})};d.fn.affix.Constructor=g;d.fn.affix.defaults=
{offset:0};d(window).on("load",function(){d('[data-foundry-spy="affix"]').each(function(){var b=d(this),a=b.data();a.offset=a.offset||{};a.offsetBottom&&(a.offset.bottom=a.offsetBottom);a.offsetTop&&(a.offset.top=a.offsetTop);b.affix(a)})})}(h);!function(d){var g=function(b,a){this.$element=d(b);this.$note=d('<div class="alert"></div>');this.options=d.extend(!0,d.fn.notify.defaults,a);this.options.transition?"fade"==this.options.transition?this.$note.addClass("in").addClass(this.options.transition):
this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in");this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success");this.options.message||""===this.$element.data("message")?"object"===typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message)):this.$note.html(this.$element.data("message"));
if(this.options.closable)var c=d('<a class="close pull-right" href="javascript: void(0);">&times;</a>');d(c).on("click",d.proxy(onClose,this));this.$note.prepend(c);return this};onClose=function(){this.options.onClose();d(this.$note).remove();this.options.onClosed()};g.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3E3).fadeOut("slow",d.proxy(onClose,this));this.$element.append(this.$note);this.$note.alert()};g.prototype.hide=function(){this.options.fadeOut.enabled?
this.$note.delay(this.options.fadeOut.delay||3E3).fadeOut("slow",d.proxy(onClose,this)):onClose.call(this)};d.fn.notify=function(b){return new g(this,b)};d.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3E3},message:null,onClose:function(){},onClosed:function(){}}}(h)});
FD31.plugin("responsive",function(h){h.responsive=function(a,c){return new b(a,c)};h.fn.responsive=function(a){a&&h.responsive(this,{elementWidth:function(a){return a.outerWidth(!0)},conditions:a});return this};var d=h(window),g=h.isFunction,b=function(a,b){var e=this;a=h(a);var f=a.data("$responsive");f&&f.destroy();h.extend(e,{elem:a,options:b,conditions:h.sortBy(h.makeArray(b.conditions),function(a){return a.at}),event:"resize.responsive"+h.uid(),handler:h.debounce(function(){e.set()},250)});delete b.conditions;
a.data("$responsive",e);h(function(){d.on(e.event,e.handler);e.set()});h(window).load(function(){e.set()})};h.extend(b.prototype,{set:function(){var a=this,b=a.options.elementWidth;a.elem.each(function(){var e=h(this),f=g(b)?b(e):b;a.removeCondition(e.data("currentCondition"),e);h.each(a.conditions,function(b,c){if(f<=c.at)return a.applyCondition(c,e),!1})})},applyCondition:function(a,b){var e,f,d,n;(e=a.switchTo)&&b.addClass(e);(f=a.alsoSwitch)&&h.each(f,function(a,b){h(a).addClass(b)});(d=a.switchStylesheet)&&
h.each(h.makeArray(d),function(a,b){1>h('link[href$="'+b+'"]').length&&h("<link/>").attr({rel:"stylesheet",type:"text/css",href:b}).appendTo("head")});(n=a.whenApplied)&&g(n)&&n();b.data("currentCondition",a).trigger("responsive",[a])},removeCondition:function(a,b){if(a){var e,f,d,n;(e=a.switchTo)&&b.removeClass(e);(f=a.alsoSwitch)&&h.each(f,function(a,b){h(a).removeClass(b)});(d=a.switchStylesheet)&&h.each(h.makeArray(d),function(a,b){h('link[href$="'+b+'"]').remove()});(n=a.whenRemoved)&&g(n)&&
n();b.removeData("currentCondition")}},resetToDefault:function(a){var b=this,e=b.elem;h.each(b.conditions,function(f,d){a&&f==a||b.removeCondition(d,e)})},destroy:function(){d.off(this.event);var a=this;a.elem.each(function(){var b=h(this);a.removeCondition(b.data("currentCondition"),b)})}})});
FD31.plugin("utils",function(h){h.IE=function(){if(-1!=navigator.appVersion.indexOf("MSIE 10"))return 10;for(var d=3,g=document.createElement("div"),b=g.getElementsByTagName("i");d++,g.innerHTML="\x3c!--[if gt IE "+d+"]><i></i><![endif]--\x3e",b[0];);return 4<d?d:void 0}();h.uid=function(d,g){return(d?d:"")+Math.random().toString().replace(".","")+(g?g:"")};h.isDeferred=function(d){return d&&h.isFunction(d.always)};h.distinct=function(d){var g=h.unique;if(!(1>d.length)){if(d[0].nodeType)return g.apply(this,
arguments);if("object"==typeof d[0]){var b=Math.random(),a=[];h.each(d,function(c){d[c][b]||(a.push(d[c]),d[c][b]=!0)});h.each(a,function(c){delete a[c][b]});return a}return h.grep(d,function(a,b){return h.inArray(a,d)===b})}};h.trimSeparators=function(d,g,b){d=d.replace(RegExp("^["+g+"\\s]+|["+g+",\\s]+$","g"),"").replace(RegExp(g+"["+g+"\\s]*"+g,"g"),g).replace(RegExp("[\\s]+"+g,"g"),g).replace(RegExp(g+"[\\s]+","g"),g);b&&(d=h.distinct(d.split(g)).join(g));return d};h.isNumeric=function(d){return!isNaN(parseFloat(d))&&
isFinite(d)};h.Number={rotate:function(d,g,b,a){void 0===a&&(a=0);d+=a;d<g?d+=b+1:d>b&&(d-=b+1);return d}};h.fn.stretchToFit=function(){return h.each(this,function(){var d=h(this);d.css("width","100%").css("width",2*d.width()-d.outerWidth(!0)-parseInt(d.css("borderLeftWidth"))-parseInt(d.css("borderRightWidth")))})};h.fn.serializeObject=function(){var d={};h.each(h(this).serializeArray(),function(g,b){d.hasOwnProperty(b.name)?(h.isArray(d[b.name])||(d[b.name]=[d[b.name]]),d[b.name].push(b.value)):
d[b.name]=b.value});return d};h.fn.serializeJSON=function(){return JSON.stringify(h(this).serializeObject())};h.fn.toHTML=function(){return h("<div>").html(this).html()};(function(){var d=function(d){this.items=d;this.start=0;this.end=d.length-1;this.node=null;this.stopped=!1};h.extend(d.prototype,{isLooping:function(){return this.stopped?!1:1<Math.abs(this.start-this.end)?(this.node=Math.floor((this.start+this.end)/2),!0):!1},flip:function(d){d?this.end=this.node-1:this.start=this.node+1},stop:function(){this.stop=
!0}});h.Bloop=function(g){return new d(g)}})();h.remap=function(d,g,b){h.each(b,function(a,b){d[b]=g[b]});return obj};h.deletes=function(d,g){h.each(g,function(b,a){delete d[a]})};(function(){var d=function(d){this.threads=[];this.threadCount=0;this.threadLimit=d.threadLimit||1;this.threadDelay=d.threadDelay||0};h.extend(d.prototype,{add:function(d,b){h.isFunction(d)&&(d.type=b||"normal","deferred"==b&&(d.deferred=h.Deferred().always(h.proxy(this.next,this))),this.threads.push(d),this.run())},addDeferred:function(d){return this.add(d,
"deferred")},next:function(){this.threadCount--;this.run()},run:function(){var d=this;setTimeout(function(){if(!(1>d.threads.length)&&d.threadCount<d.threadLimit){d.threadCount++;var b=d.threads.shift();try{b.call(b,b.deferred)}catch(a){console.error(a)}!b.deferred&&d.next()}},d.threadDelay)}});h.Threads=function(g){return new d(g)}})();(function(){var d=h.isFunction,g=function(){this.lastId=0};g.prototype.queue=function(b){var a=this,c=h.uid();a.lastId=c;return function(){if(a.lastId===c){var e=
arguments,e=d(b)?b.apply(this,e):e;return d(a.fn)?a.fn.apply(this,e):e}}};h.Enqueue=function(b){var a=new g;h.isFunction(b)&&(a.fn=b);b=h.proxy(a.queue,a);b.reset=function(){a.lastId=0};return b}})();(function(){var d=["on","off","fire"],g=function(b){this.fnList={};this.events={};this.mode=b};h.extend(g.prototype,{createEvent:function(b){return this.events[b]=h.Callbacks(this.mode)},on:function(b,a){if(!b||!h.isFunction(a))return this;var c=this.fnList;(c[b]||(c[b]=[])).push(a);c=b.split(".")[0];
(this.events[c]||this.createEvent(c)).add(a);return this},off:function(b){if(!b)return this;var a=b.split(".")[0],c=this.events[a];if(!c)return this;var e=function(a){h.each(a,function(a,b){c.remove(b)})};a!==b?h.each(this.fnList,function(b,c){-1<b.indexOf(a)&&e(c)}):e(this.fnList[b]);return this},fire:function(b){var a=this.events[b];if(a)return a.fire.apply(a,h.makeArray(arguments).slice(1)),this},destroy:function(){for(name in this.events)this.events[name].disable()}});h.eventable=function(b,a){var c=
b.___eventable;if(c&&"destroy"===a)return c.destroy(),h.deletes(b,d),delete b.___eventable;c=b.___eventable=new g(a);b.on=h.proxy(c.on,c);b.off=h.proxy(c.off,c);b.fire=h.proxy(c.fire,c);return b}})();h.Chunk=function(d,g){h.isArray(d)&&(d=[]);g=h.extend({},{size:256,every:1E3},g);var b=h.extend(h.Deferred(),{size:g.size,every:g.every,from:0,to:d.length,process:function(a){b.process.fn=a;return b},chunkStart:function(a){b.chunkStart.fn=a;return b},chunkEnd:function(a){b.chunkEnd.fn=a;return b},start:function(){b.stopped=
!1;b.iterate();return b},iterate:function(){if(!b.stopped){var a=b.process.fn;if(a){b.to=from.size+b.size;var c=d.length;b.to>c&&(b.to=c);var c=b.from,e=b.to;for(b.chunkStart.fn&&b.chunkStart.fn.call(b,c,e);b.from<b.to&&!b.stopped;)a.call(b,d[b.from]),b.from++;b.chunkEnd.fn&&b.chunkEnd.fn.call(b,c,e);b.completed=b.from>=d.length-1;b.completed?b.resolveWith(b):b.nextIteration=setTimeout(b.iterate,b.every);return b}}},pause:function(){b.stopped=!0;clearTimeout(b.nextIteration);return b},restart:function(){if("rejected"===
b.state())return b;b.from=0;b.start();return b},stop:function(){b.pause();b.rejectWith(b,[b.from]);return b}});return b};h.fn.disabled=function(d){return void 0===d?this.is(":disabled")||this.hasClass("disabled"):this.prop("disabled",!!d).toggleClass("disabled",!!d)};h.fn.enabled=function(d){return void 0===d?!this.disabled():this.disabled(!d)};(function(){var d=h.Ajax=function(g){var b=h.Deferred(),a=arguments;h.isPlainObject(g)&&h.isFunction(g.beforeCreate)&&g.beforeCreate(b);d.queue.addDeferred(function(c){b.xhr=
h.ajax.apply(null,a).pipe(b.resolve,b.reject,b.notify);setTimeout(c.resolve,d.requestInterval)});return b};d.queue=h.Threads({threadLimit:1});d.requestInterval=1200})();h.callback=function(d,g){if(h.isFunction(d)){var b=h.uid("cb");window[b]=function(){g||delete window[b];return d.apply(null,arguments)};return b}if(h.isString(d))switch(d){case "destroy":b=g,delete window[b]}};h.fn.visible=function(d){var g=h(this),b=h(window);if(!(1>g.length)){var a=b.scrollTop(),b=a+b.height(),c=g.offset().top,g=
c+g.height();return(!0===d?c:g)<=b&&(!0===d?g:c)>=a}};h.fn.selectAll=function(){return this.each(function(){this.select()})};h.fn.unselect=function(){return this.each(function(){var d=this.value;this.value+=" ";this.value=d})};h.fn.addTransitionClass=function(d,g){var b=this.addClass(d);setTimeout(function(){b.removeClass(d)},g||0);return this};h.fn.switchClass=function(d,g){g=g||"-";var b=d.split(g)[0]+g,a=b.length;return this.each(function(){var c=h(this),e=h.map(c.attr("class").split(" "),function(c){return c.slice(0,
a)==b||""==c?null:c});e.push(d);c.attr("class",e.join(" "))})};h.sanitizeHTML=function(d){return h(h.parseHTML(d)).toHTML()};h.buildHTML=function(d,g){if(d instanceof h)return d;d=h.trim(d);var b=[],a=h.buildFragment([d],document,b),a=h.merge([],a.childNodes);if(!g&&0<b.length){var c=document.createElement("script");c.text=h.callback(function(){h(b).remove()})+"();";for(var e=a.length-1,f,k;(f=a[e--])&&("SCRIPT"===f.nodeName?k=a.push(c):1===f.nodeType&&(k=f.appendChild(c)),!k););k||a.push(c);b.push(c)}return h(a)};
h.fn.filterBy=function(d,g,b){b=b||"=";d="[data-"+d.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+b+g+"]";return this.filter(d)};h.intersects=function(d,g){h.isArray(g)&&(g={top:g.y,left:g.x,bottom:g.y,right:g.x});return g.left<=d.right&&d.left<=g.right&&g.top<=d.bottom&&d.top<=g.bottom};h.fn.intersectsWith=function(d,g,b,a){var c=this.offset(),c={top:c.top,left:c.left,bottom:c.top+(sourceHeight=this.height()),right:c.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight};d={top:d,
left:g,bottom:d+(a||(a=0)),right:g+(b||(b=0)),width:b,height:a};return h.intersects(c,d)?{reference:c,subject:d}:!1};h.download=function(d){return h("<iframe>").hide().appendTo("body").bind("load",function(){h(this).remove()}).attr("src",d)}});
FD31.plugin("uri",function(h){h.isUrl=function(b){return/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(b)};var d=function(b){var a=function(a){var b=[],c,e,f,d;if("undefined"===typeof a||null===a||""===a)return b;0===a.indexOf("?")&&(a=a.substring(1));c=a.toString().split(/[&;]/);for(a=0;a<c.length;a++)e=c[a],f=e.split("="),d=f[0],e=-1===e.indexOf("=")?null:null===f[1]?"":f[1],b.push([d,e]);return b}(b),c=function(a){a=decodeURIComponent(a);return a=a.replace("+",
" ")},e=function(b,e){var f=[],d,g,h,q;for(d=0;d<a.length;d++)g=a[d],h=c(g[0])===c(b),q=c(g[1])===c(e),(1===arguments.length&&!h||2===arguments.length&&!h&&!q)&&f.push(g);a=f;return this},f=function(b,c,e){3===arguments.length&&-1!==e?(e=Math.min(e,a.length),a.splice(e,0,[b,c])):0<arguments.length&&a.push([b,c]);return this};return{getParamValue:function(b){var e,f;for(f=0;f<a.length;f++)if(e=a[f],c(b)===c(e[0]))return e[1]},getParamValues:function(b){var e=[],f,d;for(f=0;f<a.length;f++)d=a[f],c(b)===
c(d[0])&&e.push(d[1]);return e},deleteParam:e,addParam:f,replaceParam:function(b,d,g){var h=-1,r,u;if(3===arguments.length){for(r=0;r<a.length;r++)if(u=a[r],c(u[0])===c(b)&&decodeURIComponent(u[1])===c(g)){h=r;break}e(b,g).addParam(b,d,h)}else{for(r=0;r<a.length;r++)if(u=a[r],c(u[0])===c(b)){h=r;break}e(b);f(b,d,h)}return this},toString:function(){var b="",c,e;for(c=0;c<a.length;c++)e=a[c],0<b.length&&(b+="&"),b=null===e[1]?b+e[0]:b+e.join("=");return 0<b.length?"?"+b:b}}},g=function(b){var a=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,
c=function(a){var b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a);for(var c={},e=14;e--;)c[b[e]]=a[e]||"";c.queryKey={};c[b[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,e){b&&(c.queryKey[b]=e)});return c}(b||""),e=new d(c.query),
f=function(a){"undefined"!==typeof a&&(c.protocol=a);return c.protocol},k=null,n=function(a){"undefined"!==typeof a&&(k=a);return null===k?-1!==c.source.indexOf("//"):k},p=function(a){"undefined"!==typeof a&&(c.userInfo=a);return c.userInfo},h=function(a){"undefined"!==typeof a&&(c.host=a);return c.host},r=function(a){"undefined"!==typeof a&&(c.port=a);return c.port},u=function(a){"undefined"!==typeof a&&(c.path=a);return c.path},q=function(a){"undefined"!==typeof a&&(e=new d(a));return e},t=function(a){"undefined"!==
typeof a&&(c.anchor=a);return c.anchor},m=function(){var a="",b=function(a){return null!==a&&""!==a};b(f())?(a+=f(),f().indexOf(":")!==f().length-1&&(a+=":"),a+="//"):n()&&b(h())&&(a+="//");b(p())&&b(h())&&(a+=p(),p().indexOf("@")!==p().length-1&&(a+="@"));b(h())&&(a+=h(),b(r())&&(a+=":"+r()));b(u())?a+=u():b(h())&&(b(q().toString())||b(t()))&&(a+="/");b(q().toString())&&(0!==q().toString().indexOf("?")&&(a+="?"),a+=q().toString());b(t())&&(0!==t().indexOf("#")&&(a+="#"),a+=t());return a};return{protocol:f,
hasAuthorityPrefix:n,userInfo:p,host:h,port:r,path:u,query:q,anchor:t,setProtocol:function(a){f(a);return this},setHasAuthorityPrefix:function(a){n(a);return this},setUserInfo:function(a){p(a);return this},setHost:function(a){h(a);return this},setPort:function(a){r(a);return this},setPath:function(a){u(a);return this},setQuery:function(a){q(a);return this},setAnchor:function(a){t(a);return this},getQueryParamValue:function(a){return q().getParamValue(a)},getQueryParamValues:function(a){return q().getParamValues(a)},
deleteQueryParam:function(a,b){2===arguments.length?q().deleteParam(a,b):q().deleteParam(a);return this},addQueryParam:function(a,b,c){3===arguments.length?q().addParam(a,b,c):q().addParam(a,b);return this},replaceQueryParam:function(a,b,c){3===arguments.length?q().replaceParam(a,b,c):q().replaceParam(a,b);return this},extract:function(c){var e=b.match(a)||[];return void 0===c?e:e[c]||""},toPath:function(a){if(void 0===a)return c.path;if("/"==a.substring(0,1))return c.path=a;var b=c.path.split("/");
a=a.split("/");""===b.slice(-1)[0]&&b.pop();for(var e;e=a.shift();)switch(e){case "..":1<b.length&&b.pop();break;case ".":break;default:b.push(e)}c.path=b.join("/");return this},toString:m,clone:function(){return new g(m())}}};h.uri=function(b){return new g(b)}});
FD31.plugin("mvc",function(h){(function(){var d={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},g=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},b,a=h.String=h.extend(h.String||{},{getObject:b=function(a,b,f){a=a?a.split(d.dot):[];var k=a.length,n,p,s,r=0;b=h.isArray(b)?b:[b||window];if(0==k)return b[0];for(;n=b[r++];){for(s=0;s<k-1&&g(n);s++)n=void 0!==n[a[s]]?n[a[s]]:f&&(n[a[s]]={});
if(g(n)&&(p=void 0!==n[a[s]]?n[a[s]]:f&&(n[a[s]]={}),void 0!==p))return!1===f&&delete n[a[s]],p}},capitalize:function(a,b){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(b){b=a.classize(b);return b.charAt(0).toLowerCase()+b.substr(1)},classize:function(b,e){for(var f=b.split(d.undHash),k=0;k<f.length;k++)f[k]=a.capitalize(f[k]);return f.join(e||"")},niceName:function(b){return a.classize(b," ")},underscore:function(a){return a.replace(d.colons,"/").replace(d.words,"$1_$2").replace(d.lowUp,
"$1_$2").replace(d.dash,"_").toLowerCase()},sub:function(a,e,f){var k=[];k.push(a.replace(d.replacer,function(a,c){var d=b(a,e,"boolean"==typeof f?!f:f)||b(c,e,"boolean"==typeof f?!f:f),g=typeof d;if("object"!==g&&"function"!==g||null===g)return""+d;k.push(d);return""}));return 1>=k.length?k[0]:k},_regs:d})})();(function(){h.String.rsplit=function(d,g){for(var b=g.exec(d),a=[],c;null!==b;)c=b.index,0!==c&&(a.push(d.substring(0,c)),d=d.slice(c)),a.push(b[0]),d=d.slice(b[0].length),b=g.exec(d);""!==
d&&a.push(d);return a}})();(function(){var d=/^\d+$/,g=/([^\[\]]+)|(\[\])/g,b=/\+/g,a=/([^?#]*)(#.*)?$/;h.String=h.extend(h.String||{},{deparam:function(c){if(!c||!a.test(c))return{};var e={};c=c.split("&");for(var f,k=0;k<c.length;k++){f=e;var n=c[k].split("=");2!=n.length&&(n=[n[0],n.slice(1).join("=")]);for(var p=decodeURIComponent(n[0].replace(b," ")),n=decodeURIComponent(n[1].replace(b," ")),p=p.match(g),h=0;h<p.length-1;h++){var r=p[h];f[r]||(f[r]=d.test(p[h+1])||"[]"==p[h+1]?[]:{});f=f[r]}lastPart=
p[p.length-1];"[]"==lastPart?f.push(n):f[lastPart]=n}return e}})})();(function(){h.fn.triggerAsync=function(a,b,e,f){"function"==typeof b&&(e=b,b=void 0);if(this[0]){var d=h.Event(a),n=d.preventDefault;d.preventDefault=function(){n.apply(this,arguments);f&&f(this)};h.event.trigger({type:a,_success:e},b,this[0])}else e.call(this);return this};var d=/\.(.*)$/,g=h.event;g.special["default"]={add:function(a){a.namespace.replace(d,"")},setup:function(){return!0}};var b=g.trigger;g.trigger=function(a,c,
e,f){var d=a.type||a;a="object"===typeof a?a[h.expando]?a:new h.Event(d,a):new h.Event(d);d=b.call(h.event,a,c,e,f);f||a.isDefaultPrevented()||0===a.type.indexOf("default")||(b("default."+a.type,c,e),a._success&&a._success(a));a.isPaused&&a.isPaused()&&(a.isDefaultPrevented=a.pausedState.isDefaultPrevented,a.isPropagationStopped=a.pausedState.isPropagationStopped);return d}})();(function(){var d=h.cleanData;h.cleanData=function(g){for(var b=0,a;void 0!==(a=g[b]);b++)h(a).triggerHandler("destroyed");
d(g)}})();(function(){function d(b){b=b||window[a][c];return b.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var g,b=h.event.special,a="location",c="href",e=document.documentMode,f=h.browser.msie&&(void 0===e||8>e),k="onhashchange"in window&&!f;h.hashchangeDelay=100;b.hashchange=h.extend(b.hashchange,{setup:function(){if(k)return!1;h(g.start)},teardown:function(){if(k)return!1;h(g.stop)}});g=function(){function b(){u=q=function(a){return a};f&&(g=h('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,
q=function(){return d(g.document[a][c])},u=function(b,c){if(b!==c){var e=g.document;e.open().close();e[a].hash="#"+b}},u(d()))}var e={},k,g,u,q;e.start=function(){if(!k){var e=d();u||b();navigator.userAgent.match(/Rhino/)||function v(){var b=d(),f=q(e);b!==e?(u(e=b,f),h(window).trigger("hashchange")):f!==e&&(window[a][c]=window[a][c].replace(/#.*/,"")+"#"+f);k=setTimeout(v,h.hashchangeDelay)}()}};e.stop=function(){g||(k&&clearTimeout(k),k=0)};return e}()})();(function(){var d={},g={};h.event.key=
function(b){h.extend(d,b);for(var a in b)g[b[a]]=a};h.event.key({"\b":"8","\t":"9","\r":"13",shift:"16",ctrl:"17",alt:"18","pause-break":"19",caps:"20",escape:"27","num-lock":"144","scroll-lock":"145",print:"44","page-up":"33","page-down":"34",end:"35",home:"36",left:"37",up:"38",right:"39",down:"40",insert:"45","delete":"46"," ":"32",0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",
o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90",num0:"96",num1:"97",num2:"98",num3:"99",num4:"100",num5:"101",num6:"102",num7:"103",num8:"104",num9:"105","*":"106","+":"107","-":"109",".":"110","/":"111",";":"186","=":"187",",":"188","-":"189",".":"190","/":"191","`":"192","[":"219","\\":"220","]":"221","'":"222","left window key":"91","right window key":"92","select key":"93",f1:"112",f2:"113",f3:"114",f4:"115",f5:"116",f6:"117",f7:"118",f8:"119",f9:"120",f10:"121",
f11:"122",f12:"123"});h.Event.prototype.keyName=function(){var b=/\w/,a=g[(this.keyCode||this.which)+""],c=String.fromCharCode(this.keyCode||this.which),e=this.charCode&&g[this.charCode+""],f=this.charCode&&String.fromCharCode(this.charCode);return f&&b.test(f)||e&&b.test(e)?f.toLowerCase():c&&b.test(c)?c.toLowerCase():a&&b.test(a)?a.toLowerCase():"keypress"==this.type?this.keyCode?String.fromCharCode(this.keyCode):String.fromCharCode(this.which):!this.keyCode&&this.which?String.fromCharCode(this.which):
g[this.keyCode+""]}})();(function(){var d=h.event,g=function(b,a,c,e){var f,d,n,g,h,r,u,q;for(f=0;f<a.length;f++)for(d=a[f],g=0>d.indexOf("."),g||(n=d.split("."),d=n.shift(),u=RegExp("(^|\\.)"+n.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")),n=(b[d]||[]).slice(0),h=0;h<n.length;h++)r=n[h],(q=g||u.test(r.namespace))&&(e?r.selector===e&&c(d,r.origHandler||r.handler):null===e?c(d,r.origHandler||r.handler,r.selector):r.selector||c(d,r.origHandler||r.handler))};d.find=function(b,a,c){b=(h._data(b)||
{}).events;var e=[];if(!b)return e;g(b,a,function(a,b){e.push(b)},c);return e};d.findBySelector=function(b,a){var c=h._data(b).events,e={};if(!c)return e;g(c,a,function(a,b,c){c=c||"";c=e[c]||(e[c]={});(c[a]||(c[a]=[])).push(b)},null);return e};d.supportTouch="ontouchend"in document;h.fn.respondsTo=function(b){return this.length?0<d.find(this[0],h.isArray(b)?b:[b]).length:!1};h.fn.triggerHandled=function(b,a){b="string"==typeof b?h.Event(b):b;this.trigger(b,a);return b.handled};d.setupHelper=function(b,
a,c){c||(c=a,a=null);var e=function(e){var f=e.selector||"";f?(e=d.find(this,b,f),e.length||h(this).delegate(f,a,c)):d.find(this,b,f).length||d.add(this,a,c,{selector:f,delegate:this})},f=function(e){var f=e.selector||"";f?(e=d.find(this,b,f),e.length||h(this).undelegate(f,a,c)):d.find(this,b,f).length||d.remove(this,a,c,{selector:f,delegate:this})};h.each(b,function(){d.special[this]={add:e,remove:f,setup:function(){},teardown:function(){}}})}})();(function(){var d=function(){return!1},g=function(){return!0};
h.Event.prototype.isPaused=d;h.Event.prototype.pause=function(){this.pausedState={isDefaultPrevented:this.isDefaultPrevented()?g:d,isPropagationStopped:this.isPropagationStopped()?g:d};this.stopImmediatePropagation();this.preventDefault();this.isPaused=g};h.Event.prototype.resume=function(){var b=this.handleObj,a=this.currentTarget,c=h.event.special[b.origType],e=c&&c.handle;c||(h.event.special[b.origType]={});h.event.special[b.origType].handle=function(f){f.handleObj===b&&f.currentTarget===a&&(c?
h.event.special[b.origType].handle=e:delete h.event.special[b.origType])};delete this.pausedState;this.isPaused=this.isImmediatePropagationStopped=d;this.isPropagationStopped()||h.event.trigger(this,[],this.target)}})();(function(){var d=h(),g=0,b=h(window),a=0,c=0,e;h(function(){a=b.width();c=b.height()});h.event.special.resize={setup:function(a){this!==window&&(d.push(this),h.unique(d));return this!==window},teardown:function(){d=d.not(this);return this!==window},add:function(f){f.origHandler=f.handler;
f.handler=function(k,n){var p=this===window;if(p&&k.originalEvent){var p=b.width(),s=b.height();if(p!=a||s!=c)a=p,c=s,clearTimeout(e),e=setTimeout(function(){b.trigger("resize")},1)}else if(0===g){g++;s=!1===n?k.target:this;h.event.handle.call(s,k);if(!k.isPropagationStopped()){for(var r=d.index(this),u=d.length,q,t;++r<u&&(q=d[r])&&(p||h.contains(s,q));)if(h.event.handle.call(q,k),k.isPropagationStopped())for(;++r<u&&(t=d[r]);)if(!h.contains(q,t)){r--;break}k.stopImmediatePropagation()}g--}else f.origHandler.call(this,
k,n)}}};h([document,window]).bind("resize",function(){})})();(function(){var d=h.fn.closest;h.fn.closest=function(g,b){var a={},c,e,f,k,n=!0,p=g;"string"==typeof g&&(p=[g]);h.each(p,function(b,c){if(0==c.indexOf(">")){if(-1!=c.indexOf(" "))throw" closest does not work with > followed by spaces!";a[p[b]=c.substr(1)]=c;"string"==typeof g&&(g=c.substr(1));n=!1}});c=d.call(this,g,b);if(n)return c;for(f=0;f<c.length;){e=c[f];k=e.selector;if(void 0!==a[k]&&(e.selector=a[k],a[k]=!1,"string"!==typeof e.selector||
e.elem.parentNode!==b)){c.splice(f,1);continue}f++}return c}})();(function(){h.cookie=function(d,g,b){if("undefined"!=typeof g){b=b||{};null===g&&(g="",b.expires=-1);"object"==typeof g&&jQuery.toJSON&&(g=jQuery.toJSON(g));var a="";b.expires&&("number"==typeof b.expires||b.expires.toUTCString)&&("number"==typeof b.expires?(a=new Date,a.setTime(a.getTime()+864E5*b.expires)):a=b.expires,a="; expires="+a.toUTCString());var c=b.path?"; path="+b.path:"",e=b.domain?"; domain="+b.domain:"";b=b.secure?"; secure":
"";document.cookie=[d,"=",encodeURIComponent(g),a,c,e,b].join("")}else{g=null;if(document.cookie&&""!=document.cookie)for(b=document.cookie.split(";"),a=0;a<b.length;a++)if(c=jQuery.trim(b[a]),c.substring(0,d.length+1)==d+"="){g=decodeURIComponent(c.substring(d.length+1));break}if(jQuery.evalJSON&&g&&g.match(/^\s*\{/))try{g=jQuery.evalJSON(g)}catch(f){}return g}}})();(function(){h.fn.compare=function(d){try{d=d.jquery?d[0]:d}catch(g){return null}if(window.HTMLElement){var b=HTMLElement.prototype.toString.call(d);
if("[xpconnect wrapped native prototype]"==b||"[object XULElement]"==b||"[object Window]"===b)return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(d);if(this[0]==document&&d!=document)return 8;var b=(this[0]!==d&&this[0].contains(d)&&16)+(this[0]!=d&&d.contains(this[0])&&8),a=document.documentElement;if(this[0].sourceIndex)b+=this[0].sourceIndex<d.sourceIndex&&4,b+=this[0].sourceIndex>d.sourceIndex&&2,b+=(this[0].ownerDocument!==d.ownerDocument||this[0]!=a&&0>=this[0].sourceIndex||
d!=a&&0>=d.sourceIndex)&&1;else{var a=document.createRange(),c=document.createRange();a.selectNode(this[0]);c.selectNode(d);a.compareBoundaryPoints(Range.START_TO_START,c)}return b}})();(function(){var d=document.defaultView&&document.defaultView.getComputedStyle,g=/([A-Z])/g,b=/-([a-z])/ig,a=function(a,b){return b.toUpperCase()},c=/float/i,e=/^-?\d+(?:px)?$/i,f=/^-?\d/;h.curStyles=function(k,n){if(!k)return null;var p;p=d?d(k,null):k.currentStyle?k.currentStyle:void 0;for(var s,r,u=k.style,q={},
t=0,m,v;t<n.length;t++)m=n[t],s=m.replace(b,a),c.test(m)&&(m=h.support.cssFloat?"float":"styleFloat",s="cssFloat"),d?(m=m.replace(g,"-$1").toLowerCase(),r=p.getPropertyValue(m),"opacity"===m&&""===r&&(r="1"),q[s]=r):(r=m.replace(b,a),q[s]=p[m]||p[r],!e.test(q[s])&&f.test(q[s])&&(m=u.left,v=k.runtimeStyle.left,k.runtimeStyle.left=k.currentStyle.left,u.left="fontSize"===r?"1em":q[s]||0,q[s]=u.pixelLeft+"px",u.left=m,k.runtimeStyle.left=v));return q};h.fn.curStyles=function(){return h.curStyles(this[0],
h.makeArray(arguments))}})();(function(){h.fn.range=function(){return h.Range(this[0])};var d=function(a){return a.replace(/([a-z])([a-z]+)/gi,function(a,b,c){return b+c.toLowerCase()}).replace(/_/g,"")},g=function(a){return a.replace(/^([a-z]+)_TO_([a-z]+)/i,function(a,b,c){return c+"_TO_"+b})},b={};h.Range=function(a){if(this.constructor!==h.Range)return new h.Range(a);a&&a.jquery&&(a=a[0]);!a||a.nodeType?(this.win=a?a.ownerDocument.defaultView||a.ownerDocument.parentWindow:window,this.range=this.win.document.createRange?
this.win.document.createRange():this.win.document.body.createTextRange(),a&&this.select(a)):null!=a.clientX||null!=a.pageX||null!=a.left?this.moveToPoint(a):a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length?this.moveToPoint(a.originalEvent.touches[0]):a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length?this.moveToPoint(a.originalEvent.changedTouches[0]):this.range=a};h.Range.current=function(a){a=a?a.ownerDocument.defaultView||a.ownerDocument.parentWindow:
window;var b;return a.getSelection?(b=a.getSelection(),new h.Range(b.rangeCount?b.getRangeAt(0):a.document.createRange())):new h.Range(a.document.selection.createRange())};h.extend(h.Range.prototype,{moveToPoint:function(c){var d=c.clientX,n=c.clientY;d||(n=e(),d=(c.pageX||c.left||0)-n.left,n=(c.pageY||c.top||0)-n.top);if(b.moveToPoint)return this.range=h.Range().range,this.range.moveToPoint(d,n),this;for(var g=document.elementFromPoint(d,n),s=0;s<g.childNodes.length;s++){var r=g.childNodes[s];if(3===
r.nodeType||4===r.nodeType)for(var r=h.Range(r),u=r.toString().length,q=1;q<u+1;q++){var t=r.end(q).rect();if(t.left<=d&&t.left+t.width>=d&&t.top<=n&&t.top+t.height>=n){r.start(q-1);this.range=r.range;return}}}var m;a(g.childNodes,function(a){a=h.Range(a);if(a.rect().top>c.clientY)return!1;m=a});m?(m.start(m.toString().length),this.range=m.range):this.range=h.Range(g).range},window:function(){return this.win||window},overlaps:function(a){a.nodeType&&(a=h.Range(a).select(a));var b=this.compare("START_TO_START",
a),c=this.compare("END_TO_END",a);return 0>=b&&0<=c||0<=b&&0>=this.compare("START_TO_END",a)||0<=this.compare("END_TO_START",a)&&0>=c?!0:!1},collapse:function(a){this.range.collapse(void 0===a?!0:a);return this},toString:function(){return"string"==typeof this.range.text?this.range.text:this.range.toString()},start:function(a){if(void 0===a){if(this.range.startContainer)return{container:this.range.startContainer,offset:this.range.startOffset};a=this.clone().collapse().parent();var b=h.Range(a).select(a).collapse();
b.move("END_TO_START",this);return{container:a,offset:b.toString().length}}if(this.range.setStart)"number"==typeof a?this.range.setStart(this.range.startContainer,a):"string"==typeof a?this.range.setStart(this.range.startContainer,this.range.startOffset+parseInt(a,10)):this.range.setStart(a.container,a.offset);else throw"todo";return this},end:function(a){if(void 0===a){if(this.range.startContainer)return{container:this.range.endContainer,offset:this.range.endOffset};a=this.clone().collapse(!1).parent();
var b=h.Range(a).select(a).collapse();b.move("END_TO_END",this);return{container:a,offset:b.toString().length}}if(this.range.setEnd)"number"==typeof a?this.range.setEnd(this.range.endContainer,a):this.range.setEnd(a.container,a.offset);else throw"todo";return this},parent:function(){if(this.range.commonAncestorContainer)return this.range.commonAncestorContainer;var b=this.range.parentElement(),c=this.range;a(b.childNodes,function(a){if(h.Range(a).range.inRange(c))return b=a,!1});return b},rect:function(a){var b=
this.range.getBoundingClientRect();"page"===a&&(a=e(),b=h.extend({},b),b.top+=a.top,b.left+=a.left);return b},rects:function(a){for(var b=h.makeArray(this.range.getClientRects()).sort(function(a,b){return b.width*b.height-a.width*a.height}),d=0,g;d<b.length;){var s=b[d],r=!1;g=d+1;for(g=d+1;g<b.length;g++)if(c(s,{clientX:b[g].left,clientY:b[g].top})&&c(s,{clientX:b[g].left+b[g].width,clientY:b[g].top})&&c(s,{clientX:b[g].left,clientY:b[g].top+b[g].height})&&c(s,{clientX:b[g].left+b[g].width,clientY:b[g].top+
b[g].height})){r=b[g];break}r?b.splice(d,1):d++}if("page"==a){var u=e();return h.map(b,function(a){a=h.extend({},a);a.top+=u.top;a.left+=u.left;return a})}return b}});(function(){var b=h.Range.prototype,c=h.Range().range;b.compare=c.compareBoundaryPoints?function(a,b){return this.range.compareBoundaryPoints(this.window().Range[g(a)],b.range)}:function(a,b){return this.range.compareEndPoints(d(a),b.range)};b.move=c.setStart?function(a,b){var c=b.range;switch(a){case "START_TO_END":this.range.setStart(c.endContainer,
c.endOffset);break;case "START_TO_START":this.range.setStart(c.startContainer,c.startOffset);break;case "END_TO_END":this.range.setEnd(c.endContainer,c.endOffset);break;case "END_TO_START":this.range.setEnd(c.startContainer,c.startOffset)}return this}:function(a,b){this.range.setEndPoint(d(a),b.range);return this};var e=c.cloneRange?"cloneRange":"duplicate";b.clone=function(){return h.Range(this.range[e]())};b.select=c.selectNodeContents?function(a){a?this.range.selectNodeContents(a):this.window().getSelection().addRange(this.range);
return this}:function(b){if(b)if(3===b.nodeType){var c=b.parentNode,e=0,f;a(c.childNodes,function(a){if(a===b)return f=e+a.nodeValue.length,!1;e+=a.nodeValue.length});this.range.moveToElementText(c);this.range.moveEnd("character",f-this.range.text.length);this.range.moveStart("character",e)}else this.range.moveToElementText(b);else this.range.select();return this}})();var a=function(b,c){for(var e,d=0;b[d];d++)if(e=b[d],3===e.nodeType||4===e.nodeType){if(!1===c(e))return!1}else if(8!==e.nodeType&&
!1===a(e.childNodes,c))return!1},c=function(a,b){return a.left<=b.clientX&&a.left+a.width>=b.clientX&&a.top<=b.clientY&&a.top+a.height>=b.clientY},e=function(a){a=a||window;doc=a.document.documentElement;body=a.document.body;return{left:(doc&&doc.scrollLeft||body&&body.scrollLeft||0)+(doc.clientLeft||0),top:(doc&&doc.scrollTop||body&&body.scrollTop||0)+(doc.clientTop||0)}};b.moveToPoint=!!h.Range().range.moveToPoint})();(function(){h.fn.within=function(d,g,b){var a=[];this.each(function(){var c=h(this);
if(this==document.documentElement)return a.push(this);c=b?h.data(this,"offsetCache")||h.data(this,"offsetCache",c.offset()):c.offset();g>=c.top&&g<c.top+this.offsetHeight&&d>=c.left&&d<c.left+this.offsetWidth&&a.push(this)});return this.pushStack(h.unique(a),"within",d+","+g)};h.fn.withinBox=function(d,g,b,a,c){var e=[];this.each(function(){var f=h(this);if(this==document.documentElement)return this.ret.push(this);var k=c?h.data(this,"offset")||h.data(this,"offset",f.offset()):f.offset(),n=f.width(),
f=f.height();(res=!(k.top>g+a||k.top+f<g||k.left>d+b||k.left+n<d))&&e.push(this)});return this.pushStack(h.unique(e),"withinBox",h.makeArray(arguments).join(","))}})();(function(){var d=!1,g=h.makeArray,b=h.isFunction,a=h.isArray,c=h.extend,e=h.String.getObject,f=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,k=function(a,c,e){e=e||a;for(var d in a)e[d]=b(a[d])&&b(c[d])&&f.test(a[d])?function(a,b){return function(){var e=this._super,f;this._super=c[a];f=b.apply(this,arguments);this._super=e;return f}}(d,
a[d]):a[d]};clss=h.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)};c(clss,{proxy:function(b){var c=g(arguments),e;b=c.shift();a(b)||(b=[b]);e=this;return function(){for(var f=c.concat(g(arguments)),d,k=b.length,h=0,m;h<k;h++)if(m=b[h])(d="string"==typeof m)&&e._set_called&&(e.called=m),f=(d?e[m]:m).apply(e,f||[]),h<k-1&&(f=!a(f)||f._use_call?[f]:f);return f}},newInstance:function(){var b=this.rawInstance(),c;b.setup&&(c=b.setup.apply(b,arguments));b.init&&b.init.apply(b,a(c)?
c:arguments);return b},setup:function(a,b){this.defaults=c(!0,{},a.defaults,this.defaults);return arguments},rawInstance:function(){d=!0;var a=new this;d=!1;return a},extend:function(a,b,f){function r(){if(!d)return this.constructor!==r&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}"string"!=typeof a&&(f=b,b=a,a=null);f||(f=b,b=null);f=f||{};var u=this.prototype,q,t,m,v;d=!0;v=new this;d=!1;k(f,u,v);for(q in this)this.hasOwnProperty(q)&&
(r[q]=this[q]);k(b,this,r);if(a){var z;b&&b.root&&(z=b.root,h.isString(z)&&(z=e(z,window,!0)));m=a.split(/\./);t=m.pop();m=z=e(m.join("."),z||window,!0);c(!0,r,z[t]);z[t]=r}c(r,{prototype:v,namespace:m,shortName:t,constructor:r,fullName:a});r.prototype.Class=r.prototype.constructor=r;t=r.setup.apply(r,[this].concat(g(arguments)));r.init&&r.init.apply(r,t||[this].concat(g(arguments)));return r}});clss.callback=clss.prototype.callback=clss.prototype.proxy=clss.proxy})();(function(){var d=function(b,
c,e){var f,d=b.bind&&b.unbind?b:h(a(b)?[b]:b);0===c.indexOf(">")&&(c=c.substr(1),f=function(a){a.target===b&&e.apply(this,arguments)});d.bind(c,f||e);return function(){d.unbind(c,f||e);b=c=e=f=null}},g=h.makeArray,b=h.isArray,a=h.isFunction,c=h.isString,e=h.extend,f=h.String,k=h.each,n=f.getObject,p=Array.prototype.slice,s=function(b,c,e,f){0===c.indexOf(">")&&(c=(b.data("directSelector")+" "||"")+c);var d=b.delegate&&b.undelegate?b:h(a(b)?[b]:b);d.delegate(c,e,f);return function(){d.undelegate(c,
e,f);d=b=e=f=c=null}},r=function(a,b){var c="string"==typeof b?a[b]:b;return function(){a.called=b;return c.apply(a,[this.nodeName?h(this):this].concat(p.call(arguments,0)))}},u=/\./g,q=/_?controllers?/ig,t=function(a){return f.underscore(a.replace(h.globalNamespace+".","").replace(u,"_").replace(q,""))},m=/^\S(.*)\s(.*)/,v=/\{([^\}]+)\}/g,z=/\{([^\.]+[\.][^\.]+)\}/g,A=/^(?:(.*?)\s)?([\w\.\:>]+)$/,w,B=function(a,b){return h.data(a,"controllers",b)},x=h.globalNamespace+".Controller";h.Controller=function(a){var b=
g(arguments),c={root:x};2<b.length?(c=h.extend(c,b[1]),b=b[2]):b=b[1];c.namespace&&(a=c.namespace+"."+a);return h.Controller.Class(a,c,b)};var R=x+".Class";h.Class(R,{setup:function(b,e){this._super.apply(this,arguments);if(this.shortName&&this.fullName!=R){this._fullName=t(this.fullName);this._shortName=t(this.shortName);var f=this,d;if(c(this.pluginName)){var k=this._fullName,n=this.pluginName;h.fn[n]||(h.fn[n]=function(a){var b=g(arguments);if(h.isString(a)&&"controller"===a){var c=B(this[0]);
return c&&c[k]}return this.each(function(){var c=B(this);if(c=c&&c[k])if(h.isString(a)){var e=c[a];h.isFunction(e)&&e.apply(c,b.slice(1))}else c.update.apply(c,b);else f.newInstance.apply(f,[this].concat(b))})})}var m=g(arguments),n=this.prototype,m=m[3<m.length?3:2];a(m)&&(this.protoFactory=m,n=this.protoFactory.call(this,null));this.actions={};for(d in n)"constructor"!=d&&a(n[d])&&this._isAction(d)&&(this.actions[d]=this._action(d));h.module("$:/Controllers/"+this.fullName).resolve(this)}},hookup:function(a){return new this(a)},
_isAction:function(a){return m.test(a)?!0:-1<h.inArray(a,this.listensTo)||h.event.special[a]||S[a]},_action:function(a,c){v.lastIndex=0;if(!c&&v.test(a))return null;var e=a=a.replace("{self} ","");if(c){var d=!1;if(z.test(a))var k,n="",e=a.replace(z,function(a,b){var e=b.split(".");k=c["{"+e[0]+"}"]||{};h.isControllerInstance(k)&&(n=(k[e[1]]||{}).selector);return n}).match(A),d=!!n,e=[k.element].concat(e||[]);d||(e=f.sub(a,[c,window]))}var d=b(e),g=(d?e[1]:e).match(A);return{processor:S[g[2]]||w,
parts:g,delegate:d?e[0]:void 0}},processors:{},listensTo:[],defaults:{},hostname:"parent"},{setup:function(a,b){var f=this,d=f.constructor,n=f.prototype;f.instanceId=h.uid(q+"_");var m=f.options=e(!0,{},d.defaults,d.defaultOptions,b),p=f.element=h(a);d.protoFactory&&(n=d.protoFactory.apply(d,[f,m,p]),e(!0,f,n));var q=d._fullName;(B(a)||B(a,{}))[q]=f;p.data("directSelector")||(n=h.uid("DS"),p.addClass(n).data("directSelector","."+n));for(name in m)name.match(/^\{.+\}$/)&&(n=name.replace(/^\{|\}$/g,
""),q=m[name],c(q)?f[n]=function(a,b,c){b=/^(\.|\#)$/.test(b)?b+c:b;var e=function(c){var e=a.element.find(b);c&&(e=e.filter(c));return e};e.selector=b;e.css=function(){var a=e.cssRule;if(!a){var c=p.data("directSelector"),a=h.map(b.split(","),function(a){return c+" "+a}),a=e.cssRule=h.cssRule(a);a.important=!0}return arguments.length?a.css.apply(a,arguments):a};return e}(f,q,n):f[n]=q);var n=m.view,r=f.view;f.view=function(){return r.apply(this,arguments)};k(n||{},function(a,b){f.view[a]=function(b){var c=
g(arguments);h.isBoolean(b)?c=c.slice(1):b=!1;return f.view.apply(f,[b,a].concat(c))}});h.extend(f,m.controller);f.pluginInstances={};f.called="init";f._bind();var s=f.init||h.noop;f.init=function(){f.init=s;result=s.apply(f,arguments);f.trigger("init."+d.fullName.toLowerCase(),[f]);return result};return[p,m].concat(g(arguments).slice(2))},on:function(a){var b=g(arguments),e=this.element,f=b.length;return 2==f?this._binder(e,a,b[1]):3==f&&c(b[1])?this._binder(e,a,b[2],b[1]):this._binder(b[1],a,b[2])},
_bind:function(){var a=this,b=a.constructor,c=b.actions,e=a._bindings=[],f=a.element;k(c||{},function(d,k){if(c.hasOwnProperty(d)){var n=b.actions[d]||b._action(d,a.options);h.isControllerInstance(n.delegate)&&(n.delegate=n.delegate.element);e.push(n.processor(n.delegate||f,n.parts[2],n.parts[1],d,a))}});var d=r(this,"destroy");f.bind("destroyed",d);e.push(function(a){h(a).unbind("destroyed",d)});return e.length},_binder:function(a,b,c,e){"string"==typeof c&&(c=r(this,c));this._bindings.push(e?s(a,
e,b,c):d(a,b,c));return this._bindings.length},_unbind:function(){var a=this.element[0];k(this._bindings,function(b,c){c(a)});this._bindings=[]},trigger:function(a){var b=this.element;if(b){var c=h.Event(a);b.trigger.apply(b,[c].concat(h.makeArray(arguments).slice(1)));return c}},delegate:function(a,b,c,e){"string"==typeof a&&(e=c,c=b,b=a,a=this.element);return this._binder(a,c,e,b)},update:function(a){e(this.options,a);this._unbind();this._bind()},destroy:function(){if(!this._destroyed){var a=this.constructor._fullName;
for(pname in this.pluginInstances)this.removePlugin(pname);this._destroyed=!0;this.element.removeClass(a);this._unbind();delete this._actions;delete this.element.data("controllers")[a];h(this).triggerHandler("destroyed");this.element=h()}},find:function(a){return this.element.find(a)},view:function(){var a=g(arguments),b=a,c=!1,e=this.constructor.component||h,f="",f=this.options.view||{};"boolean"==typeof a[0]&&(c=a[0],b=a.slice(1));if(void 0==(b[0]=f[b[0]]))return c?"":h("");f=e.View.apply(e,b);
return c?f:h(h.parseHTML(h.trim(f)))},getPlugin:function(a){return this.pluginInstances[a]},addSubscriber:function(a){a=h.isArray(a)?a:[a||{}];var b=this,c=this.Class.hostname,e={};e["{"+c+"}"]=b;h.map(a,function(a,f){if(!h.isControllerInstance(a))return!1;if(a.options[c]===this)return a;a[c]=b;return a.update(e)});return a},addPlugin:function(b,c,e){if(b){if(!c&&!e||h.isPlainObject(c))e=c,c=[this.Class.root,this.Class.fullName,h.String.capitalize(b)].join(".");h.isString(c)&&(c=h.getController(c));
var f=h.isControllerInstance(c);if(a(c)||f){e=h.extend(!0,{element:this.element},e,(this.options.plugin||{})[b]||{});f=f?"instance":h.isController(c)?"controller":"function";this.trigger("addPlugin",[b,c,e,f]);var d=this.Class.hostname;e["{"+d+"}"]=this;var k;switch(f){case "instance":k=c;c.update(e);c[d]=this;break;case "controller":k=e.element.addController(c,e);break;case "function":k=c(this,e)}if(k)return this.pluginInstances[b]=k,"function"!==f&&(c={},c["{"+b+"}"]=k,this.update(c)),this.trigger("registerPlugin",
[b,k,e,f]),k}}},removePlugin:function(a){var b=this.getPlugin(a);if(b)return this.trigger("removePlugin",[a,b]),delete this.pluginInstances[a],h.isFunction(b.destroy)?b.destroy():null},invokePlugin:function(a,b,c){var e=this.getPlugin(a);if(e&&h.isFunction(e[b]))return this.trigger("invokePlugin",[a,e,c]),e[b].apply(this,c)},getMessageGroup:function(){var a=h.isFunction(this.messageGroup)?this.messageGroup():this.element.find("[data-message-group]");1>a.length&&(a=h("<div data-message-group></div>").prependTo(this.element));
return a},setMessage:function(a,b){var c={type:"warning",message:"",parent:this.getMessageGroup(),element:h('<div class="alert fade in"><button type="button" class="close" data-foundry-dismiss="alert">\u00d7</button></div>')},e={},e=h.isDeferred(a),e=h.isPlainObject(a)&&!e?a:{message:a,type:b||"warning"},f=h.extend({},c,e),d=f.element;if(h.isDeferred(a)){var k=arguments.callee,n=this;a.done(function(a,b){f.message=a;f.type=b||"warning";k.call(n,f);d.show()})}else d.addClass("alert-"+f.type).append(f.message),
1>h("html").has(d).length&&d.appendTo(f.parent);return d},clearMessage:function(){this.getMessageGroup().empty()},_set_called:!0});var S=h.Controller.Class.processors;w=function(a,b,c,e,f){e=r(f,e);return c?s(a,c,b,e):d(a,b,e)};k("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){S[b]=w});var O=function(b){c(b)&&(b=b.replace("$.Controller",x),b=n(b)||
n(x+"."+b));if(a(b)&&b.hasOwnProperty("_fullName"))return b},aa=function(a){return h.map(a,function(a){return b(a)?aa(a):O(a)})};h.getController=O;h.isController=function(a){return!!O(a)};h.isControllerInstance=function(b){return b&&b.constructor&&a(b.constructor)&&b.constructor.hasOwnProperty("_fullName")};h.isControllerOf=function(a,c){if(!c)return!1;b(c)||(c=[c]);for(var e=0;e<c.length;e++){var f=O(c[e]);if(a instanceof f)return!0}return!1};h.fn.extend({controllers:function(){var a=aa(g(arguments)),
b=[];this.each(function(){var c=h.data(this,"controllers");k(c||{},function(e,f){c.hasOwnProperty(e)&&(a.length&&!h.isControllerOf(f,a)||b.push(f))})});return b},controller:function(a,b){if(void 0===b)return this.controllers(a)[0];this.addController.apply(this,arguments);return this},hasController:function(a){return(a=(O(a)||{})._fullName||(c(a)?t(a.replace("$.Controller",x)):""))?(h(this).data("controllers")||{}).hasOwnProperty(a):!1},addController:function(b,c,e){var f=O(b);if(f){var d=[];this.each(function(){if(1===
this.nodeType&&"SCRIPT"!=this.nodeName){var k=h(this).controller(b);k||(k=new f(this,c),a(e)&&e.apply(k,[h(this),k]));d.push(k)}});return 1<d.length?d:d[0]}},removeController:function(a){this.each(function(){for(var b=h(this).controllers(a);b.length;)b.shift().destroy()});return this},addControllerWhenAvailable:function(a){var b=this,e=arguments,f=h.Deferred();h.isController(a)&&(a=a.fullName);if(!c(a))return f.reject();h.module("$:/Controllers/"+a).pipe(function(){var a=b.addController.apply(b,e);
f.resolveWith(a,[b,a])},f.reject,f.fail);return f},implement:function(){this.addController.apply(this,arguments);return this}})})();(function(){var d=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},g=h.makeArray,b=1,a=h.View=function(a,b,c,d){"function"===typeof c&&(d=c,c=void 0);var n=f(b);if(n.length){var m=h.Deferred();n.push(h.ajax({url:a,dataType:"view",async:!0}));h.when.apply(h,n).then(function(a){var f=g(arguments),n=f.pop()[0];if(e(b))b=k(a);else for(var p in b)e(b[p])&&
(b[p]=k(f.shift()));f=n(b,c);m.resolve(f);d&&d(f)});return m.promise()}var p,n="function"===typeof d,m=h.ajax({url:a,dataType:"view",async:n});n?(p=m,m.done(function(a){d(a(b,c))})):m.done(function(a){p=a(b,c)});return p},c=function(a,b){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+b;},e=function(a){return a&&h.isFunction(a.always)},f=function(a){var b=[];if(e(a))return[a];for(var c in a)e(a[c])&&b.push(a[c]);return b},k=function(a){return h.isArray(a)&&
3===a.length&&"success"===a[1]?a[0]:a};h.ajaxTransport("view",function(b,e){var f=e.url,k=f.match(/\.[\w\d]+$/),n,g,m,p,q=function(b){b=n.renderer(m,b);a.cache&&(a.cached[m]=b);return{view:b}};if(g=document.getElementById(f))k="."+g.type.match(/\/(x\-)?(.+)/)[2];k||(k=a.ext,f+=a.ext);m=d(f);if(f.match(/^\/\//))var r=f.substr(2),f="undefined"===typeof steal?f="/"+r:steal.root.mapJoin(r)+"";n=a.types[k];var s=h.template()[e.url];return{send:function(b,d){if(s)return n=a.types["."+s.type],d(200,"success",
q(s.content));if(a.cached[m])return d(200,"success",{view:a.cached[m]});g?d(200,"success",q(g.innerHTML)):p=h.ajax({async:e.async,url:f,dataType:"text",error:function(){c("",f);d(404)},success:function(a){c(a,f);d(200,"success",q(a))}})},abort:function(){p&&p.abort()}}});h.extend(a,{hookups:{},hookup:function(c){var e=++b;a.hookups[e]=c;return e},cached:{},cache:!0,register:function(b){this.types["."+b.suffix]=b;window.steal&&steal.type(b.suffix+" view js",function(b,c,e){e=a.types["."+b.type];var f=
d(b.rootSrc+"");b.text=e.script(f,b.text);c()})},types:{},ext:".ejs",registerScript:function(b,c,e){return"$.View.preload('"+c+"',"+a.types["."+b].script(c,e)+");"},preload:function(b,c){a.cached[b]=function(a,b){return c.call(a,a,b)}}});window.steal&&steal.type("view js",function(b,c,e){e=a.types["."+b.type];var f=d(b.rootSrc+"");b.text="steal('"+(e.plugin||"jquery/view/"+b.type)+"').then(function($){$.View.preload('"+f+"',"+b.text+");\n})";c()});var n,p,s,r,u,q,t,m={val:!0,text:!0};n=function(b){var c=
h.fn[b];h.fn[b]=function(){var f=g(arguments),d,k,n=this;if(e(f[0]))return f[0].done(function(a){p.call(n,[a],c)}),this;if(s(f)){if(d=q(f))return k=f[d],f[d]=function(a){p.call(n,[a],c);k.call(n,a)},a.apply(a,f),this;f=a.apply(a,f);if(e(f))return f.done(function(a){p.call(n,[a],c)}),this;f=[f]}return m[b]?c.apply(this,f):p.call(this,f,c)}};p=function(b,c){var e,f;for(e in a.hookups)break;e&&b[0]&&r(b[0])&&(f=a.hookups,a.hookups={},b[0]=h(b[0]));e=c.apply(this,b);f&&t(b[0],f);return e};s=function(a){var b=
typeof a[1];return"string"==typeof a[0]&&("object"==b||"function"==b)&&!u(a[1])};u=function(a){return a.nodeType||a.jquery};r=function(a){return u(a)?!0:"string"===typeof a?(a=h.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)&&3<=a.length):!1};q=function(a){return"function"===typeof a[3]?3:"function"===typeof a[2]&&2};t=function(b,c){var e,f,d=0,k,n;b=b.filter(function(){return 3!=this.nodeType});e=b.add("[data-view-id]",b);for(f=e.length;d<f;d++)e[d].getAttribute&&(k=e[d].getAttribute("data-view-id"))&&
(n=c[k])&&(n(e[d],k),delete c[k],e[d].removeAttribute("data-view-id"));h.extend(a.hookups,c)};h.fn.hookup=function(){var b=a.hookups;a.hookups={};t(this,b);return this};h.each("prepend append after before text html replaceWith val".split(" "),function(a,b){n(b)})})();(function(){var d=function(a){eval(a)},g=h.String.rsplit,b=h.extend,a=h.isArray,c=/\r\n/g,e=/\r/g,f=/\n/g,k=/\n/,n=/\\/g,p=/"/g,s=/'/g,r=/\t/g,u=/\{/g,q=/\}/g,t=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,m=function(a){return a.replace(n,"\\\\").replace(f,
"\\n").replace(p,'\\"').replace(r,"\\t")},v=h.View,z=function(a){var b=a.match(u);a=a.match(q);return(b?b.length:0)-(a?a.length:0)},A=function(a){if(this.constructor!=A){var c=new A(a);return function(a,b){return c.render(a,b)}}"function"==typeof a?this.template={fn:a}:(b(this,A.options,a),this.template=x(this.text,this.type,this.name))};h&&(h.EJS=A);A.prototype.render=function(a,b){a=a||{};this._extra_helpers=b;var c=new A.Helpers(a,b||{});return this.template.fn.call(a,a,c)};b(A,{text:function(b){if("string"==
typeof b)return b;if(null===b||void 0===b)return"";var c=b.hookup&&function(a,c){b.hookup.call(b,a,c)}||"function"==typeof b&&b||a(b)&&function(a,c){for(var e=0;e<b.length;e++)b[e].hookup?b[e].hookup(a,c):b[e](a,c)};return c?"data-view-id='"+v.hookup(c)+"'":b.toString?b.toString():""},clean:function(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(p,"&#34;").replace(s,"&#39;"):"number"==typeof a?a:A.text(a)},options:{type:"[",ext:".ejs"}});var w=
function(a,b,c){b=g(b,k);for(var e=0;e<b.length;e++){var f=a,d=b[e],n=c;f.lines++;for(var d=g(d,f.splitter),m=void 0,p=0;p<d.length;p++)m=d[p],null!==m&&n(m,f)}},B=function(a,c){var e={};b(e,{left:a+"%",right:"%"+c,dLeft:a+"%%",dRight:"%%"+c,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",cleanLeft:a+"%~",scan:w,lines:0});e.splitter=RegExp("("+[e.dLeft,e.dRight,e.eeLeft,e.eLeft,e.cmnt,e.left,e.right+"\n",e.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return e},x=function(a,b,f){a=
a.replace(c,"\n").replace(e,"\n");b=b||"[";var k=new A.Buffer(["var ___v1ew = [];"],[]),n="",g=null,p=[];w(B(b,"["===b?"]":">"),a||"",function(a,b){var c;if(null===g)switch(a){case "\n":n+="\n";k.push("___v1ew.push(",'"',m(n),'");');k.cr();n="";break;case b.left:case b.eLeft:case b.eeLeft:case b.cmnt:g=a;0<n.length&&k.push("___v1ew.push(",'"',m(n),'");');n="";break;case b.dLeft:n+=b.left;break;default:n+=a}else switch(a){case b.right:switch(g){case b.left:c=z(n);var e=p.length&&-1==c?p.pop():";";
"));"===e&&k.push("return ___v1ew.join('')");k.push(n,e);1===c&&p.push(";");break;case b.eLeft:(c=z(n))&&p.push("));");t.test(n)&&(e=n.match(t),n="function(__){var "+e[1]+"=$(__);"+e[2]+"}");k.push("___v1ew.push(",h.globalNamespace+".EJS.clean(",n,c?"var ___v1ew = [];":"));");break;case b.eeLeft:(c=z(n))&&p.push("));"),k.push("___v1ew.push(",h.globalNamespace+".EJS.text(",n,c?"var ___v1ew = [];":"));")}g=null;n="";break;case b.dRight:n+=b.right;break;default:n+=a}});0<n.length&&k.push("___v1ew.push(",
'"',m(n)+'");');a={out:"try { with(_VIEW) { with (_CONTEXT) {"+k.close()+" return ___v1ew.join('')}}}catch(e){e.lineNumber=null;throw e;}"};d.call(a,"this.fn = (function(_CONTEXT,_VIEW){ var $ = "+h.globalNamespace+";"+a.out+"});");return a};A.Buffer=function(a,b){this.line=[];this.script=[];this.post=b;this.push.apply(this,a)};A.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=[]},close:function(){0<this.line.length&&
(this.script.push(this.line.join("")),this.line=[]);this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};A.Helpers=function(a,c){this._data=a;this._extras=c;b(this,c)};A.Helpers.prototype={plugin:function(a){var b=h.makeArray(arguments),c=b.shift();return function(a){a=h(a);a[c].apply(a,b)}},view:function(a,b,c){c=c||this._extras;b=b||this._data;return v(a,b,c)}};v.register({suffix:"ejs",script:function(a,b){return h.globalNamespace+".EJS(function(_CONTEXT,_VIEW) { "+
(new A({text:b,name:a})).template.out+" })"},renderer:function(a,b){return A({text:b,name:a})}})})();(function(){var d=h.isArray,g=function(a){return"object"===typeof a&&null!==a&&a},b=h.makeArray,a=h.each,c=function(a,b,c){a instanceof h.Observe?e([a],c._namespace):a=d(a)?new h.Observe.List(a):new h.Observe(a);a.bind("change"+c._namespace,function(e,f){var d=h.makeArray(arguments);e=d.shift();d[0]="*"===b?c.indexOf(a)+"."+d[0]:b+"."+d[0];h.event.trigger(e,d,c)});return a},e=function(a,b){for(var c,
e=0;e<a.length;e++)(c=a[e])&&c.unbind&&c.unbind("change"+b)},f=0,k=null,n=function(){if(!k)return k=[],!0},p=function(a,b,c){if(!a._init)if(k)k.push({t:a,ev:b,args:c});else return h.event.trigger(b,c,a,!0)},s=0,r=function(){var a=k.length,b=k.slice(0),c;k=null;s++;for(var e=0;e<a;e++)c=b[e],h.event.trigger({type:c.ev,batchNum:s},c.args,c.t)},u=function(a,b,c){a.each(function(a,e){c[a]=g(e)&&"function"==typeof e[b]?e[b]():e});return c};h.Class(h.globalNamespace+".Observe",{init:function(a){this._data=
{};this._namespace=".observe"+ ++f;this._init=!0;this.attrs(a);delete this._init},attr:function(a,b){if(void 0===b)return this._get(a);this._set(a,b);return this},each:function(){return a.apply(null,[this.__get()].concat(b(arguments)))},removeAttr:function(a){a=d(a)?a:a.split(".");var b=a.shift(),c=this._data[b];if(a.length)return c.removeAttr(a);delete this._data[b];p(this,"change",[b,"remove",void 0,c]);return c},_get:function(a){a=d(a)?a:(""+a).split(".");var b=this.__get(a.shift());return a.length?
b?b._get(a):void 0:b},__get:function(a){return a?this._data[a]:this._data},_set:function(a,b){var f=d(a)?a:(""+a).split("."),k=f.shift(),n=this.__get(k);if(g(n)&&f.length)n._set(f,b);else{if(f.length)throw"jQuery.Observe: set a property on an object that does not exist";b!==n&&(f=this.__get().hasOwnProperty(k)?"set":"add",this.__set(k,g(b)?c(b,k,this):b),p(this,"change",[k,f,b,n]),n&&e([n],this._namespace))}},__set:function(a,b){this._data[a]=b;a in this.constructor.prototype||(this[a]=b)},bind:function(a,
b){h.fn.bind.apply(h([this]),arguments);return this},unbind:function(a,b){h.fn.unbind.apply(h([this]),arguments);return this},serialize:function(){return u(this,"serialize",{})},attrs:function(a,b){if(void 0===a)return u(this,"attrs",{});a=h.extend(!0,{},a);var c,e=n();for(c in this._data){var f=this._data[c],d=a[c];void 0===d?b&&this.removeAttr(c):(g(f)&&g(d)?f.attrs(d,b):f!=d&&this._set(c,d),delete a[c])}for(c in a)d=a[c],this._set(c,d);e&&r()}});var q=h.Observe(h.globalNamespace+".Observe.List",
{init:function(a,c){this.length=0;this._namespace=".list"+ ++f;this._init=!0;this.bind("change",this.proxy("_changes"));this.push.apply(this,b(a||[]));h.extend(this,c);this.comparator&&this.sort();delete this._init},_changes:function(a,b,c,e,f){if(this.comparator&&/^\d+./.test(b)){var d=+/^\d+/.exec(b)[0],k=this[d],n=this.sortedIndex(k);if(n!==d){[].splice.call(this,d,1);[].splice.call(this,n,0,k);p(this,"move",[k,n,d]);a.stopImmediatePropagation();p(this,"change",[b.replace(/^\d+/,n),c,e,f]);return}}-1===
b.indexOf(".")&&("add"===c?p(this,c,[e,+b]):"remove"===c&&p(this,c,[f,+b]))},sortedIndex:function(a){var b=a.attr(this.comparator),c=0,e;for(e=0;e<this.length;e++)if(a===this[e])c=-1;else if(b<=this[e].attr(this.comparator))break;return e+c},__get:function(a){return a?this[a]:this},__set:function(a,b){this[a]=b},serialize:function(){return u(this,"serialize",[])},splice:function(a,f){var d=b(arguments),k;for(k=2;k<d.length;k++){var n=d[k];g(n)&&(d[k]=c(n,"*",this))}void 0===f&&(f=d[1]=this.length-
a);k=[].splice.apply(this,d);0<f&&(p(this,"change",[""+a,"remove",void 0,k]),e(k,this._namespace));2<d.length&&p(this,"change",[""+a,"add",d.slice(2),k]);return k},attrs:function(a,b){if(void 0===a)return u(this,"attrs",[]);a=a.slice(0);for(var c=Math.min(a.length,this.length),e=n(),f=0;f<c;f++){var d=this[f],k=a[f];g(d)&&g(k)?d.attrs(k,b):d!=k&&this._set(f,k)}a.length>this.length?this.push(a.slice(this.length)):a.length<this.length&&b&&this.splice(a.length);e&&r()},sort:function(a,b){var c=this.comparator;
[].sort.apply(this,c?[function(a,b){a=a[c];b=b[c];return a===b?0:a<b?-1:1}]:[]);!b&&p(this,"reset")}});a({push:"length",unshift:0},function(a,e){q.prototype[a]=function(){for(var f=arguments[0]&&h.isArray(arguments[0])?arguments[0]:b(arguments),d=e?this.length:0,k=0;k<f.length;k++){var n=f[k];g(n)&&(f[k]=c(n,"*",this))}if(1==f.length&&this.comparator)return d=this.sortedIndex(f[0]),this.splice(d,0,f[0]),this.length;k=[][a].apply(this,f);this.comparator&&1<f.length?(this.sort(null,!0),p(this,"reset",
[f])):p(this,"change",[""+d,"add",f,void 0]);return k}});a({pop:"length",shift:0},function(a,c){q.prototype[a]=function(){var e=arguments[0]&&h.isArray(arguments[0])?arguments[0]:b(arguments),f=c&&this.length?this.length-1:0,e=[][a].apply(this,e);p(this,"change",[""+f,"remove",void 0,[e]]);e&&e.unbind&&e.unbind("change"+this._namespace);return e}});q.prototype.indexOf=[].indexOf||function(a){return h.inArray(a,this)};h.O=function(a,b){return d(a)||a instanceof h.Observe.List?new h.Observe.List(a,
b):new h.Observe(a,b)}})()});FD31.plugin("joomla",function(h){var d={squeezebox:function(){return g.isJoomla15?window.parent.document.getElementById("sbox-window"):window.parent.SqueezeBox}},g=h.Joomla=function(a,b){if(h.isFunction(b))g.isJoomla15?window[a]=b:window.Joomla[a]=b;else if(a=d[a]||(g.isJoomla15?window[a]:window.Joomla[a]),h.isFunction(a))return a.apply(window,b)},b=parseFloat(h.joomla.version);g.isJoomla15=1.5>=b;g.isJoomla25=1.6<=b&&2.5>=b;g.isJoomla30=3<=b});
FD31.plugin("module",function(h){var d=function(d){var b=this,a=h.Callbacks("once memory");h.extend(this,h.Deferred(),{name:d,status:"pending",ready:function(c){!0===c&&a.fire.call(b,h);h.isFunction(c)&&a.add(c)}});b.then(function(){b.exports=this;b.status="resolved"},function(){b.status="rejected"});var c=b.done;b.done=function(){b.required=!0;var a=b.factory;a&&"ready"===b.status&&a.call(b,h);b.done=c;return b.done.apply(this,arguments)}};h.module=function(){var g=function(b,a){var c;if("string"===
typeof b){c=g.get(b);if(void 0===a)return c;if(h.isFunction(a)){if("resolved"==c.status)return c;c.factory=a;c.status="ready";c.ready("true");c.required&&(c.status="executing",a.call(c,h));return c}}h.isArray(b)&&(c=h.map(b,function(a){var b=g.get(h.isString(a)?a:a.name);if(b&&("pending"===b.status&&(b.status="ready"),h.isPlainObject(a)))return a}),h.each(c,function(a,b){g(b.name,b.factory)}))};h.extend(g,{registry:{},get:function(b){if(b)return h.isModule(b)&&(b=b.replace("module://","")),g.registry[b]||
g.create(b)},create:function(b){return g.registry[b]=new d(b)},remove:function(b){delete g.registry[b]}});return g}();h.isModule=function(g){return h.isString(g)?!!g.match("module://"):g&&g instanceof d}});
FD31.plugin("script",function(h){h.script=function(){var d=function(b){b=h.extend(this,b);b.manager=h.Deferred();h.extend(b,b.manager.promise());b.load()},g=document.getElementsByTagName("head")[0];document.getElementsByTagName("base");h.extend(d.prototype,{timeout:7E3,retry:3,retryCount:1,type:"text/javascript",async:!1,charset:"UTF-8",verbose:!1,insert:function(){g.appendChild(this.node)},remove:function(){var b=this.node;setTimeout(function(){b.onload=b.onerror=b.onreadystatechange=null;try{g.removeChild(b)}catch(a){}},
1E3)},load:function(){var b;this.endTime=void 0;this.startTime=new Date;this.node=b=document.createElement("script");this.insert();this._ready=h.proxy(this.ready,this);this._error=h.proxy(this.error,this);b.attachEvent&&!h.browser.opera?(b.attachEvent("onreadystatechange",this._ready),b.attachEvent("onerror",this._error)):(b.addEventListener("load",this._ready,!1),b.addEventListener("error",this._error,!1));h(b).attr({type:this.type,async:this.async,charset:this.charset,src:this.url});this.monitor()},
monitor:function(){var b=this;b.retryCount>b.retry?b._error():setTimeout(function(){"resolved"!==b.state()&&(b.verbose&&console.warn("$.script: Load timeout. [Retry: "+b.retryCount+"]",b),b.remove(),b.retryCount++,b.load())},b.timeout*b.retryCount)},ready:function(b){var a=this.node;if("load"===b.type||/loaded|complete/.test(a.readyState))this.complete.call(this,b),this.manager.resolve(this)},error:function(b){this.verbose&&console.error("$.script: Unable to load ",this);this.complete.call(this,b);
this.remove();this.manager.reject(this)},complete:function(b){b=this.node;this.endTime=new Date;b.detachEvent&&!h.browser.opera?(b.detachEvent("onreadystatechange",this._ready),b.detachEvent("onerror",this._error)):(b.removeEventListener("load",this._ready,!1),b.removeEventListener("error",this._error,!1))}});return function(b){if(void 0!==b)return"string"===typeof b&&(b={url:b}),new d(b)}}()});
FD31.plugin("stylesheet",function(h){var d=document.getElementsByTagName("head")[0],g=document.styleSheets,b=document.createStyleSheet;h.stylesheet=function(){var a=function(b,e){var f={};h.extend(f,a.defaultOptions,h.isPlainObject(b)?b:{url:b,attr:e||{}});return void 0===f.url?a.create(f):a.load(f)};h.extend(a,{defaultOptions:{type:"text/css",rel:"stylesheet",media:"all",title:"",forceInject:!1,xhr:!1},setup:function(b){h.extend(a.defaultOptions,b)},availability:function(){var b={},e=h('link[rel*="stylesheet"]');
styles=h("style");b.groups=31-e.length-styles.length;b.slots=31*b.groups;a.currentGroup&&(b.slots+=31-a.currentGroup.imports.length);return b},get:function(a){for(var b=0;b<g.length;b++){var f=g[b];if((f.ownerNode||f.owningElement)==a)return f}},create:function(a){var e,f;f=g.length;if(b){if(31<=f)return;e=document.createStyleSheet();f=e.ownerNode||e.owningElement}else f=document.createElement("style"),d.appendChild(f);h.extend(f,{type:a.type,title:a.title,media:a.media,rel:a.rel});a=a.content;void 0!==
a&&(b?e.cssText=a:f.appendChild(document.createTextNode(a)));return f},nextAvailable:function(c){var e,f=g.length;if(f)for(;f--;0>f)if(e=g[f],b&&4095<=(e.cssRules||e.rules).length)e=void 0;else break;return e.ownerNode||e.owningElement||(c?a():void 0)},load:function(b){return h.browser.msie&&!b.forceInject?a._import(b):h("<link>").attr({href:b.url,type:b.type,rel:b.rel,media:b.media}).appendTo("head")[0]},_import:function(b){var e;if(void 0===a.currentGroup){var f;try{f=document.createStyleSheet(),
f.media="all",f.title="jquery_stylesheet"}catch(d){e=!0,b.verbose&&console.error("There is not enough slots left to create a new stylesheet group.")}if(e)return!1;a.currentGroup=f}try{a.currentGroup.addImport(b.url)}catch(n){e=!0,b.verbose&&console.info("Import slots exceeded. Creating a new stylesheet group.")}return e?(a.currentGroup=void 0,a._import(b)):!0}});return a}();(function(){var a=function(a,b,c){h.extend(this,{id:h.uid(),style:c,selectors:[],preRule:"",rules:{},legacy:8===h.IE,important:!1});
a&&this.set(a,b)};h.extend(a.prototype,{set:function(a,b){h.isString(a)?this.selectors=a.split(","):this.selectors=a;h.isString(b)?(this.preRule=b+"\n",this.rules={}):(this.preRule="",this.rules=b||this.rules);this.update();return this},cssText:function(){return this.selectors.join(",")+"{"+this.ruleText()+"}\n"},ruleText:function(){var a=this.important;return this.preRule+(this.legacy?"-rule-id:"+this.id+";":"")+h.map(this.rules,function(b,c){h.isNumeric(b)&&!h.cssNumber[c]&&(b+="px");a&&(b+=" !important");
return c+":"+b}).join(";")},update:function(){if(this.legacy)return this.updateLegacy();var a=this.cssText();void 0===this.textNode?(this.textNode=document.createTextNode(a),this.style.appendChild(this.textNode)):this.textNode.nodeValue=a;return this},updateLegacy:function(){this.removeLegacy();for(var a=h.stylesheet.get(this.style),b=this.selectors,c=this.ruleText(),d=0;d<b.length;d++)a.addRule(b[d],c);return this},remove:function(){if(this.legacy)return this.removeLegacy();void 0!==this.textNode&&
(this.style.removeChild(this.textNode),delete this.textNode);return this},removeLegacy:function(){for(var a=h.stylesheet.get(this.style),b=a.rules,c=0;c<b.length;c++)null!==b[c].cssText.match(this.id)&&a.removeRule(c);return this},css:function(a,b){if(h.isString(a)&&void 0===b)return this.rules[a];h.isPlainObject(a)?h.extend(this.rules,a):this.rules[a]=b;this.update();return this}});var b=h.cssRule=function(e,f,d){if(d=d||b.style||h.stylesheet.nextAvailable(!0))return new a(e,f,d)};b.style=h.stylesheet()})();
(function(){h.cssUrl=function(a){return'url("'+encodeURI(a)+'")'}})()});
FD31.plugin("language",function(h){h.sprintf=function(){var d=arguments,b=0,a=function(a,b,c,e){c||(c=" ");b=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return e?a+b:b+a},c=function(b,c,e,d,g,h){var u=d-b.length;0<u&&(b=e||!g?a(b,d,h,e):b.slice(0,c.length)+a("",u,"0",!0)+b.slice(c.length));return b},e=function(b,e,d,g,h,r,u){b>>>=0;d=d&&b&&{2:"0b",8:"0",16:"0x"}[e]||"";b=d+a(b.toString(e),r||0,"0",!1);return c(b,d,g,h,u)};return d[b++].replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,
function(f,k,n,p,h,r,u){var q,t;if("%%"==f)return"%";var m=!1;t="";var v=h=!1;q=" ";for(var z=n.length,A=0;n&&A<z;A++)switch(n.charAt(A)){case " ":t=" ";break;case "+":t="+";break;case "-":m=!0;break;case "'":q=n.charAt(A+1);break;case "0":h=!0;break;case "#":v=!0}p=p?"*"==p?+d[b++]:"*"==p.charAt(0)?+d[p.slice(1,-1)]:+p:0;0>p&&(p=-p,m=!0);if(!isFinite(p))throw Error("sprintf: (minimum-)width must be finite");r=r?"*"==r?+d[b++]:"*"==r.charAt(0)?+d[r.slice(1,-1)]:+r:-1<"fFeE".indexOf(u)?6:"d"==u?0:
void 0;k=k?d[k.slice(0,-1)]:d[b++];switch(u){case "s":return u=String(k),null!=r&&(u=u.slice(0,r)),c(u,"",m,p,h,q);case "c":return u=String.fromCharCode(+k),null!=r&&(u=u.slice(0,r)),c(u,"",m,p,h,void 0);case "b":return e(k,2,v,m,p,r,h);case "o":return e(k,8,v,m,p,r,h);case "x":return e(k,16,v,m,p,r,h);case "X":return e(k,16,v,m,p,r,h).toUpperCase();case "u":return e(k,10,v,m,p,r,h);case "i":case "d":return q=+k|0,f=0>q?"-":t,k=f+a(String(Math.abs(q)),r,"0",!1),c(k,f,m,p,h);case "e":case "E":case "f":case "F":case "g":case "G":return q=
+k,f=0>q?"-":t,t=["toExponential","toFixed","toPrecision"]["efg".indexOf(u.toLowerCase())],u=["toString","toUpperCase"]["eEfFgG".indexOf(u)%2],k=f+Math.abs(q)[t](r),c(k,f,m,p,h)[u]();default:return f}})};var d=h.language=h.JText=function(g){return 2>arguments.length?d._(g):d.sprintf.apply(null,arguments)};h.extend(d,{lang:{},add:function(g,b){h.isPlainObject(g)?h.extend(d.lang,g):d.lang[g]=b},remove:function(g){delete d.lang[g]},_:function(g){return d.lang[g]||""},sprintf:function(){arguments[0]=
d.lang[arguments[0]];return h.sprintf.apply(null,arguments)}})});FD31.plugin("template",function(h){h.template=function(){var d={content:"",type:"ejs"},g=function(b,a){if(void 0===b)return g.templates;var c;if("string"==typeof a)return c=h.isPlainObject(a)?a:h.extend({},d,{name:b,content:a}),g.templates[b]=c;c=g.templates[b]||{};return c.content||""};h.extend(g,{templates:{},remove:function(b){delete g.templates[b]}});return g}()});
FD31.plugin("require",function(h){h.require=function(){var d=function(a){return h.uri(a).setAnchor("").setQuery("").toPath("../").toString()},g=function(b){b=new a(b);return g.batches[b.id]=b};h.extend(g,{defaultOptions:{path:function(){var a=h.path+"/scripts/"||h("[require-path]").attr("require-path")||d(h("script:last").attr("src"))||d(window.location.href);/^(\/|\.)/.test(a)&&(a=h.uri(window.location.href).toPath(a).toString());return a}(),timeout:1E4,retry:3,verbose:"development"==h.environment},
setup:function(a){h.extend(g.defaultOptions,a)},batches:{},status:function(a){h.each(g.batches,function(b,f){var d={pending:0,resolved:0,rejected:0,ready:0,total:0},n=[];h.each(f.tasks,function(a,b){state=b.module&&"ready"==b.module.status?"ready":b.state();d[state]++;d.total++;n.push({state:state,content:"["+state+"] "+b.name})});var g=f.id+": "+f.state()+" ["+d.resolved+"/"+d.total+"]";a&&1>d[a]||(h.IE?(console.log('$.require.batches["'+f.id+'"]'),h.each(n,function(a,b){console.log(b.content)}),
console.log("")):(console.groupCollapsed(g),console.log('$.require.batches["'+f.id+'"]',f),h.each(n,function(b,e){var f=e.state,d=e.content;if(!a||f==a)switch(f){case "pending":console.warn(d);break;case "rejected":console.error(d);break;default:console.info(d)}}),console.groupEnd(g)))});return"$.require.status(pending|resolved|rejected|ready);"},loaders:{},addLoader:function(b,e){g[b]=e;a.prototype[b]=function(){this.autoFinalize();e.apply(this,arguments);return this};g.loaders[b]=g[b]=e},removeLoader:function(b){delete a.prototype[b];
delete g[b]}});var b=0,a=function(a){var e=h.Callbacks("once memory"),f=!1;return h.extend(this,{id:++b,tasks:[],options:h.extend({},g.defaultOptions,a),autoFinalizeDuration:300,finalized:!1,required:function(a){!0===a&&(f=e.fire());h.isFunction(a)&&e.add(a);return f}})};h.extend(a.prototype,{addTask:function(a){h.isDeferred(a)&&!this.finalized&&(this.tasks.push(a),a.batch=this)},autoFinalize:function(){var a=this,b=a.autoFinalizeDuration;!1!==b&&(clearTimeout(a.autoFinalizeTimer),a.autoFinalizeTimer=
setTimeout(function(){a.finalize()},b))},finalize:function(){var a=this;if(!a.finalized){a.finalized=!0;var b=a.manager=h.when.apply(null,a.tasks),f=b.promise(),d=h.Callbacks();h.extend(a,f,{progress:d.add,notify:d.fire,done:function(){a.required(!0);a.done=f.done;return a.done.apply(a,arguments)}});var n=a.options.verbose;b.progress(function(a,b){n&&"rejected"==a&&console.warn("Require: Task "+b.name+" failed to load.",b)}).fail(function(){n&&console.warn("Require: Batch "+a.id+" failed.",a)});setTimeout(function(){h.each(a.tasks,
function(b,e){e.then(function(){a.notify("resolved",e)},function(){a.notify("rejected",e)},function(){a.notify("progress",e)})})},1)}},expand:function(a,b){a=h.makeArray(a);var f=b||{},d=[];h.isPlainObject(a[0])?(f=h.extend(a[0],b),d=a.slice(1)):d=a;return{options:f,names:d}}});h.each(["done","fail","progress","always","then"],function(b,e){a.prototype[e]=function(){this.finalize();return this[e].apply(this,arguments)}});return g}();h.require.addLoader("script",function(){var d=h.uri(h.indexUrl).host(),
g=h.uri(document.location.href).host();d!==g&&d.match("xn--")&&(h.support.cors=!0);document.createElement("script");var b=function(){var a=this,c=h.makeArray(arguments),e;h.isPlainObject(c[0])&&(e=c[0],c=c.slice(1));e=h.extend({},b.defaultOptions,a.options,e,{batch:a});var f;h.each(c,function(c,d){var g=new b.task(d,e,f);a.addTask(g);e.serial&&void 0!==f?f.always(g.start):g.start();f=g})};h.extend(b,{defaultOptions:{path:"",extension:"compressed"==h.mode?"min.js":"js",serial:!1,async:!1,xhr:!1},setup:function(){h.extend(b.defaultOptions,
options)},scripts:{},task:function(a,b,e){var f=h.extend(this,h.Deferred());f.name=a;f.options=b;f.taskBefore=e;h.isArray(a)&&(f.name=a[0]+"@"+a[1],f.moduleName=a[0],a[2]||(f.defineModule=!0,h.module.registry[f.moduleName]&&console.warn("$.require.script: "+f.moduleName+" exists! Using existing module instead."),f.options.xhr=!0),a=a[1],f.module=h.module(f.moduleName));h.isUrl(a)?f.url=a:/^(\/|\.)/.test(a)?f.url=h.uri(f.options.path).toPath(a).toString():(f.url=h.uri(f.options.path).toPath("./"+a+
"."+f.options.extension).toString(),f.module=h.module(a))}});h.extend(b.task.prototype,{start:function(){var a=this.module;a&&"pending"!==a.status?this.waitForModule():this.load()},waitForModule:function(){var a=this,b=a.module;b.then(a.resolve,a.reject,a.notify);a.batch.required(function(){b.done(a.resolve)})},load:function(){var a=this,c=a.taskBefore;a.script=b.scripts[a.url]||function(){var c=a.options.xhr?h.ajax({url:a.url,dataType:"text"}):h.script({url:a.url,type:"text/javascript",async:a.options.async,
timeout:a.batch.options.timeout,retry:a.batch.options.retry,verbose:a.batch.options.verbose});return b.scripts[a.url]=c}();a.script.done(function(b){if(a.options.xhr&&(a.defineModule&&(a.module=h.module(a.moduleName,function(){h.globalEval(b);this.resolveWith(b)})),!a.options.async||c)){c.done(function(){h.globalEval(b);a.module?a.waitForModule():a.resolve()});return}a.module?a.waitForModule():a.resolve()}).fail(function(){a.reject()})}});return b}());h.require.addLoader("stylesheet",function(){var d=
function(){var g=this,b=h.makeArray(arguments),a;h.isPlainObject(b[0])&&(a=b[0],b=b.slice(1));a=h.extend({},d.defaultOptions,g.options,{path:h.path+"/styles/"},a,{batch:g});h.each(b,function(b,e){var f=new d.task(e,a),k=d.stylesheets[f.url],f=k||f;g.addTask(f);k||(d.stylesheets[f.url]=f,f.start())})};h.extend(d,{defaultOptions:{path:"",extension:"compressed"==h.mode?"min.css":"css",xhr:!1},setup:function(){h.extend(d.defaultOptions,options)},stylesheets:{},task:function(d,b){var a=h.extend(this,h.Deferred());
a.name=d;a.options=b;h.isUrl(d)?a.url=d:/^(\/|\.)/.test(d)?a.url=h.uri(a.options.path).toPath(d).toString():a.url=h.uri(a.options.path).toPath("./"+d+"."+a.options.extension).toString();a.options.url=a.url},loaders:{},loader:function(g){if(h.isArray(g))return h.map(g,function(a){return d.loader(a)});if(h.isPlainObject(g))return h.map(g,function(a,b){return d.loader(a).resolve(b)});var b=d.loaders[g];b||(b=d.loaders[g]=h.Deferred().done(function(a){h.isPlainObject(a)||h.stylesheet(a)}));return b}});
h.extend(d.task.prototype,{start:function(){var g=d.loaders[this.name];g||(g=d.loader(this.name),h.stylesheet(this.options)?g.resolve():g.reject());g.then(this.resolve,this.reject)}});return d}());h.require.addLoader("template",function(){var d=function(){var g=this,b=h.makeArray(arguments),a;h.isPlainObject(b[0])&&(a=b[0],b=b.slice(1));a=h.extend({},d.defaultOptions,g.options,a,{batch:g});h.each(b,function(b,e){var f=new d.task(e,a);g.addTask(f);f.start()})};h.extend(d,{defaultOptions:{path:"",extension:"htm"},
setup:function(){h.extend(d.defaultOptions,options)},task:function(d,b){var a=h.extend(this,h.Deferred());a.name=d;a.options=b;h.isArray(d)&&(a.name=d[0],d=d[1]);h.isUrl(d)?a.url=d:/^(\/|\.)/.test(d)?a.url=h.uri(a.options.path).toPath(d).toString():a.url=h.uri(a.options.path).toPath("./"+d+"."+a.options.extension).toString()},loaders:{},loader:function(g){if(h.isArray(g))return h.map(g,function(a){return d.loader(a)});if(h.isPlainObject(g))return h.map(g,function(a,b){return d.loader(b).resolve(a)});
var b=d.loaders[g];b||(b=d.loaders[g]=h.Deferred().done(function(a){h.template(g,a)}));return b}});h.extend(d.task.prototype,{start:function(){var g=d.loaders[this.name];g||(g=d.loader(this.name),g.xhr=h.Ajax({url:this.url,dataType:"text"}).then(g.resolve,g.reject).then(this.resolve,this.reject));this.loader=g;return this}});return d}());h.require.addLoader("language",function(){var d=function(){var g=h.makeArray(arguments),b;h.isPlainObject(g[0])&&(b=g[0],g=g.slice(1));b=h.extend({},d.defaultOptions,
this.options,b,{batch:this});b=new d.task(g,b);this.addTask(b);b.start()};h.extend(d,{defaultOptions:{path:""},setup:function(){h.extend(d.defaultOptions,options)},loaders:{},task:function(d,b){var a=h.extend(this,h.Deferred());a.name=d.join(",");a.options=b;a.url=b.path;a.names=d},loaders:{},loader:function(g){if(h.isArray(g))return h.map(g,function(a){return d.loader(a)});if(h.isPlainObject(g))return h.map(g,function(a,b){return d.loader(b).resolve(a)});var b=d.loaders[g];b||(b=d.loaders[g]=h.Deferred().done(function(a){h.language.add(g,
a)}));return b}});h.extend(d.task.prototype,{start:function(){var g=this,b=h.map(g.names,function(a){var b=d.loader(a);b.push(b);return/resolved|rejected/.test(b.state())?null:a});g.fail(function(){h.each(b,function(a,b){d.loader(b).reject()})});h.when.apply(null,[]).then(g.resolve,g.reject);if(1>b.length)return g;g.xhr=h.Ajax({url:g.url,type:"POST",data:{keys:b}}).done(function(a){h.isPlainObject(a)?d.loader(a):g.reject()}).fail(function(){g.reject()});return g}});return d}());h.require.addLoader("library",
function(){var d=h.makeArray(arguments),g={};h.isPlainObject(d[0])&&(g=d[0],d=d.slice(1));h.extend(g,{path:h.scriptPath});return this.script.apply(this,[g].concat(d))});h.require.addLoader("image",function(){var d=function(){var g=this,b=h.makeArray(arguments),a;h.isPlainObject(b[0])&&(a=b[0],b=b.slice(1));a=h.extend({},d.defaultOptions,g.options,a,{batch:g});h.each(b,function(b,e){var f=new d.task(e,a),k=d.images[f.url],f=k||f;g.addTask(f);k||(d.images[f.url]=f,f.start())})};h.extend(d,{defaultOptions:{path:""},
setup:function(){h.extend(d.defaultOptions,options)},images:{},task:function(d,b){var a=h.extend(this,h.Deferred());a.name=d;a.options=b;h.isUrl(d)?a.url=d:/^(\/|\.)/.test(d)?a.url=h.uri(a.options.path).toPath(d).toString():a.url=h.uri(a.options.path).toPath("./"+d).toString();a.options.url=a.url}});h.extend(d.task.prototype,{start:function(){var d=this;d.image=h(new Image).load(function(){d.resolve()}).error(function(){d.reject()}).attr("src",d.options.url)}});return d}())});
FD31.plugin("iframe-transport",function(h){h.ajaxPrefilter(function(d,g,b){if(d.iframe)return"iframe"});h.ajaxTransport("iframe",function(d,g,b){function a(){n&&p.replaceWith(function(a){return k.get(a)});c.remove();e.attr("src","javascript:false;").remove()}var c=null,e=null,f="iframe-"+h.now(),k=h(d.files).filter(":file:enabled"),n=0<k.length,p=null;d.dataTypes.shift();c=h("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:d.url,target:f});"string"===typeof d.data&&
0<d.data.length&&h.error("data must not be serialized");h.each(d.data||{},function(a,b){h.isPlainObject(b)&&(a=b.name,b=b.value);h.isArray(b)||(b=[b]);h.each(b,function(b,e){h("<input type='hidden' />").attr({name:a,value:e}).appendTo(c)})});h("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(c);n&&(p=k.after(function(a){return h(this).clone().prop("disabled",!0)}).next(),k.appendTo(c));return{send:function(b,d){e=h("<iframe src='javascript:false;' name='"+f+"' id='"+f+"' style='display:none'></iframe>");
e.bind("load",function(){e.unbind("load").bind("load",function(){var b=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,c=b.documentElement?b.documentElement:b.body,e=c.getElementsByTagName("textarea")[0],b=e?e.getAttribute("data-type"):null,f=e?e.getAttribute("data-status"):200,k=e?e.getAttribute("data-statusText"):"OK",c={html:c.innerHTML,text:b?e.value:c?c.textContent||c.innerText:null};a();d(f,k,c,b?"Content-Type: "+b:null)});c[0].submit()});
h("body").append(c,e)},abort:function(){null!==e&&(e.unbind("load").attr("src","javascript:false;"),a())}}})});
FD31.plugin("server",function(h){var d=h.server=function(g){var b=h.Deferred(),a=h.extend(!0,{},d.defaultOptions,g,{success:function(){}});b.xhr=h.Ajax(a).done(function(a){if("string"===typeof a)try{a=h.parseJSON(a)}catch(e){b.rejectWith(b,["Unable to parse Ajax commands.","error"])}if(h.isArray(a)){var f=function(a){var c=a.type,c=d.parsers[c]||g[c];if(h.isFunction(c))return c.apply(b,a.data)};a=h.map(a,function(a){if("notify"==a.type)f(a);else return a});h.each(a,function(a,b){f(b)})}else b.rejectWith(b,
["Invalid ajax commands.","error"]);"pending"===b.state()&&b.resolveWith(b)}).fail(function(a,e,f){b.rejectWith(b,[f,e])});return b};d.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},dataType:"json"};d.parsers={script:function(){var d=h.makeArray(arguments);if("string"==typeof d[0])try{eval(d[0])}catch(b){}else{var a=window;h.each(d,function(b,e){"Foundry"===e.property&&(e.property=h.globalNamespace);"Foundry"===e.method&&(e.method=h.globalNamespace);try{switch(e.type){case "get":a=
a[e.property];break;case "set":a[e.property]=e.value;break;case "call":a=a[e.method].apply(a,e.args)}}catch(f){}})}},resolve:function(){this.resolveWith(this,arguments)},reject:function(){this.rejectWith(this,arguments)},notify:function(){this.notifyWith(this,arguments)},redirect:function(d){window.location=d}}});
FD31.plugin("component",function(h){var d=h.Component=function(a,b){return 1>arguments.length?d.registry:2>arguments.length?d.registry[a]:d.register(a,b)};d.registry={};d.proxy=function(a,b,e){h.isFunction(e)?a[b]=h.proxy(e,a):a[b]=e};d.register=function(a,b){var e;h.isFunction(a)&&(e=a,a=e.className,b=e.options);var f=d.registry[a]=window[a]=function(a){return h.isFunction(a)?a(h):component};h.each(d.prototype,function(a,b){d.proxy(f,a,b)});f.$=h;f.options=b;f.className=a;f.identifier=a.toLowerCase();
f.componentName="com_"+f.identifier;f.prefix=f.identifier+"/";f.version=b.version;f.safeVersion=f.version.replace(/\./g,"");f.environment=b.environment||h.environment;f.mode=b.mode||h.mode;f.debug="development"===f.environment;f.console=d.console(f);f.language=b.language||h.locale.lang||"en";f.baseUrl=b.baseUrl||h.indexUrl+"?option="+f.componentName;f.ajaxUrl=b.ajaxUrl||h.basePath+"/?option="+f.componentName;f.scriptPath=b.scriptPath||h.rootPath+"/media/"+f.componentName+"/scripts/";f.stylePath=b.stylePath||
h.rootPath+"/media/"+f.componentName+"/styles/";f.templatePath=b.templatePath||b.scriptPath;f.languagePath=b.languagePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=lang&task=getLanguage";f.viewPath=b.viewPath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=themes&task=getAjaxTemplate";f.optimizeResources=!0;f.resourcePath=b.resourcePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=foundry&task=getResource";f.resourceInterval=1200;f.scriptVersioning=b.scriptVersioning||!1;f.token=(e||{}).token;
f.tasks=[];FD31.component(a,f);if(e)if(f.debug)e.queue.execute();else{for(var k,n=FD31.installer(a);k=n.shift();)f.install.apply(f,k);h.when(f.install("definitions"),f.install("scripts"),f.install("resources")).done(function(){e.queue.execute()})}};d.extend=function(a,b){d.prototype[a]=b;h.each(d.registry,function(e,f){d.proxy(f,a,b)})};h.template("component/console",'<div id="[%== component.identifier %]-console" class="foundry-console" style="display: none; z-index: 999999;"><div class="console-header"><div class="console-title">[%= component.className %] [%= component.version %]</div><div class="console-remove-button">x</div></div><div class="console-log-item-group"></div><style type="text/css">.foundry-console{position:fixed;width:50%;height:50%;bottom:0;left:0;background:white;box-shadow: 0 0 5px 0;margin-left: 25px;}.console-log-item-group{width: 100%;height: 100%;overflow-y:scroll;}.console-header{position: absolute;background:red;color:white;font-weight:bold;top:-24px;left: 0;line-height:24px;width:100%}.console-remove-button{text-align:center;cursor: pointer;display:block;width: 24px;float:right}.console-remove-button:hover{color: yellow}.console-title{padding: 0 5px;float:left}.console-log-item{padding: 5px}.console-log-item + .console-log-item{border-top: 1px solid #ccc}</style></div>');
d.console=function(a){return function(a){var b=function(a){return 1>arguments.length?b.toggle():b[a]&&b[a].apply(b,arguments)},f;b.selector="#"+a.identifier+"-console";b.init=function(){f=h(b.selector);1>f.length&&(f=h(h.View("component/console",{component:a})).appendTo("body"),f.find(".console-remove-button").click(function(){f.hide()}));b.element=f;return arguments.callee}();b.methods={log:function(b,e,d){e=e||"info";var g=f.find(".console-log-item-group");b=h(document.createElement("div")).addClass("console-log-item type-"+
e).attr("data-code",d).html(b);g.append(b);g[0].scrollTop=g[0].scrollHeight;a.debug&&f.show()},toggle:function(){f.toggle()},reset:function(){f.find(".console-log-item-group").empty()}};h.each(b.methods,function(a,c){b[a]=function(){b.init();return c.apply(b,arguments)}});return b}(a)};var g=h(document),b=d.prototype;h.extend(b,{run:function(a){return h.isFunction(a)?a(h):this},ready:function(){g.ready(function(){b.ready=b.run});return function(a){h.isFunction(a)&&g.ready(function(){a(h)})}}(),install:function(a,
b){var e=this,f=e.tasks[a]||(e.tasks[a]=h.Deferred());if(!b)return f;var d=function(){b(h,e);return f.resolve()};if("definitions"==a)return d();h.when(e.install("definitions")).done(d)},template:function(a){var b=this;if(void 0==a)return h.grep(h.template(),function(a){return 0==a.indexOf(b.prefix)});arguments[0]=b.prefix+a;return h.template.apply(null,arguments)},require:function(a){var b=this;a=a||{};var e=h.require(a),f={};h.each(["library","script","language","template","done"],function(a,b){f[b]=
e[b]});e.resource=function(a){if(h.isPlainObject(a)&&a.type&&a.name&&h.isDeferred(a.loader)){var f=b.resourceCollector;f||(f=b.resourceCollector=h.Deferred(),h.extend(f,{name:h.uid("ResourceCollector"),manifest:[],loaderList:[],loaders:[],load:function(){delete b.resourceCollector;if(0>f.manifest.length)f.resolve();else{var a=0,e=function(){a++;h.Ajax({type:"POST",url:b.resourcePath,dataType:"json",data:{resource:f.manifest}}).done(function(e){h.isArray(e)?(h.each(e,function(a,b){var c=b.content;
f.loaders[b.id][void 0!==c?"resolve":"reject"](c)}),1<a&&b.debug&&console.info("Attempt to try and get resources again was successful!")):f.reject("Server did not return a valid resource manifest.")}).fail(function(){2<a?b.debug&&console.error("Unable to get resource again. Giving up!"):(b.debug&&console.warn("Unable to get resource. Trying again..."),e())})};e();h.when.apply(null,f.loaderList).done(f.resolve).fail(f.reject)}}}),setTimeout(f.load,b.resourceCollectionInterval));var d=a.id=h.uid("Resource");
f.loaders[d]=a.loader;f.loaderList.push(a.loader);delete a.loader;f.manifest.push(a);return e}};e.view=function(){var a=this,f=a.expand(arguments,{path:b.viewPath}),d={},g=f.options,f=h.map(f.names,function(f){var n=b.prefix+f,g=h.require.template.loaders[n];if(!g)if(g=h.require.template.loader(n),g.name=n,a.addTask(g),b.optimizeResources)e.resource({type:"view",name:f,loader:g});else return d[f]=g,f});0<f.length&&h.Ajax({url:g.path,dataType:"json",data:{names:f}}).done(function(a){h.isArray(a)&&
h.each(a,function(a,b){var c=b.content;d[b.name][void 0!==c?"resolve":"reject"](c)})});return e};e.language=function(){var a=this,d=a.expand(arguments,{path:b.languagePath});b.optimizeResources?h.each(d.names,function(b,c){var f=h.require.language.loaders[c];f||(f=h.require.language.loader(c),f.name=c,a.addTask(f),e.resource({type:"language",name:c,loader:f}))}):f.language.apply(e,[d.options].concat(d.names));return e};e.library=function(){f.script.apply(this,arguments);return e};e.script=function(){var a=
this.expand(arguments,{path:b.scriptPath});names=h.map(a.names,function(e){if(h.isArray(e)||h.isUrl(e)||/^(\/|\.)/.test(e))return e;var f=b.prefix+e;e=h.uri(a.options.path).toPath("./"+e+"."+(a.options.extension||"js")+(b.scriptVersioning?"?version="+b.safeVersion:"")).toString();return[[f,e,!0]]});f.script.apply(e,[a.options].concat(names));return e};e.template=function(){var a=this.expand(arguments,{path:b.templatePath});f.template.apply(e,[a.options].concat(h.map(a.names,function(a){return[[b.prefix+
a,a]]})));return e};e.done=function(a){return f.done.call(e,function(){b.ready(a)})};return e},module:function(a,b){if(!h.isArray(a)){var e=this.prefix+a;return b?h.module.apply(null,[e,function(){b.call(this,h)}]):h.module(e)}}});h.Component.extend("getToken",function(){return h("span#"+this.identifier+"-token input").attr("name")||this.token});h.Component.extend("ajax",function(a,b,e){var f=this;a={url:f.ajaxUrl,data:h.extend(b,{option:f.componentName,namespace:a})};a=h.extend(!0,a,f.options.ajax);
a.data[f.getToken()]=1;a.data.hasOwnProperty("args")&&(a.data.args=h.toJSON(a.data.args));if(h.isPlainObject(e)){if(e.type){switch(e.type){case "jsonp":e.dataType="jsonp";e.crossDomain=!0;a.data.transport="jsonp";break;case "iframe":e.iframe=!0,e.processData=!1,e.files=a.data.files,delete a.data.files,a.data.transport="iframe"}delete e.type}h.extend(a,e)}h.isFunction(e)&&(a.success=e);e=h.server(a);e.progress(function(a,b,c){"debug"==b&&f.console.log(a,b,c)});return e});h.Component.extend("Controller",
function(){var a=h.makeArray(arguments),b=a[0],e;if(1==a.length)return h.String.getObject(b);2<a.length?(e=a[1],a=a[2]):(e={},a=a[1]);h.extend(e,{root:this.className+".Controller",component:this});return h.Controller.apply(this,[b,e,a])});h.Component.extend("Model",function(){var a=h.makeArray(arguments),b=this.className+".Model."+a[0],e,f;if(1==a.length)return h.String.getObject(a[0]);2==a.length&&(e={},f=a[1]);2<a.length&&(e=a[1],f=a[2]);h.extend(e,{component:this});return h.Model.apply(this,[b,
e,f])});h.Component.extend("Model.List",function(){var a=h.makeArray(arguments),b=this.className+".Model.List."+a[0],e,f;if(1==a.length)return h.String.getObject(a[0]);2==a.length&&(e={},f=a[1]);2<a.length&&(e=a[1],f=a[2]);h.extend(e,{component:this});return h.Model.List.apply(this,[b,e,f])});h.Component.extend("View",function(a){if(1>arguments.length)return this.template();arguments[0]=this.prefix+arguments[0];return h.View.apply(this,arguments)});FD31.module.execute();h.each(FD31.component(),function(a,
b){b.registered||h.Component.register(b)})});
FD31.plugin("static",function(h){(function(){var d=h.stylesheet({content:".foundryDialog{background:url(images/333-50.png);padding:5px;border:1px solid #333;border-radius:8px;-moz-border-radius:8px;-webkit-border-radius:8px}.foundryDialog.resizing{padding-bottom:7px}.foundryDialog .dialog-wrap{border:1px solid #333;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;background:#fff;overflow:hidden;min-height:100%;height:100%}.foundryDialog .dialog-wrap > .in{position:relative}.foundryDialog .dialog-head{font:700 14px/30px Arial;height:30px;padding:0 9px;border-top:1px solid #f5f5f5;border-bottom:1px solid #666;background:#eaeaea;color:#444 !important;border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;-webkit-border-radius:4px 4px 0 0;position:relative}.foundryDialog .dialog-body{background:#fff;padding:10px}.foundryDialog .dialog-body.type-iframe{padding:0}.foundryDialog .dialog-footer{background:#fafafa;border-top:1px solid #aaa;padding:6px;border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;-webkit-border-radius:0 0 4px 4px}.foundryDialog .dialog-buttons{text-align:right}.foundryDialog .dialog-closeButton{background:url(images/cross-8.png) center;display:block;text-indent:-9999px;width:8px;height:8px;position:absolute !important;right:10px;top:50%;margin-top:-4px;opacity:0.4;cursor:pointer}.foundryDialog .dialog-closeButton:hover{opacity:0.7}.foundryDialog .dialog-loader{position:absolute;background:rgba(255,255,255,0.5);z-index:9999}.foundryDialog .loader-img{background:url(images/ajax-loader.gif) center no-repeat;width:32px;height:32px;position:absolute;top:50%;left:50%;margin:-16px 0 0 -16px}.ui-autocomplete{position:absolute;top:0;left:0;cursor:default}"})?"resolve":
"reject";h.each(["dialog/default","ui/autocomplete"],function(g,b){h.require.stylesheet.loader(b)[d]()})})();h.module("uniform chosen event/drag mousewheel resize ui/core ui/mouse ui/widget textboxlist autosize.input scrollTo expanding tinyscrollbar history masonry dialog ui/position easing image popbox ui/autocomplete ui/menu gmaps imgareaselect".split(" "));(function(){FD31.module("uniform",function(d){var g=function(){(function(b){b.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",
fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:!0,idPrefix:"uniform",resetSelector:!1,autoHide:!0},elements:[]};b.support.selectOpacity=b.browser.msie&&7>b.browser.version?!1:!0;b.fn.uniform=function(a){function c(c){var e=b(c),f=b("<div>"),d=b("<span>");f.addClass(a.buttonClass);a.useID&&
""!=e.attr("id")&&f.attr("id",a.idPrefix+"-"+e.attr("id"));var k;if(e.is("a")||e.is("button"))k=e.text();else if(e.is(":submit")||e.is(":reset")||e.is("input[type=button]"))k=e.attr("value");k=""==k?e.is(":reset")?"Reset":"Submit":k;d.html(k);e.css("opacity",0);e.wrap(f);e.wrap(d);f=e.closest("div");d=e.closest("span");e.is(":disabled")&&f.addClass(a.disabledClass);f.bind({"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)},
"mousedown.uniform touchbegin.uniform":function(){f.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"click.uniform touchend.uniform":function(a){if(b(a.target).is("span")||b(a.target).is("div"))c[0].dispatchEvent?(a=document.createEvent("MouseEvents"),a.initEvent("click",!0,!0),c[0].dispatchEvent(a)):c[0].click()}});c.bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)}});b.uniform.noSelect(f);
g(c)}function e(c){var e=b(c),f=b("<div />"),d=b("<span />");"none"==!e.css("display")&&a.autoHide&&f.hide();f.addClass(a.selectClass);a.useID&&""!=c.attr("id")&&f.attr("id",a.idPrefix+"-"+c.attr("id"));e=c.find(":selected:first");0==e.length&&(e=c.find("option:first"));d.html(e.html());c.css("opacity",0);c.wrap(f);c.before(d);f=c.parent("div");d=c.siblings("span");c.bind({"change.uniform":function(){d.text(c.find(":selected").html());f.removeClass(a.activeClass)},"focus.uniform":function(){f.addClass(a.focusClass)},
"blur.uniform":function(){f.removeClass(a.focusClass);f.removeClass(a.activeClass)},"mousedown.uniform touchbegin.uniform":function(){f.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"click.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)},"keyup.uniform":function(){d.text(c.find(":selected").html())}});
b(c).prop("disabled")&&f.addClass(a.disabledClass);b.uniform.noSelect(d);g(c)}function f(c){var e=b(c),f=b("<div />"),d=b("<span />");"none"==!e.css("display")&&a.autoHide&&f.hide();f.addClass(a.checkboxClass);a.useID&&""!=c.attr("id")&&f.attr("id",a.idPrefix+"-"+c.attr("id"));b(c).wrap(f);b(c).wrap(d);d=c.parent();f=d.parent();b(c).css("opacity",0).bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)},"click.uniform touchend.uniform":function(){b(c).prop("checked")?
d.addClass(a.checkedClass):d.removeClass(a.checkedClass)},"mousedown.uniform touchbegin.uniform":function(){f.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)}});b(c).prop("checked")&&d.addClass(a.checkedClass);b(c).prop("disabled")&&f.addClass(a.disabledClass);g(c)}function d(c){var e=b(c),f=b("<div />"),
k=b("<span />");"none"==!e.css("display")&&a.autoHide&&f.hide();f.addClass(a.radioClass);a.useID&&""!=c.attr("id")&&f.attr("id",a.idPrefix+"-"+c.attr("id"));b(c).wrap(f);b(c).wrap(k);k=c.parent();f=k.parent();b(c).css("opacity",0).bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)},"click.uniform touchend.uniform":function(){if(b(c).prop("checked")){var e=a.radioClass.split(" ")[0];b("."+e+" span."+a.checkedClass+":has([name='"+b(c).attr("name")+
"'])").removeClass(a.checkedClass);k.addClass(a.checkedClass)}else k.removeClass(a.checkedClass)},"mousedown.uniform touchend.uniform":function(){b(c).is(":disabled")||f.addClass(a.activeClass)},"mouseup.uniform touchbegin.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform touchend.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)}});b(c).prop("checked")&&k.addClass(a.checkedClass);b(c).prop("disabled")&&
f.addClass(a.disabledClass);g(c)}function n(c){var e=b(c),f=b("<div />"),d=b("<span>"+a.fileDefaultText+"</span>"),k=b("<span>"+a.fileBtnText+"</span>");"none"==!e.css("display")&&a.autoHide&&f.hide();f.addClass(a.fileClass);d.addClass(a.filenameClass);k.addClass(a.fileBtnClass);a.useID&&""!=e.attr("id")&&f.attr("id",a.idPrefix+"-"+e.attr("id"));e.wrap(f);e.after(k);e.after(d);f=e.closest("div");d=e.siblings("."+a.filenameClass);k=e.siblings("."+a.fileBtnClass);if(!e.attr("size")){var n=f.width();
e.attr("size",n/10)}var h=function(){var b=e.val();""===b?b=a.fileDefaultText:(b=b.split(/[\/\\]+/),b=b[b.length-1]);d.text(b)};h();e.css("opacity",0).bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)},"mousedown.uniform":function(){b(c).is(":disabled")||f.addClass(a.activeClass)},"mouseup.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);
f.removeClass(a.activeClass)}});b.browser.msie?e.bind("click.uniform.ie7",function(){setTimeout(h,0)}):e.bind("change.uniform",h);e.prop("disabled")&&f.addClass(a.disabledClass);b.uniform.noSelect(d);b.uniform.noSelect(k);g(c)}function g(a){a=b(a).get();1<a.length?b.each(a,function(a,c){b.uniform.elements.push(c)}):b.uniform.elements.push(a)}a=b.extend(b.uniform.options,a);var h=this;!1!=a.resetSelector&&b(a.resetSelector).mouseup(function(){setTimeout(function(){b.uniform.update(h)},10)});b.uniform.restore=
function(a){void 0==a&&(a=b(b.uniform.elements));b(a).each(function(){b(this).is(":checkbox")?b(this).unwrap().unwrap():b(this).is("select")?(b(this).siblings("span").remove(),b(this).unwrap()):b(this).is(":radio")?b(this).unwrap().unwrap():b(this).is(":file")?(b(this).siblings("span").remove(),b(this).unwrap()):b(this).is("button, :submit, :reset, a, input[type='button']")&&b(this).unwrap().unwrap();b(this).unbind(".uniform");b(this).css("opacity","1");var c=b.inArray(b(a),b.uniform.elements);b.uniform.elements.splice(c,
1)})};b.uniform.noSelect=function(a){function c(){return!1}b(a).each(function(){this.onselectstart=this.ondragstart=c;b(this).mousedown(c).css({MozUserSelect:"none"})})};b.uniform.update=function(c){void 0==c&&(c=b(b.uniform.elements));c=b(c);c.each(function(){var e=b(this);if(e.is("select")){var f=e.siblings("span"),d=e.parent("div");d.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass);f.html(e.find(":selected").html());e.is(":disabled")?d.addClass(a.disabledClass):d.removeClass(a.disabledClass)}else if(e.is(":checkbox"))f=
e.closest("span"),d=e.closest("div"),d.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),f.removeClass(a.checkedClass),e.is(":checked")&&f.addClass(a.checkedClass),e.is(":disabled")?d.addClass(a.disabledClass):d.removeClass(a.disabledClass);else if(e.is(":radio"))f=e.closest("span"),d=e.closest("div"),d.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),f.removeClass(a.checkedClass),e.is(":checked")&&f.addClass(a.checkedClass),e.is(":disabled")?d.addClass(a.disabledClass):d.removeClass(a.disabledClass);
else if(e.is(":file"))d=e.parent("div"),f=e.siblings(a.filenameClass),btnTag=e.siblings(a.fileBtnClass),d.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),f.text(e.val()),e.is(":disabled")?d.addClass(a.disabledClass):d.removeClass(a.disabledClass);else if(e.is(":submit")||e.is(":reset")||e.is("button")||e.is("a")||c.is("input[type=button]"))d=e.closest("div"),d.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),e.is(":disabled")?d.addClass(a.disabledClass):d.removeClass(a.disabledClass)})};
return this.each(function(){if(b.support.selectOpacity){var a=b(this);a.is("select")?!0!=a.attr("multiple")&&(void 0==a.attr("size")||1>=a.attr("size"))&&e(a):a.is(":checkbox")?f(a):a.is(":radio")?d(a):a.is(":file")?n(a):a.is(":text, :password, input[type='email']")?($el=b(a),$el.addClass($el.attr("type")),g(a)):a.is("textarea")?(b(a).addClass("uniform"),g(a)):(a.is("a")||a.is(":submit")||a.is(":reset")||a.is("button")||a.is("input[type=button]"))&&c(a)}})}})(d)};g();this.resolveWith(g)})})();(function(){FD31.module("chosen",
function(d){var g=function(){var b={};(function(){var a;a=function(){function a(){this.options_index=0;this.parsed=[]}a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)};a.prototype.add_group=function(a){var b,c,d,g,h,r;b=this.parsed.length;this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled});h=a.childNodes;r=[];d=0;for(g=h.length;d<g;d++)c=h[d],r.push(this.add_option(c,b,a.disabled));return r};a.prototype.add_option=
function(a,b,c){if("OPTION"===a.nodeName.toUpperCase())return""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:!0===c?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};return a}();a.select_to_array=function(b){var e,
f,d,n;e=new a;n=b.childNodes;f=0;for(d=n.length;f<d;f++)b=n[f],e.add_node(b);return e.parsed};this.SelectParser=a}).call(b);(function(){this.AbstractChosen=function(){function a(a,b){this.form_field=a;this.options=null!=b?b:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()}a.prototype.set_default_values=function(){var a=this;this.click_test_action=function(b){return a.test_active_click(b)};
this.activate_action=function(b){return a.activate_field(b)};this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_single_selected=this.result_highlighted=null;this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||!1;this.search_contains=
this.options.search_contains||!1;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||!1;return this.max_selected_options=this.options.max_selected_options||Infinity};a.prototype.set_default_text=function(){this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.default_text=this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||
this.options.placeholder_text||"Select an Option";return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"};a.prototype.mouse_enter=function(){return this.mouse_on_container=!0};a.prototype.mouse_leave=function(){return this.mouse_on_container=!1};a.prototype.input_focus=function(a){var b=this;if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)};a.prototype.input_blur=function(a){var b=
this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return b.blur_test()},100)};a.prototype.result_add_option=function(a){var b,f;if(a.disabled)return"";a.dom_id=this.container_id+"_o_"+a.array_index;b=a.selected&&this.is_multiple?[]:["active-result"];a.selected&&b.push("result-selected");null!=a.group_array_index&&b.push("group-option");""!==a.classes&&b.push(a.classes);f=""!==a.style.cssText?' style="'+a.style+'"':"";return'<li id="'+a.dom_id+'" class="'+b.join(" ")+
'"'+f+">"+a.html+"</li>"};a.prototype.results_update_field=function(){this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};a.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()};a.prototype.keyup_checker=function(a){var b,f;b=null!=(f=a.which)?f:a.keyCode;
this.search_field_scale();switch(b){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};a.prototype.generate_field_id=function(){var a;
a=this.generate_random_id();return this.form_field.id=a};a.prototype.generate_random_char=function(){var a;a=Math.floor(36*Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(a,a+1)};return a}()}).call(b);(function(){var a,b,e,f=Object.prototype.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var e in b)f.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};e=this;d.fn.extend({chosen:function(b){return d.browser.msie&&
("6.0"===d.browser.version||"7.0"===d.browser.version&&7===document.documentMode)?this:this.each(function(c){c=d(this);if(!c.hasClass("chzn-done"))return c.data("chosen",new a(this,b))})}});a=function(a){function f(){f.__super__.constructor.apply(this,arguments)}k(f,a);f.prototype.setup=function(){this.form_field_jq=d(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};f.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};
f.prototype.set_up_html=function(){var a,e;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();a=d("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?a.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):
a.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(a);this.container=d("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();a=this.container.height();
e=this.f_width-b(this.dropdown);this.dropdown.css({width:e+"px",top:a+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),
this.selected_item=this.container.find(".chzn-single").first(),a=e-b(this.search_container)-b(this.search_field),this.search_field.css({width:a+"px"}));this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};f.prototype.register_observers=function(){var a=this;this.container.mousedown(function(b){return a.container_mousedown(b)});this.container.mouseup(function(b){return a.container_mouseup(b)});this.container.mouseenter(function(b){return a.mouse_enter(b)});
this.container.mouseleave(function(b){return a.mouse_leave(b)});this.search_results.mouseup(function(b){return a.search_results_mouseup(b)});this.search_results.mouseover(function(b){return a.search_results_mouseover(b)});this.search_results.mouseout(function(b){return a.search_results_mouseout(b)});this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)});this.form_field_jq.bind("liszt:activate",function(b){return a.activate_field(b)});this.form_field_jq.bind("liszt:open",
function(b){return a.container_mousedown(b)});this.search_field.blur(function(b){return a.input_blur(b)});this.search_field.keyup(function(b){return a.keyup_checker(b)});this.search_field.keydown(function(b){return a.keydown_checker(b)});return this.is_multiple?(this.search_choices.click(function(b){return a.choices_click(b)}),this.search_field.focus(function(b){return a.input_focus(b)})):this.container.click(function(a){return a.preventDefault()})};f.prototype.search_field_disabled=function(){if(this.is_disabled=
this.form_field_jq[0].disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)};f.prototype.container_mousedown=function(a){var b;if(!this.is_disabled){b=null!=a?d(a.target).hasClass("search-choice-close"):!1;a&&"mousedown"===
a.type&&!this.results_showing&&a.stopPropagation();if(this.pending_destroy_click||b)return this.pending_destroy_click=!1;this.active_field?this.is_multiple||!a||d(a.target)[0]!==this.selected_item[0]&&!d(a.target).parents("a.chzn-single").length||(a.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),d(document).click(this.click_test_action),this.results_show());return this.activate_field()}};f.prototype.container_mouseup=function(a){if("ABBR"===a.target.nodeName&&
!this.is_disabled)return this.results_reset(a)};f.prototype.blur_test=function(a){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};f.prototype.close_field=function(){d(document).unbind("click",this.click_test_action);this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1));this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();
this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};f.prototype.activate_field=function(){this.is_multiple||this.active_field||(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1));this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};f.prototype.test_active_click=function(a){return d(a.target).parents("#"+
this.container_id).length?this.active_field=!0:this.close_field()};f.prototype.results_build=function(){var a,b,c,f,d;this.parsing=!0;this.results_data=e.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):
this.container.removeClass("chzn-container-single-nosearch"));a="";d=this.results_data;c=0;for(f=d.length;c<f;c++)b=d[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();
this.search_results.html(a);return this.parsing=!1};f.prototype.result_add_group=function(a){if(a.disabled)return"";a.dom_id=this.container_id+"_g_"+a.array_index;return'<li id="'+a.dom_id+'" class="group-result">'+d("<div />").text(a.label).html()+"</li>"};f.prototype.result_do_highlight=function(a){var b,c,e,f;if(a.length){this.result_clear_highlight();this.result_highlight=a;this.result_highlight.addClass("highlighted");c=parseInt(this.search_results.css("maxHeight"),10);f=this.search_results.scrollTop();
e=c+f;b=this.result_highlight.position().top+this.search_results.scrollTop();a=b+this.result_highlight.outerHeight();if(a>=e)return this.search_results.scrollTop(0<a-c?a-c:0);if(b<f)return this.search_results.scrollTop(b)}};f.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};f.prototype.results_show=function(){var a;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&
this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;a=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:a+"px",left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};f.prototype.results_hide=
function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=!1};f.prototype.set_tab_index=function(a){if(this.form_field_jq.attr("tabindex")){a=this.form_field_jq.attr("tabindex");this.form_field_jq.attr("tabindex",-1);if(this.is_multiple)return this.search_field.attr("tabindex",a);this.selected_item.attr("tabindex",
a);return this.search_field.attr("tabindex",-1)}};f.prototype.show_search_field_default=function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};f.prototype.search_results_mouseup=function(a){var b;b=d(a.target).hasClass("active-result")?d(a.target):d(a.target).parents(".active-result").first();if(b.length)return this.result_highlight=
b,this.result_select(a)};f.prototype.search_results_mouseover=function(a){if(a=d(a.target).hasClass("active-result")?d(a.target):d(a.target).parents(".active-result").first())return this.result_do_highlight(a)};f.prototype.search_results_mouseout=function(a){if(d(a.target).hasClass("active-result"))return this.result_clear_highlight()};f.prototype.choices_click=function(a){a.preventDefault();if(this.active_field&&!d(a.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};
f.prototype.choice_build=function(a){var b,c=this;if(this.is_multiple&&this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;b=this.container_id+"_c_"+a.array_index;this.choices+=1;this.search_container.before(a.disabled?'<li class="search-choice search-choice-disabled" id="'+b+'"><span>'+a.html+"</span></li>":'<li class="search-choice" id="'+b+'"><span>'+a.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+a.array_index+
'"></a></li>');return d("#"+b).find("a").first().click(function(a){return c.choice_destroy_link_click(a)})};f.prototype.choice_destroy_link_click=function(a){a.preventDefault();if(this.is_disabled)return a.stopPropagation;this.pending_destroy_click=!0;return this.choice_destroy(d(a.target))};f.prototype.choice_destroy=function(a){if(this.result_deselect(a.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&0<this.choices&&1>this.search_field.val().length&&this.results_hide(),
a.parents("li").first().remove()};f.prototype.results_reset=function(){this.form_field.options[0].selected=!0;this.selected_item.find("span").text(this.default_text);this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};f.prototype.results_reset_cleanup=function(){this.current_value=this.form_field_jq.val();return this.selected_item.find("abbr").remove()};
f.prototype.result_select=function(a){var b,c;if(this.result_highlight)return b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),b=c.substr(c.lastIndexOf("_")+1),b=this.results_data[b],b.selected=!0,this.form_field.options[b.options_index].selected=!0,this.is_multiple?
this.choice_build(b):(this.selected_item.find("span").first().text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()),a.metaKey&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[b.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()};f.prototype.result_activate=function(a){return a.addClass("active-result")};
f.prototype.result_deactivate=function(a){return a.removeClass("active-result")};f.prototype.result_deselect=function(a){var b;b=this.results_data[a];if(this.form_field.options[b.options_index].disabled)return!1;b.selected=!1;this.form_field.options[b.options_index].selected=!1;d("#"+this.container_id+"_o_"+a).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value});
this.search_field_scale();return!0};f.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&1>this.selected_item.find("abbr").length)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};f.prototype.winnow_results=function(){var a,b,c,e,f,k,n,g,h,p,B,x,R,S,O;this.no_results_clear();g=0;h=this.search_field.val()===this.default_text?"":d("<div/>").text(d.trim(this.search_field.val())).html();f=RegExp((this.search_contains?"":"^")+
h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");p=RegExp(h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");O=this.results_data;B=0;for(R=O.length;B<R;B++)if(b=O[B],!b.disabled&&!b.empty)if(b.group)d("#"+b.dom_id).css("display","none");else if(!this.is_multiple||!b.selected){a=!1;n=b.dom_id;k=d("#"+n);if(f.test(b.html))a=!0,g+=1;else if(0<=b.html.indexOf(" ")||0===b.html.indexOf("["))if(e=b.html.replace(/\[|\]/g,"").split(" "),e.length)for(x=0,S=e.length;x<S;x++)c=e[x],f.test(c)&&(a=!0,g+=1);a?(h.length?
(a=b.html.search(p),c=b.html.substr(0,a+h.length)+"</em>"+b.html.substr(a+h.length),c=c.substr(0,a)+"<em>"+c.substr(a)):c=b.html,k.html(c),this.result_activate(k),null!=b.group_array_index&&d("#"+this.results_data[b.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&n===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(k))}return 1>g&&h.length?this.no_results(h):this.winnow_results_set_highlight()};f.prototype.winnow_results_clear=function(){var a,
b,c,e,f;this.search_field.val("");b=this.search_results.find("li");f=[];c=0;for(e=b.length;c<e;c++)a=b[c],a=d(a),a.hasClass("group-result")?f.push(a.css("display","auto")):this.is_multiple&&a.hasClass("result-selected")?f.push(void 0):f.push(this.result_activate(a));return f};f.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=a.length?a.first():this.search_results.find(".active-result").first(),
null!=a))return this.result_do_highlight(a)};f.prototype.no_results=function(a){var b;b=d('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');b.find("span").first().html(a);return this.search_results.append(b)};f.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};f.prototype.keydown_arrow=function(){var a;this.result_highlight?this.results_showing&&(a=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(a):
(a=this.search_results.find("li.active-result").first())&&this.result_do_highlight(d(a));if(!this.results_showing)return this.results_show()};f.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};f.prototype.keydown_backstroke=function(){var a;
if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();a=this.search_container.siblings("li.search-choice").last();if(a.length&&!a.hasClass("search-choice-disabled"))return this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};f.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");
return this.pending_backstroke=null};f.prototype.keydown_checker=function(a){var b,c;b=null!=(c=a.which)?c:a.keyCode;this.search_field_scale();8!==b&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};f.prototype.search_field_scale=
function(){var a,b,c,e,f;if(this.is_multiple){b="position:absolute; left: -1000px; top: -1000px; display:none;";c="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");e=0;for(f=c.length;e<f;e++)a=c[e],b+=a+":"+this.search_field.css(a)+";";a=d("<div />",{style:b});a.text(this.search_field.val());d("body").append(a);b=a.width()+25;a.remove();b>this.f_width-10&&(b=this.f_width-10);this.search_field.css({width:b+"px"});a=this.container.height();return this.dropdown.css({top:a+
"px"})}};f.prototype.generate_random_id=function(){var a;for(a="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();0<d("#"+a).length;)a+=this.generate_random_char();return a};return f}(e.AbstractChosen);b=function(a){return a.outerWidth()-a.width()};e.get_side_border_padding=b}).call(b)};g();this.resolveWith(g)})})();(function(){FD31.module("event/drag",function(d){var g=function(){(function(b){b.fn.drag=function(a,c,e){var f="string"==typeof a?a:"",d=b.isFunction(a)?
a:b.isFunction(c)?c:null;0!==f.indexOf("drag")&&(f="drag"+f);e=(a==d?c:e)||{};return d?this.bind(f,e,d):this.trigger(f)};var a=b.event,c=a.special,e=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(a){var c=b.data(this,e.datakey),f=a.data||{};c.related+=1;b.each(e.defaults,function(a,b){void 0!==f[a]&&(c[a]=f[a])})},remove:function(){b.data(this,e.datakey).related-=1},setup:function(){if(!b.data(this,e.datakey)){var c=
b.extend({related:0},e.defaults);b.data(this,e.datakey,c);a.add(this,"touchstart mousedown",e.init,c);this.attachEvent&&this.attachEvent("ondragstart",e.dontstart)}},teardown:function(){(b.data(this,e.datakey)||{}).related||(b.removeData(this,e.datakey),a.remove(this,"touchstart mousedown",e.init),e.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",e.dontstart))},init:function(f){if(!e.touched){var d=f.data,k;if(!(0!=f.which&&0<d.which&&f.which!=d.which||b(f.target).is(d.not)||d.handle&&
!b(f.target).closest(d.handle,f.currentTarget).length)&&(e.touched="touchstart"==f.type?this:null,d.propagates=1,d.mousedown=this,d.interactions=[e.interaction(this,d)],d.target=f.target,d.pageX=f.pageX,d.pageY=f.pageY,d.dragging=null,k=e.hijack(f,"draginit",d),d.propagates&&((k=e.flatten(k))&&k.length&&(d.interactions=[],b.each(k,function(){d.interactions.push(e.interaction(this,d))})),d.propagates=d.interactions.length,!1!==d.drop&&c.drop&&c.drop.handler(f,d),e.textselect(!1),e.touched?a.add(e.touched,
"touchmove touchend",e.handler,d):a.add(document,"mousemove mouseup",e.handler,d),!e.touched||d.live)))return!1}},interaction:function(a,c){var f=b(a)[c.relative?"position":"offset"]()||{top:0,left:0};return{drag:a,callback:new e.callback,droppable:[],offset:f}},handler:function(f){var d=f.data;switch(f.type){case !d.dragging&&"touchmove":f.preventDefault();case !d.dragging&&"mousemove":if(Math.pow(f.pageX-d.pageX,2)+Math.pow(f.pageY-d.pageY,2)<Math.pow(d.distance,2))break;f.target=d.target;e.hijack(f,
"dragstart",d);d.propagates&&(d.dragging=!0);case "touchmove":f.preventDefault();case "mousemove":if(d.dragging){e.hijack(f,"drag",d);if(d.propagates){!1!==d.drop&&c.drop&&c.drop.handler(f,d);break}f.type="mouseup"}default:e.touched?a.remove(e.touched,"touchmove touchend",e.handler):a.remove(document,"mousemove mouseup",e.handler),d.dragging&&(!1!==d.drop&&c.drop&&c.drop.handler(f,d),e.hijack(f,"dragend",d)),e.textselect(!0),!1===d.click&&d.dragging&&b.data(d.mousedown,"suppress.click",(new Date).getTime()+
5),d.dragging=e.touched=!1}},hijack:function(c,f,d,k,g){if(d){var h=c.originalEvent,t=c.type,m=f.indexOf("drop")?"drag":"drop",v,z=k||0,A,w;k=isNaN(k)?d.interactions.length:k;c.type=f;c.originalEvent=null;d.results=[];do!(A=d.interactions[z])||"dragend"!==f&&A.cancelled||(w=e.properties(c,d,A),A.results=[],b(g||A[m]||d.droppable).each(function(k,g){w.target=g;c.isPropagationStopped=function(){return!1};v=g?a.dispatch.call(g,c,w):null;!1===v?("drag"==m&&(A.cancelled=!0,d.propagates-=1),"drop"==f&&
(A[m][k]=null)):"dropinit"==f&&A.droppable.push(e.element(v)||g);"dragstart"==f&&(A.proxy=b(e.element(v)||A.drag)[0]);A.results.push(v);delete c.result;if("dropinit"!==f)return v}),d.results[z]=e.flatten(A.results),"dropinit"==f&&(A.droppable=e.flatten(A.droppable)),"dragstart"!=f||A.cancelled||w.update());while(++z<k);c.type=t;c.originalEvent=h;return e.flatten(d.results)}},properties:function(a,b,c){var f=c.callback;f.drag=c.drag;f.proxy=c.proxy||c.drag;f.startX=b.pageX;f.startY=b.pageY;f.deltaX=
a.pageX-b.pageX;f.deltaY=a.pageY-b.pageY;f.originalX=c.offset.left;f.originalY=c.offset.top;f.offsetX=f.originalX+f.deltaX;f.offsetY=f.originalY+f.deltaY;f.drop=e.flatten((c.drop||[]).slice());f.available=e.flatten((c.droppable||[]).slice());return f},element:function(a){if(a&&(a.jquery||1==a.nodeType))return a},flatten:function(a){return b.map(a,function(a){return a&&a.jquery?b.makeArray(a):a&&a.length?e.flatten(a):a})},textselect:function(a){b(document)[a?"unbind":"bind"]("selectstart",e.dontstart).css("MozUserSelect",
a?"":"none");document.unselectable=a?"off":"on"},dontstart:function(){return!1},callback:function(){}};e.callback.prototype={update:function(){c.drop&&this.available.length&&b.each(this.available,function(a){c.drop.locate(this,a)})}};var f=a.dispatch;a.dispatch=function(a){if(0<b.data(this,"suppress."+a.type)-(new Date).getTime())b.removeData(this,"suppress."+a.type);else return f.apply(this,arguments)};var d=a.fixHooks.touchstart=a.fixHooks.touchmove=a.fixHooks.touchend=a.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),
filter:function(a,c){if(c){var e=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0]||null;e&&b.each(d.props,function(b,c){a[c]=e[c]})}return a}};c.draginit=c.dragstart=c.dragend=e})(d)};g();this.resolveWith(g)})})();(function(){FD31.module("mousewheel",function(d){var g=function(){function b(a){var b=a||window.event,c=[].slice.call(arguments,1),k=0,g=0,h=0,t=0,t=0;a=d.event.fix(b);a.type="mousewheel";b.wheelDelta&&(k=b.wheelDelta);b.detail&&(k=-1*b.detail);b.deltaY&&(k=h=-1*b.deltaY);
b.deltaX&&(g=b.deltaX,k=-1*g);void 0!==b.wheelDeltaY&&(h=b.wheelDeltaY);void 0!==b.wheelDeltaX&&(g=-1*b.wheelDeltaX);t=Math.abs(k);if(!e||t<e)e=t;t=Math.max(Math.abs(h),Math.abs(g));if(!f||t<f)f=t;b=0<k?"floor":"ceil";k=Math[b](k/e);g=Math[b](g/f);h=Math[b](h/f);c.unshift(a,k,g,h);return(d.event.dispatch||d.event.handle).apply(this,c)}var a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],
e,f;if(d.event.fixHooks)for(var k=a.length;k;)d.event.fixHooks[a[--k]]=d.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",
a)}})};g();this.resolveWith(g)})})();(function(){FD31.module("resize",function(d){var g=function(){function b(){e=window[f](function(){a.each(function(){var a=d(this),b=a.width(),c=a.height(),e=d.data(this,g);b===e.w&&c===e.h||a.trigger(k,[e.w=b,e.h=c])});b()},c[h])}var a=d([]),c=d.resize=d.extend(d.resize,{}),e,f="setTimeout",k="resize",g=k+"-special-event",h="delay";c[h]=250;c.throttleWindow=!0;d.event.special[k]={setup:function(){if(!c.throttleWindow&&this[f])return!1;var e=d(this);a=a.add(e);
d.data(this,g,{w:e.width(),h:e.height()});1===a.length&&b()},teardown:function(){if(!c.throttleWindow&&this[f])return!1;var b=d(this);a=a.not(b);b.removeData(g);a.length||clearTimeout(e)},add:function(a){function b(a,c,f){var k=d(this),h=d.data(this,g);null==h&&(h={w:null,h:null});h.w=void 0!==c?c:k.width();h.h=void 0!==f?f:k.height();e.apply(this,arguments)}if(!c.throttleWindow&&this[f])return!1;var e;if(d.isFunction(a))return e=a,b;e=a.handler;a.handler=b}}};g();this.resolveWith(g)})})();(function(){FD31.module("ui/core",
function(d){var g=function(){(function(b,a){function c(a,c){var f,d;f=a.nodeName.toLowerCase();if("area"===f){f=a.parentNode;d=f.name;if(!a.href||!d||"map"!==f.nodeName.toLowerCase())return!1;f=b("img[usemap=#"+d+"]")[0];return!!f&&e(f)}return(/input|select|textarea|button|object/.test(f)?!a.disabled:"a"===f?a.href||c:c)&&e(a)}function e(a){return b.expr.filters.visible(a)&&!b(a).parents().addBack().filter(function(){return"hidden"===b.css(this,"visibility")}).length}var f=0,d=/^ui-id-\d+$/;b.ui=
b.ui||{};b.extend(b.ui,{version:"1.10.4pre",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:function(a){return function(c,e){return"number"===typeof c?this.each(function(){var a=this;setTimeout(function(){b(a).focus();e&&e.call(a)},c)}):a.apply(this,arguments)}}(b.fn.focus),
scrollParent:function(){var a;a=b.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||
!a.length?b(document):a},zIndex:function(c){if(c!==a)return this.css("zIndex",c);if(this.length){c=b(this[0]);for(var e;c.length&&c[0]!==document;){e=c.css("position");if("absolute"===e||"relative"===e||"fixed"===e)if(e=parseInt(c.css("zIndex"),10),!isNaN(e)&&0!==e)return e;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++f)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],
{data:b.expr.createPseudo?b.expr.createPseudo(function(a){return function(c){return!!b.data(c,a)}}):function(a,c,e){return!!b.data(a,e[3])},focusable:function(a){return c(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var e=b.attr(a,"tabindex"),f=isNaN(e);return(f||0<=e)&&c(a,!f)}});b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(c,e){function f(a,c,e,k){b.each(d,function(){c-=parseFloat(b.css(a,"padding"+this))||0;e&&(c-=parseFloat(b.css(a,"border"+this+"Width"))||0);k&&
(c-=parseFloat(b.css(a,"margin"+this))||0)});return c}var d="Width"===e?["Left","Right"]:["Top","Bottom"],k=e.toLowerCase(),g={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+e]=function(c){return c===a?g["inner"+e].call(this):this.each(function(){b(this).css(k,f(this,c)+"px")})};b.fn["outer"+e]=function(a,c){return"number"!==typeof a?g["outer"+e].call(this,a):this.each(function(){b(this).css(k,f(this,a,!0,c)+"px")})}});
b.fn.addBack||(b.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});b("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(b.fn.removeData=function(a){return function(c){return arguments.length?a.call(this,b.camelCase(c)):a.call(this)}}(b.fn.removeData));b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart"in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?
"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(a,c,e){var f;a=b.ui[a].prototype;for(f in e)a.plugins[f]=a.plugins[f]||[],a.plugins[f].push([c,e[f]])},call:function(a,b,c){var e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<e.length;b++)a.options[e[b][0]]&&e[b][1].apply(a.element,c)}},hasScroll:function(a,c){if("hidden"===
b(a).css("overflow"))return!1;var e=c&&"left"===c?"scrollLeft":"scrollTop",f=!1;if(0<a[e])return!0;a[e]=1;f=0<a[e];a[e]=0;return f}});b(function(){0<b("body > #fd_.ui").length||b(document.createElement("div")).attr("id","fd_").addClass("ui").css({position:"absolute",top:0,left:0,overflow:"visible",width:0,height:0}).appendTo("body")})})(d)};g();this.resolveWith(g)})})();(function(){FD31.module("ui/mouse",function(d){var g=this;d.require().script("ui/widget").done(function(){var b=function(){(function(a,
b){var e=!1;a(document).mouseup(function(){e=!1});a.widget("ui.mouse",{version:"1.10.4pre",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!e){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,d=1===b.which,g="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!d||g||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);b.preventDefault();return e=!0}},_mouseMove:function(b){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,
this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},
_mouseStop:function(){},_mouseCapture:function(){return!0}})})(d)};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/widget",function(d){var g=function(){(function(b,a){var c=0,e=Array.prototype.slice,f=b.cleanData;b.cleanData=function(a){for(var c=0,e;null!=(e=a[c]);c++)try{b(e).triggerHandler("remove")}catch(d){}f(a)};b.widget=function(a,c,e){var f,d,g,h,t={},m=a.split(".")[0];a=a.split(".")[1];f=m+"-"+a;e||(e=c,c=b.Widget);b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)};b[m]=
b[m]||{};d=b[m][a];g=b[m][a]=function(a,b){if(!this._createWidget)return new g(a,b);arguments.length&&this._createWidget(a,b)};b.extend(g,d,{version:e.version,_proto:b.extend({},e),_childConstructors:[]});h=new c;h.options=b.widget.extend({},h.options);b.each(e,function(a,e){b.isFunction(e)?t[a]=function(){var b=function(){return c.prototype[a].apply(this,arguments)},f=function(b){return c.prototype[a].apply(this,b)};return function(){var a=this._super,c=this._superApply,d;this._super=b;this._superApply=
f;d=e.apply(this,arguments);this._super=a;this._superApply=c;return d}}():t[a]=e});g.prototype=b.widget.extend(h,{widgetEventPrefix:d?h.widgetEventPrefix:a},t,{constructor:g,namespace:m,widgetName:a,widgetFullName:f});d?(b.each(d._childConstructors,function(a,c){var e=c.prototype;b.widget(e.namespace+"."+e.widgetName,g,c._proto)}),delete d._childConstructors):c._childConstructors.push(g);b.widget.bridge(a,g)};b.widget.extend=function(c){for(var f=e.call(arguments,1),d=0,g=f.length,h,u;d<g;d++)for(h in f[d])u=
f[d][h],f[d].hasOwnProperty(h)&&u!==a&&(b.isPlainObject(u)?c[h]=b.isPlainObject(c[h])?b.widget.extend({},c[h],u):b.widget.extend({},u):c[h]=u);return c};b.widget.bridge=function(c,f){var d=f.prototype.widgetFullName||c;b.fn[c]=function(g){var h="string"===typeof g,u=e.call(arguments,1),q=this;g=!h&&u.length?b.widget.extend.apply(null,[g].concat(u)):g;h?this.each(function(){var e,f=b.data(this,d);if(!f)return b.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+
g+"'");if(!b.isFunction(f[g])||"_"===g.charAt(0))return b.error("no such method '"+g+"' for "+c+" widget instance");e=f[g].apply(f,u);if(e!==f&&e!==a)return q=e&&e.jquery?q.pushStack(e.get()):e,!1}):this.each(function(){var a=b.data(this,d);a?a.option(g||{})._init():b.data(this,d,new f(g,this))});return q}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,
e){e=b(e||this.defaultElement||this)[0];this.element=b(e);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),a);this.bindings=b();this.hoverable=b();this.focusable=b();e!==this&&(b.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===e&&this.destroy()}}),this.document=b(e.style?e.ownerDocument:e.document||e),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));
this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(c,e){var f=c,d,g,h;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof c)if(f={},d=c.split("."),c=d.shift(),d.length){g=f[c]=b.widget.extend({},this.options[c]);for(h=0;h<d.length-1;h++)g[d[h]]=g[d[h]]||{},g=g[d[h]];c=d.pop();if(e===a)return g[c]===a?null:g[c];g[c]=e}else{if(e===a)return this.options[c]===
a?null:this.options[c];f[c]=e}this._setOptions(f);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",
!0)},_on:function(a,c,e){var f,d=this;"boolean"!==typeof a&&(e=c,c=a,a=!1);e?(c=f=b(c),this.bindings=this.bindings.add(c)):(e=c,c=this.element,f=this.widget());b.each(e,function(e,g){function h(){if(a||!0!==d.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof g?d[g]:g).apply(d,arguments)}"string"!==typeof g&&(h.guid=g.guid=g.guid||h.guid||b.guid++);var m=e.match(/^(\w+)\s*(.*)$/),p=m[1]+d.eventNamespace;(m=m[2])?f.delegate(m,p,h):c.bind(p,h)})},_off:function(a,b){b=
(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){b(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){b(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,
{focusin:function(a){b(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){b(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,c,e){var f,d=this.options[a];e=e||{};c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(f in a)f in c||(c[f]=a[f]);this.element.trigger(c,e);return!(b.isFunction(d)&&!1===d.apply(this.element[0],[c].concat(e))||c.isDefaultPrevented())}};b.each({show:"fadeIn",
hide:"fadeOut"},function(a,c){b.Widget.prototype["_"+a]=function(e,f,d){"string"===typeof f&&(f={effect:f});var g,h=f?!0===f||"number"===typeof f?c:f.effect||c:a;f=f||{};"number"===typeof f&&(f={duration:f});g=!b.isEmptyObject(f);f.complete=d;f.delay&&e.delay(f.delay);if(g&&b.effects&&b.effects.effect[h])e[a](f);else if(h!==a&&e[h])e[h](f.duration,f.easing,d);else e.queue(function(c){b(this)[a]();d&&d.call(e[0]);c()})}})})(d)};g();this.resolveWith(g)})})();(function(){FD31.module("textboxlist",function(d){var g=
this;d.require().script("autosize.input","scrollTo").done(function(){var b=function(){d.template("textboxlist/item",'<div class="textboxlist-item" data-textboxlist-item><span class="textboxlist-itemContent" data-textboxlist-itemContent>[%== html %]</span><div class="textboxlist-itemRemoveButton" data-textboxlist-itemRemoveButton><i class="ies-cancel-2"></i></a></div>');d.template("textboxlist/itemContent",'[%= title %]<input type="hidden" name="[%= name %]" value="[%= id %]"/>');d.Controller("Textboxlist",
{pluginName:"textboxlist",hostname:"textboxlist",defaultOptions:{view:{item:"textboxlist/item",itemContent:"textboxlist/itemContent"},plugin:{},name:"items[]",unique:!0,caseSensitive:!1,max:null,filterItem:null,"{item}":"[data-textboxlist-item]","{itemContent}":"[data-textboxlist-itemContent]","{itemRemoveButton}":"[data-textboxlist-itemRemoveButton]","{textField}":"[data-textboxlist-textField]"}},function(a){return{init:function(){var b=a.textField();b.autosizeInput();b.data("placeholderText",b.attr("placeholder"));
if(b=b.data("textboxlistName"))a.options.name=b;a.item().each(function(){var b=d(this),c=b.find(a.itemContent.selector);a.createItem({id:b.data("id")||function(){var a=d.uid("item-");b.data("id",a);return a}(),title:b.data("title")||d.trim(c.text()),html:c.html()})});(a.options.plugin.autocomplete||a.element.data("query"))&&a.addPlugin("autocomplete");a.on("keypress",a.textField(),function(a){if(13==a.keyCode)return a.preventDefault()})},setLayout:function(){var b=a.textField(),e=b.data("placeholderText");
0<a.item().length&&(e="");b.attr("placeholder",e).data("autosizeInputInstance").update()},enable:function(){a.element.removeClass("disabled");a.textField().enabled(!0)},disable:function(){a.element.addClass("disabled");a.textField().disabled(!0)},items:{},itemsByTitle:{},getItemKey:function(b){return a.options.caseSensitive?b:b.toLowerCase()},filterItem:function(b){var e=a.options.filterItem;d.isFunction(e)&&(b=e.call(a,b));e=a.itemsByTitle;if(d.isString(b)&&""!==b){var f=a.getItemKey(b);b=e.hasOwnProperty(f)?
a.itemsByTitle[f]:{id:d.uid("item-"),title:b,key:a.getItemKey(b)}}b.name=b.name||a.options.name;b.html=b.html||a.view.itemContent(!0,b);return b},createItem:function(b){b.key=a.getItemKey(b.title);a.items[b.id]=b;a.itemsByTitle[b.key]=b},deleteItem:function(b){var e=a.items[b];delete a.items[b];b=a.options.caseSensitive?e.title:e.title.toLowerCase();delete a.itemsByTitle[b]},addItem:function(b){if(b){var e=a.options,f=e.max;if(!(null!==f&&a.item().length>=f)&&(b=a.filterItem(b),d.isPlainObject(b))){var k,
f=a.item().filterBy("id",b.id);e.unique&&0<f.length&&(k=f);k||(k=a.view.item(b).attr("data-id",b.id));a.createItem(b);k.insertBefore(a.textField());a.trigger("addItem",[b]);return b}}},removeItem:function(b){var e=a.items[b];a.item().filterBy("id",b).remove();a.deleteItem(b);a.trigger("removeItem",[e])},clearItems:function(){a.item().each(function(){a.removeItem(d(this).data("id"))})},getAddedItems:function(){var b=[];a.item().each(function(){var e=d(this).data("id");b.push(a.items[e])});return b},
"{self} addItem":function(){a.setLayout()},"{self} removeItem":function(){a.setLayout()},"{itemRemoveButton} click":function(b){b=b.parents(a.item.selector);a.removeItem(b.data("id"))},"{textField} keydown":function(a,b){a.data("realEnterKey",13==b.keyCode)},"{textField} keypress":function(b,e){var f=b.data("realEnterKey"),k=13==e.keyCode;b.data("realEnterKey",f&&k);f=d.trim(a.textField().val());switch(e.keyCode){case 13:if(b.data("realEnterKey")){e=a.trigger("useItem",[f]);k=e.item;void 0===k&&(k=
f);if(!1===k||null===k)break;a.addItem(k);b.val("")}}},"{textField} keyup":function(b,e){var f=d.trim(a.textField().val());switch(e.keyCode){case 8:""===f&&(a.canRemoveItemUsingBackspace?(f=b.prev(a.item.selector),0<f.length&&a.removeItem(f.data("id"))):a.canRemoveItemUsingBackspace=!0);break;default:a.canRemoveItemUsingBackspace=!1}},"{self} click":function(b,e){var f=a.textField();f.is(e.target)||f.focus()},"{textField} focusin":function(){a.activated||(a.activated=!0,a.trigger("textboxlistActivate"))},
"{self} mousedown":function(){a.focusing=!0},"{self} mouseup":function(){a.focusing=!1},"{self} focusout":function(){a.focusing||(a.activated=!1,a.deactivateTimer=setTimeout(function(){a.activated||a.trigger("textboxlistDeactivate")},1))}}});d(document).on("click.textboxlist.data-api","[data-textboxlist]",function(a){d(this).addController(d.Controller.TextboxList).textField().focus()}).on("focus.textboxlist.data-api","[data-textboxlist] [data-textboxlist-textField]",function(a){d(this).parents("[data-textboxlist]").addController(d.Controller.TextboxList)});
d.template("textboxlist/menu",'<div class="textboxlist-autocomplete" data-textboxlist-autocomplete><div class="textboxlist-autocomplete-inner" data-textboxlist-autocomplete-viewport><div class="textboxlist-autocomplete-loading" data-textboxlist-autocomplete-loading></div><div class="textboxlist-autocomplete-empty" data-textboxlist-autocomplete-empty></div><ul class="textboxlist-menu" data-textboxlist-menu></ul></div></div>');d.template("textboxlist/menuItem",'<li class="textboxlist-menuItem" data-textboxlist-menuItem>[%== html %]</li>');
d.template("textboxlist/loadingHint",'<i class="textboxlist-autocomplete-loading-indicator"></i>');d.template("textboxlist/emptyHint",'<span class="textboxlist-autocomplete-empty-text">No items found.</span>');d.Controller("Textboxlist.Autocomplete",{defaultOptions:{view:{menu:"textboxlist/menu",menuItem:"textboxlist/menuItem",loadingHint:"textboxlist/loadingHint",emptyHint:"textboxlist/emptyHint"},cache:!0,minLength:1,limit:10,highlight:!0,caseSensitive:!1,exclusive:!1,query:null,position:{my:"left top",
at:"left bottom",collision:"none"},filterItem:null,showEmptyHint:!1,showLoadingHint:!1,"{menu}":"[data-textboxlist-menu]","{menuItem}":"[data-textboxlist-menuItem]","{viewport}":"[data-textboxlist-autocomplete-viewport]","{loadingHint}":"[data-textboxlist-autocomplete-loading]","{emptyHint}":"[data-textboxlist-autocomplete-empty]"}},function(a){return{init:function(){if(a.element.data(a.Class.fullName)){var b=a.textboxlist;b.autocomplete=a;b.pluginInstances.autocomplete=a;a.options.position.of=a.textboxlist.element;
a.initQuery();a.view.loadingHint().appendTo(a.loadingHint());a.view.emptyHint().appendTo(a.emptyHint());a.element.detach()}else a.destroy(),a.view.menu().appendTo("body").data(a.Class.fullName,!0).addController(a.Class,a.options)},initQuery:function(){var b=a.options.query||a.textboxlist.element.data("query");d.isUrl(b)?a.query=function(a){return d.ajax(b+a)}:d.isFunction(b)?a.query=function(e){return b.call(a,e)}:d.isArray(b)&&(a.query=function(a){var f=d.Deferred();a=a.toLowerCase();setTimeout(function(){var k=
d.grep(b,function(b){return-1<b.title.toLowerCase().indexOf(a)});f.resolve(k)},0);return f})},setLayout:function(){a.hidden||a.element.css({opacity:1,width:a.textboxlist.element.outerWidth()}).position(a.options.position)},"{window} resize":d.debounce(function(){a.element.css("opacity",0);a.setLayout()},250),"{window} scroll":d.debounce(function(){a.element.css("opacity",0);a.setLayout()},250),"{window} dialogTransitionStart":function(){a.hidden=!0;a.element.css("opacity",0)},"{window} dialogTransitionEnd":function(){a.hidden=
!1;a.setLayout()},show:function(){clearTimeout(a.sleep);a.element.appendTo("body").show();a.hidden=!1;a.setLayout()},hide:function(){a.element.hide();var b=a.menuItem(),e=b.filter(".active");0<e.length&&(a.lastItem={keyword:d.trim(a.textboxlist.textField().val()),item:e.data("item")});b.removeClass("active");a.render.reset();a.hidden=!0;clearTimeout(a.sleep);a.sleep=setTimeout(function(){a.element.detach()},3E3)},queries:{},populated:!1,populate:function(b){a.populated=!1;var e=a.element,f=a.options;
e.removeClass("loading empty");f.showLoadingHint&&a.hide();var k=a.trigger("populateKeyword",[b]);k.keyword&&(b=k.keyword);var g=f.caseSensitive?b:b.toLowerCase(),h=a.queries[g],s=!d.isDeferred(h)||!a.options.cache,k=function(){f.showLoadingHint&&(e.addClass("loading"),a.show());if(s||!s&&"rejected"==h.state())h=a.queries[g]=a.query(b);h.done(a.render(function(a){return[a,b]})).fail(function(){a.hide()}).always(function(){e.removeClass("loading")});a.trigger("queryKeyword",[h,b])};s?(clearTimeout(a.queryTask),
a.queryTask=setTimeout(k,250)):k()},populateTask:null,populateFromTextField:function(){clearTimeout(a.populateTask);a.populateTask=setTimeout(function(){var b=a.textboxlist.textField(),b=d.trim(b.val());""===b||b.length<a.options.minLength?a.hide():a.populate(b)},1)},render:d.Enqueue(function(b,e){d.isArray(b)||(b=[]);var f=a.textboxlist,k=a.element,g=a.options,h=a.menu();if(1>b.length)g.showEmptyHint?(h.empty(),k.addClass("empty"),f.trigger("renderMenu",[h,a,f]),a.show()):a.hide();else{k.removeClass("empty");
g.cache&&h.data("keyword")===e||(h.empty(),d.each(b,function(b,c){f.trigger("filterItem",[c,a,f]);var k=g.filterItem;d.isFunction(k)&&(c=k.call(a,c,e));d.isPlainObject(c)&&!c.discard&&a.view.menuItem({html:c.menuHtml||c.title}).data("item",c).appendTo(h)}),h.data("keyword",e));var s=a.menuItem();f.trigger("filterMenu",[h,s,a,f]);if(1>s.filter(":not(.hidden)").length&&(k.addClass("empty"),!g.showEmptyHint))return a.hide();g.exclusive&&a.menuItem(":not(.hidden):first").addClass("active");f.trigger("renderMenu",
[h,a,f]);a.show()}}),"{textboxlist.textField} keydown":function(b,e){clearTimeout(a.sleep);var f=a.menuItem(".active:not(.hidden)");1>f.length&&(f=!1);a.textboxlist.textField();switch(e.keyCode){case 38:a.menuItem().removeClass("active");f?f.prev(a.menuItem.selector+":not(.hidden)").addClass("active"):a.menuItem(":not(.hidden):last").addClass("active");e.preventDefault();break;case 40:a.menuItem().removeClass("active");f?f.next(a.menuItem.selector+":not(.hidden)").addClass("active"):a.menuItem(":not(.hidden):first").addClass("active");
e.preventDefault();break;case 27:a.hide();break;case 13:break;default:a.populateFromTextField()}f=a.menuItem(".active:not(.hidden)");1>f.length||a.viewport().scrollIntoView(f)},"{textboxlist} textboxlistActivate":function(b){a.populateFromTextField()},"{textboxlist} textboxlistDeactivate":function(b){setTimeout(function(){a.hide()},150)},"{textboxlist} destroyed":function(){a.element.remove()},"{textboxlist} useItem":function(b,e,f){if(b=a.options.exclusive)e.item=!1;if(a.hidden){var d=a.lastItem;
b&&d&&d.keyword==f&&(e.item=d.item)}else f=a.menuItem(".active"),0<f.length&&(f=f.data("item"),e.item=f),a.hide()},"{menuItem} mousedown":function(){a.textboxlist.focusing=!0},"{menuItem} mouseup":function(){a.textboxlist.focusing=!1},"{menuItem} click":function(b){a.hide();b=b.data("item");a.textboxlist.addItem(b);var e=a.textboxlist.textField().val("");setTimeout(function(){e.focus()},150)},"{menuItem} mouseover":function(b){a.menuItem().removeClass("active");b.addClass("active")},"{menuItem} mouseout":function(b){a.menuItem().removeClass("active")}}})};
b();g.resolveWith(b)})})})();(function(){FD31.module("autosize.input",function(d){var g=d,b=function(){var a;(function(a){var b=function(){function a(b,c){var e=this;this._input=d(b);this._options=c;this._mirror=d('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>');d.each("fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent".split(" "),function(a,b){e._mirror[0].style[b]=e._input.css(b)});d("body").append(this._mirror);this._input.bind("keydown keyup input",
function(a){e.update()});e.update()}Object.defineProperty(a.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0});Object.defineProperty(a,"instanceKey",{get:function(){return"autosizeInputInstance"},enumerable:!0,configurable:!0});a.prototype.update=function(){var a=this._input.val();a||(a=this._input.attr("placeholder"));a!==this._mirror.text()&&(this._mirror.text(a),a=this._mirror.width()+this._options.space,this._input.width(a))};return a}();a.AutosizeInput=
b;var f=function(){function a(b){"undefined"===typeof b&&(b=30);this._space=b}Object.defineProperty(a.prototype,"space",{get:function(){return this._space},set:function(a){this._space=a},enumerable:!0,configurable:!0});return a}();a.AutosizeInputOptions=f;(function(b){var e="text password search url tel email".split(" ");b.fn.autosizeInput=function(d){return this.each(function(){if("INPUT"==this.tagName&&-1<b.inArray(this.type,e)){var d=b(this);if(!d.data(a.AutosizeInput.instanceKey)){if(void 0==
g){var g=d.data("autosize-input");g&&"object"==typeof g||(g=new f)}d.data(a.AutosizeInput.instanceKey,new a.AutosizeInput(this,g))}}})};b(function(){b("input[data-autosize-input]").autosizeInput()})})(g)})(a||(a={}))};b();this.resolveWith(b)})})();(function(){FD31.module("scrollTo",function(d){var g=function(){(function(b){function a(a){return"object"==typeof a?a:{top:a,left:a}}var c=b.scrollTo=function(a,c,d){b(window).scrollTo(a,c,d)};c.defaults={axis:"xy",duration:1.3<=parseFloat(b.fn.jquery)?
0:1,limit:!0};c.window=function(a){return b(window)._scrollable()};b.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==b.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var a=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||"BackCompat"==a.compatMode?a.body:a.documentElement})};b.fn.scrollTo=function(e,f,d){"object"==typeof f&&(d=f,f=0);"function"==typeof d&&(d={onAfter:d});"max"==
e&&(e=9E9);d=b.extend({},c.defaults,d);f=f||d.duration;d.queue=d.queue&&1<d.axis.length;d.queue&&(f/=2);d.offset=a(d.offset);d.over=a(d.over);return this._scrollable().each(function(){function g(a){s.animate(q,f,d.easing,a&&function(){a.call(this,e,d)})}if(null!=e){var h=this,s=b(h),r=e,u,q={},t=s.is("html,body");switch(typeof r){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(r)){r=a(r);break}r=b(r,this);if(!r.length)return;case "object":if(r.is||r.style)u=(r=b(r)).offset()}b.each(d.axis.split(""),
function(a,b){var e="x"==b?"Left":"Top",f=e.toLowerCase(),w="scroll"+e,B=h[w],x=c.max(h,b);u?(q[w]=u[f]+(t?0:B-s.offset()[f]),d.margin&&(q[w]-=parseInt(r.css("margin"+e))||0,q[w]-=parseInt(r.css("border"+e+"Width"))||0),q[w]+=d.offset[f]||0,d.over[f]&&(q[w]+=r["x"==b?"width":"height"]()*d.over[f])):(e=r[f],q[w]=e.slice&&"%"==e.slice(-1)?parseFloat(e)/100*x:e);d.limit&&/^\d+$/.test(q[w])&&(q[w]=0>=q[w]?0:Math.min(q[w],x));!a&&d.queue&&(B!=q[w]&&g(d.onAfterFirst),delete q[w])});g(d.onAfter)}}).end()};
b.fn.scrollIntoView=function(a){a=b(a);if(!(1>a.length)){var c=this.offset(),d=this.height(),c=c.top,g=c+d,h=a.offset(),s=a.height(),h=h.top;if(h+s>g)return this.scrollTo(a);if(h<c)return this.scrollTo(a,{offset:-1*(d-s)})}};c.max=function(a,c){var d="x"==c?"Width":"Height",g="scroll"+d;if(!b(a).is("html,body"))return a[g]-b(a)[d.toLowerCase()]();var d="client"+d,h=a.ownerDocument.documentElement,s=a.ownerDocument.body;return Math.max(h[g],s[g])-Math.min(h[d],s[d])}})(d)};g();this.resolveWith(g)})})();
(function(){FD31.module("expanding",function(d){var g=function(){function b(){d(this).data("textareaClone").find("div").text(this.value.replace(/\r\n/g,"\n")+" ");d(this).trigger("resize.expanding")}d.expandingTextarea=d.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},d.expandingTextarea||{});var a="lineHeight textDecoration letterSpacing fontSize fontFamily fontStyle fontWeight textTransform textAlign direction wordSpacing fontSizeAdjust wordWrap word-break borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom boxSizing webkitBoxSizing mozBoxSizing msBoxSizing".split(" "),
c={position:"absolute",height:"100%",resize:"none"},e={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},f={position:"relative"};d.fn.expandingTextarea=function(k){var g=d.extend({},d.expandingTextarea.opts,k);if("resize"===k)return this.trigger("input.expanding");if("destroy"===k)return this.filter(".expanding-init").each(function(){var a=d(this).removeClass("expanding-init");a.attr("style",a.data("expanding-styles")||"").removeData("expanding-styles")}),this;this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var k=
d(this),h=k.parent(),r=d(d.parseHTML("<pre class='textareaClone'><div></div></pre>"));k.after(r).data("textareaClone",r);h.css(f);k.data("expanding-styles",k.attr("style"));k.css(c);r.css(e);d.each(a,function(a,b){var c=k.css(b);r.css(b)!==c&&r.css(b,c)});k.bind("input.expanding propertychange.expanding keyup.expanding",b);b.apply(this);g.resize&&k.bind("resize.expanding",g.resize)});return this};d(function(){d.expandingTextarea.autoInitialize&&d(d.expandingTextarea.initialSelector).expandingTextarea()})};
g();this.resolveWith(g)})})();(function(){FD31.module("tinyscrollbar",function(d){var g=function(){(function(b){function a(a,e){var f,d,g;function h(a){var c=parseInt(z.obj.css(w),10);f=A?a.pageX:a.pageY;d="auto"==c?0:c;R?(document.ontouchmove=function(a){a.preventDefault();r(a.touches[0])},document.ontouchend=u):(b(document).bind("mousemove",r),b(document).bind("mouseup",u),z.obj.bind("mouseup",u))}function s(a){1>t.ratio&&(a=a||window.event,x-=(a.wheelDelta?a.wheelDelta/120:-a.detail/3)*e.wheel,
x=Math.min(t[e.axis]-q[e.axis],Math.max(0,x)),z.obj.css(w,x/m.ratio),t.obj.css(w,-x),e.lockscroll||x!==t[e.axis]-q[e.axis]&&0!==x)&&(a=b.event.fix(a),a.preventDefault())}function r(a){1>t.ratio&&(g=R?Math.min(v[e.axis]-z[e.axis],Math.max(0,d+(f-(A?a.pageX:a.pageY)))):Math.min(v[e.axis]-z[e.axis],Math.max(0,d+((A?a.pageX:a.pageY)-f))),x=g*m.ratio,t.obj.css(w,-x),z.obj.css(w,g))}function u(){b(document).unbind("mousemove",r);b(document).unbind("mouseup",u);z.obj.unbind("mouseup",u);document.ontouchmove=
document.ontouchend=null}var q={obj:b(".viewport",a)},t={obj:b(".overview",a)},m={obj:b(".scrollbar",a)},v={obj:b(".track",m.obj)},z={obj:b(".thumb",m.obj)},A="x"===e.axis,w=A?"left":"top",B=A?"Width":"Height",x=0;g=d=0;f=void 0;var R="ontouchstart"in document.documentElement?!0:!1;this.update=function(a){q[e.axis]=q.obj[0]["offset"+B];t[e.axis]=t.obj[0]["scroll"+B];t.ratio=q[e.axis]/t[e.axis];m.obj.toggleClass("disable",1<=t.ratio);v[e.axis]="auto"===e.size?q[e.axis]:e.size;z[e.axis]=Math.min(v[e.axis],
Math.max(0,"auto"===e.sizethumb?v[e.axis]*t.ratio:e.sizethumb));m.ratio="auto"===e.sizethumb?t[e.axis]/v[e.axis]:(t[e.axis]-q[e.axis])/(v[e.axis]-z[e.axis]);x="relative"===a&&1>=t.ratio?Math.min(t[e.axis]-q[e.axis],Math.max(0,x)):0;x="bottom"===a&&1>=t.ratio?t[e.axis]-q[e.axis]:isNaN(parseInt(a,10))?x:parseInt(a,10);a=B.toLowerCase();z.obj.css(w,x/m.ratio);t.obj.css(w,-x);f=z.obj.offset()[w];m.obj.css(a,v[e.axis]);v.obj.css(a,v[e.axis]);z.obj.css(a,z[e.axis])};this.update();(function(){R?q.obj[0].ontouchstart=
function(a){1===a.touches.length&&(h(a.touches[0]),a.stopPropagation())}:(z.obj.bind("mousedown",h),v.obj.bind("mouseup",r));e.scroll&&window.addEventListener?(a[0].addEventListener("DOMMouseScroll",s,!1),a[0].addEventListener("mousewheel",s,!1)):e.scroll&&(a[0].onmousewheel=s)})();return this}b.tiny=b.tiny||{};b.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,lockscroll:!0,size:"auto",sizethumb:"auto"}};b.fn.tinyscrollbar=function(c){var e=b.extend({},b.tiny.scrollbar.options,c);this.each(function(){b(this).data("tsb",
new a(b(this),e))});return this};b.fn.tinyscrollbar_update=function(a){return b(this).data("tsb").update(a)}})(d)};g();this.resolveWith(g)})})();(function(){FD31.module("history",function(d){var g=function(){(function(a,b){var e=a.History=a.History||{};if("undefined"!==typeof e.Adapter)throw Error("History.js Adapter has already been loaded...");e.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,e,d){return e&&e.originalEvent&&e.originalEvent[a]||
d&&d[a]||b},onDomLoad:function(a){d(a)}};"undefined"!==typeof e.init&&e.init()})(window);(function(a,b){var e=a.document,f=a.setInterval||f,d=a.History=a.History||{};if("undefined"!==typeof d.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");d.initHtml4=function(){if("undefined"!==typeof d.initHtml4.initialized)return!1;d.initHtml4.initialized=!0;d.enabled=!0;d.savedHashes=[];d.isLastHash=function(a){var b=d.getHashByIndex();return a===b};d.saveHash=function(a){if(d.isLastHash(a))return!1;
d.savedHashes.push(a);return!0};d.getHashByIndex=function(a){var b=null;return b="undefined"===typeof a?d.savedHashes[d.savedHashes.length-1]:0>a?d.savedHashes[d.savedHashes.length+a]:d.savedHashes[a]};d.discardedHashes={};d.discardedStates={};d.discardState=function(a,b,c){var e=d.getHashByState(a);d.discardedStates[e]={discardedState:a,backState:c,forwardState:b};return!0};d.discardHash=function(a,b,c){d.discardedHashes[a]={discardedHash:a,backState:c,forwardState:b};return!0};d.discardedState=
function(a){a=d.getHashByState(a);return d.discardedStates[a]||!1};d.discardedHash=function(a){return d.discardedHashes[a]||!1};d.recycleState=function(a){var b=d.getHashByState(a);d.discardedState(a)&&delete d.discardedStates[b];return!0};d.emulated.hashChange&&(d.hashChangeInit=function(){d.checkerFunction=null;var b="",c,g,h;d.isInternetExplorer()?(c=e.createElement("iframe"),c.setAttribute("id","historyjs-iframe"),c.style.display="none",e.body.appendChild(c),c.contentWindow.document.open(),c.contentWindow.document.close(),
g="",h=!1,d.checkerFunction=function(){if(h)return!1;h=!0;var e=d.getHash()||"",f=d.unescapeHash(c.contentWindow.document.location.hash)||"";e!==b?(b=e,f!==e&&(g=e,c.contentWindow.document.open(),c.contentWindow.document.close(),c.contentWindow.document.location.hash=d.escapeHash(e)),d.Adapter.trigger(a,"hashchange")):f!==g&&(g=f,d.setHash(f,!1));h=!1;return!0}):d.checkerFunction=function(){var c=d.getHash();c!==b&&(b=c,d.Adapter.trigger(a,"hashchange"));return!0};d.intervalList.push(f(d.checkerFunction,
d.options.hashChangeInterval));return!0},d.Adapter.onDomLoad(d.hashChangeInit));d.emulated.pushState&&(d.onHashChange=function(b){var c=d.getHashByUrl(b&&b.newURL||e.location.href);b=null;if(d.isLastHash(c))return d.busy(!1),!1;d.doubleCheckComplete();d.saveHash(c);if(c&&d.isTraditionalAnchor(c))return d.Adapter.trigger(a,"anchorchange"),d.busy(!1),!1;b=d.extractState(d.getFullUrl(c||e.location.href,!1),!0);if(d.isLastSavedState(b))return d.busy(!1),!1;d.getHashByState(b);if(c=d.discardedState(b))return d.getHashByIndex(-2)===
d.getHashByState(c.forwardState)?d.back(!1):d.forward(!1),!1;d.pushState(b.data,b.title,b.url,!1);return!0},d.Adapter.bind(a,"hashchange",d.onHashChange),d.pushState=function(b,c,f,g){if(d.getHashByUrl(f))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==g&&d.busy())return d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:g}),!1;d.busy(!0);var h=d.createStateObject(b,c,f),q=d.getHashByState(h),t=d.getState(!1),t=d.getHashByState(t),
m=d.getHash();d.storeState(h);d.expectedStateId=h.id;d.recycleState(h);d.setTitle(h);if(q===t)return d.busy(!1),!1;if(q!==m&&q!==d.getShortUrl(e.location.href))return d.setHash(q,!1),!1;d.saveState(h);d.Adapter.trigger(a,"statechange");d.busy(!1);return!0},d.replaceState=function(a,b,c,e){if(d.getHashByUrl(c))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==e&&d.busy())return d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:e}),
!1;d.busy(!0);var f=d.createStateObject(a,b,c),g=d.getState(!1),h=d.getStateByIndex(-2);d.discardState(g,f,h);d.pushState(f.data,f.title,f.url,!1);return!0});if(d.emulated.pushState&&d.getHash()&&!d.emulated.hashChange)d.Adapter.onDomLoad(function(){d.Adapter.trigger(a,"hashchange")})};"undefined"!==typeof d.init&&d.init()})(window);(function(a,b){var e=a.console||b,f=a.document,d=a.navigator,g=a.sessionStorage||!1,h=a.setTimeout,s=a.clearTimeout,r=a.setInterval,u=a.clearInterval,q=a.JSON,t=a.alert,
m=a.History=a.History||{},v=a.history;q.stringify=q.stringify||q.encode;q.parse=q.parse||q.decode;if("undefined"!==typeof m.init)throw Error("History.js Core has already been loaded...");m.init=function(){if("undefined"===typeof m.Adapter)return!1;"undefined"!==typeof m.initCore&&m.initCore();"undefined"!==typeof m.initHtml4&&m.initHtml4();return!0};m.initCore=function(){if("undefined"!==typeof m.initCore.initialized)return!1;m.initCore.initialized=!0;m.options=m.options||{};m.options.hashChangeInterval=
m.options.hashChangeInterval||100;m.options.safariPollInterval=m.options.safariPollInterval||500;m.options.doubleCheckInterval=m.options.doubleCheckInterval||500;m.options.storeInterval=m.options.storeInterval||1E3;m.options.busyDelay=m.options.busyDelay||250;m.options.debug=m.options.debug||!1;m.options.initialTitle=m.options.initialTitle||f.title;m.intervalList=[];m.clearAllIntervals=function(){var a,b=m.intervalList;if("undefined"!==typeof b&&null!==b){for(a=0;a<b.length;a++)u(b[a]);m.intervalList=
null}};m.debug=function(){m.options.debug&&m.log.apply(m,arguments)};m.log=function(){var a=!("undefined"===typeof e||"undefined"===typeof e.log||"undefined"===typeof e.log.apply),b=f.getElementById("log"),c,d,g,k;a?(d=Array.prototype.slice.call(arguments),c=d.shift(),"undefined"!==typeof e.debug?e.debug.apply(e,[c,d]):e.log.apply(e,[c,d])):c="\n"+arguments[0]+"\n";d=1;for(g=arguments.length;d<g;++d){k=arguments[d];if("object"===typeof k&&"undefined"!==typeof q)try{k=q.stringify(k)}catch(h){}c+="\n"+
k+"\n"}b?(b.value+=c+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||t(c);return!0};m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion,b;if("undefined"!==typeof m.getInternetExplorerMajorVersion.cached)b=m.getInternetExplorerMajorVersion.cached;else{b=3;for(var c=f.createElement("div"),e=c.getElementsByTagName("i");(c.innerHTML="\x3c!--[if gt IE "+ ++b+"]><i></i><![endif]--\x3e")&&e[0];);b=4<b?b:!1}return a.cached=b};m.isInternetExplorer=function(){return m.isInternetExplorer.cached=
"undefined"!==typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion())};m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(d.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(d.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in f)||m.isInternetExplorer()&&8>m.getInternetExplorerMajorVersion())};m.enabled=!m.emulated.pushState;m.bugs={setHash:Boolean(!m.emulated.pushState&&
"Apple Computer, Inc."===d.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(d.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===d.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(d.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&8>m.getInternetExplorerMajorVersion()),hashEscape:Boolean(m.isInternetExplorer()&&7>m.getInternetExplorerMajorVersion())};m.isEmptyObject=function(a){for(var b in a)return!1;return!0};m.cloneObject=function(a){a?(a=q.stringify(a),a=q.parse(a)):
a={};return a};m.getRootUrl=function(){var a=f.location.protocol+"//"+(f.location.hostname||f.location.host);f.location.port&&(a+=":"+f.location.port);return a+"/"};m.getBaseHref=function(){var a=f.getElementsByTagName("base"),b=null,b="";1===a.length&&(b=a[0],b=b.href.replace(/[^\/]+$/,""));(b=b.replace(/\/+$/,""))&&(b+="/");return b};m.getBaseUrl=function(){return m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl()};m.getPageUrl=function(){return((m.getState(!1,!1)||{}).url||f.location.href).replace(/\/+$/,
"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"})};m.getBasePageUrl=function(){return f.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};m.getFullUrl=function(a,b){var c=a,e=a.substring(0,1);b="undefined"===typeof b?!0:b;/[a-z]+\:\/\//.test(a)||(c="/"===e?m.getRootUrl()+a.replace(/^\/+/,""):"#"===e?m.getPageUrl().replace(/#.*/,"")+a:"?"===e?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,
""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,""));return c.replace(/\#$/,"")};m.getShortUrl=function(a){var b=m.getBaseUrl(),c=m.getRootUrl();m.emulated.pushState&&(a=a.replace(b,""));a=a.replace(c,"/");m.isTraditionalAnchor(a)&&(a="./"+a);return a=a.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")};m.store={};m.idToState=m.idToState||{};m.stateToId=m.stateToId||{};m.urlToId=m.urlToId||{};m.storedStates=m.storedStates||[];m.savedStates=m.savedStates||[];m.normalizeStore=function(){m.store.idToState=m.store.idToState||
{};m.store.urlToId=m.store.urlToId||{};m.store.stateToId=m.store.stateToId||{}};m.getState=function(a,b){"undefined"===typeof a&&(a=!0);"undefined"===typeof b&&(b=!0);var c=m.getLastSavedState();!c&&b&&(c=m.createStateObject());a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url);return c};m.getIdByState=function(a){var b=m.extractId(a.url),c;if(!b)if(c=m.getStateString(a),"undefined"!==typeof m.stateToId[c])b=m.stateToId[c];else if("undefined"!==typeof m.store.stateToId[c])b=m.store.stateToId[c];else{for(;b=
(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!==typeof m.idToState[b]||"undefined"!==typeof m.store.idToState[b];);m.stateToId[c]=b;m.idToState[b]=a}return b};m.normalizeState=function(a){var b;a&&"object"===typeof a||(a={});if("undefined"!==typeof a.normalized)return a;a.data&&"object"===typeof a.data||(a.data={});b={normalized:!0};b.title=a.title||"";b.url=m.getFullUrl(m.unescapeString(a.url||f.location.href));b.hash=m.getShortUrl(b.url);b.data=m.cloneObject(a.data);b.id=
m.getIdByState(b);b.cleanUrl=b.url.replace(/\??\&_suid.*/,"");b.url=b.cleanUrl;a=!m.isEmptyObject(b.data);if(b.title||a)b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;b.hashedUrl=m.getFullUrl(b.hash);(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl);return b};m.createStateObject=function(a,b,c){a={data:a,title:b,url:c};return a=m.normalizeState(a)};m.getStateById=function(a){a=String(a);return m.idToState[a]||
m.store.idToState[a]||b};m.getStateString=function(a){a={data:m.normalizeState(a).data,title:a.title,url:a.url};return q.stringify(a)};m.getStateId=function(a){return m.normalizeState(a).id};m.getHashByState=function(a){return m.normalizeState(a).hash};m.extractId=function(a){return((a=/(.*)\&_suid=([0-9]+)$/.exec(a))?String(a[2]||""):"")||!1};m.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};m.extractState=function(a,b){var c=null,e,f;b=b||!1;(e=m.extractId(a))&&(c=m.getStateById(e));
c||(f=m.getFullUrl(a),(e=m.getIdByUrl(f)||!1)&&(c=m.getStateById(e)),c||!b||m.isTraditionalAnchor(a)||(c=m.createStateObject(null,null,f)));return c};m.getIdByUrl=function(a){return m.urlToId[a]||m.store.urlToId[a]||b};m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b};m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b};m.hasUrlDuplicate=function(a){var b=!1;return b=(b=m.extractState(a.url))&&b.id!==a.id};m.storeState=function(a){m.urlToId[a.url]=
a.id;m.storedStates.push(m.cloneObject(a));return a};m.isLastSavedState=function(a){var b=!1;m.savedStates.length&&(a=a.id,b=m.getLastSavedState(),b=b.id,b=a===b);return b};m.saveState=function(a){if(m.isLastSavedState(a))return!1;m.savedStates.push(m.cloneObject(a));return!0};m.getStateByIndex=function(a){var b=null;return b="undefined"===typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]};m.getHash=function(){return m.unescapeHash(f.location.hash)};
m.unescapeString=function(b){for(var c;;){c=a.unescape(b);if(c===b)break;b=c}return b};m.unescapeHash=function(a){a=m.normalizeHash(a);return a=m.unescapeString(a)};m.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};m.setHash=function(a,b){var c,e;if(!1!==b&&m.busy())return m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1;c=m.escapeHash(a);m.busy(!0);(e=m.extractState(a,!0))&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):f.location.hash!==
c&&(m.bugs.setHash?(e=m.getPageUrl(),m.pushState(null,null,e+"#"+c,!1)):f.location.hash=c);return m};m.escapeHash=function(b){b=m.normalizeHash(b);b=a.escape(b);m.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return b};m.getHashByUrl=function(a){a=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return a=m.unescapeHash(a)};m.setTitle=function(a){var b=a.title,c;b||(c=m.getStateByIndex(0))&&c.url===a.url&&(b=c.title||m.options.initialTitle);
try{f.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}f.title=b;return m};m.queues=[];m.busy=function(a){"undefined"!==typeof a?m.busy.flag=a:"undefined"===typeof m.busy.flag&&(m.busy.flag=!1);if(!m.busy.flag){s(m.busy.timeout);var b=function(){var a,c;if(!m.busy.flag)for(a=m.queues.length-1;0<=a;--a)c=m.queues[a],0!==c.length&&(c=c.shift(),m.fireQueueItem(c),m.busy.timeout=h(b,m.options.busyDelay))};m.busy.timeout=h(b,m.options.busyDelay)}return m.busy.flag};
m.busy.flag=!1;m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])};m.pushQueue=function(a){m.queues[a.queue||0]=m.queues[a.queue||0]||[];m.queues[a.queue||0].push(a);return m};m.queue=function(a,b){"function"===typeof a&&(a={callback:a});"undefined"!==typeof b&&(a.queue=b);m.busy()?m.pushQueue(a):m.fireQueueItem(a);return m};m.clearQueue=function(){m.busy.flag=!1;m.queues=[];return m};m.stateChanged=!1;m.doubleChecker=!1;m.doubleCheckComplete=function(){m.stateChanged=!0;m.doubleCheckClear();
return m};m.doubleCheckClear=function(){m.doubleChecker&&(s(m.doubleChecker),m.doubleChecker=!1);return m};m.doubleCheck=function(a){m.stateChanged=!1;m.doubleCheckClear();m.bugs.ieDoubleCheck&&(m.doubleChecker=h(function(){m.doubleCheckClear();m.stateChanged||a();return!0},m.options.doubleCheckInterval));return m};m.safariStatePoll=function(){var b=m.extractState(f.location.href);if(!m.isLastSavedState(b))return b||m.createStateObject(),m.Adapter.trigger(a,"popstate"),m};m.back=function(a){if(!1!==
a&&m.busy())return m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1;m.busy(!0);m.doubleCheck(function(){m.back(!1)});v.go(-1);return!0};m.forward=function(a){if(!1!==a&&m.busy())return m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1;m.busy(!0);m.doubleCheck(function(){m.forward(!1)});v.go(1);return!0};m.go=function(a,b){var c;if(0<a)for(c=1;c<=a;++c)m.forward(b);else if(0>a)for(c=-1;c>=a;--c)m.back(b);else throw Error("History.go: History.go requires a positive or negative integer passed.");
return m};if(m.emulated.pushState){var z=function(){};m.pushState=m.pushState||z;m.replaceState=m.replaceState||z}else m.onPopState=function(b,c){var e=!1,e=!1;m.doubleCheckComplete();if(e=m.getHash())return(e=m.extractState(e||f.location.href,!0))?m.replaceState(e.data,e.title,e.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1;(e=(e=m.Adapter.extractEventData("state",b,c)||!1)?m.getStateById(e):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(f.location.href))||
(e=m.createStateObject(null,null,f.location.href));m.expectedStateId=!1;if(m.isLastSavedState(e))return m.busy(!1),!1;m.storeState(e);m.saveState(e);m.setTitle(e);m.Adapter.trigger(a,"statechange");m.busy(!1);return!0},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,e,f){if(m.getHashByUrl(e)&&m.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,
queue:f}),!1;m.busy(!0);var d=m.createStateObject(b,c,e);m.isLastSavedState(d)?m.busy(!1):(m.storeState(d),m.expectedStateId=d.id,v.pushState(d.id,d.title,d.url),m.Adapter.trigger(a,"popstate"));return!0},m.replaceState=function(b,c,e,f){if(m.getHashByUrl(e)&&m.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:f}),!1;m.busy(!0);var d=m.createStateObject(b,
c,e);m.isLastSavedState(d)?m.busy(!1):(m.storeState(d),m.expectedStateId=d.id,v.replaceState(d.id,d.title,d.url),m.Adapter.trigger(a,"popstate"));return!0};if(g)try{m.store=q.parse(g.getItem("History.store"))||{}}catch(A){m.store={}}else m.store={};m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals);m.Adapter.bind(a,"unload",m.clearAllIntervals);m.saveState(m.storeState(m.extractState(f.location.href,!0)));g&&(m.onUnload=function(){var a,b;try{a=q.parse(g.getItem("History.store"))||
{}}catch(c){a={}}a.idToState=a.idToState||{};a.urlToId=a.urlToId||{};a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a;m.normalizeStore();g.setItem("History.store",q.stringify(a))},m.intervalList.push(r(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",
m.onUnload),m.Adapter.bind(a,"unload",m.onUnload));if(!m.emulated.pushState&&(m.bugs.safariPoll&&m.intervalList.push(r(m.safariStatePoll,m.options.safariPollInterval)),"Apple Computer, Inc."===d.vendor||"Mozilla"===(d.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()))m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})};m.init()})(window);var b=[];d.fn.route=function(a){if(this.is("a")){var c=(new Date).getTime();b[c]=c;History.pushState(d.extend({timestamp:c,
refresh:!0},a),this.attr("title"),this.attr("href"))}return this};History.Adapter.bind(window,"statechange",function(){var a=History.getState();a.data.timestamp in b?delete b[a.data.timestamp]:a.data.refresh&&(window.location=a.url)})};g();this.resolveWith(g)})})();(function(){FD31.module("masonry",function(d){var g=function(){(function(b,a,c){var e=a.event,f;e.special.smartresize={setup:function(){a(this).bind("resize",e.special.smartresize.handler)},teardown:function(){a(this).unbind("resize",e.special.smartresize.handler)},
handler:function(a,b){var c=this,e=arguments;a.type="smartresize";f&&clearTimeout(f);f=setTimeout(function(){d.event.handle.apply(c,e)},"execAsap"===b?0:100)}};a.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};a.Mason=function(b,c){this.element=a(c);this._create(b);this._init()};a.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}};a.Mason.prototype=
{_filterFindBricks:function(a){var b=this.options.itemSelector;return b?a.filter(b).add(a.find(b)):a},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(c){this.options=a.extend(!0,{},a.Mason.settings,c);this.styleQueue=[];c=this.element[0].style;this.originalStyle={height:c.height||""};var e=this.options.containerStyle,f;for(f in e)this.originalStyle[f]=c[f]||"";this.element.css(e);this.horizontalDirection=this.options.isRTL?
"right":"left";this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)};this.isFluid=this.options.columnWidth&&"function"===typeof this.options.columnWidth;var d=this;setTimeout(function(){d.element.addClass("masonry")},0);this.options.isResizable&&a(b).bind("smartresize.masonry",function(){d.resize()});this.reloadItems()},_init:function(a){this._getColumns();this._reLayout(a)},option:function(b,c){a.isPlainObject(b)&&(this.options=
a.extend(!0,this.options,b))},layout:function(a,b){for(var c=0,e=a.length;c<e;c++)this._placeBrick(a[c]);e={};e.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){for(var f=0,c=this.cols;--c&&0===this.colYs[c];)f++;e.width=(this.cols-f)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:e});for(var f=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",d=this.options.animationOptions,g,c=0,e=this.styleQueue.length;c<e;c++)g=this.styleQueue[c],
g.$el[f](g.style,d);this.styleQueue=[];b&&b.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.isFluid?this.options.columnWidth(a):this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(b){b=a(b);var c,e,f,d,g;c=Math.ceil(b.outerWidth(!0)/
(this.columnWidth+this.options.gutterWidth));c=Math.min(c,this.cols);if(1===c)f=this.colYs;else for(e=this.cols+1-c,f=[],g=0;g<e;g++)d=this.colYs.slice(g,g+c),f[g]=Math.max.apply(Math,d);g=Math.min.apply(Math,f);e=c=0;for(d=f.length;e<d;e++)if(f[e]===g){c=e;break}f={top:g+this.offset.y};f[this.horizontalDirection]=this.columnWidth*c+this.offset.x;this.styleQueue.push({$el:b,style:f});b=g+b.outerHeight(!0);f=this.cols+1-d;for(e=0;e<f;e++)this.colYs[c+e]=b},resize:function(){var a=this.cols;this._getColumns();
(this.isFluid||this.cols!==a)&&this._reLayout()},_reLayout:function(a){var b=this.cols;for(this.colYs=[];b--;)this.colYs.push(0);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();this._init(a)},appended:function(a,b,c){if(b){this._filterFindBricks(a).css({top:this.element.height()});var e=this;setTimeout(function(){e._appended(a,c)},1)}else this._appended(a,c)},_appended:function(a,b){var c=this._getBricks(a);
this.$bricks=this.$bricks.add(c);this.layout(c,b)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});var c=this.element[0].style,e;for(e in this.originalStyle)c[e]=this.originalStyle[e];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");a(b).unbind(".masonry")}};a.fn.imagesLoaded=function(b){function c(){b.call(f,d)}function e(b){b=
b.target;b.src!==h&&-1===a.inArray(b,t)&&(t.push(b),0>=--g&&(setTimeout(c),d.unbind(".imagesLoaded",e)))}var f=this,d=f.find("img").add(f.filter("img")),g=d.length,h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t=[];g||c();d.bind("load.imagesLoaded error.imagesLoaded",e).each(function(){var a=this.src;this.src=h;this.src=a});return f};a.fn.masonry=function(c){if("string"===typeof c){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var f=a.data(this,"masonry");
f?a.isFunction(f[c])&&"_"!==c.charAt(0)?f[c].apply(f,e):b.console&&b.console.error("no such method '"+c+"' for masonry instance"):b.console&&b.console.error("cannot call methods on masonry prior to initialization; attempted to call method '"+c+"'")})}else this.each(function(){var b=a.data(this,"masonry");b?(b.option(c||{}),b._init()):a.data(this,"masonry",new a.Mason(c,this))});return this}})(window,d)};g();this.resolveWith(g)})})();(function(){FD31.module("dialog",function(d){var g=this;d.require().script("ui/position",
"easing").done(function(){var b=function(){d.template("dialog/default",'<div class="foundryDialog global"><div class="dialog-wrap"><div class="in"><div class="dialog-loader"><div class="loader-img"></div></div><div class="dialog-head"><span class="dialog-title"></span><a class="dialog-closeButton">Close</a></div><div class="dialog-body dialog-content"></div><div class="dialog-footer"><div class="dialog-loading"></div><div class="dialog-buttons"></div></div></div></div></div>');d.Controller("Dialog",
{pluginName:"dialog",defaultOptions:{title:"",content:void 0,buttons:{},customClass:"",width:"auto",height:"auto",css:{position:"absolute",width:"auto",height:"auto",zIndex:10001},position:{my:"center center",at:"center center",of:window},offset:100,showOverlay:!0,overlay:{css:{background:"#000",opacity:"0.4",position:"fixed",top:0,left:0,zIndex:1E4,width:"100%",height:"100%",display:"none"}},body:{css:{minWidth:0,minHeight:0,overflow:"auto"}},loader:{width:300,height:100},loading:"",iframe:{css:{width:"100%",
height:"100%",border:"none"}},transition:{show:"zoom",hide:"zoom"},escapeKey:!0,beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){},dialogHead:".dialog-head",dialogBody:".dialog-body",dialogFooter:".dialog-footer",dialogTitle:".dialog-title",dialogContent:".dialog-content",dialogButtons:".dialog-buttons",dialogLoader:".dialog-loader",dialogLoading:".dialog-loading","{closeButton}":".dialog-closeButton"}},function(a){return{ready:!1,contentReady:!1,init:function(){a.setInitOptions(a.options);
a.initElement=a.element.clone();a.element.finalizeContent=function(){return a.finalizeContent.apply(a,arguments)};d.each("dialogHead dialogBody dialogFooter dialogTitle dialogContent dialogButtons dialogLoader dialogLoading".split(" "),function(b,e){a[e]=a.find(a.options[e])});void 0!==a.options.content&&a.display()},"{self} destroyed":function(){d(document).off("keydown.foundry.dialog")},setInitOptions:function(b){a.initOptions=d.extend(!0,{},b);d.each(["beforeShow","afterShow","beforeHide","afterHide"],
function(b,c){a.initOptions[c]=function(){}});d.each("title content buttons loading selectors bindings".split(" "),function(b,c){a.initOptions[c]=null})},update:function(b){if(b){if(b.hasOwnProperty("{binder}"))return;b=d.extend(!0,{},a.initOptions,b);a.setInitOptions(b);a.display(b)}return a},determineContentType:function(a){return/<dialog>(.*?)/.test(a)?"dialog":d.isUrl(a)?"iframe":d.isDeferred(a)?"deferred":"html"},displayQueue:[],display:function(b){if(a.resizing)return a.displayQueue.push(b);
d.isPlainObject(b)&&(a.options=d.extend(!0,{},a.Class.defaults,b));a.ready||a.options.showOverlay&&a.createOverlay();b=a.options;var e=b.content;a.contentReady=null===e;a.contentType=a.determineContentType(e);var f=b.transition;d.isString(f)&&(b.transition={show:f,hide:f});switch(a.contentType){case "html":a.hideLoader();a.show();break;case "iframe":var g=d(document.createElement("iframe")),h=b.iframe.css,p=a.dialogContent,s=d.extend(!0,{},b,{content:g,buttons:b.buttons});a.showLoader(function(){onIframeLoaded=
function(){return function(b){try{g[0].contentWindow.parentDialog=a}catch(c){}a.update(s)}}();a.dialogBody.addClass("type-iframe");g.appendTo(p).css(h).css({position:"absolute",visibility:"hidden"}).one("load",onIframeLoaded).attr("src",e)});break;case "deferred":a.showLoader(function(){e.done(function(e){e&&(e=d.isString(e)?{content:e}:e,e.content&&a.update(d.extend(!0,{},b,e)))}).fail(function(b,c){var e=d.isString(c)?d.String.capitalize(c):"Error",f=d.isString(b)?b:"There was an error loading content.";
a.update({title:e,content:f})})});break;case "dialog":var f=d.buildHTML(e),r={};d.each(f.children(),function(a,b){b=d(b);var c=d.String.camelize(this.nodeName.toLowerCase()),e=b.html();switch(b.attr("type")){case "json":try{e=d.parseJSON(e)}catch(f){}break;case "javascript":try{e=eval("(function($){ return "+d.trim(e)+" })("+d.globalNamespace+")")}catch(g){}break;case "text":e=b.text()}d.isNumeric(e)&&(e=parseFloat(e));r[c]=e});a.update(d.extend(!0,{},b,r))}},loading:function(b){var e=a.element;if(void 0===
b)return e.hasClass("loading");!1===b?e.removeClass("loading"):(!0===b&&(b=a.options.loading||""),d.isString(b)&&(e.addClass("loading"),a.dialogLoading.html(b)))},showLoader:function(b){var e=a.options.width,f=a.options.height,g=function(){a.dialogLoader.show().css({width:a.dialogBody.outerWidth(!0),height:a.dialogBody.outerHeight(!0)}).position({my:"top left",at:"top left",of:a.options.dialogContent});a.options.width=e;a.options.height=f;return b&&b()};return a.ready?g():a.update(d.extend({title:a.options.title,
content:"",width:a.initOptions.body.css.minWidth,height:a.initOptions.body.css.minHeight,afterShow:g},a.options.loader))},hideLoader:function(){a.element.removeClass("loading");a.dialogLoader.hide()},autoSize:function(){return"auto"==a.initOptions.css.width||"auto"==a.initOptions.css.height},finalizeContent:function(b){var e=a.options,f=e.content;a.element.css(e.css);a.dialogContent.css(e.body.css);if(!a.refreshing){null!==e.title&&a.dialogTitle.html(e.title);if(null!==f){var g=!d.isString(f)&&d(f).is("iframe");
a.dialogBody.toggleClass("type-iframe",g);if(g){e=f.parent()[0];for(b=0;1<e.childNodes.length;)g=e.childNodes[b],g!==f[0]&&e.removeChild(g),b++;f.css({position:"relative",visibility:"visible"})}else b?e.content=a.stripScript(f):f=a.stripScript(f),a.dialogContent.html(f)}a.contentReady||a.finalizeButtons();return a.element}},stripScript:function(a){if(!d.isString(a))return a;a=d(d.parseHTML(a));a.find("script").remove();return a},finalizeSize:function(b){var e=a.refElement,f=a.options,g=f.content,
h=f.css,p=f.body.css;void 0===e?e=a.refElement=a.initElement.clone().removeClass("global").insertAfter(a.element):e.insertAfter(a.element);if(!b){refTitle=e.find(f.dialogTitle);refBody=e.find(f.dialogBody);refFooter=e.find(f.dialogFooter);refButtons=e.find(f.dialogButtons);e.css(a.initOptions.css).css({display:"block"});refTitle.html(f.title);d.isEmptyObject(f.buttons)?refFooter.hide():(refFooter.show(),refButtons.append("<button>test</button>"));var s=(b=!d.isString(g)&&d(g).is("iframe"))?document.createElement("div"):
a.stripScript(g);p.width=b&&"auto"==f.width?g.contents().width():f.width;p.height=b&&"auto"==f.height?g.contents().height():f.height;refBody.css(p).toggleClass("type-iframe",b).html(s);refBody.width();refBody.height();"border-box"!==refBody.css("boxSizing")&&(p.width=refWidth,p.height=refHeight);p.width<p.minWidth&&(p.width=p.minWidth);p.height<p.minHeight&&(p.height=p.minHeight);var r=f.offset,g=e.width(),s=e.height(),u=d(window).width()-r,r=d(window).height()-r,q=g>u,t=s>r;h.width=q?u:g;h.height=
t?r:s;"auto"!==p.width&&(p.width-=g-h.width);0>=p.width&&(p.width="auto");"auto"!==p.height&&(p.height-=s-h.height);0>=p.height&&(p.height="auto");p.minWidth=p.minHeight="auto";refBody.css(p);p.overflowX=!q||b||refBody[0].scrollWidth<=p.width?"auto":"scroll";p.overflowY=!t||b||refBody[0].scrollHeight<=p.height?"auto":"scroll";refBody.html("")}e.css(h).css("visibility","hidden").position(f.position);h.top=e.css("top");h.left=e.css("left")},finalizeButtons:function(){var b=a.dialogFooter,e=a.dialogButtons;
e.empty();var f=a.options.buttons;d.isEmptyObject(f)?b.hide():(d.isString(f)&&e.html(f),d.isArray(f)&&d.each(f,function(a,b){var c=d.extend({},b),f=b.classNames?b.classNames:"";delete c.name;delete c.classNames;d(document.createElement("button")).attr("type","button").addClass(f).html(b.name).bind(c).appendTo(e)}),b.show())},show:function(b){if(!a.ready||!a.resizing){var e=a.options;a.refElement&&a.refElement.remove();a.contentReady||e.beforeShow.apply(a);d(document).off("keydown.foundry.dialog");
if(e.escapeKey)d(document).on("keydown.foundry.dialog",function(b){27==b.keyCode&&a.close()});a.resizing=!0;a.finalizeSize();a.element.addClass("resizing");d(window).trigger("dialogTransitionStart");a.transition[e.transition.show].show.apply(a,[function(){a.ready||(a.on("resize.dialog scroll.dialog",window,d._.debounce(function(){a.refresh()},150)),a.ready=!0);a.contentReady||(b&&b.apply(a),e.afterShow.apply(a));a.refElement.detach();a.element.removeClass("resizing");a.contentReady=!0;a.element.css({width:"auto",
height:"auto"});a.removePlugin("binder");var f=e.selectors,g=e.bindings;f&&g&&(f=d.Controller(d.uid("dialogBinder"),{defaultOptions:f},function(a){return g}),a.addPlugin("binder",f));0<a.displayQueue.length?setTimeout(function(){a.resizing=!1;a.display(a.displayQueue.shift())},500):(a.resizing=!1,d(window).trigger("dialogTransitionEnd"))}])}},"{self} removePlugin":function(a,b,f,g){void 0!==g&&delete d.Controller[g.Class.fullName]},hide:function(b){a.contentReady||a.options.beforeHide.apply(a);d(window).trigger("dialogTransitionStart");
a.transition[a.options.transition.hide].hide.apply(a,[function(){b&&b.apply(a);a.options.afterHide.apply(a);d(window).trigger("dialogTransitionEnd")}])},refresh:function(){a.closing||a.resizing||(a.finalizeSize(!0),a.resizing=!0,a.refreshing=!0,d(window).trigger("dialogTransitionStart"),a.transition[a.options.transition.show].show.apply(a,[function(){d(window).trigger("dialogTransitionEnd");a.resizing=!1;a.refreshing=!1;a.element.css({width:"auto",height:"auto"})}]))},transition:{none:{show:function(b){a.ready||
a.overlay.show();a.element.finalizeContent().show(0,b)},hide:function(b){a.overlay.hide();a.element.hide(0,b)}},fade:{show:function(b){a.ready||a.overlay.fadeOut(0).fadeIn("normal");if(a.contentReady)return a.element.finalizeContent(),b&&b();a.element.fadeOut(a.contentReady?"fast":0,function(){a.element.finalizeContent().fadeIn("normal","easeInCubic",b)})},hide:function(b){a.overlay.fadeOut("normal","easeOutCubic");a.element.fadeOut("normal","easeOutCubic",b)}},zoom:{show:function(b){var e=a.dialogBody,
f=a.dialogFooter,d=a.options.css;a.ready||(a.overlay.fadeIn("fast"),a.element.finalizeContent().css({top:parseInt(d.top)+parseInt(d.height)/2,left:parseInt(d.left)+parseInt(d.width)/2,width:0,height:0}));a.contentReady||(e.css({opacity:0}),f.css({opacity:0}));a.element.animate({top:d.top,left:d.left,width:d.width,height:d.height},"normal","easeInCubic",function(){a.element.finalizeContent(!0);e.css({opacity:1});f.css({opacity:1});return b&&b()})},hide:function(b){var e=a.options.css;a.element.animate({top:parseInt(e.top)+
parseInt(e.height)/2,left:parseInt(e.left)+parseInt(e.width)/2,width:0,height:0},"normal","easeOutCubic",function(){a.overlay.fadeOut("fast");return b&&b()})}}},overlay:d("<div></div>"),createOverlay:function(){a.overlay.css(a.options.overlay.css).click(function(){a.close()}).appendTo("body")},closing:!1,close:function(){if(!a.closing)return a.closing=!0,d(document).off("keydown.foundry.dialog"),a.hide(function(){a.removePlugin("binder");a.element.remove();a.refElement&&a.refElement.remove()}),a},
"{closeButton} click":function(){a.close()},content:function(){var b=a.dialogContent,e=b.find("> iframe");return 0<e.length?e.contents():b},messageGroup:function(){var b=a.dialogBody,e=b.find("> [data-message-group]");1>e.length&&(e=d("<div data-message-group></div>").prependTo(b));return e}}});d.dialog=function(a){if(window.parentDialog)return window.parentDialog.update(a);var b=d(".foundryDialog.global"),e=b.controllers("dialog")[0];if(1>arguments.length&&e)return e;1>b.length&&(b=d(d.View("dialog/default")).addClass("global").addClass(a.customClass).appendTo("body"));
if("string"===typeof a||d.isDeferred(a)){var f=arguments[1];a={content:a,afterShow:d.isFunction(f)?f:d.noop}}e?e.update(a):e=b.implement("dialog",a,function(){}).controllers("dialog")[0];return e}};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/position",function(d){var g=function(){(function(b,a){function c(a,b,c){return[parseFloat(a[0])*(t.test(a[0])?b/100:1),parseFloat(a[1])*(t.test(a[1])?c/100:1)]}function e(a){var c=a[0];return 9===c.nodeType?{width:a.width(),height:a.height(),offset:{top:0,
left:0}}:b.isWindow(c)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}b.ui=b.ui||{};var f,d=Math.max,g=Math.abs,h=Math.round,s=/left|center|right/,r=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,q=/^\w+/,t=/%$/,m=b.fn.position;b.position={scrollbarWidth:function(){if(f!==a)return f;var c,e,d=b("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");
e=d.children()[0];b("body").append(d);c=e.offsetWidth;d.css("overflow","scroll");e=e.offsetWidth;c===e&&(e=d[0].clientWidth);d.remove();return f=c-e},getScrollInfo:function(a){var c=a.isWindow?"":a.element.css("overflow-x"),e=a.isWindow?"":a.element.css("overflow-y"),c="scroll"===c||"auto"===c&&a.width<a.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&a.height<a.element[0].scrollHeight?b.position.scrollbarWidth():0,height:c?b.position.scrollbarWidth():0}},getWithinInfo:function(a){a=
b(a||window);var c=b.isWindow(a[0]);return{element:a,isWindow:c,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:c?a.width():a.outerWidth(),height:c?a.height():a.outerHeight()}}};b.fn.position=function(a){if(!a||!a.of)return m.apply(this,arguments);a=b.extend({},a);var f,t,w,B,x,R,S=b(a.of),O=b.position.getWithinInfo(a.within),aa=b.position.getScrollInfo(O),J=(a.collision||"flip").split(" "),L={};R=e(S);S[0].preventDefault&&(a.at="left top");t=R.width;w=R.height;
B=R.offset;x=b.extend({},B);b.each(["my","at"],function(){var b=(a[this]||"").split(" "),c,e;1===b.length&&(b=s.test(b[0])?b.concat(["center"]):r.test(b[0])?["center"].concat(b):["center","center"]);b[0]=s.test(b[0])?b[0]:"center";b[1]=r.test(b[1])?b[1]:"center";c=u.exec(b[0]);e=u.exec(b[1]);L[this]=[c?c[0]:0,e?e[0]:0];a[this]=[q.exec(b[0])[0],q.exec(b[1])[0]]});1===J.length&&(J[1]=J[0]);"right"===a.at[0]?x.left+=t:"center"===a.at[0]&&(x.left+=t/2);"bottom"===a.at[1]?x.top+=w:"center"===a.at[1]&&
(x.top+=w/2);f=c(L.at,t,w);x.left+=f[0];x.top+=f[1];return this.each(function(){var e,m,q=b(this),r=q.outerWidth(),u=q.outerHeight(),s=parseInt(b.css(this,"marginLeft"),10)||0,R=parseInt(b.css(this,"marginTop"),10)||0,P=r+s+(parseInt(b.css(this,"marginRight"),10)||0)+aa.width,na=u+R+(parseInt(b.css(this,"marginBottom"),10)||0)+aa.height,F=b.extend({},x),Y=c(L.my,q.outerWidth(),q.outerHeight());"right"===a.my[0]?F.left-=r:"center"===a.my[0]&&(F.left-=r/2);"bottom"===a.my[1]?F.top-=u:"center"===a.my[1]&&
(F.top-=u/2);F.left+=Y[0];F.top+=Y[1];b.support.offsetFractions||(F.left=h(F.left),F.top=h(F.top));e={marginLeft:s,marginTop:R};b.each(["left","top"],function(c,d){if(b.ui.position[J[c]])b.ui.position[J[c]][d](F,{targetWidth:t,targetHeight:w,elemWidth:r,elemHeight:u,collisionPosition:e,collisionWidth:P,collisionHeight:na,offset:[f[0]+Y[0],f[1]+Y[1]],my:a.my,at:a.at,within:O,elem:q})});a.using&&(m=function(b){var c=B.left-F.left,e=c+t-r,f=B.top-F.top,h=f+w-u,m={target:{element:S,left:B.left,top:B.top,
width:t,height:w},element:{element:q,left:F.left,top:F.top,width:r,height:u},horizontal:0>e?"left":0<c?"right":"center",vertical:0>h?"top":0<f?"bottom":"middle"};t<r&&g(c+e)<t&&(m.horizontal="center");w<u&&g(f+h)<w&&(m.vertical="middle");d(g(c),g(e))>d(g(f),g(h))?m.important="horizontal":m.important="vertical";a.using.call(this,b,m)});q.offset(b.extend(F,{using:m}))})};b.ui.position={fit:{left:function(a,b){var c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,
c=e-g,h=g+b.collisionWidth-f-e;b.collisionWidth>f?0<c&&0>=h?(e=a.left+c+b.collisionWidth-f-e,a.left+=c-e):a.left=0<h&&0>=c?e:c>h?e+f-b.collisionWidth:e:a.left=0<c?a.left+c:0<h?a.left-h:d(a.left-g,a.left)},top:function(a,b){var c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,c=e-g,h=g+b.collisionHeight-f-e;b.collisionHeight>f?0<c&&0>=h?(e=a.top+c+b.collisionHeight-f-e,a.top+=c-e):a.top=0<h&&0>=c?e:c>h?e+f-b.collisionHeight:e:a.top=0<c?a.top+
c:0<h?a.top-h:d(a.top-g,a.top)}},flip:{left:function(a,b){var c=b.within,e=c.offset.left+c.scrollLeft,f=c.width,d=c.isWindow?c.scrollLeft:c.offset.left,k=a.left-b.collisionPosition.marginLeft,c=k-d,h=k+b.collisionWidth-f-d,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,m="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,q=-2*b.offset[0];if(0>c){if(e=a.left+k+m+q+b.collisionWidth-f-e,0>e||e<g(c))a.left+=k+m+q}else 0<h&&(e=a.left-b.collisionPosition.marginLeft+k+m+q-
d,0<e||g(e)<h)&&(a.left+=k+m+q)},top:function(a,b){var c=b.within,e=c.offset.top+c.scrollTop,f=c.height,d=c.isWindow?c.scrollTop:c.offset.top,k=a.top-b.collisionPosition.marginTop,c=k-d,h=k+b.collisionHeight-f-d,k="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,q=-2*b.offset[1];0>c?(e=a.top+k+m+q+b.collisionHeight-f-e,a.top+k+m+q>c&&(0>e||e<g(c))&&(a.top+=k+m+q)):0<h&&(e=a.top-b.collisionPosition.marginTop+k+m+q-
d,a.top+k+m+q>h&&(0<e||g(e)<h)&&(a.top+=k+m+q))}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,arguments)},top:function(){b.ui.position.flip.top.apply(this,arguments);b.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,c,e,f,d=document.getElementsByTagName("body")[0];e=document.createElement("div");a=document.createElement(d?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};d&&b.extend(c,
{position:"absolute",left:"-1000px",top:"-1000px"});for(f in c)a.style[f]=c[f];a.appendChild(e);c=d||document.documentElement;c.insertBefore(a,c.firstChild);e.style.cssText="position: absolute; left: 10.7432222px;";e=b(e).offset().left;b.support.offsetFractions=10<e&&11>e;a.innerHTML="";c.removeChild(a)})()})(d)};g();this.resolveWith(g)})})();(function(){FD31.module("easing",function(d){var g=function(){d.easing.jswing=d.easing.swing;d.extend(d.easing,{def:"easeOutQuad",swing:function(b,a,c,e,f){return d.easing[d.easing.def](b,
a,c,e,f)},easeInQuad:function(b,a,c,e,f){return e*(a/=f)*a+c},easeOutQuad:function(b,a,c,e,f){return-e*(a/=f)*(a-2)+c},easeInOutQuad:function(b,a,c,e,f){return 1>(a/=f/2)?e/2*a*a+c:-e/2*(--a*(a-2)-1)+c},easeInCubic:function(b,a,c,e,f){return e*(a/=f)*a*a+c},easeOutCubic:function(b,a,c,e,f){return e*((a=a/f-1)*a*a+1)+c},easeInOutCubic:function(b,a,c,e,f){return 1>(a/=f/2)?e/2*a*a*a+c:e/2*((a-=2)*a*a+2)+c},easeInQuart:function(b,a,c,e,f){return e*(a/=f)*a*a*a+c},easeOutQuart:function(b,a,c,e,f){return-e*
((a=a/f-1)*a*a*a-1)+c},easeInOutQuart:function(b,a,c,e,f){return 1>(a/=f/2)?e/2*a*a*a*a+c:-e/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(b,a,c,e,f){return e*(a/=f)*a*a*a*a+c},easeOutQuint:function(b,a,c,e,f){return e*((a=a/f-1)*a*a*a*a+1)+c},easeInOutQuint:function(b,a,c,e,f){return 1>(a/=f/2)?e/2*a*a*a*a*a+c:e/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(b,a,c,e,f){return-e*Math.cos(a/f*(Math.PI/2))+e+c},easeOutSine:function(b,a,c,e,f){return e*Math.sin(a/f*(Math.PI/2))+c},easeInOutSine:function(b,
a,c,e,f){return-e/2*(Math.cos(Math.PI*a/f)-1)+c},easeInExpo:function(b,a,c,e,f){return 0==a?c:e*Math.pow(2,10*(a/f-1))+c},easeOutExpo:function(b,a,c,e,f){return a==f?c+e:e*(-Math.pow(2,-10*a/f)+1)+c},easeInOutExpo:function(b,a,c,e,f){return 0==a?c:a==f?c+e:1>(a/=f/2)?e/2*Math.pow(2,10*(a-1))+c:e/2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(b,a,c,e,f){return-e*(Math.sqrt(1-(a/=f)*a)-1)+c},easeOutCirc:function(b,a,c,e,f){return e*Math.sqrt(1-(a=a/f-1)*a)+c},easeInOutCirc:function(b,a,c,e,f){return 1>
(a/=f/2)?-e/2*(Math.sqrt(1-a*a)-1)+c:e/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(b,a,c,e,f){b=1.70158;var d=0,g=e;if(0==a)return c;if(1==(a/=f))return c+e;d||(d=0.3*f);g<Math.abs(e)?(g=e,b=d/4):b=d/(2*Math.PI)*Math.asin(e/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*f-b)*Math.PI/d))+c},easeOutElastic:function(b,a,c,e,f){b=1.70158;var d=0,g=e;if(0==a)return c;if(1==(a/=f))return c+e;d||(d=0.3*f);g<Math.abs(e)?(g=e,b=d/4):b=d/(2*Math.PI)*Math.asin(e/g);return g*Math.pow(2,-10*a)*Math.sin(2*
(a*f-b)*Math.PI/d)+e+c},easeInOutElastic:function(b,a,c,e,f){b=1.70158;var d=0,g=e;if(0==a)return c;if(2==(a/=f/2))return c+e;d||(d=0.3*f*1.5);g<Math.abs(e)?(g=e,b=d/4):b=d/(2*Math.PI)*Math.asin(e/g);return 1>a?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*f-b)*Math.PI/d)+c:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*f-b)*Math.PI/d)*0.5+e+c},easeInBack:function(b,a,c,e,f,d){void 0==d&&(d=1.70158);return e*(a/=f)*a*((d+1)*a-d)+c},easeOutBack:function(b,a,c,e,f,d){void 0==d&&(d=1.70158);return e*((a=a/f-1)*
a*((d+1)*a+d)+1)+c},easeInOutBack:function(b,a,c,e,f,d){void 0==d&&(d=1.70158);return 1>(a/=f/2)?e/2*a*a*(((d*=1.525)+1)*a-d)+c:e/2*((a-=2)*a*(((d*=1.525)+1)*a+d)+2)+c},easeInBounce:function(b,a,c,e,f){return e-d.easing.easeOutBounce(b,f-a,0,e,f)+c},easeOutBounce:function(b,a,c,e,f){return(a/=f)<1/2.75?7.5625*e*a*a+c:a<2/2.75?e*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?e*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:e*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(b,a,c,e,f){return a<f/2?0.5*
d.easing.easeInBounce(b,2*a,0,e,f)+c:0.5*d.easing.easeOutBounce(b,2*a-f,0,e,f)+0.5*e+c}})};g();this.resolveWith(g)})})();(function(){FD31.module("image",function(d){var g=function(){d.fn.image=function(b){return(b=d.Image[b])&&b.apply(this[0],d.makeArray(arguments).slice(1))};d.Image={get:function(b){var a="IMG"===this.nodeName,c=d(a?this:new Image),e=d.Deferred();c.load(function(){var b,d,g,h;a||c.appendTo("body");var s={width:b=c.width(),height:d=c.height(),aspectRatio:g=b/d,orientation:h=1===g?
"square":1>g?"tall":"wide"};c.css({position:"absolute",left:"-99999px"}).data(s).addClass("orientation-"+h).removeAttr("style");a||c.detach();e.resolve(c,s)}).error(function(){e.reject()}).attr("src",b);return e},aspectRatio:function(b,a){d.isPlainObject(b)&&(b=b.width,a=b.height);return b/a},orientation:function(b,a){d.isPlainObject(b)&&(b=b.width,a=b.height);return b===a?"square":b>a?"wide":"tall"},resizeProportionate:function(b,a,c,e,f){var d=b,g=a,g=c/b,d=b*g,g=a*g,h=g>e;"outer"==f&&(h=g<e);h&&
(g=e/a,d=b*g,g*=a);return{top:(e-g)/2,left:(c-d)/2,width:d,height:g}},resizeWithin:function(b,a,c,e){return d.Image.resizeProportionate(b,a,c,e,"inner")},resizeToFill:function(b,a,c,e){return d.Image.resizeProportionate(b,a,c,e,"outer")}}};g();this.resolveWith(g)})})();(function(){FD31.module("popbox",function(d){var g=this;d.require().script("ui/position").done(function(){var b=function(){d.fn.popbox=function(b){if(d.isPlainObject(b))return this.each(function(){var e=d(this),f=a.get(e);f?f.update(b):
new a(e,b)}),this;if(d.isString(b)){var e=d(this[0]),e=a.get(e)||new a(e),f=e[b],g;d.isFunction(f)&&(g=f.apply(e,d.makeArray(arguments).slice(1)));return g||this}return this};var a=function(b,e){b.data("popbox",this);d.isString(e)&&(e={content:e});var f={},g=b.attr("data-popbox"),h=b.attr("data-popbox-toggle"),p=b.attr("data-popbox-position"),s=b.attr("data-popbox-type");id=b.attr("data-popbox-id");g&&(f.content=g);h&&(f.toggle=h);s&&(f.type=s);p&&(f.position=p);id&&(f.id=id);void 0===g&&b.attr("data-popbox",
"");this.update(d.extend(!0,{},a.defaultOptions,{tooltip:d(),loader:d('<div class="popbox loading" data-popbox-tooltip><div class="arrow"></div></div>'),uid:d.uid(),button:b},f,e))};a.defaultOptions={content:"",id:null,type:"",enabled:!1,wait:!1,locked:!1,exclusive:!1,hideTimer:null,hideDelay:50,toggle:"hover",position:"bottom"};a.get=function(b){b=d(b).data("popbox");if(b instanceof a)return b};d.extend(a.prototype,{positions:"top top-left top-right top-center bottom bottom-left bottom-right bottom-center left left-top left-bottom left-center right right-top right-bottom right-center",
update:function(a){var b=this;d.extend(!0,b,a);if(d.isModule(b.content))b.wait=!0,d.module(b.content).done(function(a){d.isPlainObject(a)&&b.update(a);d.isFunction(a)&&b.update({content:a})}).fail(function(){b.update({content:"Unable to load tooltip content."})}).always(function(){b.wait=!1});else{d.isString(b.content)&&(b.content=d.Deferred().resolve(b.content));a=b.position;if(d.isString(a)){var f=a.split("-"),g,h,p,s;switch(f[0]){case "top":case "bottom":g=p=f[1]||"center";h="top"==f[0]?"bottom":
"top";s="top"==f[0]?"top":"bottom";break;case "left":case "right":h=s=f[1]||"center",g="left"==f[0]?"right":"left",p="left"==f[0]?"left":"right"}b.position={classname:a,my:g+" "+h,at:p+" "+s,using:function(a,c){var g=d(this),k=b.position.classname,h=a.top,n=a.left;switch(f[0]){case "top":case "bottom":var p=c.vertical;p==f[0]&&(k=k.replace(/top|bottom/gi,"top"==p?"bottom":"top"));h="top"==p?h+10:h-10;break;case "left":case "right":p=c.horizontal,c.horizontal==f[0]&&(k=k.replace(/left|right/gi,"left"==
c.horizontal?"right":"left")),n="left"==p?n+10:n-10}g.css({top:h+"px",left:n+"px"}).removeClass(b.positions).addClass(k)}}}d.extend(b.position,{of:this.button,collision:"flip"});b.loader.attr({id:b.id,"data-popbox-tooltip":b.type}).addClass("popbox-"+b.type);b.enabled&&b.show()}},trigger:function(a,b){this.tooltip.trigger(a,b);this.button.trigger(a,b)},show:function(){var b=this;b.enabled=!0;if(!b.wait){clearTimeout(b.hideTimer);b.exclusive&&d("[data-popbox-tooltip]").each(function(){var b=a.get(d(this));
b&&b.hide()});if("click"==b.toggle){var e=d(document),f="click.popbox."+b.uid;e.off(f).on(f,function(a){a=d(a.target).parents().andSelf();0<a.filter(b.button).length||0<a.filter(b.tooltip).length||(e.off(f),b.hide())})}if(0<b.tooltip.length)b.tooltip.appendTo("body").position(b.position),b.trigger("popboxActivate",[b]);else{if(d.isFunction(b.content)){var g=b.content(b);b.update(g);if(b.wait)return}d.isDeferred(b.content)&&("pending"==b.content.state()&&b.loader.appendTo("body").position(b.position),
b.content.always(function(){b.wait=!1}).done(function(a){if(!(0<b.tooltip.length)&&b.enabled){b.loader.detach();a=d.buildHTML(a);if(1>a.filter("[data-popbox-tooltip]").length){var e=a;a=d('<div class="popbox" data-popbox-tooltip><div class="arrow"></div><div class="popbox-content" data-popbox-content></div></div>').attr({id:b.id,"data-popbox-tooltip":b.type}).addClass("popbox-"+b.type).appendTo("body");a.find("[data-popbox-content]").append(e)}else a=a.appendTo("body").filter("[data-popbox-tooltip]");
b.tooltip=a.data("popbox",b).position(b.position);b.trigger("popboxActivate",[b])}}).fail(function(){b.update({content:"Unable to load tooltip content."})}))}}},hide:function(a){var b=this;b.enabled=!1;clearTimeout(b.hideTimer);b.loader.detach();b.hideTimer=setTimeout(function(){if(!b.locked||a)b.tooltip.detach(),b.trigger("popboxDeactivate",[b])},b.hideDelay)},widget:function(){return this}});d(document).on("click.popbox","[data-popbox]",function(){var a=d(this).popbox("widget");a.enabled?a.hide():
a.show()}).on("mouseover.popbox","[data-popbox]",function(){var a=d(this).popbox("widget");"hover"==a.toggle&&a.show()}).on("mouseout.popbox","[data-popbox]",function(){var a=d(this).popbox("widget");"hover"==a.toggle&&a.hide()}).on("mouseover.popbox.tooltip","[data-popbox-tooltip]",function(){var b=a.get(this);b&&"hover"===b.toggle&&(b.locked=!0,clearTimeout(b.hideTimer))}).on("mouseout.popbox.tooltip","[data-popbox-tooltip]",function(){var b=a.get(this);b&&"hover"===b.toggle&&(b.locked=!1,b.hide())}).on("click.popbox.close",
"[data-popbox-close]",function(){var b=a.get(d(this).parents("[data-popbox-tooltip]"));b&&b.hide()})};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/autocomplete",function(d){var g=this;d.require().script("ui/core","ui/widget","ui/position","ui/menu").done(function(){var b=function(){(function(a,b){var e=0;a.widget("ui.autocomplete",{version:"1.10.4pre",defaultElement:"<input>",options:{appendTo:"#fd_.ui",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},
source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,e,d=this.element[0].nodeName.toLowerCase(),g="textarea"===d,d="input"===d;this.isMultiLine=g?!0:d?!1:this.element.prop("isContentEditable");this.valueMethod=this.element[g||d?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(d){if(this.element.prop("readOnly"))c=e=b=!0;else{c=
e=b=!1;var g=a.ui.keyCode;switch(d.keyCode){case g.PAGE_UP:b=!0;this._move("previousPage",d);break;case g.PAGE_DOWN:b=!0;this._move("nextPage",d);break;case g.UP:b=!0;this._keyEvent("previous",d);break;case g.DOWN:b=!0;this._keyEvent("next",d);break;case g.ENTER:case g.NUMPAD_ENTER:this.menu.active&&(b=!0,d.preventDefault(),this.menu.select(d));break;case g.TAB:this.menu.active&&this.menu.select(d);break;case g.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(d),d.preventDefault());
break;default:c=!0,this._searchTimeout(d)}}},keypress:function(e){if(b)b=!1,this.isMultiLine&&!this.menu.element.is(":visible")||e.preventDefault();else if(!c){var d=a.ui.keyCode;switch(e.keyCode){case d.PAGE_UP:this._move("previousPage",e);break;case d.PAGE_DOWN:this._move("nextPage",e);break;case d.UP:this._keyEvent("previous",e);break;case d.DOWN:this._keyEvent("next",e)}}},input:function(a){e?(e=!1,a.preventDefault()):this._searchTimeout(a)},focus:function(){this.selectedItem=null;this.previous=
this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=
this;this.document.one("mousedown",function(e){e.target===b.element[0]||e.target===c||a.contains(c,e.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var e=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:e})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(e.value):this.liveRegion.text(e.value)},
menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),e=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,
{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this._appendTo());"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;b&&(b=b.jquery||b.nodeType?
a(b):this.document.find(b).eq(0));b||(b=this.element.closest(".ui-front"));b.length||(b=this.document[0].body);return b},_initSource:function(){var b,c,e=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,e){e(a.ui.autocomplete.filter(b,c.term))}):"string"===typeof this.options.source?(c=this.options.source,this.source=function(b,f){e.xhr&&e.xhr.abort();e.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){f(a)},error:function(){f([])}})}):this.source=this.options.source},
_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},
_response:function(){var a=this,b=++e;return function(c){b===e&&a.__response(c);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),
this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b);this.isNewMenu=!0;this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},
this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var e=this;a.each(c,function(a,c){e._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&
/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,
c){var e=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return e.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments);this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,
this.liveRegion.text(b))}})})(d);(function(a){function b(c,e){var f=RegExp(a.ui.autocomplete.escapeRegex(e),"i");return a.grep(c,function(b){return f.test(a("<div>").html(b.label||b.value||b).text())})}var e=a.ui.autocomplete.prototype,f=e._initSource;a.extend(e,{_initSource:function(){this.options.html&&a.isArray(this.options.source)?this.source=function(a,e){e(b(this.options.source,a.term))}:f.call(this)},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>")[this.options.html?
"html":"text"](c.label)).appendTo(b)}})})(d)};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/menu",function(d){var g=this;d.require().script("ui/widget").done(function(){var b=function(){(function(a,b){a.widget("ui.menu",{version:"1.10.4pre",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",
!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&
c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=
this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var d,g,h,s,r=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:r=!1,d=this.previousFilter||"",g=String.fromCharCode(b.keyCode),h=!1,clearTimeout(this.filterTimer),g===d?h=!0:g=d+g,s=RegExp("^"+c(g),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(a(this).children("a").text())}),d=h&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(g=String.fromCharCode(b.keyCode),s=RegExp("^"+c(g),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(a(this).children("a").text())})),
d.length?(this.focus(b,d),1<d.length?(this.previousFilter=g,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}r&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu;b=this.element.find(this.options.menus);b.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,
"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),e=b.prev("a"),d=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);e.attr("aria-haspopup","true").prepend(d);b.attr("aria-labelledby",e.attr("id"))});b=b.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var b=
a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu);this._super(a,b)},focus:function(a,b){var c;this.blur(a,a&&
"focus"===a.type);this._scrollIntoView(b);this.active=b.first();c=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",
a,{item:b})},_scrollIntoView:function(b){var c,d,g;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,c=b.offset().top-this.activeMenu.offset().top-c-d,d=this.activeMenu.scrollTop(),g=this.activeMenu.height(),b=b.height(),0>c?this.activeMenu.scrollTop(d+c):c+b>g&&this.activeMenu.scrollTop(d+c-g+b))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),
this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,
c){clearTimeout(this.timer);this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element);this._close(d);this.blur(b);this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",
this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},
_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]());this.focus(c,d)},nextPage:function(b){var c,d,g;this.active?this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,g=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return 0>c.offset().top-d-g}),
this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var c,d,g;this.active?this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,g=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return 0<c.offset().top-d+g}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,c)}})})(d)};b();g.resolveWith(b)})})})();(function(){FD31.module("gmaps",function(d){var g=this,b=d.callback(function(){window.google||window.google.maps||g.reject("Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true.");
var a=function(a){var g=document,h=function(a,b){return d("#"+a.replace("#",""),b)[0]},r=function(a){var d=this,n="bounds_changed center_changed click dblclick drag dragend dragstart idle maptypeid_changed projection_changed resize tilesloaded zoom_changed".split(" "),m=["mousemove","mouseout","mouseover"];window.context_menu={};this.el="string"===typeof a.el||"string"===typeof a.div?h(a.el||a.div,a.context):a.el||a.div;if("undefined"===typeof this.el||null===this.el)throw"No element defined.";this.el.style.width=
a.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=a.height||this.el.scrollHeight||this.el.offsetHeight;this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.overlay_el=this.infoWindow=null;this.zoom=a.zoom||15;this.registered_events={};var v=a.markerClusterer,z;z=a.mapType?google.maps.MapTypeId[a.mapType.toUpperCase()]:google.maps.MapTypeId.ROADMAP;var A=new google.maps.LatLng(a.lat,a.lng);
delete a.el;delete a.lat;delete a.lng;delete a.mapType;delete a.width;delete a.height;delete a.markerClusterer;var w=a.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},B,x={},x={zoom:this.zoom,center:A,mapTypeId:z},w={panControl:a.panControl||!0,zoomControl:a.zoomControl||!0,zoomControlOptions:{style:google.maps.ZoomControlStyle[w.style||"DEFAULT"],position:google.maps.ControlPosition[w.position||"TOP_LEFT"]},mapTypeControl:a.mapTypeControl||!0,scaleControl:a.scaleControl||!0,streetViewControl:a.streetViewControl||
!0,overviewMapControl:B||!0};!0!=a.disableDefaultUI&&(x=e(x,w));x=e(x,a);for(w=0;w<n.length;w++)delete x[n[w]];for(w=0;w<m.length;w++)delete x[m[w]];this.map=new google.maps.Map(this.el,x);v&&(this.markerClusterer=v.apply(this,[this.map]));var R=function(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return[b,c]},S=function(a,b){var c="",e=window.context_menu[a],f;for(f in e)e.hasOwnProperty(f)&&(c+='<li><a id="'+a+"_"+f+'" href="#">'+e[f].title+"</a></li>");
if(h("gmaps_context_menu")){var g=h("gmaps_context_menu");g.innerHTML=c;var c=g.getElementsByTagName("a"),k=c.length;for(f=0;f<k;f++){var m=c[f];google.maps.event.clearListeners(m,"click");google.maps.event.addDomListenerOnce(m,"click",function(c){c.preventDefault();e[this.id.replace(a+"_","")].action.apply(d,[b]);d.hideContextMenu()},!1)}f=R.apply(this,[d.el]);c=f[1]+b.pixel.y-15;g.style.left=f[0]+b.pixel.x-15+"px";g.style.top=c+"px";g.style.display="block"}},O=function(a,b){if("marker"===a){b.pixel=
{};var c=new google.maps.OverlayView;c.setMap(d.map);c.draw=function(){var e=c.getProjection(),d=b.marker.getPosition();b.pixel=e.fromLatLngToContainerPixel(d);S(a,b)}}else S(a,b)};this.setContextMenu=function(a){window.context_menu[a.control]={};for(var b in a.options)if(a.options.hasOwnProperty(b)){var c=a.options[b];window.context_menu[a.control][c.name]={title:c.title,action:c.action}}a=g.createElement("ul");a.id="gmaps_context_menu";a.style.display="none";a.style.position="absolute";a.style.minWidth=
"100px";a.style.background="white";a.style.listStyle="none";a.style.padding="8px";a.style.boxShadow="2px 2px 6px #ccc";g.body.appendChild(a);var e=h("gmaps_context_menu");google.maps.event.addDomListener(e,"mouseout",function(a){a.relatedTarget&&this.contains(a.relatedTarget)||window.setTimeout(function(){e.style.display="none"},400)},!1)};this.hideContextMenu=function(){var a=h("gmaps_context_menu");a&&(a.style.display="none")};v=function(b,c){google.maps.event.addListener(b,c,function(b){void 0==
b&&(b=this);a[c].apply(this,[b]);d.hideContextMenu()})};for(w=0;w<n.length;w++)B=n[w],B in a&&v(this.map,B);for(w=0;w<m.length;w++)B=m[w],B in a&&v(this.map,B);google.maps.event.addListener(this.map,"rightclick",function(b){a.rightclick&&a.rightclick.apply(this,[b]);void 0!=window.context_menu.map&&O("map",b)});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){for(var a=[],b=this.markers.length,c=0;c<b;c++)a.push(this.markers[c].getPosition());this.fitLatLngBounds(a)};
this.fitLatLngBounds=function(a){for(var b=a.length,c=new google.maps.LatLngBounds,e=0;e<b;e++)c.extend(a[e]);this.map.fitBounds(c)};this.setCenter=function(a,b,c){this.map.panTo(new google.maps.LatLng(a,b));c&&c()};this.getElement=function(){return this.el};this.zoomIn=function(a){a=a||1;this.zoom=this.map.getZoom()+a;this.map.setZoom(this.zoom)};this.zoomOut=function(a){a=a||1;this.zoom=this.map.getZoom()-a;this.map.setZoom(this.zoom)};var n=[],aa;for(aa in this.map)"function"!=typeof this.map[aa]||
this[aa]||n.push(aa);for(w=0;w<n.length;w++)(function(a,b,c){a[c]=function(){return b[c].apply(b,arguments)}})(this,this.map,n[w]);this.createControl=function(a){var b=g.createElement("div");b.style.cursor="pointer";b.style.fontFamily="Arial, sans-serif";b.style.fontSize="13px";b.style.boxShadow="rgba(0, 0, 0, 0.398438) 0px 2px 4px";for(var c in a.style)b.style[c]=a.style[c];a.id&&(b.id=a.id);a.classes&&(b.className=a.classes);a.content&&(b.innerHTML=a.content);for(var e in a.events)(function(b,c){google.maps.event.addDomListener(b,
c,function(){a.events[c].apply(this,[this])})})(b,e);b.index=1;return b};this.addControl=function(a){var b=google.maps.ControlPosition[a.position.toUpperCase()];delete a.position;a=this.createControl(a);this.controls.push(a);this.map.controls[b].push(a);return a};this.createMarker=function(a){if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position){var b=this,c=a.details,d=a.fences,f=a.outside,g={position:new google.maps.LatLng(a.lat,a.lng),map:null};delete a.lat;delete a.lng;delete a.fences;
delete a.outside;var g=e(g,a),k=new google.maps.Marker(g);k.fences=d;if(a.infoWindow)for(k.infoWindow=new google.maps.InfoWindow(a.infoWindow),g=["closeclick","content_changed","domready","position_changed","zindex_changed"],d=0;d<g.length;d++)(function(b,c){a.infoWindow[c]&&google.maps.event.addListener(b,c,function(b){a.infoWindow[c].apply(this,[b])})})(k.infoWindow,g[d]);for(var g="animation_changed clickable_changed cursor_changed draggable_changed flat_changed icon_changed position_changed shadow_changed shape_changed title_changed visible_changed zindex_changed".split(" "),
h="dblclick drag dragend dragstart mousedown mouseout mouseover mouseup".split(" "),d=0;d<g.length;d++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this,[this])})})(k,g[d]);for(d=0;d<h.length;d++)(function(b,c,e){a[e]&&google.maps.event.addListener(c,e,function(c){c.pixel||(c.pixel=b.getProjection().fromLatLngToPoint(c.latLng));a[e].apply(this,[c])})})(this.map,k,h[d]);google.maps.event.addListener(k,"click",function(){this.details=c;a.click&&a.click.apply(this,[this]);
k.infoWindow&&(b.hideInfoWindows(),k.infoWindow.open(b.map,k))});google.maps.event.addListener(k,"rightclick",function(b){b.marker=this;a.rightclick&&a.rightclick.apply(this,[b]);void 0!=window.context_menu.marker&&O("marker",b)});k.fences&&google.maps.event.addListener(k,"dragend",function(){b.checkMarkerGeofence(k,function(a,b){f(a,b)})});return k}throw"No latitude or longitude defined.";};this.addMarker=function(a){if(!a.hasOwnProperty("gm_accessors_"))if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||
a.position)a=this.createMarker(a);else throw"No latitude or longitude defined.";a.setMap(this.map);this.markerClusterer&&this.markerClusterer.addMarker(a);this.markers.push(a);r.fire("marker_added",a,this);return a};this.addMarkers=function(a){for(var b=0,c;c=a[b];b++)this.addMarker(c);return this.markers};this.hideInfoWindows=function(){for(var a=0,b;b=this.markers[a];a++)b.infoWindow&&b.infoWindow.close()};this.removeMarker=function(a){for(var b=0;b<this.markers.length;b++)if(this.markers[b]===
a){this.markers[b].setMap(null);this.markers.splice(b,1);r.fire("marker_removed",a,this);break}return a};this.removeMarkers=function(a){a=a||this.markers;for(var b=0;b<this.markers.length;b++)this.markers[b]===a[b]&&this.markers[b].setMap(null);a=[];for(b=0;b<this.markers.length;b++)null!=this.markers[b].getMap()&&a.push(this.markers[b]);this.markers=a};this.drawOverlay=function(a){var b=new google.maps.OverlayView;b.setMap(d.map);var c=!0;null!=a.auto_show&&(c=a.auto_show);b.onAdd=function(){var c=
g.createElement("div");c.style.borderStyle="none";c.style.borderWidth="0px";c.style.position="absolute";c.style.zIndex=100;c.innerHTML=a.content;b.el=c;var e=this.getPanes();a.layer||(a.layer="overlayLayer");e[a.layer].appendChild(c);for(var e=["contextmenu","DOMMouseScroll","dblclick","mousedown"],d=0;d<e.length;d++)(function(a,b){google.maps.event.addDomListener(a,b,function(a){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()})})(c,
e[d]);google.maps.event.trigger(this,"ready")};b.draw=function(){var e=this.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));a.horizontalOffset=a.horizontalOffset||0;a.verticalOffset=a.verticalOffset||0;var d=b.el,f=d.children[0],g=f.clientHeight,f=f.clientWidth;switch(a.verticalAlign){case "top":d.style.top=e.y-g+a.verticalOffset+"px";break;default:case "middle":d.style.top=e.y-g/2+a.verticalOffset+"px";break;case "bottom":d.style.top=e.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case "left":d.style.left=
e.x-f+a.horizontalOffset+"px";break;default:case "center":d.style.left=e.x-f/2+a.horizontalOffset+"px";break;case "right":d.style.left=e.x+a.horizontalOffset+"px"}d.style.display=c?"block":"none";c||a.show.apply(this,[d])};b.onRemove=function(){var c=b.el;a.remove?a.remove.apply(this,[c]):(b.el.parentNode.removeChild(b.el),b.el=null)};d.overlays.push(b);return b};this.removeOverlay=function(a){for(var b=0;b<this.overlays.length;b++)if(this.overlays[b]===a){this.overlays[b].setMap(null);this.overlays.splice(b,
1);break}};this.removeOverlays=function(){for(var a=0,b;b=d.overlays[a];a++)b.setMap(null);d.overlays=[]};this.drawPolyline=function(a){var b=[],c=a.path;if(c.length)if(void 0===c[0][0])b=c;else for(var e=0,d;d=c[e];e++)b.push(new google.maps.LatLng(d[0],d[1]));b={map:this.map,path:b,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(b.clickable=a.clickable);a.hasOwnProperty("editable")&&
(b.editable=a.editable);a.hasOwnProperty("icons")&&(b.icons=a.icons);a.hasOwnProperty("zIndex")&&(b.zIndex=a.zIndex);b=new google.maps.Polyline(b);c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");for(e=0;e<c.length;e++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})})(b,c[e]);this.polylines.push(b);r.fire("polyline_added",b,this);return b};this.removePolyline=function(a){for(var b=0;b<this.polylines.length;b++)if(this.polylines[b]===
a){this.polylines[b].setMap(null);this.polylines.splice(b,1);r.fire("polyline_removed",a,this);break}};this.removePolylines=function(){for(var a=0,b;b=d.polylines[a];a++)b.setMap(null);d.polylines=[]};this.drawCircle=function(a){a=e({map:this.map,center:new google.maps.LatLng(a.lat,a.lng)},a);delete a.lat;delete a.lng;for(var b=new google.maps.Circle(a),c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),d=0;d<c.length;d++)(function(b,c){a[c]&&google.maps.event.addListener(b,
c,function(b){a[c].apply(this,[b])})})(b,c[d]);this.polygons.push(b);return b};this.drawRectangle=function(a){a=e({map:this.map},a);var b=new google.maps.LatLngBounds(new google.maps.LatLng(a.bounds[0][0],a.bounds[0][1]),new google.maps.LatLng(a.bounds[1][0],a.bounds[1][1]));a.bounds=b;for(var b=new google.maps.Rectangle(a),c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),d=0;d<c.length;d++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,
[b])})})(b,c[d]);this.polygons.push(b);return b};this.drawPolygon=function(a){var d=!1;a.hasOwnProperty("useGeoJSON")&&(d=a.useGeoJSON);delete a.useGeoJSON;a=e({map:this.map},a);!1==d&&(a.paths=[a.paths.slice(0)]);0<a.paths.length&&0<a.paths[0].length&&(a.paths=k(f(a.paths,b,d)));for(var d=new google.maps.Polygon(a),g="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),h=0;h<g.length;h++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,
[b])})})(d,g[h]);this.polygons.push(d);r.fire("polygon_added",d,this);return d};this.removePolygon=function(a){for(var b=0;b<this.polygons.length;b++)if(this.polygons[b]===a){this.polygons[b].setMap(null);this.polygons.splice(b,1);r.fire("polygon_removed",a,this);break}};this.removePolygons=function(){for(var a=0,b;b=d.polygons[a];a++)b.setMap(null);d.polygons=[]};this.getFromFusionTables=function(a){var b=a.events;delete a.events;a=new google.maps.FusionTablesLayer(a);for(var c in b)(function(a,
c){google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])})})(a,c);this.layers.push(a);return a};this.loadFromFusionTables=function(a){a=this.getFromFusionTables(a);a.setMap(this.map);return a};this.getFromKML=function(a){var b=a.url,c=a.events;delete a.url;delete a.events;a=new google.maps.KmlLayer(b,a);for(var e in c)(function(a,b){google.maps.event.addListener(a,b,function(a){c[b].apply(this,[a])})})(a,e);this.layers.push(a);return a};this.loadFromKML=function(a){a=this.getFromKML(a);
a.setMap(this.map);return a};var J,L;this.getRoutes=function(a){switch(a.travelMode){case "bicycling":J=google.maps.TravelMode.BICYCLING;break;case "transit":J=google.maps.TravelMode.TRANSIT;break;case "driving":J=google.maps.TravelMode.DRIVING;break;default:J=google.maps.TravelMode.WALKING}L="imperial"===a.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var b=e({avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},a);b.origin=/string/.test(typeof a.origin)?a.origin:
new google.maps.LatLng(a.origin[0],a.origin[1]);b.destination=new google.maps.LatLng(a.destination[0],a.destination[1]);b.travelMode=J;b.unitSystem=L;delete b.callback;var c=this;(new google.maps.DirectionsService).route(b,function(b,e){if(e===google.maps.DirectionsStatus.OK)for(var d in b.routes)b.routes.hasOwnProperty(d)&&c.routes.push(b.routes[d]);a.callback&&a.callback(c.routes)})};this.removeRoutes=function(){this.routes=[]};this.getElevations=function(a){a=e({locations:[],path:!1,samples:256},
a);0<a.locations.length&&0<a.locations[0].length&&(a.locations=k(f([a.locations],b,!1)));var d=a.callback;delete a.callback;var g=new google.maps.ElevationService;a.path?g.getElevationAlongPath({path:a.locations,samples:a.samples},function(a,b){d&&"function"===typeof d&&d(a,b)}):(delete a.path,delete a.samples,g.getElevationForLocations(a,function(a,b){d&&"function"===typeof d&&d(a,b)}))};this.cleanRoute=this.removePolylines;this.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,
travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,callback:function(c){0<c.length&&(b.drawPolyline({path:c[c.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.callback&&a.callback(c[c.length-1]))}})};this.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(b){0<b.length&&a.start&&a.start(b[b.length-
1]);if(0<b.length&&a.step){var c=b[b.length-1];if(0<c.legs.length)for(var e=c.legs[0].steps,d=0,f;f=e[d];d++)f.step_number=d,a.step(f,c.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b=a.route.legs[0].steps,c=0,e;e=b[c];c++)e.step_number=c,a.step(e)};this.drawSteppedRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(b){0<
b.length&&a.start&&a.start(b[b.length-1]);if(0<b.length&&a.step){var c=b[b.length-1];if(0<c.legs.length)for(var e=c.legs[0].steps,f=0,g;g=e[f];f++)g.step_number=f,d.drawPolyline({path:g.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(g,c.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b=a.route.legs[0].steps,c=0,e;e=b[c];c++)e.step_number=c,d.drawPolyline({path:e.path,strokeColor:a.strokeColor,
strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(e)};this.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))};this.checkMarkerGeofence=function(a,b){if(a.fences)for(var c=0,e;e=a.fences[c];c++){var f=a.getPosition();d.checkGeofence(f.lat(),f.lng(),e)||b(a,e)}};this.addLayer=function(a,b){b=b||{};var c;switch(a){case "weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case "clouds":this.singleLayers.clouds=c=new google.maps.weather.CloudLayer;
break;case "traffic":this.singleLayers.traffic=c=new google.maps.TrafficLayer;break;case "transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case "bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case "panoramio":this.singleLayers.panoramio=c=new google.maps.panoramio.PanoramioLayer;c.setTag(b.filter);delete b.filter;b.click&&google.maps.event.addListener(c,"click",function(a){b.click(a);delete b.click});break;case "places":this.singleLayers.places=
c=new google.maps.places.PlacesService(this.map);if(b.search||b.nearbySearch){var e={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.search&&c.search(e,b.search);b.nearbySearch&&c.nearbySearch(e,b.nearbySearch)}b.textSearch&&c.textSearch({bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null},b.textSearch)}if(void 0!==c)return"function"==typeof c.setOptions&&
c.setOptions(b),"function"==typeof c.setMap&&c.setMap(this.map),c};this.removeLayer=function(a){void 0!==this.singleLayers[a]&&(this.singleLayers[a].setMap(null),delete this.singleLayers[a])};this.toImage=function(a){a=a||{};var b={};b.size=a.size||[this.el.clientWidth,this.el.clientHeight];b.lat=this.getCenter().lat();b.lng=this.getCenter().lng();if(0<this.markers.length)for(b.markers=[],a=0;a<this.markers.length;a++)b.markers.push({lat:this.markers[a].getPosition().lat(),lng:this.markers[a].getPosition().lng()});
0<this.polylines.length&&(a=this.polylines[0],b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(a.getPath()),b.polyline.strokeColor=a.strokeColor,b.polyline.strokeOpacity=a.strokeOpacity,b.polyline.strokeWeight=a.strokeWeight);return r.staticMapURL(b)};this.addMapType=function(a,b){if(b.hasOwnProperty("getTileUrl")&&"function"==typeof b.getTileUrl){b.tileSize=b.tileSize||new google.maps.Size(256,256);var c=new google.maps.ImageMapType(b);this.map.mapTypes.set(a,c)}else throw"'getTileUrl' function required.";
};this.addOverlayMapType=function(a){if(a.hasOwnProperty("getTile")&&"function"==typeof a.getTile){var b=a.index;delete a.index;this.map.overlayMapTypes.insertAt(b,a)}else throw"'getTile' function required.";};this.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)};this.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,a.styledMapName);this.map.mapTypes.set(a.mapTypeId,b)};this.setStyle=function(a){this.map.setMapTypeId(a)};this.createPanorama=function(a){a.hasOwnProperty("lat")&&
a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng());this.panorama=r.createPanorama(a);this.map.setStreetView(this.panorama);return this.panorama};this.on=function(a,b){return r.on(a,this,b)};this.off=function(a){r.off(a,this)}};r.createPanorama=function(a){var b=h(a.el,a.context);a.position=new google.maps.LatLng(a.lat,a.lng);delete a.el;delete a.context;delete a.lat;delete a.lng;for(var c="closeclick links_changed pano_changed position_changed pov_changed resize visible_changed".split(" "),
d=e({visible:!0},a),f=0;f<c.length;f++)delete d[c[f]];b=new google.maps.StreetViewPanorama(b,d);for(f=0;f<c.length;f++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this)})})(b,c[f]);return b};r.Route=function(a){this.map=a.map;this.route=a.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}).getPath();
this.back=function(){if(0<this.step_count){this.step_count--;var a=this.route.legs[0].steps[this.step_count].path,b;for(b in a)a.hasOwnProperty(b)&&this.polyline.pop()}};this.forward=function(){if(this.step_count<this.steps_length){var a=this.route.legs[0].steps[this.step_count].path,b;for(b in a)a.hasOwnProperty(b)&&this.polyline.push(a[b]);this.step_count++}}};r.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){a.success(c);
b&&b()},function(c){a.error(c);b&&b()},a.options):(a.not_supported(),b&&b())};r.geocode=function(a){this.geocoder=new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng));delete a.lat;delete a.lng;delete a.callback;this.geocoder.geocode(a,function(a,c){b(a,c)})};r.staticMapURL=function(a){function b(a,c){if("#"===a[0]&&(a=a.replace("#","0x"),c)){c=parseFloat(c);c=Math.min(1,Math.max(c,0));if(0===c)return"0x00000000";
c=(255*c).toString(16);1===c.length&&(c+=c);a=a.slice(0,8)+c}return a}var c=[],e="http://maps.googleapis.com/maps/api/staticmap";a.url&&(e=a.url,delete a.url);var e=e+"?",d=a.markers;delete a.markers;!d&&a.marker&&(d=[a.marker],delete a.marker);var f=a.polyline;delete a.polyline;if(a.center)c.push("center="+a.center),delete a.center;else if(a.address)c.push("center="+a.address),delete a.address;else if(a.lat)c.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng;else if(a.visible){var g=
encodeURI(a.visible.join("|"));c.push("visible="+g)}(g=a.size)?(g.join&&(g=g.join("x")),delete a.size):g="630x300";c.push("size="+g);a.zoom||(a.zoom=15);g=a.hasOwnProperty("sensor")?!!a.sensor:!0;delete a.sensor;c.push("sensor="+g);for(var k in a)a.hasOwnProperty(k)&&c.push(k+"="+a[k]);if(d)for(g=0;a=d[g];g++)k=[],a.size&&"normal"!==a.size?k.push("size:"+a.size):a.icon&&k.push("icon:"+encodeURI(a.icon)),a.color&&k.push("color:"+a.color.replace("#","0x")),a.label&&k.push("label:"+a.label[0].toUpperCase()),
a=a.address?a.address:a.lat+","+a.lng,k.length||0===g?(k.push(a),k=k.join("|"),c.push("markers="+encodeURI(k))):(k=c.pop()+encodeURI("|"+a),c.push(k));if(f){a=f;f=[];a.strokeWeight&&f.push("weight:"+parseInt(a.strokeWeight,10));a.strokeColor&&(d=b(a.strokeColor,a.strokeOpacity),f.push("color:"+d));a.fillColor&&(d=b(a.fillColor,a.fillOpacity),f.push("fillcolor:"+d));d=a.path;if(d.join)for(a=0;k=d[a];a++)f.push(k.join(","));else f.push("enc:"+d);f=f.join("|");c.push("path="+encodeURI(f))}c=c.join("&");
return e+c};r.custom_events="marker_added marker_removed polyline_added polyline_removed polygon_added polygon_removed geolocated geolocation_failed".split(" ");r.on=function(a,b,c){if(-1==r.custom_events.indexOf(a))return google.maps.event.addListener(b,a,c);c={handler:c,eventName:a};b.registered_events[a]=b.registered_events[a]||[];b.registered_events[a].push(c);return c};r.off=function(a,b){-1==r.custom_events.indexOf(a)?google.maps.event.clearListeners(b,a):b.registered_events[a]=[]};r.fire=function(a,
b,c){if(-1==r.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));else if(a in c.registered_events)for(var e=c.registered_events[a],d=0;d<e.length;d++)e[d].handler.apply(c,[b])};google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(a){a=new google.maps.LatLngBounds;for(var b=this.getPaths(),c,e=0;e<b.getLength();e++){c=b.getAt(e);for(var d=0;d<c.getLength();d++)a.extend(c.getAt(d))}return a});google.maps.Polygon.prototype.containsLatLng||
(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;for(var b=!1,c=this.getPaths().getLength(),e=0;e<c;e++)for(var d=this.getPaths().getAt(e),f=d.getLength(),g=f-1,k=0;k<f;k++){var h=d.getAt(k),g=d.getAt(g);(h.lng()<a.lng()&&g.lng()>=a.lng()||g.lng()<a.lng()&&h.lng()>=a.lng())&&h.lat()+(a.lng()-h.lng())/(g.lng()-h.lng())*(g.lat()-h.lat())<a.lat()&&(b=!b);g=k}return b});google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)};
google.maps.Marker.prototype.setFences=function(a){this.fences=a};google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)};return r}(this),b=function(a,e){for(var d=0;d<a.length;d++)if(0<a[d].length&&"number"!=typeof a[d][0])a[d]=b(a[d],e);else{var f=a,g=d,k;k=a[d];var h=k[0],m=k[1];e&&(h=k[1],m=k[0]);k=new google.maps.LatLng(h,m);f[g]=k}return a},e=function(a,b){if(a===b)return a;for(var c in b)a[c]=b[c];return a},f=function(a,b){var c=Array.prototype.slice.call(arguments,2);if(Array.prototype.map&&
a.map===Array.prototype.map)return Array.prototype.map.call(a,function(a){callback_params=c;callback_params.splice(0,0,a);return b.apply(this,callback_params)});for(var e=[],d=a.length,f=0;f<d;f++)callback_params=c,callback_params=callback_params.splice(0,0,a[f]),e.push(b.apply(this,callback_params));return e},k=function(a){new_array=[];for(var b=0;b<a.length;b++)new_array=new_array.concat(a[b]);return new_array};d.GMaps=a;d.GMaps.mapEvents="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed".split(" ");
d.fn.gmaps=function(b){if(!(1>this.length)){var c=d(this[0]),e=c.data("gmaps"),f=void 0===e,g=void 0===b;d.isString(b)&&(b={address:b});if(f){var f=d.uid("gmaps-"),k={lat:0,lng:0};d.isPlainObject(b)&&(b=d.extend({},k,b));c.attr("id",f);b.div="#"+f;d.each(d.GMaps.mapEvents,function(a,f){var g=d.isFunction(b[f])?b[f]:d.noop;b[f]=function(){var a=d.makeArray(arguments);g.apply(e,arguments);c.trigger.apply(c,["map_"+f].concat(a))}});e=new a(b);c.data("gmaps",e);e.go=function(a,b){e.setCenter(a,b);e.addMarker({lat:a,
lng:b})};g&&a.geolocate({success:function(a){e.go(a.coords.latitude,a.coords.longitude)}})}else g=b.lat,f=b.lng,(d.isNumber(g)||d.isNumber(f))&&e.go(g,f);return e}};g.resolveWith(a)});d.require().script(d.uri(window.location).protocol()+"://maps.google.com/maps/api/js?sensor=true&callback="+b).done()})})();(function(){FD31.module("imgareaselect",function(d){var g=function(){(function(b){function a(){return b("<div/>")}var c=Math.abs,e=Math.max,d=Math.min,g=Math.round;b.imgAreaSelect=function(h,p){function s(a){return a+
Z.left-ga.left}function r(a){return a+Z.top-ga.top}function u(a){return a-Z.left+ga.left}function q(a){return a-Z.top+ga.top}function t(a){var b=a||wa;a=a||jb;return{x1:g(C.x1*b),y1:g(C.y1*a),x2:g(C.x2*b),y2:g(C.y2*a),width:g(C.x2*b)-g(C.x1*b),height:g(C.y2*a)-g(C.y1*a)}}function m(a,b,c,e,d){var f=d||wa;d=d||jb;C={x1:g(a/f||0),y1:g(b/d||0),x2:g(c/f||0),y2:g(e/d||0)};C.width=C.x2-C.x1;C.height=C.y2-C.y1}function v(){P.width()&&(Z={left:g(P.offset().left),top:g(P.offset().top)},M=P.innerWidth(),ea=
P.innerHeight(),Z.top+=P.outerHeight()-ea>>1,Z.left+=P.outerWidth()-M>>1,kb=g(p.minWidth/wa)||0,lb=g(p.minHeight/jb)||0,mb=g(d(p.maxWidth/wa||16777216,M)),Ya=g(d(p.maxHeight/jb||16777216,ea)),"1.3.2"!=b().jquery||"fixed"!=l||Da.getBoundingClientRect||(Z.top+=e(document.body.scrollTop,Da.scrollTop),Z.left+=e(document.body.scrollLeft,Da.scrollLeft)),ga=/absolute|relative/.test(ja.css("position"))?{left:g(ja.offset().left)-ja.scrollLeft(),top:g(ja.offset().top)-ja.scrollTop()}:"fixed"==l?{left:b(document).scrollLeft(),
top:b(document).scrollTop()}:{left:0,top:0},Q=s(0),T=r(0),(C.x2>M||C.y2>ea)&&O())}function z(a){if(Za){F.css({left:s(C.x1),top:r(C.y1)}).add(Y).width(ya=C.width).height(X=C.height);Y.add(U).add(W).css({left:0,top:0});U.width(e(ya-U.outerWidth()+U.innerWidth(),0)).height(e(X-U.outerHeight()+U.innerHeight(),0));b(y[0]).css({left:Q,top:T,width:C.x1,height:ea});b(y[1]).css({left:Q+C.x1,top:T,width:ya,height:C.y1});b(y[2]).css({left:Q+C.x2,top:T,width:M-C.x2,height:ea});b(y[3]).css({left:Q+C.x1,top:T+
C.y2,width:ya,height:ea-C.y2});ya-=W.outerWidth();X-=W.outerHeight();switch(W.length){case 8:b(W[4]).css({left:ya>>1}),b(W[5]).css({left:ya,top:X>>1}),b(W[6]).css({left:ya>>1,top:X}),b(W[7]).css({top:X>>1});case 4:W.slice(1,3).css({left:ya}),W.slice(2,4).css({top:X})}if(!1!==a&&(b.imgAreaSelect.keyPress!=Ea&&b(document).unbind(b.imgAreaSelect.keyPress,b.imgAreaSelect.onKeyPress),p.keys))b(document)[b.imgAreaSelect.keyPress](b.imgAreaSelect.onKeyPress=Ea);b.browser.msie&&2==U.outerWidth()-U.innerWidth()&&
(U.css("margin",0),setTimeout(function(){U.css("margin","auto")},0))}}function A(a){v();z(a);G=s(C.x1);E=r(C.y1);I=s(C.x2);K=r(C.y2)}function w(a,b){p.fadeSpeed?a.fadeOut(p.fadeSpeed,b):a.hide()}function B(a){var b=u(a.pageX-ga.left)-C.x1;a=q(a.pageY-ga.top)-C.y1;Ua||(v(),Ua=!0,F.one("mouseout",function(){Ua=!1}));da="";p.resizable&&(a<=p.resizeMargin?da="n":a>=C.height-p.resizeMargin&&(da="s"),b<=p.resizeMargin?da+="w":b>=C.width-p.resizeMargin&&(da+="e"));F.css("cursor",da?da+"-resize":p.movable?
"move":"");oa&&oa.toggle()}function x(a){b("body").css("cursor","");(p.autoHide||0==C.width*C.height)&&w(F.add(y),function(){b(this).hide()});b(document).unbind("mousemove",aa);F.mousemove(B);p.onSelectEnd(h,t())}function R(a){if(1!=a.which)return!1;v();da?(b("body").css("cursor",da+"-resize"),G=s(C[/w/.test(da)?"x2":"x1"]),E=r(C[/n/.test(da)?"y2":"y1"]),b(document).mousemove(aa).one("mouseup",x),F.unbind("mousemove",B)):p.movable?(N=Q+C.x1-(a.pageX-ga.left),ma=T+C.y1-(a.pageY-ga.top),F.unbind("mousemove",
B),b(document).mousemove(L).one("mouseup",function(){p.onSelectEnd(h,t());b(document).unbind("mousemove",L);F.mousemove(B)})):P.mousedown(a);return!1}function S(a){xa&&(a?(I=e(Q,d(Q+M,G+c(K-E)*xa*(I>G||-1))),K=g(e(T,d(T+ea,E+c(I-G)/xa*(K>E||-1)))),I=g(I)):(K=e(T,d(T+ea,E+c(I-G)/xa*(K>E||-1))),I=g(e(Q,d(Q+M,G+c(K-E)*xa*(I>G||-1)))),K=g(K)))}function O(){G=d(G,Q+M);E=d(E,T+ea);c(I-G)<kb&&(I=G-kb*(I<G||-1),I<Q?G=Q+kb:I>Q+M&&(G=Q+M-kb));c(K-E)<lb&&(K=E-lb*(K<E||-1),K<T?E=T+lb:K>T+ea&&(E=T+ea-lb));I=e(Q,
d(I,Q+M));K=e(T,d(K,T+ea));S(c(I-G)<c(K-E)*xa);c(I-G)>mb&&(I=G-mb*(I<G||-1),S());c(K-E)>Ya&&(K=E-Ya*(K<E||-1),S(!0));C={x1:u(d(G,I)),x2:u(e(G,I)),y1:q(d(E,K)),y2:q(e(E,K)),width:c(I-G),height:c(K-E)};z();p.onSelectChange(h,t())}function aa(a){I=/w|e|^$/.test(da)||xa?a.pageX-ga.left:s(C.x2);K=/n|s|^$/.test(da)||xa?a.pageY-ga.top:r(C.y2);O();return!1}function J(a,c){I=(G=a)+C.width;K=(E=c)+C.height;b.extend(C,{x1:u(G),y1:q(E),x2:u(I),y2:q(K)});z();p.onSelectChange(h,t())}function L(a){G=e(Q,d(N+(a.pageX-
ga.left),Q+M-C.width));E=e(T,d(ma+(a.pageY-ga.top),T+ea-C.height));J(G,E);a.preventDefault();return!1}function V(){b(document).unbind("mousemove",V);v();I=G;K=E;O();da="";y.is(":visible")||F.add(y).hide().fadeIn(p.fadeSpeed||0);Za=!0;b(document).unbind("mouseup",H).mousemove(aa).one("mouseup",x);F.unbind("mousemove",B);p.onSelectStart(h,t())}function H(){b(document).unbind("mousemove",V).unbind("mouseup",H);w(F.add(y));m(u(G),q(E),u(G),q(E));this instanceof b.imgAreaSelect||(p.onSelectChange(h,t()),
p.onSelectEnd(h,t()))}function ha(a){if(1!=a.which||y.is(":animated"))return!1;v();N=G=a.pageX-ga.left;ma=E=a.pageY-ga.top;b(document).mousemove(V).mouseup(H);return!1}function ra(){A(!1)}function ba(){na=!0;Sa(p=b.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},p));F.add(y).css({visibility:""});p.show&&(Za=!0,v(),z(),F.add(y).hide().fadeIn(p.fadeSpeed||0));
setTimeout(function(){p.onInit(h,t())},0)}function sa(a,b){for(var c in b)void 0!==p[c]&&a.css(b[c],p[c])}function Sa(c){c.parent&&(ja=b(c.parent)).append(F.add(y));b.extend(p,c);v();if(null!=c.handles){W.remove();W=b([]);for(Ta=c.handles?"corners"==c.handles?4:8:0;Ta--;)W=W.add(a());W.addClass(p.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:pa+1||1});0<=!parseInt(W.css("width"))&&W.width(5).height(5);(ta=p.borderWidth)&&W.css({borderWidth:ta,borderStyle:"solid"});sa(W,{borderColor1:"border-color",
borderColor2:"background-color",borderOpacity:"opacity"})}wa=p.imageWidth/M||1;jb=p.imageHeight/ea||1;null!=c.x1&&(m(c.x1,c.y1,c.x2,c.y2),c.show=!c.hide);c.keys&&(p.keys=b.extend({shift:1,ctrl:"resize"},c.keys));y.addClass(p.classPrefix+"-outer");Y.addClass(p.classPrefix+"-selection");for(Ta=0;4>Ta++;)b(U[Ta-1]).addClass(p.classPrefix+"-border"+Ta);sa(Y,{selectionColor:"background-color",selectionOpacity:"opacity"});sa(U,{borderOpacity:"opacity",borderWidth:"border-width"});sa(y,{outerColor:"background-color",
outerOpacity:"opacity"});(ta=p.borderColor1)&&b(U[0]).css({borderStyle:"solid",borderColor:ta});(ta=p.borderColor2)&&b(U[1]).css({borderStyle:"dashed",borderColor:ta});F.append(Y.add(U).add(oa).add(W));b.browser.msie&&((ta=(y.css("filter")||"").match(/opacity=(\d+)/))&&y.css("opacity",ta[1]/100),(ta=(U.css("filter")||"").match(/opacity=(\d+)/))&&U.css("opacity",ta[1]/100));c.hide?w(F.add(y)):c.show&&na&&(Za=!0,F.add(y).fadeIn(p.fadeSpeed||0),A());xa=($a=(p.aspectRatio||"").split(/:/))[0]/$a[1];P.add(y).unbind("mousedown",
ha);if(p.disable||!1===p.enable)F.unbind("mousemove",B).unbind("mousedown",R),b(window).unbind("resize",ra);else{if(p.enable||!1===p.disable)(p.resizable||p.movable)&&F.mousemove(B).mousedown(R),b(window).resize(ra);p.persistent||P.add(y).mousedown(ha)}p.enable=p.disable=void 0}var P=b(h),na,F=a(),Y=a(),U=a().add(a()).add(a()).add(a()),y=a().add(a()).add(a()).add(a()),W=b([]),oa,Q,T,Z={left:0,top:0},M,ea,ja,ga={left:0,top:0},pa=0,l="absolute",N,ma,wa,jb,da,kb,lb,mb,Ya,xa,Za,G,E,I,K,C={x1:0,y1:0,x2:0,
y2:0,width:0,height:0},Da=document.documentElement,Ba,$a,Ta,ta,ya,X,Ua,Ea=function(a){var b=p.keys,c,g=a.keyCode;c=isNaN(b.alt)||!a.altKey&&!a.originalEvent.altKey?!isNaN(b.ctrl)&&a.ctrlKey?b.ctrl:!isNaN(b.shift)&&a.shiftKey?b.shift:isNaN(b.arrows)?10:b.arrows:b.alt;if("resize"==b.arrows||"resize"==b.shift&&a.shiftKey||"resize"==b.ctrl&&a.ctrlKey||"resize"==b.alt&&(a.altKey||a.originalEvent.altKey)){switch(g){case 37:c=-c;case 39:a=e(G,I);G=d(G,I);I=e(a+c,G);S();break;case 38:c=-c;case 40:a=e(E,K);
E=d(E,K);K=e(a+c,E);S(!0);break;default:return}O()}else switch(G=d(G,I),E=d(E,K),g){case 37:J(e(G-c,Q),E);break;case 38:J(G,e(E-c,T));break;case 39:J(G+d(c,M-u(I)),E);break;case 40:J(G,E+d(c,ea-q(K)));break;default:return}return!1};this.remove=function(){Sa({disable:!0});F.add(y).remove()};this.getOptions=function(){return p};this.setOptions=Sa;this.getSelection=t;this.setSelection=m;this.cancelSelection=H;this.update=A;for(Ba=P;Ba.length;)pa=e(pa,isNaN(Ba.css("z-index"))?pa:Ba.css("z-index")),"fixed"==
Ba.css("position")&&(l="fixed"),Ba=Ba.parent(":not(body)");pa=p.zIndex||pa;b.browser.msie&&P.attr("unselectable","on");b.imgAreaSelect.keyPress=b.browser.msie||b.browser.safari?"keydown":"keypress";b.browser.opera&&(oa=a().css({width:"100%",height:"100%",position:"absolute",zIndex:pa+2||2}));F.add(y).css({visibility:"hidden",position:l,overflow:"hidden",zIndex:pa||"0"});F.css({zIndex:pa+2||2});Y.add(U).css({position:"absolute",fontSize:0});h.complete||"complete"==h.readyState||!P.is("img")?ba():P.one("load",
ba);!na&&b.browser.msie&&7<=b.browser.version&&(h.src=h.src)};b.fn.imgAreaSelect=function(a){a=a||{};this.each(function(){b(this).data("imgAreaSelect")?a.remove?(b(this).data("imgAreaSelect").remove(),b(this).removeData("imgAreaSelect")):b(this).data("imgAreaSelect").setOptions(a):a.remove||(void 0===a.enable&&void 0===a.disable&&(a.enable=!0),b(this).data("imgAreaSelect",new b.imgAreaSelect(this,a)))});return a.instance?b(this).data("imgAreaSelect"):this}})(d)};g();this.resolveWith(g)})})()});
FD31.installer("EasySocial","definitions",function(h){h.module("easysocial/admin easysocial/admin/sidebar/sidebar easysocial/admin/alerts/discover easysocial/progress/progress easysocial/admin/badges/discover easysocial/admin/grid/grid easysocial/admin/grid/sort easysocial/admin/grid/publishing easysocial/admin/grid/ordering easysocial/admin/indexer/indexer easysocial/admin/mailer/mailer easysocial/admin/migrators/migrator easysocial/admin/points/discover easysocial/admin/privacy/discover easysocial/admin/profiles/avatar easysocial/uploader/uploader easysocial/uploader/queue easysocial/admin/profiles/fields easysocial/field easysocial/admin/profiles/members easysocial/admin/profiles/profiles easysocial/admin/reports/reporters easysocial/admin/reports/reports easysocial/admin/users/form easysocial/admin/users/privacy easysocial/admin/users/users easysocial/admin/widgets/news easysocial/albums/album easysocial/albums/browser easysocial/albums/editor easysocial/albums/editor/sortable easysocial/albums/editor/uploader easysocial/albums/uploader easysocial/albums/uploader.item easysocial/albums/item easysocial/easysocial easysocial/site/likes/likes easysocial/site/reports/reports easysocial/site/repost/repost easysocial/site/share/share easysocial/site/layout/dialog easysocial/site/layout/responsive easysocial/site/layout/elements easysocial/site/photos/photos easysocial/photos easysocial/photos/viewer easysocial/site/users/login easysocial/site/profile/popbox easysocial/site/conversations/composer easysocial/site/friends/suggest easysocial/location easysocial/site/privacy/privacy easysocial/site/locations/popbox easysocial/site/sidebar/sidebar easysocial/locations easysocial/oauth/facebook easysocial/pagination easysocial/photos/avatar easysocial/photos/browser easysocial/photos/cover easysocial/photos/editor easysocial/photos/item easysocial/photos/tags easysocial/photos/tagger easysocial/photos/navigation easysocial/privacy easysocial/sharing easysocial/site/activities/activities easysocial/site/activities/sidebar easysocial/site/activities/sidebar.item easysocial/site/activities/apps easysocial/site/activities/item easysocial/site/activities/list easysocial/site/apps/apps easysocial/site/badges/badge easysocial/site/comments/control easysocial/site/comments/frame easysocial/site/comments/item easysocial/site/conversations/api easysocial/site/conversations/conversations easysocial/site/conversations/mailbox easysocial/site/conversations/item easysocial/site/conversations/filter easysocial/site/conversations/read easysocial/site/dashboard/apps easysocial/site/dashboard/dashboard easysocial/site/dashboard/feeds easysocial/site/dashboard/sidebar easysocial/site/followers/api easysocial/site/followers/followers easysocial/site/friends/api easysocial/site/friends/friends easysocial/site/friends/list easysocial/site/friends/item easysocial/site/notifications/list easysocial/site/points/history easysocial/site/popbox/popbox easysocial/site/profile/about easysocial/site/profile/avatar easysocial/site/profile/edit easysocial/validate easysocial/site/profile/friends easysocial/site/profile/header easysocial/site/profile/subscriptions easysocial/site/profile/miniheader easysocial/site/profile/notifications easysocial/site/profile/privacy easysocial/site/profile/profile easysocial/site/registrations/registrations easysocial/site/search/item easysocial/site/search/list easysocial/site/search/search easysocial/site/search/sidebar easysocial/site/search/toolbar easysocial/site/stream/item easysocial/site/stream/stream easysocial/site/subscriptions/follow easysocial/site/toolbar/conversations easysocial/site/toolbar/friends easysocial/site/toolbar/login easysocial/site/toolbar/notifications easysocial/site/toolbar/story easysocial/site/toolbar/system easysocial/site/toolbar/profile easysocial/site/users/users easysocial/story easysocial/story/friends easysocial/story/links easysocial/story/locations easysocial/story/photos easysocial/albums/photo easysocial/stream easysocial/comment easysocial/tab easysocial/toggle easysocial/uploader/item easysocial/utilities/alias".split(" "));
h.require.template.loader("easysocial/site/loading/small easysocial/site/uploader/queue.item easysocial/admin/profiles/form.fields.editorItem easysocial/admin/profiles/form.fields.stepItem easysocial/admin/profiles/form.fields.editorPage easysocial/admin/profiles/form.fields.config easysocial/site/albums/browser.list.item easysocial/site/albums/upload.item easysocial/site/dialog/default easysocial/site/friends/suggest.item easysocial/site/location/delete.confirmation easysocial/apps/user/locations/suggestion easysocial/site/photos/tags.item easysocial/site/photos/tags.menu.item easysocial/admin/profiles/form.privacy.custom.item easysocial/site/friends/default.empty easysocial/site/friends/list.assign easysocial/site/registration/dialog.error easysocial/apps/user/links/story.attachment.item easysocial/site/likes/item easysocial/site/uploader/preview".split(" "));
h.require.language.loader("COM_EASYSOCIAL_SCAN_COMPLETED COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED COM_EASYSOCIAL_INDEXER_REINDEX_RESTART COM_EASYSOCIAL_PROFILES_FORM_FIELDS_REQUIRE_MANDATORY_FIELDS COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRM COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVED COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_PAGE COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_FIELD COM_EASYSOCIAL_PROFILES_FORM_FIELDS_UNSAVED_CHANGES COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES COM_EASYSOCIAL_CANCEL_BUTTON COM_EASYSOCIAL_ASSIGN_BUTTON COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE COM_EASYSOCIAL_CLOSE_BUTTON COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE COM_EASYSOCIAL_FRIENDS_REQUEST_SENT COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_PUBLIC COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_MEMBER COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIENDS_OF_FRIEND COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIEND COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_ONLY_ME COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_CUSTOM COM_EASYSOCIAL_AT_LOCATION COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR COM_EASYSOCIAL_COMMENTS_STATUS_LOADING COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR COM_EASYSOCIAL_COMMENTS_STATUS_DELETING COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR COM_EASYSOCIAL_LIKES_LIKE COM_EASYSOCIAL_LIKES_UNLIKE COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL COM_EASYSOCIAL_COMMENTS_STATUS_SAVING COM_EASYSOCIAL_COMMENTS_STATUS_SAVED COM_EASYSOCIAL_NO_BUTTON COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE COM_EASYSOCIAL_FRIENDS_CANCEL_REQUEST_DIALOG_CANCELLED COM_EASYSOCIAL_FRIENDS_DIALOG_CANCEL_REQUEST COM_EASYSOCIAL_YES_CANCEL_MY_REQUEST_BUTTON COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS COM_EASYSOCIAL_SUBSCRIPTION_INFO COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED COM_EASYSOCIAL_WITH_FRIENDS COM_EASYSOCIAL_AND_ONE_OTHER COM_EASYSOCIAL_AND_MANY_OTHERS COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR COM_EASYSOCIAL_STORY_SUBMIT_ERROR COM_EASYSOCIAL_STORY_CONTENT_EMPTY COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBSCRIBE COM_EASYSOCIAL_STREAM_DIALOG_FEED COM_EASYSOCIAL_STREAM_BUTTON_CLOSE".split(" "));
(function(){var d=h.stylesheet({content:""})?"resolve":"reject";h.each(["easysocial/imgareaselect/default"],function(g,b){h.require.stylesheet.loader(b)[d]()})})()});
FD31.installer("EasySocial","scripts",function(h){EasySocial.module("admin",function(d){var g=this;EasySocial.require().library("uniform","chosen","flot").script("admin/sidebar/sidebar").done(function(b){b(".uniform, .check :checkbox, .radio :radio, input:file[data-uniform], .usergroups :checkbox").uniform();b("[data-chosen]").chosen({disable_search:!0});b("[data-chosen-search]").chosen({disable_search:!1});b("[data-sidebar]").implement(EasySocial.Controller.Sidebar.Sidebar);b("[data-sidebar-menu-toggle]").on("click",
function(){var a=b(this).parent("li"),c=a.find("ul");b(this).parent("li").hasClass("active")?(a.removeClass("active"),c.removeClass("in")):(a.addClass("active"),c.addClass("in"))});g.resolve()})});EasySocial.module("admin/sidebar/sidebar",function(d){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Sidebar.Sidebar",{defaultOptions:{intervalPendingUsers:5E3,"{versionNotice}":"[data-easysocial-version]","{usersBadge}":".menu-user > a .badge","{pendingUsersBadge}":".menu-user .menu-ies-vcard > .badge"}},
function(a){return{init:function(){a.versionChecks();a.checkPendingUsers()},versionChecks:function(){EasySocial.ajax("admin/controllers/easysocial/versionChecks").done(function(c,e,d,g){e&&(b("[data-es-version-header]").removeClass("latest").addClass("outdated"),b("[data-es-version-header]").find("[data-es-outdated]").data("local-version",d).data("online-version",g));a.versionNotice().html(c).show()})},monitorPendingUsers:function(){EasySocial.debug&&console.info("Start monitoring pending users with interval of "+
a.options.intervalPendingUsers+" seconds.");a.options.state=setTimeout(a.checkPendingUsers,a.options.intervalPendingUsers)},checkPendingUsers:function(){a.stopMonitorPendingUsers();setTimeout(function(){EasySocial.ajax("admin/controllers/users/getTotalPending",{},{type:"jsonp"}).done(function(b){0<b?(a.usersBadge().html(b),a.pendingUsersBadge().html(b)):a.usersBadge().html("");a.monitorPendingUsers()})},a.options.intervalPendingUsers)},stopMonitorPendingUsers:function(){clearTimeout(a.options.state)}}});
g.resolve()})});EasySocial.module("admin/alerts/discover",function(d){var g=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(b){EasySocial.Controller("Alerts.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":"[data-alerts-discovery-start]","{progressBar}":"[data-alerts-discovery-progress]","{results}":"[data-alerts-discovery-result]"}},function(a){return{init:function(){a.initProgressBar()},reset:function(){a.results().html("");
a.options.progressController.reset()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<tr>").append(b("<td>").html(c)).appendTo(a.results())},startIterating:function(){var c=a.options.files.shift();EasySocial.ajax("admin/controllers/alerts/scan",{file:c}).always(function(c,d,g){0<a.options.files.length?(a.options.progressController.touch("..."),a.addLog(d),a.startIterating()):(a.options.progressController.touch("..."),
a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(b){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/alerts/discoverFiles",{}).done(function(b,c){a.reset();a.options.files=b;0<a.options.files.length&&(a.options.progressController.begin(a.options.files.length),a.addLog(c),a.startIterating())})}}});g.resolve()})});EasySocial.module("progress/progress",function(d){EasySocial.Controller("Progress",
{defaultOptions:{current:0,eachWidth:null,total:null,progressClass:"progress progress-info progress-striped","{progressBar}":".bar","{progressResult}":".progress-result",view:{}}},function(d){return{init:function(){},reset:function(){d.options.current=0;d.eachWidth=null;d.total=null;d.progressBar().css("width","0%").html("")},begin:function(b){d.options.total=b;d.options.eachWidth=100/b;0<b&&d.element.addClass(d.options.progressClass).show()},touch:function(b){d.options.current+=d.options.eachWidth;
100<d.options.current&&(d.options.current=100);d.progressBar().css("width",d.options.current+"%");d.progressResult().html(Math.round(d.options.current)+"%")},completed:function(b){d.options.current=100;d.progressBar().css("width",d.options.current+"%");d.progressResult().html(Math.round(d.options.current)+"%")}}});this.resolve()});EasySocial.module("admin/badges/discover",function(d){var g=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(b){EasySocial.Controller("Badges.Discover",
{defaultOptions:{files:[],progressController:null,"{startButton}":"[data-badgesDiscover-start]","{progressBar}":"[data-badgesDiscover-progress]","{results}":"[data-badgesDiscover-result]","{viewLog}":"[data-badgesDiscover-viewLog]"}},function(a){return{init:function(){a.initProgressBar();a.initLogging()},reset:function(){a.results().html("");a.initLogging();a.options.progressController.reset()},initLogging:function(){a.viewLog().hide()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);
a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<tr>").append(b("<td>").html(c)).appendTo(a.results())},startIterating:function(){var c=a.options.files.shift();EasySocial.ajax("admin/controllers/badges/scan",{file:c}).always(function(c,d){0<a.options.files.length?(a.options.progressController.touch("..."),a.addLog(d),a.startIterating()):(a.options.progressController.touch("..."),a.addLog(d),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.viewLog().show(),a.startButton().removeAttr("disabled"))})},
"{startButton} click":function(c){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/badges/discoverFiles",{}).done(function(c,d){a.options.files=c;0<a.options.files.length?(a.options.progressController.begin(a.options.files.length),a.addLog(d),a.startIterating()):(a.options.progressController.begin(1),a.options.progressController.completed("Discover Completed"),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})},"{viewLog} click":function(){a.results().toggle()}}});
g.resolve()})});EasySocial.module("admin/grid/grid",function(d){var g=this;EasySocial.require().script("admin/grid/sort","admin/grid/publishing").done(function(b){EasySocial.Controller("Grid",{defaultOptions:{"{sortColumns}":"[data-table-grid-sort]","{ordering}":"[data-table-grid-ordering]","{direction}":"[data-table-grid-direction]","{task}":"[data-table-grid-task]","{searchInput}":"[data-table-grid-search-input]","{search}":"[data-table-grid-search]","{resetSearch}":"[data-table-grid-search-reset]",
"{checkAll}":"[data-table-grid-checkall]","{checkboxes}":"[data-table-grid-id]","{publishItems}":"[data-table-grid-publishing]","{itemRow}":"tr","{boxChecked}":"[data-table-grid-box-checked]","{filters}":"[data-table-grid-filter]"}},function(a){return{init:function(){a.implementSortable();a.implementPublishing()},"{filters} change":function(){a.setTask("");a.submitForm()},"{search} click":function(){a.submitForm()},"{resetSearch} click":function(){a.searchInput().val("");a.submitForm()},submitForm:function(){a.element.submit()},
setTask:function(b){a.task().val(b)},setOrdering:function(b){a.ordering().val(b)},setDirection:function(b){a.direction().val(b)},setTotalChecked:function(b){a.boxChecked().val(b)},toggleSelectRow:function(a){a=a.find("input[name=cid\\[\\]]");!0==b(a).prop("checked")?b(a).prop("checked",!1):b(a).prop("checked",!0)},selectRow:function(a){a=a.find("input[name=cid\\[\\]]");b(a).prop("checked",!0)},implementSortable:function(){a.sortColumns().implement(EasySocial.Controller.Grid.Sort,{"{parent}":a})},
implementPublishing:function(){a.publishItems().implement(EasySocial.Controller.Grid.Publishing,{"{parent}":a})},"{checkAll} change":function(c,e){a.checkboxes().prop("checked",b(c).is(":checked"));var d=b(c).is(":checked")?a.checkboxes().length:0;a.setTotalChecked(d)}}});g.resolve()})});EasySocial.module("admin/grid/sort",function(d){EasySocial.Controller("Grid.Sort",{defaultOptions:{items:"[data-grid-sort-item]"}},function(d){return{init:function(){},"{self} click":function(){var b=d.element.data("direction"),
a=d.element.data("sort");d.parent.setOrdering(a);d.parent.setDirection(b);d.parent.setTask("");d.parent.submitForm()}}});this.resolve()});EasySocial.module("admin/grid/publishing",function(d){EasySocial.Controller("Grid.Publishing",{defaultOptions:{}},function(d){return{init:function(){},"{self} click":function(b){b=d.element.parents("tr");var a=d.element.data("task");d.parent.selectRow(b);d.parent.setTask(a);d.parent.submitForm()}}});this.resolve()});EasySocial.module("admin/grid/ordering",function(d){EasySocial.Controller("Grid.Ordering",
{defaultOptions:{"{moveUp}":"[data-grid-order-up]","{moveDown}":"[data-grid-order-down]",row:null}},function(g){return{init:function(){g.options.row=g.element.parents("tr")},selectRow:function(){var b=g.options.row.find("input[name=cid\\[\\]]");d(b).prop("checked",!0)},"{moveUp} click":function(){g.selectRow();d.Joomla("submitform",["moveUp"])},"{moveDown} click":function(){g.selectRow();d.Joomla("submitform",["moveDown"])}}});this.resolve()});EasySocial.module("admin/indexer/indexer",function(d){var g=
this;EasySocial.require().language("COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING","COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED","COM_EASYSOCIAL_INDEXER_REINDEX_RESTART").view("site/loading/small").done(function(b){EasySocial.Controller("Indexer",{defaultOptions:{"{startButton}":"[data-start-button]","{indexerBar}":"[data-indexer-bar]","{indexerResult}":"[data-indexer-result]","{indexerMessage}":"[data-indexer-message]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){},"{startButton} click":function(){a.runIndex(0);
a.indexerMessage().html(b.language("COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING"));a.indexerMessage().show();a.startButton().hide()},runIndex:function(b){EasySocial.ajax("admin/controllers/indexer/indexing",{max:b},{beforeSend:function(){}}).done(function(b,c){0>b&&(c="100");a.updateProgress(c);0<=b&&a.runIndex(b)}).fail(function(b){a.setMessage(b)}).always(function(){})},updateProgress:function(c){a.indexerBar().css("width",c+"%");a.indexerResult().html(c+"%");100==c&&(a.indexerMessage().html(b.language("COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED")),
a.startButton().html(b.language("COM_EASYSOCIAL_INDEXER_REINDEX_RESTART")),a.startButton().show())}}});g.resolve()})});EasySocial.module("admin/mailer/mailer",function(d){EasySocial.Controller("Mailer",{defaultOptions:{"{item}":"[data-mailer-item]"}},function(d){return{init:function(){d.item().implement(EasySocial.Controller.Mailer.Item)}}});EasySocial.Controller("Mailer.Item",{defaultOptions:{"{preview}":"[data-mailer-item-preview]"}},function(d){return{init:function(){d.options.id=d.element.data("id")},
"{preview} click":function(b,a){EasySocial.dialog({content:EasySocial.ajax("admin/views/mailer/preview",{id:d.options.id})});console.log(d.options.id)}}});this.resolve()});EasySocial.module("admin/migrators/migrator",function(d){var g=this;EasySocial.require().script("progress/progress").done(function(b){EasySocial.Controller("Migrators.Migrator",{defaultOptions:{component:null,processState:0,progressController:null,mapping:null,"{initiateButton}":"[data-initiate-migration]","{progressBar}":".discoverProgress",
"{results}":".scannedResult","{viewLog}":".viewLog","{customFieldsMap}":"[data-custom-fields-map]","{resultForm}":"[data-migration-result]","{startWidget}":"[data-start-widget]","{fieldItem}":"[data-field-item]","{startMigrationButton}":"[data-start-migration]","{rows}":"[data-row-item]","{selection}":"[data-field-item]","{jomsocialBackButton}":"[data-jomsocial-back-button]"}},function(a){return{init:function(){a.initProgressBar();a.initLogging()},showCustomFields:function(){a.startWidget().slideUp();
a.customFieldsMap().slideDown()},showResultForm:function(){a.customFieldsMap().slideUp();a.resultForm().slideDown()},startMigration:function(){a.showResultForm();1!=a.options.processState&&(a.options.processState=1,a.reset(),EasySocial.ajax("admin/controllers/migrators/check",{component:a.options.component}).done(function(b){b.isvalid?(a.options.progressController.begin(b.count),a.startIterating("")):(a.results().show(),a.addLog("Error: "+b.message),a.options.processState=0)}))},reset:function(){a.results().html("");
a.initLogging();a.options.progressController.reset()},initLogging:function(){a.viewLog().hide()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<li>").html(c).appendTo(a.results())},startIterating:function(c){null==a.options.mapping&&0<a.selection().length&&(a.options.mapping=b("#adminForm").serializeArray());EasySocial.ajax("admin/controllers/migrators/process",{component:a.options.component,
item:c,mapping:a.options.mapping}).always(function(b){b["continue"]?(a.options.progressController.touch("Discovering..."),a.addLog(b.message),a.startIterating(b.item)):(a.options.progressController.touch("Discover Completed"),a.addLog(b.message),a.addLog("migration process completed."),a.viewLog().show(),a.jomsocialBackButton().show(),a.options.processState=0)})},"{fieldItem} change":function(a){""==b(a).val()?b(a).parents("[data-row-item]").removeClass("success").addClass("error"):b(a).parents("[data-row-item]").removeClass("error").addClass("success")},
"{startMigrationButton} click":function(){0<a.selection().length&&a.selection().each(function(a,e){""==b(e).val()?b(e).parents("[data-row-item]").removeClass("success").addClass("error"):b(e).parents("[data-row-item]").removeClass("error").addClass("success")});a.rows().hasClass("error")?EasySocial.dialog({content:EasySocial.ajax("admin/views/migrators/confirmMigration"),bindings:{"{submitButton} click":function(){a.startMigration();EasySocial.dialog().close()}}}):a.startMigration()},"{initiateButton} click":function(b){a.showCustomFields()},
"{viewLog} click":function(){a.results().toggle()}}});g.resolve()})});EasySocial.module("admin/points/discover",function(d){var g=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(b){EasySocial.Controller("Points.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":"[data-points-discovery-start]","{progressBar}":".discoverProgress","{results}":"[data-points-discovery-result]"}},function(a){return{init:function(){a.initProgressBar()},
reset:function(){a.results().html("");a.options.progressController.reset()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<tr>").append(b("<td>").html(c)).appendTo(a.results())},startIterating:function(){var c=a.options.files.shift();EasySocial.ajax("admin/controllers/points/scan",{file:c}).always(function(c,d,g){0<a.options.files.length?(a.options.progressController.touch("..."),
a.addLog(d),a.startIterating()):(a.options.progressController.touch("..."),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.viewLog().show(),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(c){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/points/discoverFiles",{}).done(function(c,d){a.reset();a.options.files=c;0<a.options.files.length?(a.options.progressController.begin(a.options.files.length),a.addLog(d),a.startIterating()):
(a.options.progressController.begin(1),a.options.progressController.completed("Discover Completed"),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})}}});g.resolve()})});EasySocial.module("admin/privacy/discover",function(d){var g=this;EasySocial.require().script("progress/progress").done(function(b){EasySocial.Controller("Privacy.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":".scanRules","{progressBar}":".discoverProgress",
"{results}":".scannedResult","{viewLog}":".viewLog",view:{}}},function(a){return{init:function(){a.initProgressBar();a.initLogging()},reset:function(){a.results().html("");a.initLogging();a.options.progressController.reset()},initLogging:function(){a.viewLog().hide()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<li>").html(c).appendTo(a.results())},startIterating:function(){var b=
a.options.files.shift();EasySocial.ajax("admin/controllers/privacy/scan",{file:b}).always(function(b){0<a.options.files.length?(a.options.progressController.touch("Discovering..."),a.addLog("Scanned "+b.file+" : "+b.rules.length+" rules installed."),a.startIterating()):(a.options.progressController.touch("Discover Completed"),a.addLog("Scanned "+b.file+" : "+b.rules.length+" rules installed."),a.addLog("Scanning completed."),a.viewLog().show(),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(c){a.reset();
a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/privacy/discoverFiles",{}).done(function(c){a.options.files=c;0<a.options.files.length?(a.options.progressController.begin(a.options.files.length),a.results().hide(),a.addLog("Found a total of "+c.length+" rules file in the site."),a.startIterating()):(a.options.progressController.begin(1),a.options.progressController.completed("Discover Completed"),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})},
"{viewLog} click":function(){a.results().toggle()}}});g.resolve()})});EasySocial.module("admin/profiles/avatar",function(d){var g=this;EasySocial.require().script("uploader/uploader").done(function(){EasySocial.Controller("Profiles.Avatar",{defaultOptions:{token:null,"{fileUploader}":"[data-profile-avatars-uploader]","{startUploadButton}":"[data-profile-avatars-startupload]","{avatarList}":"[data-profile-avatars-list]","{avatarEmpty}":"[data-profile-avatars-empty]","{avatarItem}":"[data-profile-avatars-item]",
"{messagePlaceholder}":"[data-profile-avatars-message]","{removeFile}":".removeFile","{clearUploadedItems}":"[data-uploader-clear]"}},function(b){return{init:function(){b.options.id=b.element.data("id");b.initUploader();b.initAvatar()},initUploader:function(){b.fileUploader().implement(EasySocial.Controller.Uploader,{url:d.indexUrl+"?option=com_easysocial&namespace=admin/controllers/profiles/uploadDefaultAvatars&"+b.options.token+"=1&tmpl=component&format=ajax&uid="+b.options.id})},initAvatar:function(){b.avatarItem().implement("EasySocial.Controller.Profiles.Avatar.Item",
{"{parent}":b,items:b.avatarItem})},addMessage:function(a){b.clearMessage();b.setMessage(a)},"{removeFile} click":function(a,c){var e=d(a).parents("li").attr("id");b.fileUploader().controller().removeItem(e)},"{startUploadButton} click":function(){b.fileUploader().controller().startUpload()},"{fileUploader} UploadProgress":function(a,b,e){a=e.percent;e=d("#"+e.id).find(".progressBar");e.show();e.find(".bar").css("width",a+"%")},"{fileUploader} FileUploaded":function(a,c,e,d){void 0!=d[0]&&(a=d[0].data[0],
b.avatarEmpty().hide(),b.avatarList().prepend(a),b.clearUploadedItems().show(),b.initAvatar())},"{clearUploadedItems} click":function(){b.fileUploader().controller().reset();b.clearUploadedItems().hide()}}});EasySocial.Controller("Profiles.Avatar.Item",{defaultOptions:{id:null,"{deleteLink}":"[data-avatar-delete]","{setDefaultAvatar}":"[data-avatar-default]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},"{setDefaultAvatar} click":function(a,c){EasySocial.ajax("admin/controllers/avatars/setDefault",
{id:b.options.id}).done(function(a){b.parent.avatarItem().removeClass("default");b.element.addClass("default");b.parent.addMessage(a)})},"{deleteLink} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/confirmDeleteAvatar"),bindings:{"{deleteButton} click":function(a,c){d(a).addClass("btn-loading");EasySocial.ajax("admin/controllers/avatars/delete",{id:b.options.id}).done(function(a){b.element.remove();0==b.parent.avatarList().children().length&&b.parent.avatarEmpty().show();
b.parent.addMessage(a);EasySocial.dialog().close()})}}})}}});g.resolve()})});EasySocial.module("uploader/uploader",function(d){var g=this;EasySocial.require().library("plupload").view("site/uploader/queue.item").script("uploader/queue").done(function(){EasySocial.Controller("Uploader",{defaults:{url:d.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+EasySocial.getToken()+"=1",uploaded:[],query:"",plupload:"",dropArea:"uploaderDragDrop",extensionsAllowed:"jpg,jpeg,png,gif",
temporaryUpload:!1,files:[],"{uploaderForm}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]","{uploadArea}":".uploadArea","{queue}":"[data-uploaderQueue]","{queueItem}":"[data-uploaderQueue-item]","{emptyFiles}":"[data-uploader-empty]","{removeFile}":"[data-uploaderQueue-remove]","{uploadCounter}":".uploadCounter",view:{queueItem:"site/uploader/queue.item"}}},function(b){return{init:function(){b.queue().implement(EasySocial.Controller.Uploader.Queue);b.options.temporaryUpload&&(b.options.url=
d.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+EasySocial.getToken()+"=1");""!=b.options.query&&(b.options.url=b.options.url+"&"+b.options.query);b.uploaderForm().implement("plupload",{settings:{url:b.options.url,drop_element:b.options.dropArea,filters:[{title:"Allowed File Type",extensions:b.options.extensionsAllowed}]},"{uploader}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]"},function(){b.options.plupload=this.plupload})},
"{uploaderForm} FilesAdded":function(a,c,e,d){b.addFiles(d);b.options.temporaryUpload&&b.startUpload()},"{uploaderForm} UploadProgress":function(a,c,e,d){b.queueItem("#"+d.id).trigger("UploadProgress",d)},"{uploaderForm} FileUploaded":function(a,c,e,d,g){b.queueItem("#"+d.id).trigger("FileUploaded",[d,g])},"{uploaderForm} UploadComplete":function(a,c,e,d){b.options.uploading=!1},"{uploaderForm} Error":function(a,c,e,d){b.clearMessage();b.setMessage({message:d.message,type:"error"})},"{uploaderForm} FileError":function(a,
c,e,d,g){b.setMessage({message:g.message,type:"error"});b.queueItem("#"+d.id).trigger("FileError",[d,g])},addFiles:function(a){d.each(a,function(a,e){e.size=b.formatSize(e.size);var f=b.view.queueItem({file:e,temporaryUpload:b.options.temporaryUpload});d(f).implement(EasySocial.Controller.Uploader.Queue.Item,{"{uploader}":b});b.options.files.push(e);b.emptyFiles().hide();b.queue().append(f)})},formatSize:function(a){return parseInt(a/1024)},reset:function(){b.queueItem().remove()},removeItem:function(a){var c=
d("#"+a),c=d(c).find("input[name=upload-id\\[\\]]").val();EasySocial.ajax("site/controllers/uploader/delete",{id:c}).done(function(){d("#"+a).remove();b.options.plupload.removeFile(b.options.plupload.getFile(a))})},startUpload:function(){b.upload()},upload:function(){0<b.options.plupload.files.length&&(b.options.uploading=!0,b.options.plupload.start())},hasFiles:function(){return 0<b.options.files.length}}});g.resolve()})});EasySocial.module("uploader/queue",function(d){var g=this;EasySocial.require().view("site/uploader/queue.item").done(function(b){EasySocial.Controller("Uploader.Queue",
{defaults:{"{item}":"[data-uploaderQueue-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Uploader.Queue.Item)}}});EasySocial.Controller("Uploader.Queue.Item",{defaultOptions:{"{delete}":"[data-uploaderQueue-remove]","{progress}":"[data-uploaderQueue-progress]","{progressBar}":"[data-uploaderQueue-progressBar]","{status}":"[data-uploaderQueue-status]","{id}":"[data-uploaderQueue-id]"}},function(a){return{init:function(){a.uploader.options.temporaryUpload&&(a.idTemplate=
a.id().toHTML(),a.id().remove())},"{delete} click":function(){a.uploader.removeItem(a.element.attr("id"))},"{self} FileUploaded":function(c,e,d,g){a.uploader.options.temporaryUpload&&b.buildHTML(a.idTemplate).val(g.id).appendTo(a.element);5==d.status&&(a.element.addClass("is-done"),a.status().html("Done"))},"{self} UploadProgress":function(b,e,d){a.status().html(d.percent+"%");a.progressBar().css("width",d.percent+"%")},"{self} FileError":function(){a.element.removeClass("is-done is-queue").addClass("is-error");
a.progress().removeClass("progress-danger progress-success progress-info progress-warning").addClass("progress-danger");a.status().html("Error")}}});g.resolve()})});EasySocial.module("admin/profiles/fields",function(d){var g=this;EasySocial.require().library("ui/draggable","ui/sortable","ui/droppable").script("field").view("admin/profiles/form.fields.editorItem","admin/profiles/form.fields.stepItem","admin/profiles/form.fields.editorPage","admin/profiles/form.fields.config").language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_REQUIRE_MANDATORY_FIELDS",
"COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION",
"COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVED","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_PAGE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_FIELD","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_UNSAVED_CHANGES",
"COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES").done(function(){var b,a,c,e,f,k={},h={},p={},s={},r={},u={pages:[],fields:[]};EasySocial.Controller("Fields",{defaultOptions:{id:0,"{wrap}":"[data-fields-wrap]","{browser}":"[data-fields-browser]","{editor}":"[data-fields-editor]","{steps}":"[data-fields-steps]","{config}":"[data-fields-config]","{saveForm}":"[data-fields-save]",view:{config:"admin/profiles/form.fields.config"}}},function(g){return{init:function(){b=g;g.options.id=g.element.data("id");
a=g.addPlugin("browser");c=g.addPlugin("editor");e=g.addPlugin("steps");d.when.apply(null,[a.state,c.state,e.state]).done(function(){b.trigger("controllersReady")})},changed:!1,change:function(){g.changed=!0},"{window} beforeunload":function(a,b){if(g.changed)return d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_UNSAVED_CHANGES")},"{saveForm} click":function(){g.save()},save:function(){var a=d.Deferred();if(!g.changed)return a.resolve(),a;EasySocial.dialog({content:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVING"),
width:400,height:150});b.trigger("saving");if(f&&f.state&&!f.checkConfig())return a.reject(d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES")),a;p=d.extend(!0,{},h);var k=[];d.each(e.step(),function(a,b){b=d(b);var e=c.getPage(b.data("id"));k.push(e._export())});if(0<d._.keys(p).length)return b.trigger("saved",[!1]),a.reject(d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_REQUIRE_MANDATORY_FIELDS")),a;b.changed=!1;k=JSON.stringify(k);EasySocial.ajax("admin/controllers/profiles/saveFields",
{id:g.options.id,data:k,deleted:u}).done(function(c){b.trigger("saved");EasySocial.dialog({content:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVED"),width:400,height:150});setTimeout(EasySocial.dialog().close,2E3);a.resolve()});return a},updateResult:function(a){d.each(a,function(a,b){var d=e.step().eq(a).data("id"),f=c.getPage(d);e.updateResult(a,b.id);f.updateResult(d,b)})},"{self} doneConfiguring":function(){g.element.removeClass("editting")},loadConfiguration:function(a,b){g.element.addClass("editting");
var c=d(g.view.config());f=c.addController("EasySocial.Controller.Fields.Config",{controller:{item:a}});"page"===b?a.pageHeader().append(c):a.element.append(c);g.element.trigger("loadingConfig",[b])}}});EasySocial.Controller("Fields.Browser",{defaultOptions:{"{browser}":"[data-fields-browser]","{mandatory}":"[data-fields-browser-group-mandatory]","{standard}":"[data-fields-browser-group-standard]","{list}":"[data-fields-browser-list]","{item}":"[data-fields-browser-item]",affixClass:"es-browser-affix"}},
function(a){return{state:d.Deferred(),init:function(){a.registerApps();a.ready();a.affixHandler();a.initAffix()},ready:function(){a.state.resolve()},"{parent} controllersReady":function(){var b=e.getCurrentStep().data("id");a.initDraggable(b)},"{parent} pageChanged":function(b,c,e,d){a.item().draggable("destroy");a.initDraggable(d)},"{parent} pageAdded":function(b,c,e,d){a.item().draggable("destroy");a.initDraggable(d)},initDraggable:function(b){a.item().draggable({revert:"invalid",helper:"clone",
connectToSortable:"[data-fields-editor-page-items-"+b+"]"})},affixHandler:function(){var b=d(window),c=a.parent.wrap().offset().top,b=b.scrollTop();b>c&&!a.browser().hasClass(a.options.affixClass)&&a.browser().addClass(a.options.affixClass);b<=c&&a.browser().hasClass(a.options.affixClass)&&a.browser().removeClass(a.options.affixClass)},initAffix:function(){d(window).scroll(a.affixHandler)},registerApps:function(){d.each(a.item(),function(a,b){b=d(b);var c=b.data("id");k[c]={id:c,element:b.data("element"),
title:b.data("title"),params:b.data("params"),core:b.data("core"),unique:b.data("unique"),item:b};b.data("core")&&(h[c]=k[c])})},checkout:function(a){void 0!==p[a]&&delete p[a]},"{item} click":function(a){var b=c.currentPage();a=a.data("id");b.addNewField(a)},"{parent} fieldAdded":function(b,c,e){(b=k[e])&&b.core&&(b.item.hide(),c=a.mandatory().find(a.item.selector).filter(":visible"),a.mandatory().toggle(0<c.length));b&&b.unique&&b.item.hide()},"{parent} fieldDeleted":function(b,c,e,d){(b=k[e])&&
b.core?(b.item.show(),a.mandatory().show()):b&&b.unique&&b.item.show()}}});EasySocial.Controller("Fields.Config",{defaultOptions:{"{config}":"[data-fields-config]","{header}":"[data-fields-config-header]","{close}":"[data-fields-config-close]","{form}":"[data-fields-config-form]","{param}":"[data-fields-config-param]","{tabnav}":"[data-fields-config-tab-nav]","{tabcontent}":"[data-fields-config-tab-content]","{done}":"[data-fields-config-done]"}},function(a){return{init:function(){},state:!1,load:function(c){a.state=
!0;c.find("[data-fields-config-param-choices]").addController("EasySocial.Controller.Config.Choices",{controller:{item:a.item}});c.find("h4").hide();a.header().html(c.find("h4").html());a.form().html(c);a.item.options.newfield&&a.param("[data-fields-config-param-field-unique_key]").attr("disabled",!0).val(d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST"));0<a.tabnav().length&&a.tabnav().find('a[data-tabname="core"]').tab("show");a.populateConfig();c=a.element.height();
b.wrap().css("padding-bottom",c+"px");b.trigger("configLoaded")},"{close} click":function(b,c){a.closeConfig()},"{done} click":function(b,c){a.closeConfig()},closeConfig:function(){var c=a.populateConfig();a.checkConfig(c)?(a.item.updateHtml(a.form().html()),a.item.content().trigger("onConfigSave",[c]),a.element.remove(),f=null,b.trigger("doneConfiguring")):EasySocial.dialog({content:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),width:400,height:100})},"{parent} loadingConfig":function(b,
c,e){void 0!==e&&"field"!=e&&(b=d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_"+e.toUpperCase()),a.header().html(b));a.config().show();a.close().hide();a.form().html(d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING"))},"{parent} configLoaded":function(b,c){a.close().show()},"{param} change":function(b){a.paramChanged(b)},"{param} keyup":function(b){a.paramChanged(b)},paramChanged:function(c){c=c.data("name");var e=a.getConfigValue(c);"boolean"===a.item.appParams[c].type&&
(e=!!e);a.item.content().trigger("onConfigChange",[c,e]);b.change()},getConfigValue:function(b){var c=a.item.appParams[b],e=a.param().filterBy("name",b);if(0!==e.length){var f="";switch(c.type){case "choices":f=[];d.each(e.find("li"),function(a,b){b=d(b);var c=b.find("[data-fields-config-param-choice-title]"),e=b.find("[data-fields-config-param-choice-value]"),g=b.find("[data-fields-config-param-choice-default]");f.push({id:b.data("id"),title:c.val(),value:e.val(),"default":g.val()});c.attr("value",
c.val());e.attr("value",e.val());g.attr("value",g.val())});break;case "boolean":b=e.val();f="true"===b||"1"===b||1===b?1:0;e.attr("value",f);break;case "checkbox":f=[];d.each(c.option,function(a,b){var c=e.filter("[data-fields-config-param-option-"+b.name+"]");0<c.length&&c.is(":checked")?(f.push(b.name),c.attr("checked","checked")):c.removeAttr("checked")});break;case "list":case "select":case "dropdown":f=0<e.length?e.val():c["default"]||"";e.find("option").prop("selected",!1);e.find('option[value="'+
f+'"]').prop("selected",!0);break;default:f=0<e.length?e.val():c["default"]||"",e.attr("value",f)}return f}},populateConfig:function(){var b={};d.each(a.item.appParams,function(c,e){var d=a.getConfigValue(c);if(void 0===d)return!1;b[c]=d});a.item.trigger("onPopulateConfig",[b]);return b},checkConfig:function(b){void 0===b&&(b=a.populateConfig());var c=!0;d.each(b,function(b,e){switch(a.item.appParams[b].type){case "choices":var f=[];d.each(e,function(a,b){d.isEmpty(b.value)&&!d.isEmpty(b.title)&&
(b.value=b.title.toLowerCase().replace(" ",""));if(!d.isEmpty(b.value)&&-1<d.inArray(b.value,f))return c=!1;f.push(b.value)})}if(!1===c)return!1});return c},"{parent} fieldDeleted":function(){a.state&&b.trigger("doneConfiguring")},"{parent} pageDeleted":function(){a.state&&b.trigger("doneConfiguring")},"{parent} pageAdded":function(){a.state&&b.trigger("doneConfiguring")},"{parent} pageChanged":function(){a.state&&b.trigger("doneConfiguring")}}});EasySocial.Controller("Fields.Steps",{defaultOptions:{"{steps}":"[data-fields-step]",
"{step}":"[data-fields-step-item]","{stepLink}":"[data-fields-step-item-link]","{add}":"[data-fields-step-add]",view:{stepItem:"admin/profiles/form.fields.stepItem"}}},function(a){return{state:d.Deferred(),init:function(){a.ready()},ready:function(){a.state.resolve()},"{parent} controllersReady":function(){a.initSort()},initSort:function(){a.steps().sortable({items:a.step.selector,placeholder:"ui-state-highlight",cursor:"move",helper:"clone",forceHelperSize:!0,stop:function(){d(".tooltip-es").remove()}})},
"{parent} pageDeleted":function(b,c,d){a.deleteStep(d);0<e.step().length&&e.stepLink(":first").tab("show")},"{step} click":function(a,e){if(!a.hasClass("active")){var d=a.data("id");b.trigger("pageChanged",[c.getPage(d),d])}},"{add} click":function(){var b=d.uid("step");a.addStep(b);c.addPage(b);a.stepLink(":last").tab("show")},addStep:function(b){a.add().before(a.view.stepItem({uid:b}))},getStep:function(b){return a.step().filterBy("id",b)},getStepLink:function(b){return a.stepLink().filterBy("id",
b)},deleteStep:function(b){a.getStep(b).remove()},getCurrentStep:function(){return a.step(".active")},currentStepIndex:function(){return a.step().index(a.step(".active"))+1},updateResult:function(b,c){var e=a.step(":eq("+b+")");if(e.data("id")!=c){var d=e.data("id");e.removeAttr("data-fields-step-item-"+d);e.attr("data-fields-step-item-"+c,!0);e.data("id",c);e.attr("data-id",c);e=a.stepLink().eq(b);e.removeAttr("data-fields-step-item-link-"+d);e.attr("data-fields-step-item-link-"+c,!0);e.attr("href",
"#formStep_"+c)}},toObject:function(){}}});EasySocial.Controller("Fields.Editor",{defaultOptions:{"{editor}":"[data-fields-editor]","{page}":"[data-fields-editor-page]","{items}":"[data-fields-editor-page-items]","{item}":"[data-fields-editor-page-item]",view:{editorPage:"admin/profiles/form.fields.editorPage"}}},function(a){return{state:d.Deferred(),init:function(){a.ready()},ready:function(){a.state.resolve()},"{parent} controllersReady":function(){a.page().addController("EasySocial.Controller.Fields.Editor.Page")},
currentPage:function(){return a.page(".active").controller()},addPage:function(c){var e=a.view.editorPage({uid:c});e.addController("EasySocial.Controller.Fields.Editor.Page",{uid:c,newpage:!0});a.editor().append(e);a.page().trigger("pageAdded",[e,c]);b.change()},getPage:function(b){return a.page().filterBy("id",b).controller()},"{parent} saving":function(b,c){a.element.addClass("saving")},"{parent} saved":function(b,c,e){a.element.removeClass("saving")}}});EasySocial.Controller("Fields.Editor.Page",
{defaultOptions:{pageid:0,uid:0,newpage:!1,"{items}":"[data-fields-editor-page-items]","{item}":"[data-fields-editor-page-item]","{pageHeader}":"[data-fields-editor-page-header]","{content}":"[data-fields-editor-page-header]","{pageTitle}":"[data-fields-editor-page-title]","{pageDescription}":"[data-fields-editor-page-description]","{inputTitle}":"[data-fields-editor-page-title-input]","{inputDescription}":"[data-fields-editor-page-description-input]","{pageVisibleRegistration}":"[data-fields-editor-page-visible-registration]",
"{pageVisibleEdit}":"[data-fields-editor-page-visible-edit]","{pageVisibleView}":"[data-fields-editor-page-visible-view]","{pageDelete}":"[data-fields-editor-page-delete]","{pageEdit}":"[data-fields-editor-page-edit]","{pageInfo}":"[data-fields-editor-page-info]","{pageInfoDone}":"[data-fields-editor-page-done]",view:{editorItem:"admin/profiles/form.fields.editorItem"}}},function(g){return{init:function(){g.options.newpage||(g.options.uid=g.options.pageid=g.element.data("id"));g.registerPage();g.item().addController("EasySocial.Controller.Fields.Editor.Item",
{pageid:g.options.uid});g.checkPageDeleteButton();g.initSort()},fields:{},getStep:function(){return e.getStep(g.options.uid)},registerPage:function(){r[g.options.uid]=g},initSort:function(){g.items().sortable({items:g.item.selector,handle:"[data-fields-editor-page-item-handle]",placeholder:"ui-state-highlight",cursor:"move",helper:"clone",forceHelperSize:!0,stop:function(b,c){if(c.item.is(a.item.selector)){var e=c.item.data("id"),d=g.createPlaceholder();c.item.replaceWith(d);g.createNewField(e,d)}}})},
addNewField:function(a){var c=g.createPlaceholder();g.items().append(c);d.scrollTo(c,200);g.createNewField(a,c);b.change()},createPlaceholder:function(){var a=d.uid("newfield");return g.view.editorItem({uid:a})},createNewField:function(a,c){b.trigger("fieldAdded",[a]);g.getFieldHtml(a).done(function(b){b=d.parseHTML(b,document,!0);b=d(b);c.replaceWith(b);b.filter('[data-appid="'+a+'"]').addController("EasySocial.Controller.Fields.Editor.Item",{controller:{page:g},appid:a,pageid:g.options.uid,newfield:!0})}).fail(function(a){c.html(a)})},
getFieldHtml:function(a){var c=d.Deferred();void 0===k[a].html?EasySocial.ajax("admin/controllers/fields/renderSample",{appid:a,profileid:b.options.id}).done(function(b){k[a].html=b;c.resolve(b)}).fail(function(a){c.reject(a)}):c.resolve(k[a].html);return c},"{pageHeader} click":function(a,b){if(d(b.target).not("[data-fields-editor-page-delete]")&&!a.hasClass("editting")){if(f&&f.state)if(f.checkConfig())f.closeConfig();else{EasySocial.dialog({content:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),
width:400,height:100});return}g.loadConfiguration()}},loadConfiguration:function(){b.loadConfiguration(g,"page");g.pageHeader().addClass("editting");g.getPageConfig().done(function(){var a=d(g.html);f.load(a)}).fail(function(a){f.load(a)})},updateHtml:function(a){g.html=a},getPageConfig:function(){var a=d.Deferred();d.isEmptyObject(g.params)?EasySocial.ajax("admin/controllers/profiles/getPageConfig",{pageid:g.options.pageid}).done(function(b,c,e){g.params=b;g.values=c;g.html=e;g.appParams=b;a.resolve()}).fail(function(b){a.reject(b)}):
a.resolve();return a},getConfigValues:function(){return g.values},"{content} onConfigChange":function(a,c,d,f){g.values[d]=f;a=e.getStepLink(g.options.uid);"title"===d&&(a.text(f),g.pageTitle().html(f));"description"===d&&(a.attr("data-original-title",f),g.pageDescription().html(f));b.change()},"{pageDelete} click":function(a){if(a.enabled()){a.disabled(!0);if(1==c.page().length)return a.enabled(!0),!1;EasySocial.dialog({width:400,height:150,title:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE"),
content:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION"),showOverlay:!1,buttons:[{name:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}},{name:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM"),classNames:"btn btn-es-danger",click:function(){EasySocial.dialog().update({content:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING")});
g.deletePage();EasySocial.dialog().close()}}]})}},deletePage:function(){g.item().trigger("pageDeleted");b.trigger("pageDeleted",[g.options.uid]);delete r[g.options.uid];g.options.newpage||u.pages.push(g.options.uid);g.element.remove();d.each(c.page(),function(a,b){d(b).controller().checkPageDeleteButton()});b.change()},_export:function(){var a=[];d.each(g.item(),function(b,c){c=d(c).controller();void 0!==c&&a.push(c._export())});var b={fields:a,newpage:g.options.newpage,id:g.options.uid};void 0!==
g.values&&(b=d.extend(b,g.values));return b},updateResult:function(a,b){g.options.newpage&&(g.element.attr("id","formStep_"+b.id),g.element.removeAttr("data-fields-editor-page-"+a),g.element.attr("data-fields-editor-page-"+b.id,!0),g.options.pageid=g.options.uid=b.id,r[b.id]=d.extend(!0,{},r[a]),delete r[a],g.options.newpage=!1);void 0!==b.fields&&d.each(b.fields,function(a,b){g.item().eq(a).controller().updateResult(b)})},"{self} pageAdded":function(a,c,e){g.checkPageDeleteButton();b.change()},checkPageDeleteButton:function(){1<
c.page().length?g.pageDelete().show():g.pageDelete().hide()},"{parent} loadingConfig":function(){g.pageHeader().removeClass("editting");g.item().removeClass("editting")},"{parent} doneConfiguring":function(){g.pageHeader().removeClass("editting");g.item().removeClass("editting")}}});EasySocial.Controller("Fields.Editor.Item",{defaultOptions:{appid:0,fieldid:0,pageid:0,newfield:!1,"{edit}":"[data-fields-editor-page-item-edit]","{deleteButton}":"[data-fields-editor-page-item-delete]","{moveButton}":"[data-fields-editor-page-item-move]",
"{content}":"[data-fields-editor-page-item-content]","{config}":"[data-fields-config]","{closeConfig}":"[data-fields-config-close]"}},function(c){return{app:{},field:{id:0,appid:0,params:{}},state:d.Deferred(),appParams:{},init:function(){0==c.options.appid&&void 0!==c.element.data("appid")&&(c.options.appid=c.element.data("appid"));void 0!==k[c.options.appid]&&(c.app=k[c.options.appid]);0==c.options.fieldid&&void 0!==c.element.data("id")&&(c.options.fieldid=c.element.data("id"));c.registerFields();
c.uniqueid=d.uid(c.app.id+"_");c.loadedInit()},registerFields:function(){0!=c.options.fieldid&&(s[c.options.fieldid]={id:c.options.fieldid,appid:c.options.appid,params:c.field.params||{}},c.field=s[c.options.fieldid])},loadedInit:function(){c.element.addController("EasySocial.Controller.Field.Base",{mode:"sample",element:c.app.element,"{field}":c.content.selector});c.content().addController("EasySocial.Controller.Fields.Editor.Item.Config")},_export:function(){a.checkout(c.options.appid);var b={fieldid:c.options.fieldid,
appid:c.options.appid,newfield:c.options.newfield};return b=d.extend(b,c.expandConfig(c.field.params))},"{self} click":function(a,b){var e=d(b.target);if(!(e.is(c.deleteButton.selector)||e.is(c.moveButton.selector)||e.is(c.config.selector)||e.is(c.closeConfig.selector)||a.hasClass("editting"))){if(f&&f.state)if(f.checkConfig())f.closeConfig();else{EasySocial.dialog({content:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),width:400,height:100});return}c.loadConfiguration()}},loadConfiguration:function(){b.loadConfiguration(c,
"field");c.element.addClass("editting");c.getAppParams().done(function(){var a=d(c.field.html);f.load(a)}).fail(function(){})},updateHtml:function(a){c.field.html=a},getAppParams:function(){var a=d.Deferred();c.field.html?a.resolve():EasySocial.ajax("admin/controllers/fields/renderConfiguration",{appid:c.options.appid,fieldid:c.options.fieldid}).done(function(b,e,d){c.app.params=b;c.field.params=e;c.field.html=d;c.populateAppParams();a.resolve()}).fail(function(b){a.reject(b)});return a},populateAppParams:function(){d.each(c.app.params,
function(a,b){d.each(b.fields,function(a,b){b.subfields?d.each(b.subfields,function(b,e){c.appParams[a+"_"+b]=e}):c.appParams[a]=b})})},getConfigValues:function(){return c.field.params},expandConfig:function(){var a={params:{},choices:{}};d.each(c.field.params,function(b,e){var d=c.appParams[b];if(!d)return!1;a["choices"==d.type?"choices":"params"][b]=e});c.options.newfield&&(a.params.unique_key="");return a},"{deleteButton} click":function(a){a.enabled()&&(a.disabled(!0),EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/confirmDeleteField",
{}),bindings:{"{cancelButton} click":function(){EasySocial.dialog().close();a.enabled(!0)},"{deleteButton} click":function(){EasySocial.dialog().update({content:d.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING")});c.deleteField();EasySocial.dialog().close()}}}))},deleteField:function(){b.trigger("fieldDeleted",[c.options.appid,c.options.fieldid]);c.options.newfield||(delete s[c.options.fieldid],u.fields.push(c.options.fieldid));c.element.remove();b.change()},"{self} pageDeleted":function(){c.deleteField()},
"{content} onConfigChange":function(a,b,e,d){c.field.params[e]=d},"{self} onPopulateConfig":function(a,b,e){c.field.params=e},updateResult:function(a){c.field.params.unique_key=a.unique_key;c.itemParam("[data-fields-config-param-field-unique_key]").val(a.unique_key);c.options.newfield&&(c.options.newfield=!1,c.options.fieldid=a.fieldid,c.element.data("id",a.fieldid),c.itemParam("[data-fields-editor-page-item-param-field-unique_key]").removeAttr("disabled"),c.registerFields());void 0!==a.choices&&
d.each(a.choices,function(a,b){var e=c.itemParam("[data-fields-config-param-field-"+a+"]");d.each(b,function(a,b){var c=e.find("li").eq(a);c.data("id")||(c.attr("data-id",b.id),c.data("id",b.id))})})}}});EasySocial.Controller("Config.Choices",{defaultOptions:{"{choiceItems}":"[data-fields-config-param-choice]",unique:1}},function(a){return{init:function(){a.options.unique=void 0!==a.element.data("unique")?a.element.data("unique"):1;a.choiceItems().implement(EasySocial.Controller.Config.Choices.Choice,
{controller:{item:a.item,choices:a}});a.initSortable()},initSortable:function(){a.element.sortable({items:a.choiceItems.selector,placeholder:"ui-state-highlight",cursor:"move",forceHelperSize:!0,handle:"[data-fields-config-param-choice-drag]",stop:function(){d(".tooltip-es").remove()}})}}});EasySocial.Controller("Config.Choices.Choice",{defaultOptions:{"{choiceValue}":"[data-fields-config-param-choice-value]","{choiceTitle}":"[data-fields-config-param-choice-title]","{choiceDefault}":"[data-fields-config-param-choice-default]",
"{addChoice}":"[data-fields-config-param-choice-add]","{removeChoice}":"[data-fields-config-param-choice-remove]","{setDefault}":"[data-fields-config-param-choice-setdefault]","{defaultIcon}":"[data-fields-config-param-choice-defaulticon]"}},function(a){return{init:function(){},"{choiceTitle} keyup":d._.debounce(function(c,e){var d=a.element.index();a.item.content().trigger("onChoiceTitleChanged",[d,c.val()]);b.change()},500),"{choiceValue} keyup":d._.debounce(function(c,e){var d=a.element.index();
a.item.content().trigger("onChoiceValueChanged",[d,c.val()]);b.change()},500),"{addChoice} click":function(){var c=a.element.clone(),e=c.find('input[type="text"]');e.attr("value","");e.val("");e=c.find('input[type="hidden"]');e.attr("value",0);e.val(0);c.find("[data-fields-config-param-choice-defaulticon]").removeClass("es-state-featured").addClass("es-state-default");c.attr("data-id",0);c.data("id",0);c.implement(EasySocial.Controller.Config.Choices.Choice,{controller:{item:a.item,choices:a.choices}});
a.element.after(c);c=c.index();a.item.content().trigger("onChoiceAdded",[c]);b.change()},"{removeChoice} click":function(){if(1<=a.choices.choiceItems().length-1){var c=a.element.index();a.item.content().trigger("onChoiceRemoved",[c]);a.element.remove();d(".tooltip-es").remove()}b.change()},"{setDefault} click":function(){var c=a.element.index();a.choiceTitle().val();a.choiceValue().val();a.choices.choiceItems().trigger("toggleDefault",[c]);a.item.content().trigger("onChoiceToggleDefault",[c,parseInt(a.choiceDefault().val())]);
b.change()},"{self} toggleDefault":function(b,c,e){b=a.element.index();c=parseInt(a.choiceDefault().val());b===e?c?(a.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),a.choiceDefault().val(0)):(a.defaultIcon().removeClass("es-state-default").addClass("es-state-featured"),a.choiceDefault().val(1)):a.choices.options.unique&&(a.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),a.choiceDefault().val(0))}}});EasySocial.Controller("Fields.Editor.Item.Config",
{defaultOptions:{"{required}":"[data-required]","{title}":"[data-title]","{description}":"[data-description]","{displayTitle}":"[data-display-title]","{displayDescription}":"[data-display-description]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,e,d){switch(e){case "display_title":a.displayTitle().toggle(!!d);break;case "title":a.title().text(d);break;case "display_description":a.displayDescription().toggle(!!d);break;case "description":a.description().text(d);break;
case "required":a.required().toggle(!!d)}}}});g.resolve()})});EasySocial.module("field",function(d){EasySocial.Controller("Field.Base",{defaultOptions:{regPrefix:"easysocial/",modPrefix:"field.",ctrlPrefix:"EasySocial.Controller.Field.",fieldname:"",element:null,id:null,userid:null,required:!1,mode:"edit","{field}":"[data-field]","{notice}":"[data-check-notice]"}},function(g){return{init:function(){g.options.fieldname=g.element.data("fieldname");g.options.element=g.options.element||g.element.data("element");
g.options.id=g.element.data("id");g.options.required=!!g.element.data("required");g.initHandler();g.initMode()},initHandler:function(){var b=g.options.modPrefix+g.options.element,a=g.options.regPrefix+b,c=g.options.ctrlPrefix+d.String.capitalize(g.options.element);void 0!==d.module.registry[a]&&EasySocial.module(b).done(function(a){a=a||{};if(d.isController(c))g.field().addController(c,{required:g.options.required,fieldname:g.options.fieldname,id:g.options.id,userid:g.options.userid,mode:g.options.mode});
else if(d.isFunction(a))a(g.field());else if(d.isPlainObject(a))g.field().on(a)})},initMode:function(){switch(g.options.mode){case "register":g.field().trigger("onRegister");break;case "edit":g.field().trigger("onEdit");break;case "adminedit":g.field().trigger("onAdminEdit");break;case "sample":g.field().trigger("onSample");break;case "display":g.field().trigger("onDisplay")}},"{field} error":function(b,a,c,e){c=void 0!==c?c:!0;d.isString(c)&&(e=c,c=!0);d.isBoolean(c)&&g.field().toggleClass("error",
c);void 0!==e&&g.notice().html(e)},"{field} clear":function(b,a){g.field().removeClass("error")},"{self} show":function(){g.field().trigger("onShow")}}});this.resolve()});EasySocial.module("admin/profiles/members",function(d){var g=this;EasySocial.require().language("COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_ASSIGN_BUTTON","COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE").done(function(b){EasySocial.Controller("Profiles.Members",{defaultOptions:{"{addUser}":"[data-profiles-addUser]","{row}":"[data-profiles-members-row]"}},
function(a){return{init:function(){a.options.id=a.element.data("id")},"{memberList} userSelected":function(b,e,d,g){EasySocial.ajax("admin/controllers/profiles/insertMember",{id:d,profile_id:a.options.id}).done(function(b){a.row().append(b);EasySocial.dialog().close()})},"{addUser} click":function(){var c=b.callback(function(b){a.addPlugin("memberList",b)}),c=b.indexUrl+"?option=com_easysocial&view=users&tmpl=component&callback="+c;EasySocial.dialog({title:b.language("COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE"),
content:c,showOverlay:!1,width:700,height:600,buttons:[{name:b.language("COM_EASYSOCIAL_CANCEL_BUTTON"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("admin/profiles/profiles",function(d){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Profiles",{defaultOptions:{"{updateOrdering}":"[data-profiles-update-ordering]","{item}":"[data-profiles-item]",view:{deleteConfirmation:"admin/profiles/dialog.delete.confirm"}}},
function(a){return{init:function(){a.item().implement(EasySocial.Controller.Profiles.Item)},"{updateOrdering} click":function(){b("[data-table-checkall]").prop("checked",!0).trigger("change");b.Joomla("submitform",["updateOrdering"])}}});EasySocial.Controller("Profiles.Item",{defaultOptions:{"{insertLink}":"[data-profile-insert]"}},function(a){return{init:function(){a.options.title=a.element.data("title");a.options.id=a.element.data("id")},"{insertLink} click":function(){a.trigger("profileSelected",
[a.options.id,a.options.title])}}});g.resolve()})});EasySocial.module("admin/reports/reporters",function(d){EasySocial.Controller("Reports.Reporters",{defaultOptions:{"{item}":"[data-reporters-item]"}},function(d){return{init:function(){d.item().implement(EasySocial.Controller.Reports.Reporters.Item,{"{parent}":d})}}});EasySocial.Controller("Reports.Reporters.Item",{defaultOptions:{"{removeItem}":"[data-remove-item]"}},function(d){return{init:function(){d.options.id=d.element.data("id")},"{removeItem} click":function(){d.parent.clearMessage();
EasySocial.ajax("admin/controllers/reports/removeItem",{id:d.options.id}).done(function(b){d.parent.setMessage(b.message,b.type);d.element.remove()})}}});this.resolve()});EasySocial.module("admin/reports/reports",function(d){var g=this;EasySocial.require().language("COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_CLOSE_BUTTON","COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE","COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE").done(function(b){EasySocial.Controller("Reports",{defaultOptions:{"{item}":"[data-reports-item]"}},
function(a){return{init:function(){a.item().implement(EasySocial.Controller.Reports.Item)}}});EasySocial.Controller("Reports.Item",{defaultOptions:{"{action}":"[data-reports-item-view-actions]","{viewReports}":"[data-reports-item-view-reports]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.extension=a.element.data("extension");a.options.uid=a.element.data("uid");a.options.type=a.element.data("type")},"{viewReports} click":function(){EasySocial.dialog({title:b.language("COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE"),
content:EasySocial.ajax("admin/controllers/reports/getReporters",{id:a.options.id}),width:600,height:450})},"{action} click":function(){EasySocial.dialog({title:b.language("COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE"),content:"<div>Perform some actions on the item</div>",width:500,height:250,buttons:[{name:b.language("COM_EASYSOCIAL_CLOSE_BUTTON"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("admin/users/form",function(d){var g=this;
EasySocial.require().script("field").done(function(b){EasySocial.Controller("Users.Form",{defaultOptions:{userid:null,mode:"adminedit","{selectProfile}":"[data-user-select-profile]","{content}":"[data-user-new-content]","{profileTitle}":"[data-profile-title]","{fieldItem}":"[data-profile-adminedit-fields-item]","{tabnav}":"[data-tabnav]","{tabcontent}":"[data-tabcontent]","{stepnav}":"[data-stepnav]","{stepcontent}":"[data-stepcontent]",view:{loading:"site/loading/large"}}},function(a){return{init:function(){window.selectedProfile=
a.selectedProfile;a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:a.options.userid,mode:a.options.mode})},selectedProfile:function(a){EasySocial.dialog().close();window.location.href="index.php?option=com_easysocial&view=users&layout=form&profileId="+a},"{selectProfile} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/browse")})},errorFields:[],"{fieldItem} error":function(c,e){var d=c.data("id");0>b.inArray(d,a.errorFields)&&a.errorFields.push(d);
d=c.parents(a.stepcontent.selector).data("for");a.stepnav().filterBy("for",d).trigger("error");d=c.parents(a.tabcontent.selector).data("for");a.tabnav().filterBy("for",d).trigger("error")},"{fieldItem} clear":function(c,e){var d=c.data("id");a.errorFields=b.without(a.errorFields,d);d=c.parents(a.stepcontent.selector).data("for");a.stepnav().filterBy("for",d).trigger("clear");d=c.parents(a.tabcontent.selector).data("for");a.tabnav().filterBy("for",d).trigger("clear")},"{stepnav} error":function(a){a.addClass("error")},
"{tabnav} error":function(a){a.addClass("error")},"{stepnav} clear":function(b){1>a.errorFields.length&&b.removeClass("error")},"{tabnav} clear":function(b){1>a.errorFields.length&&b.removeClass("error")}}});g.resolve()})});EasySocial.module("admin/users/privacy",function(d){var g=this;EasySocial.require().library("textboxlist").view("site/loading/small").done(function(b){EasySocial.Controller("Profile.Privacy",{defaultOptions:{userId:"","{privacyItem}":"[data-privacy-item]","{privacyForm}":"[data-profile-privacy-form]",
view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.privacyItem().implement(EasySocial.Controller.Profile.Privacy.Item,{"{parent}":a})}}});EasySocial.Controller("Profile.Privacy.Item",{defaultOptions:{"{selection}":"[data-privacy-select]","{hiddenCustom}":"[data-hidden-custom]","{customForm}":"[data-privacy-custom-form]","{customTextInput}":"[data-textfield]","{customItems}":"input[]","{customHideBtn}":"[data-privacy-custom-hide-button]","{customInputItem}":"[data-textboxlist-item]",
"{customEditBtn}":"[data-privacy-custom-edit-button]"}},function(a){return{init:function(){a.customTextInput().textboxlist({unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:2,cache:!1,query:function(b){var e=a.getTaggedUsers();return EasySocial.ajax("site/views/privacy/getfriends",{q:b,userid:a.parent.options.userId,exclude:e})}}}});a.textboxlistLib=a.customTextInput().textboxlist("controller")},getTaggedUsers:function(){var c=[],e=a.customInputItem();0<e.length&&b.each(e,function(a,e){c.push(b(e).data("id"))});
return c},"{customTextInput} addItem":function(b,e,d){b=a.hiddenCustom().val();e="";""==b?e=d.id:(b=b.split(","),b.push(d.id),e=b.join(","));a.hiddenCustom().val(e)},"{customTextInput} removeItem":function(b,e,d){b="";b=[];e=a.hiddenCustom().val().split(",");for(var g=0;g<e.length;g++)e[g]!=d.id&&b.push(e[g]);b=0>=b.length?"":b.join(",");a.hiddenCustom().val(b)},"{customEditBtn} click":function(b){a.customForm().toggle()},"{selection} change":function(b){"custom"==b.val()?(a.customForm().show(),a.customEditBtn().show()):
(a.customForm().hide(),a.customEditBtn().hide())},"{customHideBtn} click":function(){a.customForm().hide();a.customEditBtn().show();a.textboxlistLib.autocomplete.hide()}}});g.resolve()})});EasySocial.module("admin/users/users",function(d){var g=this;EasySocial.require().library("expanding").done(function(b){EasySocial.Controller("Users",{defaultOptions:{"{item}":"[data-user-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Item)}}});EasySocial.Controller("Users.Item",
{defaultOptions:{"{insertLink}":"[data-user-item-insertLink]"}},function(a){return{init:function(){a.options.name=a.element.data("name");a.options.avatar=a.element.data("avatar");a.options.email=a.element.data("email");a.options.id=a.element.data("id")},"{insertLink} click":function(){a.trigger("userSelected",[a.options.id,a.options.name,a.options.avatar,a.options.email])}}});EasySocial.Controller("Users.Pending",{defaultOptions:{"{item}":"[data-pending-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Pending.Item)}}});
EasySocial.Controller("Users.Pending.Item",{defaultOptions:{"{approve}":"[data-pending-approve]","{reject}":"[data-pending-reject]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmApprove",{id:a.options.id}),bindings:{"{approveButton} click":function(){b("[data-users-approve-form]").submit()}}})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmReject",
{id:a.options.id})})}}});g.resolve()})});EasySocial.module("admin/widgets/news",function(d){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("News",{defaultOptions:{loadOnInit:!0,"{items}":"[widget-news-items]","{placeholder}":"[widget-news-placeholder]"}},function(a){return{init:function(){a.options.loadOnInit&&a.getNews()},getNews:function(){EasySocial.ajax("admin/controllers/news/getnews").done(function(b){a.items().append(b);a.placeholder().remove()})}}});g.resolve()})});
EasySocial.module("albums/album",function(d){var g=this;EasySocial.require().library("tinyscrollbar").done(function(){EasySocial.Controller("Albums.Album",{defaultOptions:{"{title}":"[data-album-title]","{count}":"[data-album-count]","{privacy}":"[data-album-privacy]","{cover}":"[data-album-cover]","{coverImage}":"[data-album-cover-image]","{link}":"[data-album-link]","{menu}":"[data-album-menu]","{menuActions}":"[data-album-menu-actions]","{shareButton}":"[data-album-share-button]","{shareContent}":"[data-sharing]",
"{followButton}":"[data-album-follow-button]","{reportButton}":"[data-album-report-button]","{deleteButton}":"[data-album-delete-button]","{likeButton}":"[data-album-like-button]","{commentButton}":"[data-album-comment-button]","{countsButton}":"[data-album-counts-button]","{commentCount}":"[data-album-comment-count]","{likeCount}":"[data-album-like-count]","{actions}":"[data-item-actions]","{actionContent}":"[data-item-action-content]","{actionCloseButton}":"[data-item-action-close-button]","{actionsMenu}":"[data-item-actions-menu]",
"{likesHolder}":"[data-album-likes-holder]","{commentsHolder}":"[data-album-comments-holder]","{responseHolder}":"[data-album-response-holder]","{comments}":"[data-comments]"}},function(b){return{init:function(){b.id=b.element.data("album-id");b.actionContent().tinyscrollbar();b.actions().hasClass("open")&&(b.loadResponse(),b.element.addClass("show-all"))},remove:function(){b.element.remove()},"{coverImage} click":function(){window.location=b.link().attr("href")},"{shareButton} click":function(){b.shareContent().show()},
"{deleteButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/albums/confirmDelete",{id:b.id})})},like:function(){EasySocial.ajax("site/controllers/albums/like",{id:b.id}).done(function(a){b.likeCount().html(a.count);a.state?b.likeButton().addClass("liked"):b.likeButton().removeClass("liked");b.likesHolder().html(a.html)})},loadResponse:function(){var a=b.loadResponse.loader;a&&"rejected"!=a.state()||(b.loadResponse.loader=EasySocial.ajax("site/views/albums/response",{id:b.id}).done(function(a){b.responseHolder().html(a);
b.actionContent().removeClass("loading").tinyscrollbar_update()}))},getButton:function(a){a=d(a);var c=b.countsButton(),e=b.commentButton();return a.is(c)||0<a.parents().filter(c).length?c:a.is(e)||0<a.parents().filter(e).length?e:d()},lastButton:d(),"{actions} dropdownOpen":function(a,c,e){b.loadResponse();b.element.addClass("show-all");a=b.actionContent();e=b.lastButton=b.getButton(e);e=e.position().left+e.width()/2-a.width()/2;a.css("margin-left",e).tinyscrollbar_update()},"{actions} dropdownClose":function(a,
c,e){b.element.removeClass("show-all");var d=b.getButton(e);d.is(b.lastButton)||setTimeout(function(){d.trigger("click")},0)},"{actionCloseButton} click":function(a){b.hideActionContent()},"{likeButton} click":function(){b.like()},"{comments} newCommentSaved":function(){var a=b.comments().controller("EasySocial.Controller.Comments.Stat");b.commentCount().html(a.total());b.actionContent().tinyscrollbar_update("bottom")},"{comments} commentDeleted":function(){var a=b.comments().controller("EasySocial.Controller.Comments.Stat");
b.commentCount().html(a.total());b.actionContent().tinyscrollbar_update()},"{actionsMenu} dropdownOpen":function(){b.element.addClass("show-all")},"{actionsMenu} dropdownClose":function(){b.element.removeClass("show-all")}}});g.resolve()})});EasySocial.module("albums/browser",function(d){var g=this;EasySocial.require().library("history").view("site/albums/browser.list.item").done(function(){EasySocial.Controller("Albums.Browser",{hostname:"browser",defaultOptions:{view:{listItem:"site/albums/browser.list.item"},
itemRenderOptions:{},"{sidebar}":"[data-album-browser-sidebar]","{content}":"[data-album-browser-content]","{createAlbumButton}":"[data-album-create-button]","{createAlbumButtonLink}":"[data-album-create-button] > a","{listItemGroup}":"[data-album-list-item-group]","{listItemRegularGroup}":"[data-album-list-item-group=regular]","{listItemCoreGroup}":"[data-album-list-item-group=core]","{listItem}":"[data-album-list-item]","{listItemLink}":"[data-album-list-item] > a","{listItemTitle}":"[data-album-list-item-title]",
"{listItemCover}":"[data-album-list-item-cover]","{listItemCount}":"[data-album-list-item-count]","{albumItem}":"[data-album-item]","{photoBrowser}":"[data-photo-browser]"}},function(b){return{init:function(){b.albumItem().each(function(){b.addSubscriber(d(this).controller("EasySocial.Controller.Albums.Item"))})},setLayout:function(a){b.element.hasClass("layout-dialog")||b.element.data("layout",a).switchClass("layout-"+a)},open:function(a){var c=d.makeArray(arguments);b.trigger("contentload",c);var e=
"view"+d.String.capitalize(a),e=b[e].apply(b,c.slice(1));e.done(b.displayContent(function(){b.trigger("contentdisplay",c);return arguments})).fail(function(){b.trigger("contentfail",c)}).always(function(){b.trigger("contentcomplete",c)});return e},"{self} contentdisplay":function(a,c,e){/album|albumform/gi.test(e)&&b.setLayout("album");/photo/gi.test(e)&&b.setLayout("photo")},displayContent:d.Enqueue(function(a){var c=[];a=d(d.buildFragment([a],document,c));b.content().html(a);d(c).remove()}),viewAlbum:function(a){b.listItem().removeClass("active loading");
var c=b.getListItem(a).addClass("active loading");"dialog"!==b.element.data("layout")&&c.find("> a").route();return EasySocial.ajax("site/views/albums/item",{id:a,renderOptions:b.options.itemRenderOptions}).fail(function(){}).always(function(){c.removeClass("loading")})},viewAlbumForm:function(){b.listItem().removeClass("active loading");var a=b.view.listItem({}).addClass("active loading new").prependTo(b.listItemRegularGroup());return EasySocial.ajax("site/views/albums/form").fail(function(){}).always(function(){a.removeClass("loading")})},
viewPhoto:function(a){return EasySocial.ajax("site/views/photos/item",{id:a,browser:1}).fail(function(){}).always(function(){})},"{listItem} click":function(a){a.hasClass("new")||(a=a.data("albumId"),b.open("Album",a))},"{listItemLink} click":function(a,b){b.preventDefault();a.blur()},"{createAlbumButton} click":function(){b.open("AlbumForm");"dialog"!==b.element.data("layout")&&b.createAlbumButtonLink().route()},"{createAlbumButtonLink} click":function(a,b){b.preventDefault()},"{albumItem} init.albums.item":function(a,
c,e){b.addSubscriber(e)},getListItem:function(a,c){var e=a?b.listItem().filterBy("albumId",a):b.listItem(".new");return c?e.find(b["listItem"+d.String.capitalize(c)].selector):e},updateListItemCount:function(a,c,e){a=b.getListItem(a,"count");0>a.length||(c=e?(parseInt(a.text())||0)+(parseInt(c)||0):c,0>c&&(c=0),a.text(c))},"{albumItem} albumSave":function(a,c,e){e.done(function(a){b.getListItem().attr("data-album-id",a.id).removeClass("new");b.getListItem(a.id).find("> a").attr({href:a.permalink,
title:a.title}).route();b.getListItem(a.id,"title").html(a.title)})},"{albumItem} titleChange":function(a,c,e,f){b.getListItem(f.id,"title").html(d.trim(e)||"&nbsp;")},"{albumItem} coverChange":function(a,c,e,f){b.getListItem(f.id,"cover").css("backgroundImage",d.cssUrl(e.sizes.thumbnail.url))},"{albumItem} coverRemove":function(a,c,e){b.getListItem(e.id,"cover").css("backgroundImage","")},"{albumItem} photoAdd":function(a,c,e,d,g){b.updateListItemCount(g.id,1,!0)},"{albumItem} photoMove":function(a,
c,e,d){e.done(function(){b.updateListItemCount(d.album.id,-1,!0)})},"{albumItem} photoDelete":function(a,c,e,d){e.done(function(){b.updateListItemCount(d.album.id,-1,!0)})},"{photoBrowser} init.photos.browser":function(a,c,e){b.addSubscriber(e)},"{self} contentload":function(){b.listItem(".new").remove()}}});g.resolve()})});EasySocial.module("albums/editor",function(d){EasySocial.require().script("albums/editor/sortable","albums/editor/uploader").done();var g=EasySocial.Controller("Albums.Editor",
{hostname:"editor",defaultOptions:{view:{uploadItem:"site/albums/upload.item"},canReorder:!1,canUpload:!0,"{titleField}":"[data-album-title-field]","{captionField}":"[data-album-caption-field]","{coverField}":"[data-album-cover-field]","{location}":"[data-album-location]","{locationCaption}":"[data-album-location-caption]","{addLocationButton}":"[data-album-addLocation-button]","{date}":"[data-album-date]","{dateCaption}":"[data-album-date-caption]","{addDateCaption}":"[data-album-addDate-button]",
"{privacy}":"[data-album-privacy]","{uploadButton}":"[data-album-upload-button]","{deleteButton}":"[data-album-delete-button]","{moreButton}":"[data-album-more-button]","{privacy}":"[data-privacy-hidden]","{privacycustom}":"[data-privacy-custom-hidden]","{uploadItem}":"[data-photo-upload-item]","{dateDay}":"[data-date-day]","{dateMonth}":"[data-date-month]","{dateYear}":"[data-date-year]","{editButton}":"[data-album-edit-button]","{editButtonLink}":"[data-album-edit-button] > a","{doneButton}":"[data-album-done-button]",
"{doneButtonLink}":"[data-album-done-button] > a","{locationWidget}":".es-album-location-form .es-location","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]"}},function(b){return{init:function(){b.id=b.element.data("album-id");var a=b.options;a.canReorder&&EasySocial.module("albums/sortable").done(function(a){b.addPlugin("sortable",a)});a.canUpload&&EasySocial.module("albums/editor/uploader").done(function(a){b.uploader=b.addPlugin("uploader",a)});b.id?(b.createAlbum.task=d.Deferred().resolve(),
b.createStream=0):b.createStream=1},data:function(){var a=b.titleField().val(),c=b.captionField().val(),e=b.formatDate(),d=b.locationCaption().html(),g=b.latitude().val(),h=b.longitude().val(),p=b.privacy().val(),s=b.privacycustom().val();return{id:b.id,title:a,caption:c,date:e,address:d,latitude:g,longitude:h,privacy:p,privacycustom:s,createStream:b.createStream}},createAlbum:function(){var a=b.createAlbum.task;a||(a=b.createAlbum.task=b.save({createStream:0}).done(function(a){b.deleteButton().disabled(!1);
b.element.attr("data-album-id",b.id=a.id)}).fail(function(a,e){b.setMessage(a,e)}));return a},save:function(a){b.trigger("beforeAlbumSave",[b]);a=d.extend(b.data(),a);a.photos=d.map(b.album.photoItem(),function(a,b){var f=d(a).controller("EasySocial.Controller.Photos.Editor");return f?f.data():null});b.clearMessage();a=EasySocial.ajax("site/controllers/albums/store",a);b.trigger("albumSave",[a,b]);return a},"{self} photoAdd":function(a,c,e,d){1>=b.album.photoItem().length&&b.changeCover(d)},setCover:function(a){return EasySocial.ajax("site/controllers/albums/setCover",
{albumId:b.id,coverId:a}).done(function(a){b.changeCover(a)}).fail(function(){})},removeCover:function(){b.trigger("coverRemove",[b.album])},changeCover:function(a){b.trigger("coverChange",[a,b])},"{self} coverChange":function(a,c,e){b.coverField().removeClass("no-cover").css("backgroundImage",d.cssUrl(e.sizes.thumbnail.url))},"{self} coverRemove":function(){b.coverField().addClass("no-cover").css("backgroundImage","")},"{editButton} click":function(){b.album.setLayout("form");b.editButtonLink().route()},
"{editButtonLink} click":function(a,b){b.preventDefault()},"{doneButton} click":function(){b.save().done(function(a,c){d.buildHTML(c).replaceAll(b.element)}).progress(function(a,c){b.setMessage(a,c)})},"{doneButtonLink} click":function(a,b){b.preventDefault()},"{deleteButton} click":function(a){a.disabled()||EasySocial.dialog({content:EasySocial.ajax("site/views/albums/confirmDelete",{id:b.id})})},formatDate:function(){var a=b.dateDay().val()||b.dateDay().data("date-default"),c=b.dateMonth().val()||
b.dateMonth().data("date-default");return(b.dateYear().val()||b.dateYear().data("date-default"))+"-"+c+"-"+a},updateDate:function(){b.date().addClass("has-data");var a=b.dateDay().val()+" "+d.trim(b.dateMonth().find(":selected").html())+" "+b.dateYear().val();b.dateCaption().html(a)},"{dateDay} keyup":function(){b.updateDate()},"{dateMonth} change":function(){b.updateDate()},"{dateYear} keyup":function(){b.updateDate()},"{titleField} keyup":function(a){b.trigger("titleChange",[a.val(),b])},"{locationWidget} locationChange":function(a,
c,e){a=e.formatted_address;b.locationCaption().html(a);b.location().addClass("has-data")}}});this.resolve(g)});EasySocial.module("albums/editor/sortable",function(d){var g=this;EasySocial.require().library("ui/sortable").done(function(){var b=EasySocial.Controller("Albums.Editor.Sortable",{defaultOptions:{}},function(a){return{init:function(){},getPhotoOrdering:function(){var b={};a.photoItem().each(function(a){var f=d(this).data("photoId");b[f]=a});return b},"{parent.photoItemGroup} sortstart":function(b,
e,d){d.item.addClass("dragging");b.addClass("ordering");a.setLayout()},"{parent.photoItemGroup} sortchange":function(b,e,d){a.setLayout()},"{parent.photoItemGroup} sortstop":function(b,e,d){d.item.removeClass("dragging");b.removeClass("ordering");a.setLayout();EasySocial.ajax("site/controllers/photos/reorder",{id:d.item.controller().id,order:d.item.index()})}}});g.resolve(b)})});EasySocial.module("albums/editor/uploader",function(d){var g=this;EasySocial.require().script("albums/uploader").view("site/albums/upload.item").done(function(){var b=
EasySocial.Controller("Albums.Editor.Uploader",{defaultOptions:{}},function(a){return{init:function(){a.album=a.editor.album;a.uploader=a.addPlugin("uploader",EasySocial.Controller.Albums.Uploader,{settings:a.album.options.uploader,"{uploadButton}":a.editor.uploadButton.selector,"{uploadItemGroup}":a.album.photoItemGroup.selector,"{uploadDropsite}":a.album.content.selector})},setLayout:function(){a.album.setLayout_()},"{self} beforeAlbumSave":function(){a.uploader.stop()},"{self} albumSave":function(b,
e,f){f.done(function(b){b=d.uri(a.uploader.settings("url")).replaceQueryParam("albumId",b.id).toString();a.uploader.settings("url",b)})},"{self} layoutChange":function(b,e,f){a.uploader.stop();a.uploader.clear();b=d.uri(a.uploader.settings("url")).replaceQueryParam("createStream","form"==f?0:1).replaceQueryParam("layout",f).toString();a.uploader.settings("url",b)},"{self} QueueCreated":function(b,e,d){"form"==a.album.currentLayout()&&d.element.addClass("layout-form");a.setLayout()},startUpload:d.Enqueue(),
"{uploader} FilesAdded":function(b,e,d,g){a.id?a.uploader.start():a.editor.createAlbum().done(a.startUpload(function(){a.uploader.start()}));a.setLayout()},"{uploader} FilesRemoved":function(){a.setLayout()},"{uploader} FileUploaded":function(b,e,f,g,h){b=a.uploader.getItem(g);var p=d.buildHTML(h.html);h=h.data;p.addClass("new-item").insertAfter(b.element);setTimeout(function(){p.removeClass("new-item")},1);a.uploader.removeItem(g.id);a.trigger("photoAdd",[p,h,a.album]);a.setLayout()}}});g.resolve(b)})});
EasySocial.module("albums/uploader",function(d){var g=this;EasySocial.require().library("plupload").script("albums/uploader.item").view("site/albums/upload.item").done(function(){EasySocial.Controller("Albums.Uploader",{defaultOptions:{view:{uploadItem:"site/albums/upload.item"},"{uploadButton}":"[data-upload-button]","{uploadItemGroup}":"[data-upload-item-group]","{uploadItem}":"[data-upload-item]","{uploadDropsite}":"[data-upload-dropsite]"}},function(b){return{init:function(){var a=b.element;b.pluploadController=
b.element.addController("plupload",d.extend({"{uploadButton}":b.uploadButton.selector,"{uploadDropsite}":b.uploadDropsite.selector},b.options.settings));b.plupload=b.pluploadController.plupload;d.IE||"html5"!=b.plupload.runtime||a.addClass("can-drop-file");a.addClass("can-upload")},setLayout:function(){b.uploadItemGroup().toggleClass("no-upload-items",1>b.uploadItem().length)},items:{},getItem:function(a){var c;d.isString(a)&&(c=a);a&&a.id&&(c=a.id);return b.items[c]},createItem:function(a){var c=
b.view.uploadItem({file:a}).addController("EasySocial.Controller.Albums.Uploader.Item",{"{uploader}":b,file:a});c.element.prependTo(b.uploadItemGroup());b.items[a.id]=c;b.setLayout();b.trigger("QueueCreated",[c]);return c},settings:function(a,c){var e=b.plupload.settings;void 0!==c&&(e[a]=c);return a?e[a]:e},start:function(){return b.plupload.start()},stop:function(){return b.plupload.stop()},"{self} FilesAdded":function(a,c,e,f){try{f.reverse(),d.each(f,function(a,c){b.getItem(c)||b.createItem(c)})}catch(g){console.error(g)}},
"{self} BeforeUpload":function(a,c,e,d){(a=b.getItem(d))&&a.setState("preparing")},"{self} UploadFile":function(a,c,e,d){(a=b.getItem(d))&&a.setState("uploading")},"{self} UploadProgress":function(a,c,e,d){if(a=b.getItem(d))a.setState("uploading"),a.setProgress()},"{self} FileUploaded":function(a,c,e,f,g){(a=b.getItem(f))&&(d.isPlainObject(g)?a.setState("done"):a.setState("failed"))},"{self} FileError":function(a,c,e,d,g){(a=b.getItem(d))||(a=b.createItem(d));a.setState("failed");a.setMessage(g.message)},
"{self} Error":function(a,c,e,d){d.file&&(a=d.file,(c=b.getItem(a))||(c=b.createItem(a)),c.setState("failed"),c.setMessage(d.message))},removeItem:function(a){var c=b.getItem(a);c&&(b.plupload.removeFile(c.file()),c.element.remove(),delete b.items[a],b.setLayout())},clear:function(a){d.each(b.items,function(a,e){b.plupload.removeFile(e.file());e.element.remove();delete b.items[a]});b.items={}}}});g.resolve()})});EasySocial.module("albums/uploader.item",function(d){EasySocial.Controller("Albums.Uploader.Item",
{defaultOptions:{"{status}":".upload-status","{filename}":".upload-filename","{progressBar}":".upload-progress-bar","{percentage}":".upload-percentage","{filesizeTotal}":".upload-filesize-total","{filesizeLeft}":".upload-filesize-left","{details}":".upload-details","{detailsButton}":".upload-details-button","{removeButton}":".upload-remove-button","{message}":".upload-message"}},function(g){return{init:function(){g.id=g.element.attr("id");var b=g.file();g.filename().html(b.name);g.setState("pending");
g.setProgress();b="html4"==g.uploader.plupload.runtime;(10>d.IE||b)&&g.element.addClass("indefinite-progress");b&&g.element.addClass("no-filesize")},file:function(){var b=g.uploader.plupload.getFile(g.id)||g.options.file;if(b){var a=void 0===b.size||"N/A"==b.size;b.percentage=b.percent+"%";b.filesize=a?"":d.plupload.formatSize(b.size);b.remaining=a?"":d.plupload.formatSize(b.size-(b.loaded||0))}return b},setProgress:function(){var b=g.file();g.progressBar().width(b.percentage);g.percentage().html(b.percentage);
g.filesizeTotal().html(b.filesize);g.filesizeLeft().html(b.remaining)},setState:function(b){g.element.removeClass("pending preparing uploading failed done").addClass(b);g.state=b},setMessage:function(b){g.detailsButton().attr("data-popbox",b)},"{removeButton} click":function(b,a){g.uploader.removeItem(g.id)}}});this.resolve()});EasySocial.module("albums/item",function(d){var g=this;EasySocial.require().script("albums/editor").done();EasySocial.require().library("masonry").done(function(){EasySocial.Controller("Albums.Item",
{hostname:"album",defaultOptions:{tilesPerRow:4,editable:!1,multipleSelection:!1,"{header}":"[data-album-header]","{content}":"[data-album-content]","{footer}":"[data-album-footer]","{info}":"[data-album-info]","{title}":"[data-album-title]","{caption}":"[data-album-caption]","{location}":"[data-album-location]","{date}":"[data-album-date]","{cover}":"[data-album-cover]","{photoItemGroup}":"[data-photo-item-group]","{photoItem}":"[data-photo-item]","{photoImage}":"[data-photo-image]","{featuredItem}":"[data-photo-item].featured",
"{featuredImage}":"[data-photo-item].featured [data-photo-image]","{uploadItem}":"[data-photo-upload-item]","{moreButton}":"[data-album-more-button]","{viewButton}":"[data-album-view-button]","{share}":"[data-repost-action]","{likes}":"[data-likes-action]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{counterBar}":"[data-stream-counter]"}},function(b){return{init:function(){b.id=b.element.data("album-id");b.nextStart=b.element.data("album-nextstart")||-1;b.options.editable&&
EasySocial.module("albums/editor").done(function(a){b.editor=b.addPlugin("editor",a)});b.setLayout();setTimeout(function(){b.content().addClass("ready")},1);b.addSubscriber(b.photoItem().controllers("EasySocial.Controller.Photos.Item"))},"{window} resize":d.debounce(function(){b.setLayout()},250),currentLayout:function(){return b.element.data("albumLayout")},setLayout_:d.debounce(function(){b.setLayout()},100),setLayout:function(a){var c=b.photoItemGroup(),e=b.currentLayout();a=a||e;var f=b.setLayout.seed,
g=f==c.width()&&e==a;hasPhotoItem=0<b.photoItem().length;hasUploadItem=0<b.uploadItem().length;hasItem=hasPhotoItem||hasUploadItem;masonry=c.data("masonry");layout={currentLayout:e,seed:f,intact:g,hasPhotoItem:hasPhotoItem,hasUploadItem:hasUploadItem,hasItem:hasItem,masonry:masonry};g||(b.element.data("albumLayout",a).switchClass("layout-"+a),b.photoItem().switchClass("layout-"+a),b.setLayout.seed=layout.seed=null,b.trigger("layoutChange",[a,layout]));b.element.toggleClass("has-photos",hasItem);hasItem||
c.css("opacity",1);a="set"+d.String.capitalize(a)+"Layout";b[a](layout);b.setLayout.seed=c.width()},setItemLayout:function(a){if(a.intact)a.masonry&&a.masonry.reload();else{var c=4;d("#es-wrap").hasClass("w600")&&(c=2);d("#es-wrap").hasClass("w320")&&(c=1);var e=b.photoItemGroup(),f=b.photoItem();a=e.width();a=Math.floor(a/c)*c/c;var g=f.outerWidth(!0)-f.width(),h=f.outerHeight(!0)-f.height(),f=a-g,p=a-h;4<=c?(c=2*a-g,g=2*a-h):(c=f,g=p);var h=c,s=g;b.photoItem.css({width:f,height:p});b.photoImage.css({width:f,
height:p});b.featuredItem.css({width:c,height:g});b.featuredImage.css({width:h,height:s});b.uploadItem.css({width:f,height:p});e.masonry({columnWidth:a});setTimeout(function(){e.addTransitionClass("no-transition").masonry("reload")},1)}},setFormLayout:function(a){a.masonry&&a.masonry.destroy();b.clearLayout()},setDialogLayout:function(){layout.masonry&&layout.masonry.destroy();b.clearLayout()},setThumbnailLayout:function(){},setRowLayout:function(){b.clearLayout()},clearLayout:function(){b.photoItemGroup().addClass("no-transition");
b.photoItem.css().remove();b.photoImage.css().remove();b.featuredItem.css().remove();b.featuredImage.css().remove();b.uploadItem.css().remove();b.setLayout.seed=null},getSelectedItems:function(){var a=[];b.photoItem(".selected").each(function(b,e){a.push(d(e).controller("EasySocial.Controller.Photos.Item").data())});return a},"{photoItem} init.photos.item":function(a,c,e){b.addSubscriber(e)},"{photoItem} destroyed":function(){b.setLayout()},"{photoItem} activate":function(a,c,e){if(e)switch(b.currentLayout()){case "item":case "row":a.addClass("loading");
b.browser?(b.browser.open("photo",e.id).always(function(){a.removeClass("loading")}),e.imageLink().route()):window.location=e.imageLink().attr("href");break;case "dialog":c=b.photoItem(".selected"),b.options.multipleSelection?a.toggleClass("selected"):(e=a.hasClass("selected"),c.removeClass("selected"),a.toggleClass("selected",!e))}},"{photoItem} photoFeature":function(a,c,e,d,g){b.setLayout();e.fail(function(){b.setLayout()})},"{photoItem} photoMove":function(a,c,e,d,g){b.clearMessage();e.done(function(){d.element.remove();
b.setLayout();1>b.photoItem().length&&b.trigger("coverRemove",[b])}).fail(function(a,c){b.setMessage(a,c)})},"{photoItem} photoDelete":function(a,c,e,d){b.clearMessage();e.done(function(){d.element.remove();b.setLayout();1>b.photoItem().length&&b.trigger("coverRemove",[b])}).fail(function(a,c){b.setMessage(a,c)})},"{self} albumSave":function(a,c,e){e.done(function(a){b.id=a.id})},"{self} coverChange":function(a,c,e,f){b.cover().css("backgroundImage",d.cssUrl(e.sizes.thumbnail.url))},"{self} coverRemove":function(){b.cover().css("backgroundImage",
"")},"{viewButton} click":function(a,c){b.browser&&(c.preventDefault(),b.element.addClass("loading"),b.browser.open("Album",b.id))},"{moreButton} click":function(a){-1==b.nextStart||a.disabled()||(a.disabled(!0),EasySocial.ajax("site/controllers/albums/loadMore",{albumId:b.id,start:b.nextStart,layout:b.currentLayout()}).done(function(c,e){b.nextStart=e;var f=b.photoItemGroup();d.each(c,function(a,b){d.buildHTML(b).appendTo(f)});0>e&&a.hide();b.setLayout()}).always(function(){a.disabled(!1)}))},"{share} create":function(a,
c,e){b.counterBar().removeClass("hide")},"{likes} onLiked":function(a,c,e){b.counterBar().removeClass("hide")},"{likes} onUnliked":function(a,c,e){a=b.likeContent().hasClass("hide");c=b.repostContent().hasClass("hide");a&&c&&b.counterBar().addClass("hide")}}});g.resolve()})});EasySocial.require().script("site/likes/likes","site/reports/reports","site/repost/repost","site/share/share","site/layout/dialog","site/layout/responsive","site/layout/elements","site/photos/photos","site/users/login","site/profile/popbox",
"site/privacy/privacy","site/locations/popbox","site/sidebar/sidebar","site/friends/api","site/conversations/api","site/followers/api","site/popbox/popbox").done();EasySocial.module("site/likes/likes",function(d){d(document).on("click.es.likes.action","[data-likes-action]",function(){var g=d(this),b={id:g.data("id"),type:g.data("type"),group:g.data("group")},a=b.type+"-"+b.group+"-"+b.id;EasySocial.ajax("site/controllers/likes/toggle",b).done(function(c,e,f,k,h){g.text(e);d("[data-likes-"+a+"]").html(c).toggleClass("hide",
f).toggle(!f);b.uid=b.id;b.count=h;g.trigger("like"==k?"onLiked":"onUnliked",[b])}).fail(function(a){console.log(a)})}).on("click.es.likes.others","[data-likes-others]",function(){var g=d(this),b=g.parents("[data-likes-content]"),g={uid:b.data("id"),type:b.data("type"),exclude:g.data("authors")};EasySocial.dialog({content:EasySocial.ajax("site/controllers/likes/showOthers",g)})});this.resolve()});EasySocial.module("site/reports/reports",function(d){d(document).on("click.es.reports.link","[data-reports-link]",
function(){var g=d(this),b={};d.each("url extension uid type object title description".split(" "),function(a,c){b[c]=g.data(c)});EasySocial.dialog({content:EasySocial.ajax("site/views/reports/confirmReport",{title:b.title,description:b.description}),selectors:{"{message}":"[data-reports-message]","{reportButton}":"[data-report-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{reportButton} click":function(){var a=this.message().val();EasySocial.dialog({content:EasySocial.ajax("site/controllers/reports/store",
{url:b.url,extension:b.extension,uid:b.uid,type:b.type,title:b.object,message:a})})},"{cancelButton} click":function(){EasySocial.dialog().close()}}})});this.resolve()});EasySocial.module("site/repost/repost",function(d){d(document).on("click.es.repost.action","[data-repost-action]",function(){var g=d(this),b={id:g.data("id"),element:g.data("element"),group:g.data("group")},a=b.element+"-"+b.group+"-"+b.id;EasySocial.dialog({content:EasySocial.ajax("site/views/repost/form",b),bindings:{"{sendButton} click":function(c){var e=
this.parent;c=d.trim(this.repostContent().val());b.content=c;e.loading(!0);EasySocial.ajax("site/controllers/repost/share",b).done(function(b,c,e,h){b=d.buildHTML(b);actionContent=d("[data-repost-"+a+"]").toggleClass("hide",c).toggle(!c);actionContent.find("span.repost-counter").html(b);g.trigger("create",[h])}).fail(function(a){e.clearMessage();e.setMessage(a)}).always(function(){e.loading(!1);e.close()})}}})});EasySocial.module("repost/authors",function(){this.resolve(function(d){d=d.button.parents("[data-repost-content]");
data={id:d.data("id"),element:d.data("element")};return{content:EasySocial.ajax("site/controllers/repost/getSharers",data),id:"es-wrap",type:"repost",position:"bottom-right"}})});this.resolve()});EasySocial.module("site/share/share",function(d){d(document).on("click.es.share.button","[data-es-share-button]",function(){var g=d(this);EasySocial.dialog({title:g.text(),content:EasySocial.ajax("site/views/sharing/shareDialog",{url:g.data("url"),title:g.data("title")})})});this.resolve()});EasySocial.module("site/layout/dialog",
function(d){var g=this;EasySocial.require().library("dialog").view("site/dialog/default").done(function(b){EasySocial.dialog=function(a,c){if(window.parentDialog)return window.parentDialog.update(a);if("string"===typeof a||b.isDeferred(a))a={content:a,afterShow:b.isFunction(c)?c:b.noop};var e=b("#es-wrap.es-dialog.global");1>e.length&&(e=b(EasySocial.View("site/dialog/default")).addClass("global").appendTo("body"));a=b.extend({showOverlay:!1},a);var d=e.controller("Dialog");d?d.update(a):d=e.addController("Dialog",
a);return d};g.resolve()})});EasySocial.module("site/layout/responsive",function(d){d(function(){d(".es-responsive").responsive([{at:1200,switchTo:"wide"},{at:960,switchTo:"wide w960"},{at:818,switchTo:"wide w960 w768"},{at:600,switchTo:"wide w960 w768 w600"},{at:560,switchTo:"wide w960 w768 w600 w480"},{at:480,switchTo:"wide w960 w768 w600 w480 w320"}])});this.resolve()});EasySocial.module("site/layout/elements",function(d){d(document).on("click.button.data-fd-api","[data-fd-toggle-value]",function(){var g=
d(this).parents('[data-foundry-toggle="buttons-radio"]');if(!g.hasClass("disabled")&&0<g.length){var b=d(this).data("fd-toggle-value");g.find("input[type=hidden]").val(b).trigger("change")}});d(document).on("mouseover.tooltip.data-es-api","[data-es-provide=tooltip]",function(){d(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div class="tooltip tooltip-es"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")});d(document).on("mouseover.popover.data-es-api",
"[data-es-provide=popover]",function(){d(this).popover({delay:{show:200,hide:100},animation:!1,trigger:"hover",container:"body"}).popover("show")});d(document).on("keyup","[data-date-form] [data-date-day]",function(){if(d.trim(d(this).val())){var g=parseInt(d(this).siblings("[data-date-year]").val()||d(this).siblings("[data-date-year]").data("dateDefault")),b=parseInt(d(this).siblings("[data-date-month]").val()||d(this).siblings("[data-date-month]").data("dateDefault")),a=parseInt(d(this).val()||
d(this).data("dateDefault")),c=/1|3|5|7|8|10|12/.test(b)?31:30;2==b&&(c=(g%400?g%100&&!(g%4):1)?29:28);1>a&&(a=1);a>c&&(a=c);d.isNumeric(a)?d(this).val(a):d(this).val("")}});d(document).on("keyup","[data-date-form] [data-date-year]",function(){if(d.trim(d(this).val())){var g=parseInt(d(this).val());1>g&&(g=1);d.isNumeric(g)?d(this).val(g):d(this).val("")}});this.resolve()});EasySocial.module("site/photos/photos",function(d){var g=this;EasySocial.require().script("photos").done(function(){EasySocial.photos=
d("body").addController("EasySocial.Controller.Photos");g.resolve()})});EasySocial.module("photos",function(d){var g=this;EasySocial.require().script("photos/viewer").done(function(){EasySocial.Controller("Photos",{defaultOptions:{view:{popup:"site/photos/popup",viewer:"site/photos/popup.viewer"},"{photo}":"[data-es-photo]","{popup}":"[data-photo-popup]","{viewer}":"[data-photo-viewer]","{closeButton}":"[data-popup-close-button]"},photo:{data:{},image:{},content:null,tags:[]}},function(b){return{init:function(){},
createAvatar:function(a,b){if(void 0!==a){b||(b={});var e={id:a};b.redirect&&(e.redirect=b.redirect,delete b.redirect);b.uid&&(e.uid=b.uid,delete b.uid);EasySocial.dialog(d.extend({content:EasySocial.ajax("site/views/photos/avatar",e)},b))}},selectPhoto:function(a){var b=d.Deferred(),e=EasySocial.ajax("site/views/albums/dialog"),f=EasySocial.require().script("albums/browser").done();EasySocial.dialog(d.extend({content:b},a));d.when(f,e).done(function(){e.done(function(a){b.resolve(a)})})},display:function(a,
c,e){a+="";var f=b.popup();b.viewer().remove();b.show();b.currentViewer=b.view.viewer().appendTo(f).addController("EasySocial.Controller.Photos.Viewer",d.extend({mode:"popup",initialPhoto:a,playlist:c},e))},albums:{},albumLoaders:{},getAlbum:function(a,c){a+="";var e=b.albumLoaders,d=e[a];if(c||!d||"failed"==d.state())d=e[a]=EasySocial.ajax("site/controllers/albums/getAlbum",{id:a}).done(function(c){b.albums[a]=c});return d.promise()},photos:{},photoLoaders:{},getPhoto:function(a,c){a+="";var e=b.photoLoaders,
f=e[a];if(c||!f||"failed"==f.state())f=e[a]=EasySocial.ajax("site/controllers/photos/getPhoto",{id:a,attr:["content","tags"]}).done(function(c){b.photos[a]=c;var e=c.content;c.content={};d.each(e,function(a,e){c.content[a]=d(d.trim(e)).appendTo(b.element).detach()})});return f.promise()},images:{},imageLoaders:{},getImage:function(a,c,e){a+="";var f=b.imageLoaders,f=f[a]||(f[a]={}),g=f[c];if(e||!g||"failed"==g.state())g=f[c]=d.Deferred(),b.getPhoto(a).done(function(e){d.Image.get(e.sizes[c].url).done(function(e){var d=
b.images;(d[a]||(d[a]={}))[c]=e;g.resolve(e)}).fail(g.reject)}).fail(g.reject);return g.promise()},show:function(){b.popupElement.appendTo("body").addClass("active").trigger("show")},hide:function(){b.popupElement.removeClass("active").trigger("hide").detach()},"{self} click":function(a,c){c.target===b.popup()[0]&&b.hide()},"{photo} click":function(a,c){var e=a.data("es-photo"),f=a.parents("[data-es-album]");if(0<f.length)return f=f.data("es-album"),b.display(e,f),c.preventDefault();f=a.parents("[data-es-photos]");
if(0<f.length){var g=f.data("es-photos");if(""!==g&&void 0!==g)return g=g.split(","),b.display(e,g),c.preventDefault();g=[];f.find("[data-es-photo]").each(function(a,b){g.push(d(this).data("es-photo"))});b.display(e,g);return c.preventDefault()}},"{closeButton} click":function(){b.hide()},like:function(a){return EasySocial.ajax("site/controllers/photos/like",{id:a})}}});g.resolve()})});EasySocial.module("photos/viewer",function(d){var g=this;EasySocial.require().script("photos/tagger","photos/avatar");
EasySocial.require().library("image","tinyscrollbar").done(function(){EasySocial.Controller("Photos.Viewer",{defaultOptions:{view:{},"{title}":"[data-photo-title]","{caption}":"[data-photo-caption]","{date}":"[data-photo-date]","{viewport}":"[data-photo-viewport]","{image}":"[data-photo-image]","{photoItem}":"[data-photo-item]","{nextButton}":"[data-photo-next-button]","{prevButton}":"[data-photo-prev-button]","{thumbnailsHolder}":"[data-photo-thumbnails-holder]","{contentHolder}":"[data-photo-content-holder]",
"{content}":"[data-photo-content]","{contentViewport}":"[data-photo-content-viewport]","{comments}":"[data-comments]","{commentInput}":"[data-comments-form-input]","{likeButton}":"[data-photo-like-button]","{commentButton}":"[data-photo-comment-button]","{likesHolder}":"[data-photo-likes-holder]","{commentsHolder}":"[data-photo-comments-holder]",size:"large",throttle:250,mode:"inline"}},function(b){return{init:function(){"inline"==b.options.mode&&(b.initial=!0);b.update();EasySocial.module("photos/tagger").done(function(){b.tagger=
b.addPlugin("tagger",EasySocial.Controller.Photos.Tagger)});EasySocial.module("photos/avatar").done(function(){b.avatar=b.addPlugin("avatar",EasySocial.Controller.Photos.Avatar)})},update:function(){var a=b.playlist=b.options.playlist,c=b.options.initialPhoto;d.isArray(a)?(a=d._.indexOf(a,c),0>a&&(a=0),b.displayItem(a)):(EasySocial.photos.getAlbum(a).done(function(a){b.options.playlist=d.map(a.photos,function(a){return a.id+""});b.update()}),EasySocial.ajax("site/views/photos/thumbnails",{albumId:a}).done(function(a){b.thumbnailsHolder().html(a)}))},
"{window} resize":d._.debounce(function(){b.setLayout()},100),setLayout:function(){b.setContentLayout();b.setImageLayout()},setImageLayout:function(){var a=b.viewport(),c=b.image();c.css(d.Image.resizeWithin(c.data("width"),c.data("height"),a.width(),a.height()))},setContentLayout:function(){"popup"===b.options.mode&&(b.contentViewport().height(b.content().height()),b.content().tinyscrollbar_update())},getPhoto:function(a){return EasySocial.photos.photos[b.playlist[a]]},getImage:function(a){return(EasySocial.photos.images[b.playlist[a]]||
{})[b.options.size]},currentItem:0,currentId:null,gotoItem:function(a){var c=b.playlist.length-1;a=b.currentItem+a;0>a&&(a=c);a>c&&(a=0);return a},displayItem:d._.debounce(function(a){b.currentItem=a;b.currentId=b.playlist[a];b.trigger("displayItem",[a])},25),"{self} displayItem":function(a,c,e){b.viewport().addClass("loading");b.renderContent(e);b.renderImage(e)},renderContent:function(a){if(!b.initial){b.content().detach();var c=b.getPhoto(a),e=b.playlist[a];if(c){var d=b.options.mode;b.contentHolder().append(c.content[d]);
"popup"==d&&b.content().tinyscrollbar();b.setContentLayout();b.trigger("renderContent",[a])}else setTimeout(function(){b.currentId===e&&EasySocial.photos.getPhoto(e).done(function(c){b.renderContent(a)}).fail(function(){})},b.options.throttle)}},renderImage:function(a){b.image().detach();var c=b.getPhoto(a),e=b.playlist[a],d=b.getImage(a),g=b.options.size,h=b.viewport();d?(d.addClass("es-photo-image").removeClass("active").attr("data-photo-image","").prependTo(h),b.initial&&d.removeClass("initial"),
b.setImageLayout(),h.removeClass("loading"),setTimeout(function(){d.addClass("active").removeClass("initial");b.trigger("renderImage",[a,c,d]);b.reset()},1)):setTimeout(function(){b.currentId===e&&EasySocial.photos.getImage(e,g).done(function(c){c.addClass("initial");b.renderImage(a)}).fail(function(){}).always(function(){h.removeClass("loading")})},b.options.throttle)},reset:function(){b.viewport().removeAttr("style").removeClass("no-transition");b.initial=!1},"{nextButton} click":function(){b.reset();
b.displayItem(b.gotoItem(1))},"{prevButton} click":function(){b.reset();b.displayItem(b.gotoItem(-1))},"{comments} newCommentSaved":function(){"popup"===b.options.mode&&b.content().tinyscrollbar_update("bottom")},"{comments} commentDeleted":function(){"popup"===b.options.mode&&b.content().tinyscrollbar_update()},"{comments} oldCommentsLoaded":function(){"popup"===b.options.mode&&b.content().tinyscrollbar_update()},"{commentButton} click":function(){"popup"==b.options.mode&&b.content().tinyscrollbar_update("bottom");
b.commentInput().focus()},"{likeButton} click":function(){EasySocial.photos.like(b.currentId).done(function(a){b.likeButton().toggleClass("liked",a.state);b.likesHolder().html(a.html)})}}});g.resolve()})});EasySocial.module("site/users/login",function(d){var g=this;EasySocial.require().library("dialog").done(function(){EasySocial.login=function(){EasySocial.dialog({content:EasySocial.ajax("site/views/login/form",{})})};g.resolve()})});EasySocial.module("site/profile/popbox",function(d){EasySocial.require().library("popbox").done(function(){EasySocial.module("profile/popbox",
function(d){this.resolve(function(b){var a=b.button.data("userId");b=b.button.attr("data-popbox-position")||"top-left";return{content:EasySocial.ajax("site/views/profile/popbox",{id:a}),id:"es-wrap",type:"profile",position:b}})})});EasySocial.require().script("site/conversations/composer").done();EasySocial.Controller("Profile.Popbox",{defaultOptions:{id:null,"{addButton}":"[data-popbox-friends-add]","{friendsButton}":"[data-popbox-friends-friends]","{respondButton}":"[data-popbox-friends-respond]",
"{requestedButton}":"[data-popbox-friends-requested]","{messageButton}":"[data-popbox-message]","{friendsSubmenu}":"[data-friends-submenu]","{cancelFriend}":"[data-popbox-friends-friends-cancel]","{cancelFriendRequest}":"[data-popbox-friends-requested-cancel]","{approveFriend}":"[data-popbox-friends-respond-approve]","{rejectFriend}":"[data-popbox-friends-respond-reject]"}},function(g){return{init:function(){g.options.id=g.element.find("[data-user-id]").data("userId");EasySocial.module("site/conversations/composer").done(function(){g.messageButton().implement(EasySocial.Controller.Conversations.Composer.Dialog,
{recipient:{id:g.options.id}})})},"{self} popboxActivate":function(){g.friendsSubmenu().parent().removeClass("open")},"{addButton} click":function(){EasySocial.ajax("site/controllers/friends/request",{id:g.options.id}).done(function(){EasySocial.ajax("site/views/profile/getButton",{button:"button.requested",id:g.options.id}).done(function(b){g.addButton().replaceWith(b)})})},"{cancelFriend} click":function(b,a){var c=d(b).data("friendid");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmRemoveFriend",
{id:g.options.id}),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:c}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/friendRemoved",{id:g.options.id})});EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){g.friendsSubmenu().remove();g.friendsButton().replaceWith(a)})})}}})},"{cancelFriendRequest} click":function(b,a){var c=d(b).data("friendid");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmCancelRequest",
{id:c}),bindings:{"{confirmButton} click":function(){EasySocial.dialog().close();EasySocial.ajax("site/controllers/friends/cancelRequest",{id:c}).done(function(){EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){g.friendsSubmenu().remove();g.requestedButton().replaceWith(a)})})}}})},"{approveFriend} click":function(b,a){var c=d(b).data("friendid");EasySocial.ajax("site/controllers/friends/approve",{id:c}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmFriends",
{id:g.options.id})});EasySocial.ajax("site/views/profile/getButton",{button:"button.friends"}).done(function(a){g.friendsSubmenu().remove();g.respondButton().replaceWith(a)})})},"{rejectFriend} click":function(b,a){var c=d(b).data("friendid");EasySocial.ajax("site/controllers/friends/reject",{id:c}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/rejected",{id:g.options.id})});EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){g.friendsSubmenu().remove();
g.respondButton().replaceWith(a)})})}}});d(document).on("mouseover.es.profile.popbox","[data-popbox-tooltip=profile]",function(){d(this).addController("EasySocial.Controller.Profile.Popbox")});this.resolve()});EasySocial.module("site/conversations/composer",function(d){var g=this;EasySocial.require().library("expanding").script("site/friends/suggest","uploader/uploader","location").language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS","COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE").done(function(b){EasySocial.Controller("Conversations.Composer",
{defaultOptions:{attachments:!0,location:!0,extensionsAllowed:"","{uploader}":"[data-composer-attachment]","{location}":"[data-composer-location]","{editor}":"[data-composer-editor]","{friendSuggest}":"[data-friends-suggest]","{recipients}":"input[name=uid\\[\\]]","{recipientRow}":"[data-composer-recipients]","{messageRow}":"[data-composer-message]","{submit}":"[data-composer-submit]"}},function(a){return{init:function(){a.initSuggest();a.initEditor();a.options.attachments&&a.initUploader();a.options.location&&
a.initLocation()},initLocation:function(){a.location().implement(EasySocial.Controller.Location.Form)},resetForm:function(){a.editor().val("")},initUploader:function(){a.uploader().implement(EasySocial.Controller.Uploader,{temporaryUpload:!0,query:"type=conversations",type:"conversations",extensionsAllowed:a.options.extensionsAllowed});"development"==EasySocial.environment&&(console.log("Extensions Allowed: "+a.options.extensionsAllowed),console.log("Maximum individual file size: "+a.options.maxSize))},
initSuggest:function(){a.friendSuggest().addController(EasySocial.Controller.Friends.Suggest)},initEditor:function(){a.editor().expandingTextarea()},checkErrors:function(){if(0>=a.recipients().length)return a.recipientRow().addClass("error"),a.clearMessage(),a.setMessage(b.language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS"),"error"),!0;a.recipientRow().removeClass("error");if(""==a.editor().val())return a.messageRow().addClass("error"),a.clearMessage(),a.setMessage(b.language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE"),
"error"),!0;a.messageRow().removeClass("error");return!1},"{submit} click":function(b,e){e.preventDefault();if(a.checkErrors())return!1;if(a.options.attachments){var d=a.uploader().controller();if(d.options.uploading&&d.hasFiles())return!1}a.element.submit()}}});EasySocial.Controller("Conversations.Composer.Dialog",{defaultOptions:{recipient:{}}},function(a){return{init:function(){},"{self} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/composer",{id:a.options.recipient.id}),
bindings:{"{sendButton} click":function(){var c=b("[data-composer-recipient]").val(),e=b("[data-composer-message]").val();EasySocial.ajax("site/controllers/conversations/store",{uid:c,message:e}).done(function(b){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sent",{id:a.options.recipient.id}),bindings:{"{viewButton} click":function(){document.location=b}}})}).fail(function(b){a.setMessage(b)})}}})}}});g.resolve()})});EasySocial.module("site/friends/suggest",function(d){var g=
this;EasySocial.require().view("site/friends/suggest.item").library("textboxlist").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT").done(function(b){EasySocial.Controller("Friends.Suggest.User",{defaultOptions:{"{addButton}":"[data-friend-suggest-add]","{button}":"[data-friend-suggest-button]"}},function(a){return{init:function(){},"{addButton} click":function(c){EasySocial.ajax("site/controllers/friends/request",{id:a.element.data("uid")}).done(function(c){a.button().html(b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT"))}).fail(function(b){a.button().html(b)})}}});
EasySocial.Controller("Friends.Suggest",{defaultOptions:{max:null,exclusive:!0,exclusion:[],minLength:1,highlight:!0,name:"uid[]",view:{suggestItem:"site/friends/suggest.item"}}},function(a){return{init:function(){var b=a.options;a.element.textboxlist({name:b.name,max:b.max,plugin:{autocomplete:{exclusive:b.exclusive,minLength:b.minLength,highlight:b.highlight,showLoadingHint:!0,showEmptyHint:!0,query:function(a){return EasySocial.ajax("site/controllers/friends/suggest",{search:a})}}}}).textboxlist("enable")},
"{self} filterItem":function(b,e,d){b=a.view.suggestItem(!0,{item:d,name:a.options.name});d.title=d.screenName;d.menuHtml=b;d.html=b;return d},"{self} filterMenu":function(c,e,d,g,h,p){c=p.getAddedItems();var s=b.pluck(c,"id"),s=s.concat(a.options.exclusion);g.each(function(){var a=b(this),c=a.data("item");a.toggleClass("hidden",-1<b.inArray(c.id.toString(),s))})}}});g.resolve()})});EasySocial.module("location",function(d){var g=this;EasySocial.require().library("ui/autocomplete").view("site/location/delete.confirmation").done(function(){EasySocial.Controller("Location.Form",
{defaultOptions:{language:"en",initialLocation:null,mapType:"ROADMAP",staticMap:"https://www.google.com/maps?q=",showTip:!0,"{locationInput}":"[data-locationForm-input]","{locationCoordinates}":"[data-locationForm-coordinates]","{locationLatitude}":"[data-locationForm-latitude]","{locationLongitude}":"[data-locationForm-longitude]","{latitudeDisplay}":"[data-locationForm-latitudeDisplay]","{longitudeDisplay}":"[data-locationForm-longitudeDisplay]","{locationMap}":"[data-locationForm-map]","{locationMapWrapper}":".locationMapWrapper",
"{viewStaticMap}":".viewStaticMap","{editGeographic}":"[data-locationForm-edit]","{updateGeographic}":"[data-locationForm-update]","{cancelUpdateGeographic}":"[data-locationForm-cancel]","{searchButton}":"[data-locationForm-searchAddress]","{autoDetectButton}":"[data-locationForm-autodetect]","{clearLocation}":"[data-locationForm-clear]"}},function(b){return{init:function(){var a=d.uid("ext");window[a]=function(){d.___GoogleMaps.resolve()};d.___GoogleMaps||(d.___GoogleMaps=d.Deferred(),EasySocial.require().script({prefetch:!1},
"http://maps.googleapis.com/maps/api/js?sensor=true&language="+b.options.language+"&callback="+a));d.___GoogleMaps.done(function(){b._init()})},_init:function(){b.geocoder=new google.maps.Geocoder;b.hasGeolocation=void 0!==navigator.geolocation;b.hasGeolocation?b.autoDetectButton().show():b.autoDetectButton().remove();b.locationInput().autocomplete({delay:300,minLength:0,source:b.retrieveSuggestions,select:function(a,e){b.locationInput().autocomplete("close");b.setLocation(e.item.location)}}).prop("disabled",
!1);b.autocomplete=b.locationInput().autocomplete("widget");b.autocomplete.addClass("location-suggestion");var a=d.trim(b.options.initialLocation);a&&b.getLocationByAddress(a,function(a){b.setLocation(a[0])});b.busy(!1)},busy:function(a){b.locationInput().toggleClass("loading",a)},getUserLocations:function(a){b.getLocationAutomatically(function(c){b.userLocations=b.buildDataset(c);a&&a(c)})},getLocationByAddress:function(a,c){b.geocoder.geocode({address:a},c)},getLocationByCoords:function(a,c,e){b.geocoder.geocode({location:new google.maps.LatLng(a,
c)},e)},getLocationAutomatically:function(a,c){if(!navigator.geolocation)return c("ERRCODE","Browser does not support geolocation or do not have permission to retrieve location data.");navigator.geolocation.getCurrentPosition(function(c){b.getLocationByCoords(c.coords.latitude,c.coords.longitude,a)},c)},renderMap:function(a,c){b.busy(!0);b.locationMapWrapper().show();var e=new google.maps.Map(b.locationMap()[0],{zoom:15,center:a.geometry.location,mapTypeId:google.maps.MapTypeId[b.options.mapType],
disableDefaultUI:!0}),d=new google.maps.Marker({draggable:!0,position:a.geometry.location,center:a.geometry.location,title:a.formatted_address,map:e});if(b.showTip){var g=new google.maps.InfoWindow({content:c});google.maps.event.addListener(e,"tilesloaded",function(){g.open(e,d);b.busy(!1)})}google.maps.event.addListener(d,"dragend",function(a){b.getLocationByCoords(this.getPosition().lat(),this.getPosition().lng(),function(a){b.userLocations=b.buildDataset(a);b.suggestUserLocations()});b.locationLatitude().val(this.getPosition().lat());
b.locationLongitude().val(this.getPosition().lng());b.latitudeDisplay().html(this.getPosition().lat());b.longitudeDisplay().html(this.getPosition().lng())})},setLocation:function(a){a&&(b.locationResolved=!0,b.lastResolvedLocation=a,b.locationInput().val(a.formatted_address),b.locationLatitude().val(a.geometry.location.lat()),b.locationLongitude().val(a.geometry.location.lng()),b.latitudeDisplay().html(a.geometry.location.lat()),b.longitudeDisplay().html(a.geometry.location.lng()),b.renderMap(a,a.formatted_address),
b.trigger("locationSelected",[a]))},removeLocation:function(){b.locationResolved=!1;b.locationInput().val("");b.locationLatitude().val("");b.locationLongitude().val("");b.latitudeDisplay().html("");b.longitudeDisplay().html("");b.locationMapWrapper().hide();b.locationCoordinates().hide()},buildDataset:function(a){return d.map(a,function(a){return{label:a.formatted_address,value:a.formatted_address,location:a}})},retrieveSuggestions:function(a,c){b.busy(!0);var e=a.term,d=function(a){c(a);b.busy(!1)};
""==e?d(b.userLocations||[]):b.getLocationByAddress(e,function(a){d(b.buildDataset(a))})},suggestUserLocations:function(){b.hasGeolocation&&b.userLocations&&b.locationInput().autocomplete("search","");b.busy(!1)},"{locationInput} blur":function(){setTimeout(function(){var a=d.trim(b.locationInput().val());""==a?b.removeLocation():b.locationResolved?a!=b.lastResolvedLocation.formatted_address&&b.setLocation(b.lastResolvedLocation):b.removeLocation()},250)},"{self} locationSelected":function(a,c,e){b.locationCoordinates().show();
b.options.onLocationSelected&&b.options.onLocationSelected(e);b.viewStaticMap().attr("href",b.options.staticMap+encodeURIComponent(e.formatted_address))},"{cancelUpdateGeographic} click":function(){b.editGeographic().click()},"{editGeographic} click":function(){b.locationCoordinates().toggleClass("editMode")},"{updateGeographic} click":function(){b.editGeographic().click()},"{clearLocation} click":function(){b.removeLocation()},"{autoDetectButton} click":function(){b.busy(!0);b.hasGeolocation&&!b.userLocations?
b.getUserLocations(b.suggestUserLocations):b.suggestUserLocations()}}});EasySocial.Controller("Location.Map",{defaultOptions:{animation:"drop",language:"en",useStaticMap:!1,disableMapsUI:!0,showTip:!0,zoom:5,fitBounds:null,minZoom:null,maxZoom:null,center:null,locations:[],mapType:"ROADMAP",width:500,height:400,"{locationMap}":".locationMap","{locationMapWrapper}":".locationMapWrapper","{removeUserLocation}":".removeUserLocation",view:{deleteConfirmation:"site/location/delete.confirmation"}}},function(b){return{init:function(){b.mapLoaded=
!1;var a=d.uid("ext");window[a]=function(){d.___GoogleMaps.resolve()};if(!0==b.options.useStaticMap){var c="&language="+String(b.options.language),e="&size="+String(b.options.width)+"x"+String(b.options.height),a="&zoom="+String(b.options.zoom),f="&center="+String(parseFloat(b.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(b.options.locations[0].longitude).toFixed(6)),g="&maptype="+google.maps.MapTypeId[b.options.mapType],h="&markers=",c="http://maps.googleapis.com/maps/api/staticmap?sensor=false"+
c+e;if(1==b.options.locations.length)h+=String(parseFloat(b.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(b.options.locations[0].longitude).toFixed(6)),c+=a+f+g+h;else{var p=[];d.each(b.options.locations,function(a,b){p.push(String(parseFloat(b.latitude).toFixed(6))+","+String(parseFloat(b.longitude).toFixed(6)))});h+=p.join("|");c+=h+g}b.locationMap().html('<img src="'+c+'" />');b.locationMapWrapper().show();b.busy(!1)}else a=d.uid("ext"),window[a]=function(){d.___GoogleMaps.resolve()},
d.___GoogleMaps||(d.___GoogleMaps=d.Deferred(),EasySocial.require().script({prefetch:!1},"http://maps.googleapis.com/maps/api/js?sensor=true&language="+b.options.language+"&callback="+a)),d.___GoogleMaps.done(function(){b._init()})},_init:function(){null===b.options.fitBounds&&(b.options.fitBounds=1==b.options.locations.length?!1:!0);b.options.disableMapsUI=Boolean(b.options.disableMapsUI);b.locations=[];d.each(b.options.locations,function(a,c){"null"!=c.latitude&&"null"!=c.longitude&&b.locations.push(new google.maps.LatLng(c.latitude,
c.longitude))});0<b.locations.length&&b.renderMap();b.busy(!1)},busy:function(a){b.locationMap().toggleClass("loading",a)},renderMap:function(){b.busy(!0);b.locationMapWrapper().show();var a;a=b.options.center?new google.maps.LatLng(center.latitude,center.longitude):b.locations[0];b.map=new google.maps.Map(b.locationMap()[0],{zoom:parseInt(b.options.zoom),minZoom:parseInt(b.options.minZoom),maxZoom:parseInt(b.options.maxZoom),center:a,mapTypeId:google.maps.MapTypeId[b.options.mapType],disableDefaultUI:b.options.disableMapsUI});
google.maps.event.addListener(b.map,"tilesloaded",function(){!1==b.mapLoaded&&(b.mapLoaded=!0,b.loadLocations())})},loadLocations:function(){b.bounds=new google.maps.LatLngBounds;b.infoWindow=[];setTimeout(function(){d.each(b.locations,function(a,c){b.bounds.extend(c);setTimeout(function(){b.addMarker(c,b.options.locations[a])},100*(a+1))});b.options.fitBounds&&b.map.fitBounds(b.bounds)},500)},addMarker:function(a,c){if(a){var e=new google.maps.Marker({position:a,map:b.map});e.setAnimation(google.maps.Animation.DROP);
b.addInfoWindow(e,c)}},addInfoWindow:function(a,c){if(b.showTip){var e=c.content;e||(e=c.address);var f=new google.maps.InfoWindow;f.setContent(e);b.infoWindow.push(f);1<b.options.locations.length?google.maps.event.addListener(a,"click",function(){d.each(b.infoWindow,function(a,b){b.close()});f.open(b.map,a)}):(google.maps.event.addListener(a,"click",function(){f.open(b.map,a)}),f.open(b.map,a))}},"{removeUserLocation} click":function(){var a=b.element.data("id");content=b.view.deleteConfirmation({});
d.dialog({content:content,buttons:[{name:d.language("COM_EASYSOCIAL_YES_BUTTON"),click:function(){EasySocial.ajax("site/controllers/location/delete",{id:a},function(){d.dialog().close();b.element.remove()})}},{name:d.language("COM_EASYSOCIAL_CANCEL_BUTTON"),click:function(){d.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("site/privacy/privacy",function(d){var g=this;EasySocial.require().library("textboxlist").language("COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_PUBLIC","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_MEMBER",
"COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIENDS_OF_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_ONLY_ME","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_CUSTOM").done(function(b){EasySocial.Controller("Privacy",{defaultOptions:{"{menu}":"[data-privacy-menu]","{item}":"[data-privacy-item]","{icon}":"[data-privacy-icon]","{button}":"[data-privacy-toggle]","{tooltip}":"[data-original-title]","{key}":"[data-privacy-hidden]"}},function(a){return{init:function(){a.instanceId=
b.uid();a.addPlugin("custom")},getData:function(a){return b._.pick(a.data(),"uid","utype","value","pid","icon")},"{self} click":function(c,e){var d=b(e.target),g=a.button();0<d.parents().andSelf().filter(g).length&&a.toggle()},"{item} click":function(b){b=a.getData(b);a.trigger("privacyChange",[b]);b.preventSave||(a.save(b),a.deactivate())},"{self} privacyChange":function(b,e,d){a.item().removeClass("active").filter("[data-value="+d.value+"]").addClass("active")},toggle:function(){var b=a.element.hasClass("active");
a[b?"deactivate":"activate"]()},activate:function(){a.element.addClass("active");a.trigger("activate",[a]);b(window).trigger("activatePrivacy",[a]);var c="click.privacy."+a.instanceId;b(document).on(c,function(e){e=b(e.target);0<e.parents().andSelf().filter(a.element).length||0<e.parents("[data-textboxlist-autocomplete]").length||0<e.parents("[data-textboxlist-item]").length||(b(document).off(c),a.deactivate())})},deactivate:function(){a.element.removeClass("active");a.trigger("deactivate",[a]);b(window).trigger("deactivatePrivacy",
[a])},"{window} activatePrivacy":function(b,e,d){d!==a&&a.deactivate()},save:function(c){a.key().val(c.value);a.icon().attr("class",c.icon);a.trigger("privacySave",[c]);a.element.attr("data-original-title",b.language("COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_"+c.value.toUpperCase()));"ajax"==a.element.data("privacyMode")&&EasySocial.ajax("site/controllers/privacy/update",{uid:c.uid,utype:c.utype,value:c.value,pid:c.pid,custom:c.custom}).done(function(){}).fail(function(){})}}});EasySocial.Controller("Privacy.Custom",
{defaultOptions:{"{textField}":"[data-textfield]","{saveButton}":"[data-save-button]","{cancelButton}":"[data-cancel-button]","{customItem}":"[data-privacy-item][data-value=custom]","{customKey}":"[data-privacy-custom-hidden]"}},function(a){return{init:function(){a.textField().textboxlist({unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:1,cache:!1,query:function(b){var e=a.getIds();return EasySocial.ajax("site/views/privacy/getfriends",{q:b,exclude:e})}}}});a.textboxlist=a.textField().controller("TextboxList")},
getIds:function(){var c=a.textField().textboxlist("controller").getAddedItems();return b.map(c,function(a,b){return a.id})},updateIds:function(){var b=a.getIds();a.customKey().val(b.join(","))},"{parent} privacyChange":function(b,e,d){b="custom"==d.value;a.element.toggleClass("custom-privacy",b);b?d.preventSave=!0:a.textField().textboxlist("controller").clearItems()},"{parent} privacySave":function(a,b,d){},"{parent} deactivate":function(){a.textboxlist.autocomplete.hide()},"{cancelButton} click":function(){a.element.removeClass("custom-privacy");
a.textboxlist.autocomplete.hide()},"{saveButton} click":function(){var b=a.parent,e=a.customItem(),b=b.getData(e);b.custom=a.customKey().val();a.parent.save(b);a.parent.deactivate()},"{textField} addItem":function(){a.updateIds()},"{textField} removeItem":function(){a.updateIds()}}});b(document).on("click.es.privacy","[data-es-privacy-container]",function(){var a=b(this);a.hasController("EasySocial.Controller.Privacy")||a.addController("EasySocial.Controller.Privacy").toggle()});g.resolve()})});EasySocial.module("site/locations/popbox",
function(d){EasySocial.module("locations/popbox",function(d){this.resolve(function(b){var a=b.button;b=a.data("lat");a=a.data("lng");return{id:"es-wrap",type:"location",position:"bottom",content:'<a href="'+("//maps.google.com/?q="+b+","+a)+'" target="_blank"><img src="'+("//maps.googleapis.com/maps/api/staticmap?size=400x200&sensor=true&zoom=15&center="+b+","+a+"&markers="+b+","+a)+'" width="400" height="200" /></a>'}})});this.resolve()});EasySocial.module("site/sidebar/sidebar",function(d){d(function(){d("[data-sidebar-toggle]").on("click",
function(){var g=d("[data-sidebar]");g.toggleClass("sidebar-open");g.trigger("sidebarToggle")})});this.resolve()});EasySocial.module("locations",function(d){var g=this;EasySocial.require().library("gmaps").done();EasySocial.require().library("scrollTo").view("apps/user/locations/suggestion").language("COM_EASYSOCIAL_AT_LOCATION").done(function(){EasySocial.Controller("Locations",{defaultOptions:{view:{suggestion:"apps/user/locations/suggestion"},map:{lat:0,lng:0},"{textField}":"[data-location-textField]",
"{detectLocationButton}":"[data-detect-location-button]","{suggestions}":"[data-location-suggestions]","{suggestion}":"[data-story-location-suggestion]","{mapPreview}":"[data-location-map]","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]"}},function(b){return{init:function(){navigator.geolocation&&b.detectLocationButton().show();EasySocial.require().library("gmaps").done(function(){b.textField().removeAttr("disabled")})},navigate:function(a,c){var e=b.mapPreview(),d=b.map;void 0===
d&&(d=b.map=e.show().gmaps(b.options.map));d.setCenter(a,c);d.removeMarkers();d.addMarker({lat:a,lng:c})},locations:{},lastQueryAddress:null,"{textField} keypress":function(a,c){switch(c.keyCode){case 38:var e=d(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);b.suggestion().removeClass("active");e.addClass("active").trigger("activate");b.suggestions().scrollTo(e,{offset:-1*e.height()});c.preventDefault();break;case 40:e=d(b.suggestion(".active").next(b.suggestion.selector)[0]||
b.suggestion(":first")[0]);b.suggestion().removeClass("active");e.addClass("active").trigger("activate");b.suggestions().scrollTo(e,{offset:-1*e.height()});c.preventDefault();break;case 13:e=b.suggestion(".active").data("location"),b.set(e),b.suggestions().hide()}},"{textField} keyup":function(a,c){switch(c.keyCode){case 38:case 40:case 13:case 27:break;default:var e=d.trim(a.val());""===e&&b.suggestions().hide();if(e==b.lastQueryAddress)break;var f=b.locations[e];f?(b.suggest(f),b.lastQueryAddress=
e):b.lookup(e)}},lookup:d._.debounce(function(a){d.GMaps.geocode({address:a,callback:function(c,e){"OK"==e&&(b.locations[a]=c,b.suggest(c),b.lastQueryAddress=a)}})},250),suggest:function(a){var c=b.suggestions();c.hide().empty();d.each(a,function(a,d){b.view.suggestion({location:d}).data("location",d).appendTo(c)});c.show()},"{suggestion} activate":function(a,c){var e=a.data("location");b.navigate(e.geometry.location.lat(),e.geometry.location.lng())},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active");
a.addClass("active").trigger("activate")},"{suggestion} click":function(a,c){var e=a.data("location");b.set(e);b.suggestions().hide()},set:function(a){b.currentLocation=a;var c=a.formatted_address;b.textField().val(c);b.latitude().val(a.geometry.location.lat());b.longitude().val(a.geometry.location.lng());b.trigger("locationChange",[a])},"{detectLocationButton} click":function(){d.GMaps.geolocate({success:function(a){d.GMaps.geocode({lat:a.coords.latitude,lng:a.coords.longitude,callback:function(a,
e){"OK"==e&&(b.suggest(a),b.textField().focus())}})},error:function(a){},always:function(){}})},"{story} save":function(a,c,e){(a=b.currentLocation)&&e.addData(b,{short_address:a.address_components[0].long_name,formatted_address:a.formatted_address,lat:a.geometry.location.lat(),lng:a.geometry.location.lng()})},"{story} clear":function(){b.unset()}}});g.resolve()})});EasySocial.module("oauth/facebook",function(d){var g=this;EasySocial.require().done(function(){EasySocial.Controller("OAuth.Facebook",
{defaultOptions:{"{login}":"[data-oauth-facebook-login]","{revoke}":"[data-oauth-facebook-revoke]","{pushInput}":"[data-oauth-facebook-push]"}},function(b){return{init:function(){},openDialog:function(a){window.open(a,"","scrollbars=no,resizable=no,width=300,height=300,left="+(screen.width/2-150)+",top="+(screen.height/2-150))},"{pushInput} change":function(a){a=d(a).val();1==a&&b.options.requestPush&&b.openDialog(b.options.addPublishURL);0==a&&b.openDialog(b.options.revokePublishURL)},"{login} click":function(){b.openDialog(b.options.url)},
"{revoke} click":function(){var a=b.element.data("callback");EasySocial.dialog({content:EasySocial.ajax("site/views/oauth/confirmRevoke",{client:"facebook",callbackUrl:a})})}}});g.resolve()})});EasySocial.module("pagination",function(){var d=this;EasySocial.require().done(function(g){EasySocial.Controller("Pagination",{defaultOptions:{"{pages}":".pageItem","{limitstart}":"#limitstart","{previousItem}":".previousItem","{nextItem}":".nextItem"}},function(b){return{init:function(){b.pages().implement(EasySocial.Controller.Pagination.Page,
{pagination:b})},"{previousItem} click":function(a){var c=g(a).data("limitstart");g(a).hasClass("disabled")||b.submitForm(c)},"{nextItem} click":function(a){var c=g(a).data("limitstart");g(a).hasClass("disabled")||b.submitForm(c)},submitForm:function(a){b.limitstart().val(a);Joomla.submitform()}}});EasySocial.Controller("Pagination.Page",{defaultOptions:{pagination:null,limitstart:0}},function(b){return{init:function(){b.options.limitstart=b.element.data("limitstart")},"{self} click":function(){if(b.element.hasClass("active"))return!1;
b.options.pagination.submitForm(b.options.limitstart)}}});d.resolve()})});EasySocial.module("photos/avatar",function(d){var g=this;EasySocial.require().library("imgareaselect").stylesheet("imgareaselect/default").done(function(){EasySocial.Controller("Photos.Avatar",{defaultOptions:{view:{selection:"site/photos/avatar.selection"},redirect:!0,"{image}":"[data-photo-image]","{viewport}":"[data-photo-avatar-viewport]","{photoId}":"[data-photo-id]","{userId}":"[data-user-id]","{createButton}":"[data-create-button]",
"{selection}":"[data-selection-box]","{loadingIndicator}":"[data-photos-avatar-loading]"}},function(b){return{init:function(){b.setLayout()},data:function(){var a=b.viewport(),c=a.width(),e=a.height(),a=a.imgAreaSelect({instance:!0}).getSelection();return{id:b.photoId().val(),uid:b.userId().val(),top:a.y1/e,left:a.x1/c,width:a.width/c,height:a.height/e}},imageLoaders:{},setLayout:function(){var a=b.image(),c=d.uri(a.css("backgroundImage")).extract(0);(b.imageLoaders[c]||(b.imageLoaders[c]=d.Image.get(c))).done(function(c,
f){var g=d.Image.resizeWithin(f.width,f.height,a.width(),a.height()),h=Math.min(g.width,g.height),p=Math.floor((g.width-h)/2),s=Math.floor((g.height-h)/2),r=p+h,h=s+h;b.viewport().css(g).imgAreaSelect({handles:!0,aspectRatio:"1:1",parent:b.image(),x1:p,y1:s,x2:r,y2:h,onSelectEnd:function(a,c){var e=!("0"==c.width&&"0"==c.height);b.createButton().enabled(e)}})})},"{createButton} click":function(a){a=b.data();var c=EasySocial.ajax("site/controllers/photos/createAvatar",a).done(function(a,c,d){b.options.redirect&&
(window.location=d)}).fail(function(a,c){b.setMessage(a,c)});b.trigger("avatarCreate",[c,a,b])}}});g.resolve()})});EasySocial.module("photos/browser",function(d){var g=this;EasySocial.require().library("masonry").done();EasySocial.require().library("history").done(function(){EasySocial.Controller("Photos.Browser",{defaultOptions:{tilesPerRow:4,"{sidebar}":"[data-photo-browser-sidebar]","{content}":"[data-photo-browser-content]","{backButton}":"[data-photo-back-button]","{backButtonLink}":"[data-photo-back-button-link]",
"{listItemGroup}":"[data-photo-list-item-group]","{listItem}":"[data-photo-list-item]","{listItemLink}":"[data-photo-list-item] > a","{listItemTitle}":"[data-photo-list-item-title]","{listItemCover}":"[data-photo-list-item-cover]","{listItemImage}":"[data-photo-list-item-image]","{featuredListItem}":"[data-photo-list-item].featured","{featuredListItemImage}":"[data-photo-list-item].featured [data-photo-list-item-image]","{photoItem}":"[data-photo-item]"}},function(b){return{init:function(){d.module("masonry").done(function(){b.setLayout()})},
setLayout:function(){var a=b.listItemGroup().addClass("masonry"),c=b.setLayout.seed==a.width();hasPhotoItem=0<b.listItem().length;masonry=a.data("masonry");if(c)masonry&&masonry.reload();else{var a=b.listItemGroup(),e=b.listItem(),c=b.options.tilesPerRow,d=a.width(),c=Math.floor(d/c)*c/c,g=e.outerWidth(!0)-e.width(),h=e.outerHeight(!0)-e.height(),e=c-g,d=c-h,g=2*c-g,h=2*c-h;b.listItem.css({width:e,height:d});b.listItemImage.css({width:e,height:d});b.featuredListItem.css({width:g,height:h});b.featuredListItemImage.css({width:g,
height:h});a.masonry({columnWidth:c}).masonry("reload")}b.setLayout.seed=a.width()},open:function(a){var c=d.makeArray(arguments);b.trigger("contentLoad",c);var e="view"+d.String.capitalize(a),e=b[e].apply(b,c.slice(1));e.done(b.displayContent(function(){b.trigger("contentDisplay",c);return arguments})).fail(function(){b.trigger("contentFail",c)}).always(function(){b.trigger("contentComplete",c)});return e},displayContent:d.Enqueue(function(a){var c=[];a=d(d.buildFragment([a],document,c));b.content().html(a);
d(c).remove()}),viewPhoto:function(a){var c=b.listItem().removeClass("active loading").filterBy("photoId",a).addClass("active loading");return EasySocial.ajax("site/views/photos/item",{id:a,browser:!1}).fail(function(){}).always(function(){c.removeClass("loading")})},"{listItem} click":function(a){var c=a.data("photoId");b.open("Photo",c);a.find("> a").route()},"{listItemLink} click":function(a,b){b.preventDefault();a.blur()},"{backButtonLink} click":function(a,c){var e=b.browser;if(e){var d=b.element.data("albumId");
e.open("album",d);c.preventDefault();a.route()}},getListItem:function(a,c){var e=a?b.listItem().filterBy("photoId",a):b.listItem(".new");return c?e.find(b["listItem"+d.String.capitalize(c)].selector):e},getNextListItem:function(a){a=b.getListItem(a).next(b.listItem.selector);1>a.length&&(a=b.listItem(":first"));return a},getPrevListItem:function(a){a=b.getListItem(a).prev(b.listItem.selector);1>a.length&&(a=b.listItem(":last"));return a},removeListItem:function(a,c){var e=b.getListItem(a),d=b.getPrevListItem(a);
e.remove();b.setLayout();if(1>b.listItem().length)return b.element.addClass("loading"),window.location=b.backButtonLink().attr("href");c&&d.click()},"{photoItem} init.photos.item":function(a,c,e){b.addSubscriber(e)},"{photoItem} photoSave":function(a,c,e){e.done(function(a,c){b.getListItem(a.id,"title").html(a.title)})},"{photoItem} photoNext":function(a,c,e){b.getNextListItem(e.id).click()},"{photoItem} photoPrev":function(a,c,e){b.getPrevListItem(e.id).click()},"{photoItem} photoMove":function(a,
c,e,d,g){e.done(function(){b.removeListItem(d.id,!0)})},"{photoItem} photoDelete":function(a,c,e,d){e.done(function(){b.removeListItem(d.id,!0)})},"{photoItem} photoFeature":function(a,c,e,d,g){var h=b.getListItem(d.id);h.toggleClass("featured",g);b.setLayout();e.fail(function(){h.toggleClass("featured",!g);b.setLayout()})}}});g.resolve()})});EasySocial.module("photos/cover",function(d){var g=this;EasySocial.require().library("image").done(function(){EasySocial.Controller("Photos.Cover",{defaultOptions:{"{image}":"[data-cover-image]",
"{editButton}":"[data-cover-edit-button]","{doneButton}":"[data-cover-done-button]","{cancelButton}":"[data-cover-cancel-button]","{uploadButton}":"[data-cover-upload-button]","{selectButton}":"[data-cover-select-button]","{removeButton}":"[data-cover-remove-button]","{menu}":"[data-cover-menu]"}},function(b){return{init:function(){b.setLayout();b.element.hasClass("editing")&&b.enable()},"{window} resize":d.debounce(function(){b.setLayout()},250),"{editButton} click":function(){b.enable()},"{cancelButton} click":function(){b.disable()},
ready:!1,disabled:!0,toggle:function(){b[b.disabled?"enable":"disable"]()},enable:function(){b.setLayout();b.disabled=!1;b.element.addClass("editing")},disable:function(){b.disabled=!0;b.element.removeClass("editing");var a=d.uri(window.location.href).deleteQueryParam("cover_id").toString();History.pushState({state:0},window.title,a)},imageLoaders:{},setLayout:function(){var a=b.image(),c=b.setLayout.image,e=b.element.width()/3;b.element.height(e);if(c){var e=c.data("width"),f=c.data("height"),c=
a.width(),a=a.height(),e=d.Image.resizeProportionate(e,f,c,a,"outer");b.availableWidth=c-e.width;b.availableHeight=a-e.height}else if(a=d.uri(a.css("backgroundImage")).extract(0))e=b.imageLoaders,(e[a]||(e[a]=d.Image.get(a))).done(function(a){b.setLayout.image=a;b.setLayout()})},setCover:function(a,c){b.element.addClass("loading");d.Image.get(c).done(function(){b.image().data("photoId",a).css({backgroundImage:d.cssUrl(c),backgroundPosition:"50% 50%"});b.x=0.5;b.y=0.5;b.enable()}).fail(function(){b.disable()}).always(function(){b.element.removeClass("loading")})},
drawing:!1,moveCover:function(a,c,e){e||(e=b.image());var d=b.availableWidth,g=b.availableHeight;a=0==d?0:b.x+(a/d||0);c=0==g?0:b.y+(c/g||0);0>a&&(a=0);1<a&&(a=1);0>c&&(c=0);1<c&&(c=1);e.css("backgroundPosition",100*(b.x=a)+"% "+100*(b.y=c)+"% ")},x:0.5,y:0.5,"{image} mousedown":function(a,c){if(!b.disabled){c.target===b.image()[0]&&c.preventDefault();b.drawing=!0;b.element.addClass("active");var e=b.image(),f=b.image().css("backgroundPosition").split(" ");b.x=parseInt(f[0])/100;b.y=parseInt(f[1])/
100;var g=c.pageX,h=c.pageY;d(document).on("mousemove.movingCover mouseup.movingCover",function(a){b.drawing&&b.moveCover(-1*(g-(g=a.pageX)),-1*(h-(h=a.pageY)),e)}).on("mouseup.movingCover",function(){d(document).off("mousemove.movingCover mouseup.movingCover");b.element.removeClass("active")})}},save:function(){var a=b.image().data("photoId");return EasySocial.ajax("site/controllers/photos/createCover",{id:a,x:b.x,y:b.y}).done(function(a){b.element.css({backgroundImage:d.cssUrl(a.url),backgroundPosition:a.position}).removeClass("no-cover");
b.disable()})},"{doneButton} click":function(){b.save()},"{menu} dropdownOpen":function(){b.element.addClass("show-all")},"{menu} dropdownClose":function(){b.element.removeClass("show-all")},"{selectButton} click":function(){EasySocial.photos.selectPhoto({bindings:{"{self} photoSelected":function(a,c,e){if(a=e[0])b.setCover(a.id,a.sizes.large),this.parent.close()}}})},"{uploadButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/uploadCover"),bindings:{"{self} upload":function(a,
c,e,d){e.done(function(a){b.setCover(a.id,a.sizes.large.url)})}}})},"{removeButton} click":function(){EasySocial.ajax("site/controllers/photos/removeCover").done(function(a){b.element.css({backgroundImage:d.cssUrl(a),backgroundPosition:"50% 50%"}).addClass("no-cover");b.disable()})}}});g.resolve()})});EasySocial.module("photos/editor",function(d){var g=this;EasySocial.require().done(function(){var b=EasySocial.Controller("Photos.Editor",{defaultOptions:{view:{uploadItem:"upload.item",photoForm:"site/albums/photo.form"},
"{titleField}":"[data-photo-title-field]","{captionField}":"[data-photo-caption-field]","{location}":"[data-photo-location]","{locationCaption}":"[data-photo-location-caption]","{addLocationButton}":"[data-photo-addLocation-button]","{date}":"[data-photo-date]","{dateCaption}":"[data-photo-date-caption]","{addDateCaption}":"[data-photo-adddate-button]","{locationWidget}":".es-photo-location-form .es-location","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]","{dateDay}":"[name=date-day]",
"{dateMonth}":"[name=date-month]","{dateYear}":"[name=date-year]","{actionsMenu}":"[data-item-actions-menu]","{featureButton}":"[data-photo-feature-button]","{coverButton}":"[data-photo-cover-button]","{editButton}":"[data-photo-edit-button]","{editButtonLink}":"[data-photo-edit-button] > a","{doneButton}":"[data-photo-done-button]","{doneButtonLink}":"[data-photo-done-button] > a","{moveButton}":"[data-photo-move-button]","{deleteButton}":"[data-photo-delete-button]","{rotateLeftButton}":"[data-photo-rotateLeft-button]",
"{rotateRightButton}":"[data-photo-rotateRight-button]","{profileAvatarButton}":"[data-photo-profileAvatar-button]","{profileCoverButton}":"[data-photo-profileCover-button]"}},function(a){return{init:function(){},data:function(){return{id:a.photo.id,title:a.titleField().val(),caption:a.captionField().val(),date:a.formatDate(),address:a.locationCaption().html(),latitude:a.latitude().val(),longitude:a.longitude().val()}},save:function(){var b=a.data();a.clearMessage();b=EasySocial.ajax("site/controllers/photos/update",
b).done(function(b){a.photo.setLayout("item")}).fail(function(){a.setMessage(message,"error")}).progress(function(b,c){"success"==c&&a.setMessage(b)});a.trigger("photoSave",[b,a]);return b},enable:function(){a.photo.setLayout("form");a.photo.album&&a.element.addClass("active");a.trigger("enabled",[a])},disable:function(){a.photo.setLayout("item");a.photo.album&&a.element.removeClass("active");a.trigger("disabled",[a])},setImage:function(b){var e=a.photo.image();b=a.photo[b+"Image"]();var f=b.data("src"),
g=b.data("loader");g||(g=d.Image.get(f),b.data("loader",g));g.done(function(){e.css("backgroundImage","url("+f+")")});return g},"{featureButton} click":function(b,e){e.stopPropagation();var d=a.element.hasClass("featured");a.element.addTransitionClass("featuring",800).toggleClass("featured",!d);setTimeout(function(){a.setImage(d?"thumbnail":"featured")},1E3);var g=EasySocial.ajax("site/controllers/photos/feature",{id:a.photo.id}).done(function(a,e){b.toggleClass("btn-es-primary",e)}).fail(function(){a.element.addTransitionClass("featuring",
800).toggleClass("featured",d);setTimeout(function(){a.setImage(d?"featured":"thumbnail")},1E3)});a.trigger("photoFeature",[g,a.photo,!d])},"{coverButton} click":function(){var b=a.photo.album;b&&b.editor&&b.editor.setCover(a.photo.id)},"{dateDay} keyup":function(){a.updateDate()},"{dateMonth} change":function(){a.updateDate()},"{dateYear} keyup":function(){a.updateDate()},updateDate:function(){setTimeout(function(){a.date().addClass("has-data");var b=a.dateDay().val()+" "+d.trim(a.dateMonth().find(":selected").text()+
" "+a.dateYear().val());a.dateCaption().html(b)},1)},formatDate:function(){var b=a.dateDay().val()||a.dateDay().data("date-default"),e=a.dateMonth().val()||a.dateMonth().data("date-default");return(a.dateYear().val()||a.dateYear().data("date-default"))+"-"+e+"-"+b},"{locationWidget} locationChange":function(b,e,d){b=d.formatted_address;a.locationCaption().html(b);a.location().addClass("has-data")},rotate:function(b){var e=a.photo;e.content().addClass("loading");var f=EasySocial.ajax("site/controllers/photos/rotate",
{id:e.id,angle:b}).done(function(b){b=a.photo.album?b.sizes.thumbnail.url:b.sizes.large.url;e.image().css({backgroundImage:d.cssUrl(b)});a.element.addTransitionClass("rotating-ready",150).removeClass("rotating-right rotating-left")}).fail(function(b,c){a.setMessage(b,c)}).always(function(){e.content().removeClass("loading")});a.trigger("photoRotate",[f,b,e])},"{rotateRightButton} click":function(){a.element.addClass("rotating-right");a.rotate(90)},"{rotateLeftButton} click":function(){a.element.addClass("rotating-left");
a.rotate(-90)},"{moveButton} click":function(){var b=a.photo,e=EasySocial.dialog({content:EasySocial.ajax("site/views/photos/moveToAnotherAlbum",{id:b.id}),bindings:{"{moveButton} click":function(){var d=this.albumSelection().val(),g=EasySocial.ajax("site/controllers/photos/move",{id:b.id,albumId:d}).always(function(){e.close()});a.trigger("photoMove",[g,b,d])}}})},"{deleteButton} click":function(){var b=a.photo;EasySocial.dialog({content:EasySocial.ajax("site/views/photos/confirmDelete",{id:b.id}),
bindings:{"{deleteButton} click":function(e){var d=this.parent;e.disabled(!0);e=EasySocial.ajax("site/controllers/photos/delete",{id:b.id}).always(function(){d.close()});a.trigger("photoDelete",[e,b])}}})},"{editButton} click":function(){a.photo.setLayout("form");a.editButtonLink().route()},"{editButtonLink} click":function(a,b){b.preventDefault()},"{doneButton} click":function(){a.save().done(function(){a.photo.setLayout("item");a.doneButtonLink().route()}).fail(function(){})},"{doneButtonLink} click":function(a,
b){b.preventDefault()},"{profileAvatarButton} click":function(){EasySocial.photos.createAvatar(a.photo.id)}}});g.resolve(b)})});EasySocial.module("photos/item",function(d){var g=this;EasySocial.require().script("photos/tags","photos/editor","photos/tagger","photos/navigation").done();EasySocial.require().library("image").done(function(){var b=EasySocial.Controller("Photos.Item",{hostname:"photo",defaultOptions:{editable:!1,taggable:!1,navigation:!1,"{header}":"[data-photo-header]","{content}":"[data-photo-content]",
"{footer}":"[data-photo-footer]","{info}":"[data-photo-info]","{title}":"[data-photo-title]","{titleLink}":"[data-photo-title-link]","{caption}":"[data-photo-caption]","{image}":"[data-photo-image]","{imageLink}":"[data-photo-image-link]","{thumbnailImage}":"[data-photo-image-thumbnail]","{featuredImage}":"[data-photo-image-featured]","{largeImage}":"[data-photo-image-large]","{menu}":"[data-photo-menu]","{actions}":"[data-item-actions]","{actionsMenu}":"[data-item-actions-menu]","{comments}":"[data-comments]",
"{share}":"[data-repost-action]","{likes}":"[data-likes-action]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{counterBar}":"[data-stream-counter]","{privacy}":"[data-es-privacy-container]","{likeCount}":"[data-photo-like-count]","{commentCount}":"[data-photo-comment-count]","{tagCount}":"[data-photo-tag-count]"}},function(a){return{init:function(){a.id=a.element.data("photoId");EasySocial.module("photos/tags").done(function(b){a.tags=a.addPlugin("tags",b)});a.options.editable&&
EasySocial.module("photos/editor").done(function(b){a.editor=a.addPlugin("editor",b)});a.options.taggable&&EasySocial.module("photos/tagger").done(function(b){a.tagger=a.addPlugin("tagger",b)});a.options.navigation&&EasySocial.module("photos/navigation").done(function(b){a.navigation=a.addPlugin("navigation",b)})},data:function(){return{id:a.id,title:d.trim(a.title().text()),caption:d.trim(a.caption().text()),sizes:{thumbnail:a.thumbnailImage().data("src"),featured:a.featuredImage().data("src"),large:a.largeImage().data("src")}}},
setLayout:function(b){a.element.data("photoLayout",b).switchClass("layout-"+b);a.trigger("layoutChange",[b,a])},"{self} click":function(b,e){var f=d(e.target),g=a.menu();0<f.parents().andSelf().filter(g).length||a.trigger("activate",[a])},"{self} photoSave":function(b,e,d){d.done(function(b,c){a.info().replaceWith(c)})},"{self} photoDelete":function(b,e,d){d.done(function(){}).fail(function(b,c){a.setMessage(b,c)})},"{imageLink} click":function(a,b){b.preventDefault()},"{titleLink} click":function(a,
b){},"{self} dropdownOpen":function(){a.element.addClass("show-all")},"{self} dropdownClose":function(){a.element.removeClass("show-all")},"{share} create":function(b,e,d){a.counterBar().removeClass("hide")},"{likes} onLiked":function(b,e,d){a.counterBar().removeClass("hide");a.count("like",1,!0)},"{likes} onUnliked":function(b,e,d){b=a.likeContent().hasClass("hide");e=a.repostContent().hasClass("hide");b&&e&&a.counterBar().addClass("hide");a.count("like",-1,!0)},"{self} tagAdd":function(){a.count("tag",
1,!0)},"{self} tagRemove":function(){a.count("tag",-1,!0)},"{comments} newCommentSaved":function(){a.count("comment",1,!0)},"{comments} commentDeleted":function(){a.count("comment",-1,!0)},"{privacy} activate":function(){setTimeout(function(){a.element.addClass("show-all")},0)},"{privacy} deactivate":function(){a.element.removeClass("show-all")},count:function(b,e,f){b=a[b+"Count"];d.isFunction(b)&&(b=b(),0>b.length||(e=f?(parseInt(b.text())||0)+(parseInt(e)||0):e,0>e&&(e=0),b.text(e)))}}});g.resolve(b)})});
EasySocial.module("photos/tags",function(d){var g=this;EasySocial.require().library("scrollTo").done();EasySocial.require().done(function(){var b=EasySocial.Controller("Photos.Tags",{hostname:"tags",defaultOptions:{"{viewport}":"[data-photo-tag-viewport]","{tagItem}":"[data-photo-tag-item]","{tagButton}":"[data-photo-tag-button]","{tagListItemGroup}":"[data-photo-tag-list-item-group]","{tagListItem}":"[data-photo-tag-list-item]"}},function(a){return{init:function(){a.setLayout()},imageLoaders:{},
setLayout:function(b){var e=a.photo.image(),f=d.uri(e.css("backgroundImage")).extract(0);(a.imageLoaders[f]||(a.imageLoaders[f]=d.Image.get(f))).done(function(f,g){a.viewport().css(d.Image.resizeWithin(g.width,g.height,e.width(),e.height()));b&&b()})},getTagItem:function(b){return a.tagItem().filterBy("photoTagId",b)},getTagListItem:function(b){return a.tagListItem().filterBy("photoTagId",b)},getTaggedUsers:function(){var b=[];a.tagListItem("[data-photo-tag-uid]").each(function(){b.push(d(this).data("photoTagUid"))});
return d.uniq(b)},activateTag:function(b){a.getTagItem(b).addClass("active");a.getTagListItem(b).addClass("active")},deactivateTag:function(b){a.getTagItem(b).removeClass("active");a.getTagListItem(b).removeClass("active")},"{tagListItem} click":function(b){var e=(b.hasClass("active")?"deactivate":"activate")+"Tag";b=b.data("photoTagId");a[e](b)},"{tagListItem} mouseover":function(b){a.getTagItem(b.data("photoTagId")).addClass("focus")},"{tagListItem} mouseout":function(b){a.getTagItem(b.data("photoTagId")).removeClass("focus")},
"{self} tagRemove":function(b,e,d,g){d.done(function(){a.getTagItem(g).remove();a.getTagListItem(g).remove()})},"{self} photoRotate":function(b,e,f,g,h){f.done(function(b,c){setTimeout(function(){a.setLayout(function(){var b=a.tagItem();d.each(c,function(a,c){b.filterBy("photoTagId",c.id).css({width:100*c.width+"%",height:100*c.height+"%",top:100*c.top+"%",left:100*c.left+"%"})})})},1)})}}});g.resolve(b)})});EasySocial.module("photos/tagger",function(d){var g=this;EasySocial.require().library("scrollTo").done();
EasySocial.require().view("site/photos/tags.item","site/photos/tags.menu.item").done(function(){var b=EasySocial.Controller("Photos.Tagger",{hostname:"tagger",defaultOptions:{view:{tagItem:"site/photos/tags.item"},width:100,height:100,drawTolerance:30,"{viewport}":"[data-photo-tag-viewport]","{tagItem}":"[data-photo-tag-item]","{tagSelection}":"[data-photo-tag-item].new","{tagButton}":"[data-photo-tag-button]","{tagListItemGroup}":"[data-photo-tag-list-item-group]","{tagListItem}":"[data-photo-tag-list-item]",
"{tagRemoveButton}":"[data-photo-tag-remove-button]"}},function(a){return{init:function(){},newTagItem:function(){var b=a.viewport(),e=a.tagItem(".new");1>e.length&&(e=a.view.tagItem().addClass("new").appendTo(b),a.addSubscriber(e.addController("EasySocial.Controller.Photos.Tag")));return e},"{tagButton} click":function(b){a[b.data("photoTagButton")||"toggle"]()},disabled:!0,enable:function(){a.disabled=!1;a.element.addClass("tagging");d.scrollTo&&d.scrollTo(a.photo.content(),250,{offset:{top:-100}});
a.trigger("tagEnter")},disable:function(){a.tagSelection().remove();a.tagItem(".focus").removeClass("focus");a.disabled=!0;a.element.removeClass("tagging");a.trigger("tagLeave")},toggle:function(){a[a.disabled?"enable":"disable"]()},area:{},calculateArea:function(b,e){b||(b="clip");e||(e={x:0,y:0});var d=a.viewport(),g=d.offset();g.width=d.width();g.height=d.height();g.right=g.width+g.left;g.bottom=g.height+g.top;d=a.area;d.top=(d.startY<=d.endY?d.startY:d.endY)+e.y;d.left=(d.startX<=d.endX?d.startX:
d.endX)+e.x;d.width=Math.abs(d.endX-d.startX);d.height=Math.abs(d.endY-d.startY);d.right=d.width+d.left;d.bottom=d.height+d.top;"clip"==b&&(d.top<=g.top&&(d.top=g.top),d.bottom>=g.bottom&&(d.bottom=g.bottom),d.left<=g.left&&(d.left=g.left),d.right>=g.right&&(d.right=g.right),d.width=d.right-d.left,d.height=d.bottom-d.top);"flip"==b&&(d.top<=g.top&&(d.top=g.top),d.left<=g.left&&(d.left=g.left),d.right>=g.right&&(d.right=g.right,d.left=d.right-d.width),d.bottom>=g.bottom&&(d.bottom=g.bottom,d.top=d.bottom-
d.height));d.pixel={top:d.top-g.top,left:d.left-g.left,width:d.width,height:d.height};d.decimal={top:d.pixel.top/g.height,left:d.pixel.left/g.width,width:d.width/g.width,height:d.height/g.height};d.percentage={top:100*d.decimal.top+"%",left:100*d.decimal.left+"%",width:100*d.decimal.width+"%",height:100*d.decimal.height+"%"};g=a.options.drawTolerance;a.autodraw=d.width<g&&d.height<g;return d},setPivot:function(b,e,d){var g=a.area;g[b+"X"]=e;g[b+"Y"]=d},drawing:!1,autodraw:!1,drawTag:function(){var b=
a.calculateArea();options=a.options;a.autodraw&&(b.endX=b.startX+options.width,b.endY=b.startY+options.height,a.calculateArea("flip",{x:options.width/-2,y:options.height/-2}));a.newTagItem().css(b.percentage).trigger("focusInput")},"{viewport} mousedown":function(b,e){a.disabled||e.target!==b[0]||(e.preventDefault(),a.tagItem(".focus").removeClass("focus"),a.drawing=!0,a.setPivot("start",e.pageX,e.pageY),d(document).on("mousemove.tagger",function(b){a.drawing&&(a.setPivot("end",b.pageX,b.pageY),a.drawTag())}).on("mouseup.tagger",
function(b){a.setPivot("end",b.pageX,b.pageY);a.drawTag();d(document).off("mousemove.tagger mouseup.tagger")}))},createTag:function(b){b=d.extend({photo_id:a.photo.id},b,a.area.decimal);var e=EasySocial.ajax("site/controllers/photos/createTag",b);a.trigger("tagCreate",[e,b,a]);return e},removeTag:function(b){var e=EasySocial.ajax("site/controllers/photos/removeTag",{id:b});a.trigger("tagRemove",[e,b,a]);return e},addTag:function(b,e,f){e=d.buildHTML(e).addClass("focus").appendTo(a.viewport());f=d.buildHTML(f).appendTo(a.tagListItemGroup());
a.trigger("tagAdd",[b,e,f,a])},"{self} avatarEnter":function(){a.tagItem().hide();a.disable()},"{self} avatarLeave":function(){a.tagItem().show()},"{tagRemoveButton} click":function(b,e){var d=b.data("photoTagId");a.removeTag(d);e.stopPropagation()},"{tagRemoveButton} mouseover":function(){a.viewport().addClass("active")},"{tagRemoveButton} mouseout":function(){a.viewport().removeClass("active")}}});EasySocial.Controller("Photos.Tag",{defaultOptions:{view:{menuItem:"site/photos/tags.menu.item"},"{form}":"[data-photo-tag-form]",
"{title}":"[data-photo-tag-title]","{removeButton}":"[data-photo-tag-remove-button]","{textField}":"[data-photo-tag-input]","{menu}":"[data-photo-tag-menu]","{menuItem}":"[data-photo-tag-menu-item]"}},function(a){return{init:function(){a.data=a.options.data},"{self} focusInput":function(){a.textField().focus()},"{textField} keyup":d._.debounce(function(b,e){var f=d.trim(a.textField().val());switch(e.keyCode){case 38:case 40:case 13:case 27:break;default:var g=a.tagger.photo.tags.getTaggedUsers();
EasySocial.ajax("site/controllers/friends/suggestPhotoTagging",{search:f,exclude:g,includeme:"1"}).done(a.render())}},250),"{textField} keypress":function(b,e){var f=d.trim(a.textField().val()),g=a.menuItem(".active");switch(e.keyCode){case 38:a.menuItem().removeClass("active");1>g.length?a.menuItem(":last").addClass("active"):g.prev(a.menuItem.selector).addClass("active");e.preventDefault();break;case 40:a.menuItem().removeClass("active");1>g.length?a.menuItem(":first").addClass("active"):g.next(a.menuItem.selector).addClass("active");
e.preventDefault();break;case 13:0<g.length?g.trigger("click"):a.create({type:"label",label:f});a.menu().hide();break;case 27:a.menu().hide()}},"{menuItem} mouseover":function(b){a.menuItem().removeClass("active");b.addClass("active")},"{menuItem} mouseout":function(b){a.menuItem().removeClass("active")},render:d.Enqueue(function(b){var e=a.menu();!b||1>b.length?e.hide():(e.empty(),d.each(b,function(b,c){a.view.menuItem({item:c}).data("item",c).appendTo(e);e.show()}))}),create:function(b){var e=a.element;
a.data=b;a.title().html(b.label);""!==d.trim(b.label)&&a.tagger.createTag(b).done(function(b,c,e){a.tagger.addTag(b,c,e);a.element.remove()}).fail(function(){e.remove()})},remove:function(){var b=a.element,e=(a.data||{}).id;if(!e)return b.remove();a.tagger.removeTag(e).done(function(){b.remove()})},"{menuItem} click":function(b){b=b.data("item");a.create({uid:b.id,type:"person",label:b.screenName})},"{removeButton} click":function(){a.remove()}}});g.resolve(b)})});EasySocial.module("photos/navigation",
function(d){d.fn.intersectsWith=function(b,a,c,e){var d=this.offset(),d={top:d.top,left:d.left,bottom:d.top+(sourceHeight=this.height()),right:d.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight};b={top:b,left:a,bottom:b+(e||(e=0)),right:a+(c||(c=0)),width:c,height:e};return d.left<=b.right&&b.left<=d.right&&d.top<=b.bottom&&b.top<=d.bottom?{reference:d,subject:b}:!1};var g=EasySocial.Controller("Photos.Navigation",{hostname:"navigation",defaultOptions:{"{navButton}":".es-photo-nav-button",
"{nextButton}":"[data-photo-next-button]","{prevButton}":"[data-photo-prev-button]"}},function(b){return{init:function(){},disabled:!1,disable:function(){b.disabled=!0},enable:function(){b.disabled=!1},"{window} mousemove":function(a,c){if(!(b.disabled||(b.currentDirection=null,b.navButton().removeClass("active"),1>d(c.target).parents().filter(b.photo.content.selector).length))){var e=b.photo.content().intersectsWith(c.pageY,c.pageX);e&&(e=e.subject.left<e.reference.right-e.reference.width/2?"prev":
"next",b[e+"Button"]().addClass("active"),b.currentDirection=e)}},"{self} tagEnter":function(){b.disable()},"{self} tagLeave":function(){b.enable()},"{self} click":function(a,c){if(!(b.disabled||1>d(c.target).parents().filter(b.photo.content.selector).length)){var e=b.currentDirection;e&&b.trigger("photo"+d.String.capitalize(e),[b.photo])}},"{self} photoNext":function(){},"{self} photoPrev":function(){}}});this.resolve(g)});EasySocial.module("privacy",function(d){var g=this;EasySocial.require().library("dialog").view("admin/profiles/form.privacy.custom.item").done(function(b){EasySocial.Controller("Profiles.Form.Privacy",
{defaultOptions:{path:"admin","{selection}":".privacySelection","{browseButton}":".browseButton","{userDeleteButton}":".userDeleteButton","{customContainer}":".customContainer",view:{customItem:"admin/profiles/form.privacy.custom.item"}}},function(a){return{init:function(){},"{selection} change":function(c,e){var d=b(c).val();b(c).attr("name");"custom"==d?a.customContainer().show():a.customContainer().hide()},"{userDeleteButton} click":function(a,e){b(a).parents("li").remove()},"{browseButton} click":function(c,
e){var d=b(c).attr("id"),g=b(c).data("index"),h=b.rootPath+"administrator/index.php?option=com_easysocial&view=users&layout=listing&show=iframe";"site"==a.options.path&&(h=b.rootPath+"index.php?option=com_easysocial&view=friends&layout=listing&show=iframe");b.dialog({title:"Browse Users & Groups",content:h,body:{css:{width:400,height:300}},buttons:[{name:"Assign",click:function(){var c=b(".foundryDialog").find("iframe").contents().find("input:checked");if(0<c.length)for(var e=0;e<c.length;e++)if("toggle"!=
b(c[e]).attr("name")){var h=b(c[e]).val(),n=b(".foundryDialog").find("iframe").contents().find('input[name="user_'+h+'"]').val(),q=b("ul#privacy_ul"+g+" input:hidden"),t=!0;if(0<q.length)for(var m=0;m<q.length;m++)if(b(q[m]).val()==h){t=!1;break}t&&(html=a.view.customItem({userName:n,eleName:d,userId:h}),b("ul#privacy_ul"+g).append(html))}b.dialog().close()}},{name:"Close",click:function(){b.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("sharing",function(d){var g=this;EasySocial.require().library("textboxlist").done(function(){EasySocial.Controller("Sharing",
{defaultOptions:{"{vendors}":"[data-sharing-vendor]","{emailForm}":"[data-sharing-email]"}},function(b){return{init:function(){b.initLinks();b.initEmail()},initLinks:function(){d.each(b.vendors(),function(a,b){b=d(b);if(!b.data("loaded")){var e=b.attr("href");b.data("href",e);b.attr("href","javascript:void(0);");b.attr("loaded",!0)}})},initEmail:function(){d.each(b.emailForm(),function(a,c){c=d(c);c.data("loaded")||(b.addPlugin("email"),c.attr("loaded",!0))})},"{vendors} click":function(a,b){var e=
a.data("options")||"";window.open(a.data("href"),"",e)}}});d.template("sharing/recipientContent",'[%= title %]<input type="hidden" name="items" value="[%= title %]" />');EasySocial.Controller("Sharing.Email",{defaultOptions:{token:"","{container}":"[data-sharing-email]","{frames}":"[data-sharing-email-frame]","{recipients}":"[data-sharing-email-recipients]","{input}":"[data-sharing-email-input]","{content}":"[data-sharing-email-content]","{send}":"[data-sharing-email-send]","{frames}":"[data-sharing-email-frame]",
"{frameForm}":"[data-sharing-email-form]","{frameSending}":"[data-sharing-email-sending]","{frameDone}":"[data-sharing-email-done]","{frameFail}":"[data-sharing-email-fail]","{failMsg}":"[data-sharing-email-fail-msg]"}},function(b){return{init:function(){b.options.token=b.container().data("token");b.recipients().textboxlist({view:{itemContent:"sharing/recipientContent"}});b.originalPosition=b.container().css("position")},getRecipients:function(){var a=b.recipients().controller("textboxlist").getAddedItems(),
c=[];d.each(a,function(a,b){c.push(b.title)});a=b.input().val();1>c.length&&!d.isEmpty(a)&&c.push(a);return c},getContent:function(){return b.content().val()},"{send} click":function(a,c){if(a.enabled()){a.disabled(!0);b.frames().hide();b.frameSending().show();var e=b.options.token,d=b.getRecipients(),g=b.getContent();b.submitForm(e,d,g).done(function(){b.frames().hide();b.frameDone().show();setTimeout(function(){b.recipients().controller("textboxlist").clearItems();b.content().val("");b.frameDone().hide();
b.frameForm().show()},1E3)}).fail(function(a){b.frames().hide();b.frameFail().show();b.frameForm().show();void 0!==a&&b.failMsg().html(a)}).always(function(){a.enabled(!0)})}},"{input} keypress":function(a,c){if(44===c.which)return b.recipients().controller("textboxlist").addItem(a.val()),a.val(""),!1},submitForm:function(a,b,e){return EasySocial.ajax("site/controllers/sharing/send",{token:a,recipients:b,content:e})}}});g.resolve()})});EasySocial.module("site/activities/activities",function(d){var g=
this;EasySocial.require().script("site/activities/sidebar","site/activities/sidebar.item").view("site/loading/small").done(function(b){EasySocial.Controller("Activities",{defaultOptions:{items:null,"{container}":"[data-activities]","{contentTitle}":"[data-activities-content-title]","{content}":"[data-activities-content]","{sidebar}":"[data-activities-sidebar]","{sidebarItem}":"[data-sidebar-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Activities.Sidebar,
{"{parent}":a});a.sidebarItem().implement(EasySocial.Controller.Activities.Sidebar.Item,{"{parent}":a})},updatingContents:function(){a.content().html(a.view.loadingContent())},updateContent:function(b,e){a.content().html(b);a.contentTitle().html(e)}}});g.resolve()})});EasySocial.module("site/activities/sidebar",function(d){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Activities.Sidebar",{defaultOptions:{"{menuItem}":"[data-sidebar-menu]"}},function(a){return{init:function(){},
"{menuItem} click":function(c,e){a.menuItem().removeClass("active");b(c).addClass("active")}}});g.resolve()})});EasySocial.module("site/activities/sidebar.item",function(d){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Activities.Sidebar.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(b,e){var d=a.element.data("type"),g=a.element.data("url"),h=a.element.data("title");a.element.data("description");History.pushState({state:1},
h,g);a.parent.updatingContents();EasySocial.ajax("site/controllers/activities/getActivities",{type:d}).done(function(b){a.parent.updateContent(b,h)}).fail(function(a){console.log(a)});a.parent.updateContent()}}});g.resolve()})});EasySocial.module("site/activities/apps",function(d){var g=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY").done(function(b){EasySocial.Controller("Activities.Apps.List",{defaultOptions:{"{item}":"[data-hidden-app-item]",
view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Activities.Apps.Item)}}});EasySocial.Controller("Activities.Apps.Item",{defaultOptions:{id:"",context:"","{unhideLink}":"[data-hidden-app-unhide]","{content}":"[data-hidden-app-content]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.context=a.element.data("context")},"{unhideLink} click":function(){EasySocial.ajax("site/controllers/activities/unhideapp",
{context:a.options.context,id:a.options.id}).done(function(){a.content().html(b.language("COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY"))}).fail(function(a){console.log(a)})}}});g.resolve()})});EasySocial.module("site/activities/item",function(d){var g=this;EasySocial.require().script().done(function(b){EasySocial.Controller("Activities.Item",{defaultOptions:{"{toggle}":"[data-activity-toggle]","{deleteBtn}":"[data-activity-delete]"}},function(a){return{init:function(){},"{toggle} click":function(c,
e){EasySocial.ajax("site/controllers/activities/toggle",{id:a.element.data("id"),curState:a.element.data("current-state")}).done(function(e,d){b(c).text(e);a.element.data("current-state",d);d?a.element.children("div.es-stream").addClass("isHidden"):a.element.children("div.es-stream").removeClass("isHidden")}).fail(function(a){console.log(a)})},"{deleteBtn} click":function(){var b=a.element.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/activities/confirmDelete"),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/activities/delete",
{id:b}).done(function(b){a.element.fadeOut();EasySocial.dialog().close()})}}})}}});g.resolve()})});EasySocial.module("site/activities/list",function(d){var g=this;EasySocial.require().view("site/loading/small").script("site/activities/item").done(function(b){b.fn.visible=function(a){var c=b(this),e=b(window),d=e.scrollTop(),e=d+e.height(),g=c.offset().top,c=g+c.height();return(!0===a?g:c)<=e&&(!0===a?c:g)>=d};EasySocial.Controller("Activities.List",{defaultOptions:{"{item}":"[data-activity-item]",
"{pagination}":"[data-activity-pagination]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Activities.Item);a.on("scroll.activities",window,b._.debounce(function(){a.loading||a.pagination().visible()&&a.loadMore()},250))},loadMore:function(){var c=b("[data-sidebar-menu].active").data("type"),e=a.pagination().data("startlimit");""!=e&&(a.loading=!0,EasySocial.ajax("site/controllers/activities/getActivities",{limitstart:e,loadmore:"1",
type:c},{beforeSend:function(){a.pagination().html(a.view.loadingContent())}}).done(function(b,c){a.pagination().data("startlimit",c);a.pagination().before(b);a.item().implement(EasySocial.Controller.Activities.Item)}).fail(function(a){return a}).always(function(){a.loading=!1;a.pagination().html("")}))}}});g.resolve()})});EasySocial.module("site/apps/apps",function(d){var g=this;EasySocial.require().library("history").view("site/loading/small").done(function(b){EasySocial.Controller("Apps",{defaultOptions:{requireTerms:!0,
"{content}":"[data-apps-listing]","{sort}":"[data-apps-sort]","{filter}":"[data-apps-filter]","{item}":"[data-apps-item]","{sorting}":"[data-apps-sorting]","{title}":"[data-page-apps-title]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.initAppItem()},initAppItem:function(){a.item().implement(EasySocial.Controller.Apps.Item,{requireTerms:a.options.requireTerms})},"{filter} click":function(c,e){a.sort().removeClass("active");a.filter().removeClass("active");b(c).addClass("active");
var d=b(c).data("apps-filter-type"),g=b(c).data("apps-filter-url"),h=b(c).data("apps-title");a.title().html(h);a.options.filter=d;History.pushState({state:1},"",g);"mine"==d?a.sorting().hide():a.sorting().show();EasySocial.ajax("site/controllers/apps/getApps",{filter:d},{beforeSend:function(){a.sort(".alphabetical").addClass("active");a.content().html(a.view.loading())}}).done(function(b){a.content().html(b);a.initAppItem()})},"{sort} click":function(c,e){var d=b(c).data("apps-sort-type"),g=b(c).data("apps-sort-url");
History.pushState({state:1},"",g);a.sort().removeClass("active");b(c).addClass("active");EasySocial.ajax("site/controllers/apps/getApps",{sort:d,filter:a.options.filter},{beforeSend:function(){a.content().html(a.view.loading())}}).done(function(b){a.content().html(b);a.initAppItem()})}}});EasySocial.Controller("Apps.Item",{defaultOptions:{id:null,requireTerms:!0,"{install}":"[data-apps-item-install]","{installed}":"[data-apps-item-installed]","{settings}":"[data-apps-item-settings]",view:{installAppForm:"site/apps/dialog.install",
uninstallAppForm:"site/apps/dialog.uninstall"}}},function(a){return{init:function(){a.element.data("id")&&(a.options.id=a.element.data("id"))},"{install} click":function(b){EasySocial.dialog({content:EasySocial.ajax("site/views/apps/getTnc"),bindings:{"{cancelButton} click":function(){EasySocial.dialog().close()},"{installButton} click":function(){!a.options.requireTerms||this.agreeCheckbox().is(":checked")?(this.termsError().hide(),a.installApp()):this.termsError().show()}}})},installApp:function(){var b=
EasySocial.ajax("site/controllers/apps/installApp",{id:a.options.id});EasySocial.dialog({content:b,bindings:{"{closeButton} click":function(){EasySocial.dialog().close()}}});b.done(function(){a.install().enabled(!0);a.install().hide();a.installed().show();a.settings().hide()})},"{settings} click":function(b,e){EasySocial.dialog({content:EasySocial.ajax("site/views/apps/settings",{id:a.options.id}),bindings:{}})},"{installed} click":function(b){b.enabled()&&(b.disabled(!0),EasySocial.dialog({content:EasySocial.ajax("site/views/apps/confirmUninstall"),
bindings:{"{parent.closeButton} click":function(){a.installed().enabled(!0)},"{cancelButton} click":function(){a.installed().enabled(!0);EasySocial.dialog().close()},"{uninstallButton} click":function(){a.uninstallApp()}}}))},uninstallApp:function(){var b=EasySocial.ajax("site/controllers/apps/uninstallApp",{id:a.options.id});EasySocial.dialog({content:b,bindings:{"{closeButton} click":function(){EasySocial.dialog().close()}}});b.done(function(){a.installed().enabled(!0);a.installed().hide();a.settings().hide();
a.install().show()})}}});g.resolve()})});EasySocial.module("site/badges/badge",function(d){EasySocial.Controller("Badges.Badge",{defaultOptions:{id:0,total:0,"{achieversList}":"[data-badge-achievers-list]","{achiever}":"[data-badge-achievers-achiever]","{loadIndicator}":"[data-badge-achievers-loading]","{loadButton}":"[data-badge-achievers-load]"}},function(d){return{init:function(){d.options.id=d.element.data("id");d.options.total=d.element.data("total-achievers")},"{loadButton} click":function(b){var a=
d.achiever().length;b.enabled()&&a<d.options.total&&(b.disabled(!0),b.hide(),d.loadIndicator().show(),EasySocial.ajax("site/controllers/badges/loadAchievers",{id:d.options.id,start:a}).done(function(a){d.achieversList().append(a);b.enabled(!0);d.loadIndicator().hide();d.achiever().length<d.options.total&&b.show()}).fail(function(a){}))},loadAchievers:function(){}}});this.resolve()});EasySocial.module("site/comments/control",function(d){var g=this;EasySocial.Controller("CommentsControl",{defaultOptions:{interval:30}},
function(b){return{init:function(){b.startUpdate()},$Blocks:{},startUpdate:function(){b.options.monitoring=!0;b.updateBlocks()},stopUpdate:function(){b.options.monitoring=!1},updateBlocks:function(){(b.updateBlocks=d._.debounce(function(){var a=b.populate();if(!b.options.monitoring)return!1;EasySocial.ajax("site/controllers/comments/getUpdates",{data:a}).done(function(a){d.each(a,function(a,c){d.each(c,function(c,d){var f=b.$Blocks[a][c];f._destroyed||f.updateComment(d)})})}).always(function(){b.updateBlocks()})},
1E3*b.options.interval))()},register:function(a){var c=a.options.uid,e=a.options.element+"."+a.options.group;void 0===b.$Blocks[e]&&(b.$Blocks[e]={});b.$Blocks[e][c]=a;a.trigger("commentBlockRegistered")},populate:function(){var a={};d.each(b.$Blocks,function(b,e){a[b]={};d.each(e,function(e,d){a[b][e]=d._export()})});return a}}});EasySocial.ready(function(){EasySocial.Comments=d("body").addController("EasySocial.Controller.CommentsControl");g.resolve()})});EasySocial.module("site/comments/frame",
function(d){var g=this;EasySocial.require().library("expanding").script("site/comments/item").language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL","COM_EASYSOCIAL_COMMENTS_STATUS_SAVING","COM_EASYSOCIAL_COMMENTS_STATUS_SAVED").done(function(){EasySocial.Controller("Comments",{defaultOptions:{group:"user",element:"stream",uid:0,url:"","{actionContent}":"[data-action-contents-comments]","{actionLink}":"[data-stream-action-comments]","{stat}":"[data-comments-stat]","{load}":"[data-comments-load]","{list}":"[data-comments-list]",
"{item}":"[data-comments-item]","{form}":"[data-comments-form]"}},function(b){return{init:function(){b.options.uid=b.element.data("uid")||b.options.uid;b.options.element=b.element.data("element")||b.options.element;b.options.group=b.element.data("group")||b.options.group;b.options.url=b.element.data("url")||b.options.url;b.$Stat=b.addPlugin("stat");b.$Load=b.addPlugin("load");b.$List=b.addPlugin("list");b.$Form=b.addPlugin("form");EasySocial.require().script("site/comments/control").done(function(){EasySocial.Comments.register(b)});
b.trigger("commentInit",[b])},$Comments:{},registerComment:function(a){b.$Comments[a.options.id]=a},"{actionLink} click":function(){b.actionContent().toggle()},_export:function(){return{total:b.$Stat.total(),count:b.$Stat.count(),ids:d._.keys(b.$Comments)}},updateComment:function(a){var c=[];d.each(a.ids,function(a,f){if(!0!==f)if(!1===f)b.trigger("commentDeleted",[a]);else{var g=!1;d.each(b.$Comments,function(c,d){if(c>a)return b.$List.addToList(f,c,!1),g=!0,!1});g||b.$List.addToList(f,"append",
!1);c.push(f)}});b.$Stat.total(a.total);b.trigger("oldCommentsLoaded",[c])}}});EasySocial.Controller("Comments.List",{defaultOptions:{"{list}":"[data-comments-list]","{item}":"[data-comments-item]"}},function(b){return{init:function(){b.initItemController(b.item(),!1)},initItemController:function(a,c){a.addController("EasySocial.Controller.Comments.Item",{controller:{parent:b.parent},isNew:c});return a},"{parent} newCommentSaved":function(a,c,e){b.addToList(e)},addToList:function(a,c,e){c=void 0===
c?"append":c;e=void 0===e?!0:e;a=d(a);b.initItemController(a,e);if("append"==c||"prepend"==c)if(e="append"==c?":last":":first",c="append"==c?"after":"before",0===b.item().length)b.list().html(a);else b.item(e)[c](a);else c=b.parent.$Comments[c],void 0!==c&&c.element.before(a);b.parent.actionContent().show()},"{parent} commentDeleted":function(a,c,e){void 0!==b.parent.$Comments[e]&&(b.parent.$Comments[e].element.remove(),delete b.parent.$Comments[e])}}});EasySocial.Controller("Comments.Stat",{defaultOptions:{"{stats}":"[data-comments-stats]",
count:0,total:0,limit:10}},function(b){return{init:function(){b.options.count=b.element.data("count");b.options.total=b.element.data("total")},total:function(a){void 0!==a&&(b.options.total=parseInt(a),b.stats().text(d.language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL",b.count(),b.total())));return b.options.total},count:function(a){void 0!==a&&(b.options.count=parseInt(a),b.stats().text(d.language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL",b.count(),b.total())));return b.options.count},getNextCycle:function(){var a=
Math.max(b.total()-b.count()-b.options.limit,0),c=b.total()-b.count()-a;return{start:a,limit:c}},"{parent} oldCommentsLoaded":function(a,c,e){a=e.length;b.count(b.count()+a)},"{parent} newCommentSaved":function(){b.total(b.total()+1);b.count(b.count()+1)},"{parent} commentDeleted":function(){b.total(b.total()-1);b.count(b.count()-1)}}});EasySocial.Controller("Comments.Load",{defaultOptions:{"{load}":"[data-comments-load]","{loadMore}":"[data-comments-load-loadMore]"}},function(b){return{init:function(){},
"{loadMore} click":function(a,c){if(a.enabled()){a.disabled(!0);var e=b.parent.$Stat.getNextCycle();if(0==e.limit)return!1;b.loadComments(e.start,e.limit).done(function(c){var g=c.slice().reverse();d.each(g,function(a,c){b.parent.$List.addToList(c,"prepend",!1)});b.parent.trigger("oldCommentsLoaded",[c]);a.enabled(!0);0==e.start&&b.load().hide()}).fail(function(a){b.parent.trigger("oldCommentsLoadError",[a])})}},loadComments:function(a,c){return EasySocial.ajax("site/controllers/comments/load",{uid:b.parent.options.uid,
element:b.parent.options.element,group:b.parent.options.group,start:a,length:c||10})}}});EasySocial.Controller("Comments.Form",{defaultOptions:{"{input}":"[data-comments-form-input]","{submit}":"[data-comments-form-submit]","{status}":"[data-comments-form-status]"}},function(b){return{init:function(){var a=b.input();a.one("click",function(){a.expandingTextarea()})},"{input} keypress":function(a,c){13!=c.keyCode||c.shiftKey||c.altKey||c.ctrlKey||c.metaKey||b.submitComment()},"{submit} click":function(a,
c){a.enabled()&&b.submitComment()},submitComment:function(){var a=b.input().val();if(""==d.trim(a))return!1;b.parent.trigger("newCommentSaving");b.save().done(function(a){b.parent.trigger("newCommentSaved",[a]);b.submit().enabled(!0)}).fail(function(a){b.parent.trigger("newCommentSaveError",[a.message])})},save:function(){var a={url:b.parent.options.url};return EasySocial.ajax("site/controllers/comments/save",{uid:b.parent.options.uid,element:b.parent.options.element,group:b.parent.options.group,
input:b.input().val(),data:a})},disableForm:function(){b.input().attr("disabled",!0);b.submit().disabled(!0)},enableForm:function(){b.input().removeAttr("disabled");b.submit().enabled(!0)},"{parent} newCommentSaving":function(){b.status().show();b.status().removeClass("label-important label-success label-info");b.status().addClass("label-info");b.status().text(d.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVING"));b.disableForm()},"{parent} newCommentSaved":function(){b.status().show();b.status().text(d.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVED"));
b.status().removeClass("label-important label-success label-info");b.status().addClass("label-success");setTimeout(function(){b.status().fadeOut("fast")},2E3);b.enableForm();b.input().val("");b.input().expandingTextarea("resize")},"{parent} newCommentSaveError":function(a,c,e){b.status().show();b.status().removeClass("label-important label-success label-info");b.status().addClass("label-important");b.status().text(e);b.enableForm()}}});g.resolve()})});EasySocial.module("site/comments/item",function(d){var g=
this;EasySocial.require().language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_LOADING","COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_DELETING","COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR","COM_EASYSOCIAL_LIKES_LIKE","COM_EASYSOCIAL_LIKES_UNLIKE").done(function(){EasySocial.Controller("Comments.Item",{defaultOptions:{id:0,isNew:!1,"{frame}":"[data-comments-item-frame]","{avatar}":"[data-comments-item-avatar]","{commentFrame}":"[data-comments-item-commentFrame]",
"{author}":"[data-comments-item-author]","{action}":"[data-comments-item-actions]","{edit}":"[data-comments-item-actions-edit]","{delete}":"[data-comments-item-actions-delete]","{spam}":"[data-comments-item-actions-spam]","{comment}":"[data-comments-item-comment]","{meta}":"[data-comments-item-meta]","{date}":"[data-comments-item-date] a","{like}":"[data-comments-item-like]","{likeCount}":"[data-comments-item-likeCount]","{editFrame}":"[data-comments-item-editFrame]","{editInput}":"[data-comments-item-edit-input]",
"{editSubmit}":"[data-comments-item-edit-submit]","{editStatus}":"[data-comments-item-edit-status]","{statusFrame}":"[data-comments-item-statusFrame]"}},function(b){return{init:function(){b.options.id=b.element.data("id");b.parent.registerComment(b);b.status=b.element.addController("EasySocial.Controller.Comments.Item.Status",{controller:{parent:b.parent,item:b}})},"{like} click":function(a){a.enabled()&&(a.disabled(!0),b.likeComment().done(function(c,e,f){a.enabled(!0);b.likeCount().text(e);f=d("<div></div>").html(f).text();
b.likeCount().attr("data-original-title",f);b.like().find("a").text(d.language(c?"COM_EASYSOCIAL_LIKES_UNLIKE":"COM_EASYSOCIAL_LIKES_LIKE"))}).fail(function(){}))},likeComment:function(){return EasySocial.ajax("site/controllers/comments/like",{id:b.options.id})},"{likeCount} click":function(){EasySocial.dialog({content:b.getLikedUsers()})},getLikedUsers:function(){return EasySocial.ajax("site/controllers/comments/likedUsers",{id:b.options.id})},"{edit} click":function(a){a.enabled()&&(a.disabled(!0),
b.trigger("commentEditLoading",[b.options.id]),b.getRawComment().done(function(a){b.trigger("commentEditLoaded",[b.options.id],a);b.editInput().val(a);b.editInput().focus();b.editInput().expandingTextarea()}).fail(function(a){b.trigger("commentEditLoadError",[b.options.id,a])}))},getRawComment:function(){return EasySocial.ajax("site/controllers/comments/getRawComment",{id:b.options.id})},"{editInput} keyup":function(a,c){if(13==c.which||27==c.which){switch(c.which){case 13:c.shiftKey||c.ctrlKey||
c.altKey||c.metaKey||b.submitEdit();break;case 27:b.trigger("commentEditCancel",[b.options.id])}b.edit().enabled(!0)}},"{editSubmit} click":function(){b.submitEdit()},submitEdit:function(){var a=d.trim(b.editInput().val());if(""==a)return!1;b.trigger("commentEditSaving",[b.options.id,a]);b.saveEdit(a).done(function(a){b.trigger("commentEditSaved",[b.options.id,a]);b.comment().html(a);b.edit().enabled(!0)}).fail(function(a){b.trigger("commentEditSaveError",[b.options.id,a])})},saveEdit:function(a){return EasySocial.ajax("site/controllers/comments/update",
{id:b.options.id,input:a})},"{delete} click":function(a){a.enabled()&&(a.disabled(!0),b.frame().hide(),b.commentFrame().show(),b.element.clone(),EasySocial.dialog({content:EasySocial.ajax("site/views/comments/confirmDelete",{id:b.options.id}),selectors:{"{deleteButton}":"[data-delete-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{deleteButton} click":function(){EasySocial.dialog().close();b.parent.trigger("commentDeleting",[b.options.id]);b.trigger("commentDeleting");b.deleteComment().done(function(){b.parent.trigger("commentDeleted",
[b.options.id]);a.enabled(!0)}).fail(function(a){b.parent.trigger("commentDeleteError",[b.options.id,a]);b.trigger("commentDeleteError",[b.options.id,a])})},"{cancelButton} click":function(){EasySocial.dialog().close();a.enabled(!0)}}}))},deleteComment:function(){return EasySocial.ajax("site/controllers/comments/delete",{id:b.options.id})}}});EasySocial.Controller("Comments.Item.Status",{defaultOptions:{"{frame}":"[data-comments-item-frame]","{statusFrame}":"[data-comments-item-statusFrame] div",
"{commentFrame}":"[data-comments-item-commentFrame]","{editFrame}":"[data-comments-item-editFrame]"}},function(b){return{init:function(){},setStatus:function(a){b.frame().hide();b.statusFrame().html(a);b.statusFrame().show()},"{self} commentEditLoading":function(){b.setStatus(d.language("COM_EASYSOCIAL_COMMENTS_STATUS_LOADING"))},"{self} commentEditLoaded":function(){b.frame().hide();b.editFrame().show()},"{self} commentEditLoadError":function(){b.setStatus(d.language("COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR"))},
"{self} commentEditCancel":function(){b.frame().hide();b.commentFrame().show()},"{self} commentEditSaving":function(){b.setStatus(d.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVING"))},"{self} commentEditSaved":function(){b.frame().hide();b.commentFrame().show()},"{self} commentEditSaveError":function(){b.setStatus(d.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR"))},"{self} commentDeleting":function(){b.setStatus(d.language("COM_EASYSOCIAL_COMMENTS_STATUS_DELETING"))},"{self} commentDeleteError":function(a,
c,e,f){f=f||d.language("COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR");b.setStatus(f)}}});g.resolve()})});EasySocial.module("site/conversations/api",function(d){var g=this;EasySocial.require().library("dialog").done(function(){d(document).on("click.es.conversations.compose","[data-es-conversations-compose]",function(){var b=d(this).data("es-conversations-id");EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/composer",{id:b}),bindings:{"{sendButton} click":function(){var a=d("[data-composer-recipient]").val(),
c=d("[data-composer-message]").val();EasySocial.ajax("site/controllers/conversations/store",{uid:a,message:c}).done(function(a){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sent",{id:b}),bindings:{"{viewButton} click":function(){document.location=a}}})}).fail(function(a){self.setMessage(a)})}}})});g.resolve()})});EasySocial.module("site/conversations/conversations",function(d){var g=this;EasySocial.require().script("site/conversations/mailbox","site/conversations/item","site/conversations/filter").language("COM_EASYSOCIAL_NO_BUTTON").done(function(b){EasySocial.Controller("Conversations",
{defaultOptions:{"{mailbox}":"[data-conversations-mailbox]","{list}":"[data-conversations-list]","{content}":"[data-conversations-content]","{item}":"[data-conversations-item]","{actions}":"[data-conversations-actions]","{filterItem}":"[data-conversations-filter]","{checkAll}":"[data-conversations-checkAll]","{checkbox}":"[data-conversationItem-checkbox]","{delete}":"[data-conversations-delete]","{archive}":"[data-conversations-archive]","{unarchive}":"[data-conversations-unarchive]","{unread}":"[data-conversations-unread]",
"{read}":"[data-conversations-read]"}},function(a){return{init:function(){a.mailbox().implement(EasySocial.Controller.Conversations.Mailbox,{"{parent}":a});a.item().implement(EasySocial.Controller.Conversations.Item,{"{parent}":a});a.filterItem().implement(EasySocial.Controller.Conversations.Filter,{"{parent}":a})},"{filterItem} click":function(c){a.filterItem().removeClass("active");b(c).addClass("active")},"{checkbox} change":function(b){if(0>=a.checkbox(":checked").length&&!b.is(":checked"))return a.actions().removeClass("is-checked");
a.actions().addClass("is-checked")},"{checkAll} click":function(c){if(0>=a.checkbox().length)return b(c).prop("checked",!1),!1;c.is(":checked")?a.checkbox(":not(:checked)").click():a.checkbox(":checked").click()},showEmpty:function(){a.content().addClass("is-empty")},hideEmpty:function(){a.content().removeClass("is-empty")},toggleLoading:function(){a.content().removeClass("is-empty").toggleClass("is-loading")},updateContent:function(b,e){void 0!=e?a.content().addClass("layout-"+e):a.content().removeClass("layout-archives");
a.actions().removeClass("is-checked");a.checkAll().removeAttr("checked");a.list().html(b)},getSelectedConversations:function(){if(0>=a.checkbox(":checked").length)return!1;var c=[];a.checkbox(":checked").each(function(a,d){c.push(b(d).val())});return c},"{archive} click":function(){var c=a.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmArchive",{ids:c}),bindings:{"{confirmButton} click":function(){b("[data-conversation-archive-form]").submit()}}})},
"{unarchive} click":function(){var c=a.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmUnarchive",{ids:c}),bindings:{"{confirmButton} click":function(){b("[data-conversation-archive-form]").submit()}}})},"{delete} click":function(){var c=a.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDelete",{ids:c}),bindings:{"{deleteButton} click":function(){b("[data-conversation-delete-form]").submit()}}})},
"{read} click":function(){if(0>=a.checkbox(":checked").length)return!1;var c=[];a.checkbox(":checked").each(function(a,d){c.push(b(d).val())});EasySocial.ajax("site/controllers/conversations/markRead",{ids:c}).done(function(){a.checkbox().parents("[data-conversations-item]").removeClass("unread").addClass("read");a.mailbox().controller().updateCounters()}).fail(function(b){a.setMessage(b)})},"{unread} click":function(){if(0>=a.checkbox(":checked").length)return!1;var c=[];a.checkbox(":checked").each(function(a,
d){c.push(b(d).val())});EasySocial.ajax("site/controllers/conversations/markUnread",{ids:c}).done(function(){a.checkbox().parents("[data-conversations-item]").removeClass("read").addClass("unread");a.mailbox().controller().updateCounters()}).fail(function(a){console.log(a)})}}});g.resolve()})});EasySocial.module("site/conversations/mailbox",function(d){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Conversations.Mailbox",{defaultOptions:{"{item}":"[data-mailboxItem]"}},
function(a){return{init:function(){a.item().implement(EasySocial.Controller.Conversations.Mailbox.Item,{"{parent}":a})},updateCounters:function(){a.item(".active").controller().updateCounter()},updateContent:function(b,e){a.parent.updateContent(b,e)},showEmpty:function(){a.parent.showEmpty()},hideEmpty:function(){a.parent.hideEmpty()},toggleLoading:function(){a.parent.toggleLoading()}}});EasySocial.Controller("Conversations.Mailbox.Item",{defaultOptions:{"{counter}":"[data-mailboxItem-counter]",view:{emptyTemplate:"site/conversations/default.item.empty"}}},
function(a){return{init:function(){},updateCounter:function(){EasySocial.ajax("site/controllers/conversations/getCount",{mailbox:a.element.data("mailbox")}).done(function(b){0>=b?a.counter().html(""):a.counter().html("("+b+")")})},toggleLoading:function(){a.element.toggleClass("loading")},"{self} click":function(){var b=a.element.data("url"),e=a.element.data("title"),d=a.element.data("mailbox");a.parent.item().removeClass("active");a.element.addClass("active");History.pushState({state:1},e,b);EasySocial.ajax("site/views/conversations/getItems",
{mailbox:d,limitstart:0},{beforeSend:function(){a.toggleLoading();a.parent.toggleLoading()}}).done(function(b,c){a.toggleLoading();a.parent.toggleLoading();if(0>=b.length)return a.parent.updateContent(""),a.parent.showEmpty();a.parent.hideEmpty();a.parent.updateContent(b,a.element.data("mailbox"))})}}});g.resolve()})});EasySocial.module("site/conversations/item",function(d){var g=this;EasySocial.require().script("site/conversations/mailbox").done(function(b){EasySocial.Controller("Conversations.Item",
{defaultOptions:{"{checkbox}":"[data-conversationItem-checkbox]"}},function(a){return{init:function(){},"{checkbox} change":function(c){return b(c).is(":checked")?a.element.addClass("selected"):a.element.removeClass("selected")}}});g.resolve()})});EasySocial.module("site/conversations/filter",function(d){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Conversations.Filter",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(){var c=a.element.data("filter");
a.parent.item("."+c);if(1==b("[data-mailboxitem]").filter(".active").length){var e=b("[data-mailboxitem]").filter(".active"),d=e.data("url"),g=e.data("title"),h=e.data("mailbox");History.pushState({state:1},g,d);EasySocial.ajax("site/views/conversations/getItems",{mailbox:h,filter:c,limitstart:0},{beforeSend:function(){a.parent.toggleLoading()}}).done(function(b,c){a.parent.toggleLoading();if(0>=b.length)return a.parent.updateContent(""),a.parent.showEmpty();a.parent.hideEmpty();a.parent.updateContent(b,
h)})}}}});g.resolve()})});EasySocial.module("site/conversations/read",function(d){var g=this;EasySocial.require().library("dialog").script("site/conversations/composer","site/friends/suggest").language("COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY","COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY").done(function(b){EasySocial.Controller("Conversations.Read",{defaultOptions:{id:"",attachments:!0,location:!1,maxSize:"3mb",extensionsAllowed:"",attachmentController:null,composerController:null,
"{item}":"[data-readConversation-item]","{items}":"[data-readConversation-items]","{composer}":"[data-readConversation-composer]","{replyButton}":"[data-readConversation-replyButton]","{addParticipant}":"[data-readConversation-addParticipant]","{leaveConversation}":"[data-readConversation-leaveConversation]","{delete}":"[data-readConversation-delete]","{attachments}":"[data-uploaderQueue-id]","{replyNotice}":"[data-readConversation-replyNotice]","{readLoadMore}":"[data-readconversation-load-more]",
view:{messageItem:"site/conversations/read.message"}}},function(a){return{init:function(){a.composer().implement(EasySocial.Controller.Conversations.Composer,{"{uploader}":"[data-readConversation-attachment]","{location}":"[data-readConversation-location]",maxSize:a.options.maxSize,extensionsAllowed:a.options.extensionsAllowed});a.options.composerController=a.composer().controller();a.options.attachments&&(a.options.attachmentController=a.options.composerController.uploader().controller());a.options.location&&
(a.options.locationController=a.options.composerController.location().controller());a.item().implement(EasySocial.Controller.Conversations.Read.Item);a.options.id=a.element.data("id")},resetForm:function(){a.options.composerController.resetForm();a.options.location&&a.options.locationController.removeLocation();a.options.attachments&&a.options.attachmentController.reset()},"{readLoadMore} click":function(c){var e=b(c).data("id"),d=b(c).data("limitstart");a.readLoadMore().hide();b(".loading-indicator").show();
EasySocial.ajax("site/controllers/conversations/loadPrevious",{id:e,limitstart:d}).done(function(e,d){b.buildHTML(e).prependTo(a.items()).addController("EasySocial.Controller.Conversations.Read.Item");0==d?a.readLoadMore().hide():(a.readLoadMore().show(),b(c).data("limitstart",d))}).always(function(){b(".loading-indicator").hide()})},"{replyButton} click":function(c,e){e.preventDefault();var d=a.options.composerController.editor().val(),g=[];if(0>=d.length)return a.replyNotice().html(b.language("COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY")).addClass("alert alert-error").removeClass("alert-success"),
!1;a.options.attachments&&a.attachments().each(function(a,c){g.push(b(c).val())});d={id:a.options.id,message:d};a.options.attachments&&(d["upload-id"]=g);a.options.location&&(d.address=a.options.locationController.locationInput().val(),d.latitude=a.options.locationController.locationLatitude().val(),d.longitude=a.options.locationController.locationLongitude().val());a.replyButton().attr("disabled",!0);EasySocial.ajax("site/controllers/conversations/reply",d).done(function(c){a.replyNotice().html(b.language("COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY")).addClass("alert alert-success").removeClass("alert-error");
c=b(c);c.implement(EasySocial.Controller.Conversations.Read.Item);a.items().append(c);a.resetForm()}).always(function(){a.replyButton().attr("disabled",!1)});return!1},"{leaveConversation} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmLeave",{id:a.options.id})})},"{addParticipant} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/addParticipantsForm",{id:a.options.id})})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDelete",
{ids:[a.options.id]}),bindings:{"{deleteButton} click":function(){b("[data-conversation-delete-form]").submit()}}})},addItem:function(b){a.messageList().append(a.view.messageItem({item:b}));a.textMessage().val("").focus()}}});EasySocial.Controller("Conversations.Read.Item",{defaultOptions:{id:null,"{attachmentsWrapper}":"[data-conversation-attachment-wrapper]","{attachments}":"[data-conversation-attachment]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.attachments().implement(EasySocial.Controller.Conversations.Read.Item.Attachment,
{"{parent}":a})},removeAttachment:function(c,e){b(c).remove();0==a.attachments().length&&a.attachmentsWrapper().hide()}}});EasySocial.Controller("Conversations.Read.Item.Attachment",{defaultOptions:{"{deleteAttachment}":"[data-attachment-delete]"}},function(a){return{init:function(){},"{deleteAttachment} click":function(c,e){var d=b(c).data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDeleteAttachment",{id:d}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/conversations/deleteAttachment",
{id:d}).done(function(){a.parent.removeAttachment(a.element);EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/attachmentDeleted",{})})}).fail(function(b){a.setMessage(b)})}}})}}});g.resolve()})});EasySocial.module("site/dashboard/apps",function(d){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Dashboard.Apps",{defaultOptions:{parent:null,pageTitle:null,"{item}":"[data-dashboardApps-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Dashboard.Apps.Item,
{"{parent}":a,"{dashboard}":a.parent,pageTitle:a.options.pageTitle})}}});EasySocial.Controller("Dashboard.Apps.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(c,e){e.preventDefault();var d=a.element.data("layout"),g=a.element.data(d+"-url"),h=a.element.data("title"),p=a.element.data("description"),s=a.element.data("id");"canvas"==d?window.location=g:(h=b._.isEmpty(a.options.pageTitle)?h:a.options.pageTitle,History.pushState({state:1},h,g),a.dashboard.content().html(""),
a.dashboard.updatingContents(),a.element.addClass("loading"),EasySocial.ajax("site/controllers/dashboard/getAppContents",{appId:s}).done(function(b){a.dashboard.updateHeading(h,p);a.dashboard.updateContents(b)}).fail(function(a){return a}).always(function(){a.element.removeClass("loading")}))}}});g.resolve()})});EasySocial.module("site/dashboard/dashboard",function(d){var g=this;EasySocial.require().script("site/dashboard/apps","site/dashboard/feeds","site/dashboard/sidebar").done(function(b){EasySocial.Controller("Dashboard",
{defaultOptions:{"{heading}":"[data-dashboard-heading]","{sidebar}":"[data-dashboard-sidebar]","{content}":"[data-dashboard-real-content]","{feeds}":"[data-dashboard-feeds]","{apps}":"[data-dashboard-apps]"}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Dashboard.Sidebar,{"{parent}":a});a.feeds().implement(EasySocial.Controller.Dashboard.Feeds,{"{parent}":a});a.apps().implement(EasySocial.Controller.Dashboard.Apps,{"{parent}":a,pageTitle:a.options.pageTitle})},updateHeading:function(b,
e){a.heading().find("[data-heading-title]").html(b);a.heading().find("[data-heading-desc]").html(e)},updatingContents:function(){a.element.addClass("loading")},updateContents:function(b){a.element.removeClass("loading");a.content().html(b)}}});g.resolve()})});EasySocial.module("site/dashboard/feeds",function(d){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Dashboard.Feeds",{defaultOptions:{"{item}":"[data-dashboardFeeds-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Dashboard.Feeds.Item,
{"{parent}":a,"{dashboard}":a.parent})}}});EasySocial.Controller("Dashboard.Feeds.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(){b(".es-streams").removeClass("no-stream");var c=a.element.data("type"),e=a.element.data("id"),d=a.element.data("url"),g=a.element.data("title"),h=a.element.data("description");a.element.removeClass("has-notice");History.pushState({state:1},g,d);a.dashboard.content().html("");a.dashboard.updatingContents();a.element.addClass("loading");
EasySocial.ajax("site/controllers/dashboard/getStream",{type:c,id:e,view:"dashboard"}).done(function(c,e){a.dashboard.updateHeading(g,h);0==e&&b(".es-streams").addClass("no-stream");a.dashboard.updateContents(c)}).fail(function(a){return a}).always(function(){a.element.removeClass("loading")})}}});g.resolve()})});EasySocial.module("site/dashboard/sidebar",function(d){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Dashboard.Sidebar",{defaultOptions:{"{menuItem}":"[data-dashboardSidebar-menu]"}},
function(a){return{init:function(){},"{menuItem} click":function(c,e){a.menuItem().removeClass("active");b(c).addClass("active")}}});g.resolve()})});EasySocial.module("site/followers/api",function(d){var g=this;EasySocial.require().library("dialog","popbox").done(function(){d(document).on("click.es.followers.follow","[data-es-followers-follow]",function(){var b=d(this),a=b.data("es-followers-id"),c=d.Deferred();b.popbox({content:c,id:"es-wrap",type:"followers",toggle:"click"});b.popbox("show");EasySocial.ajax("site/controllers/profile/follow",
{id:a,type:"user"}).done(function(b){EasySocial.ajax("site/views/profile/popboxFollow",{id:a}).done(function(a){c.resolve(a)})})});d(document).on("click.es.followers.unfollow","[data-es-followers-unfollow]",function(){var b=d(this),a=b.data("es-followers-id"),c=d.Deferred();b.popbox({content:c,id:"es-wrap",type:"followers",toggle:"click"});b.popbox("show");EasySocial.ajax("site/controllers/profile/unfollow",{id:a,type:"user"}).done(function(b){EasySocial.ajax("site/views/profile/popboxUnfollow",{id:a}).done(function(a){c.resolve(a)})})});
g.resolve()})});EasySocial.module("site/followers/followers",function(d){var g=this;EasySocial.require().view("site/loading/small").script("site/conversations/composer").done(function(b){EasySocial.Controller("Followers",{defaultOptions:{"{content}":"[data-followers-content]","{filter}":"[data-followers-filter]","{items}":"[data-followers-item]","{followingCounter}":"[data-following-count]",view:{loader:"site/loading/small"}}},function(a){return{init:function(){a.initItemController()},initItemController:function(){a.items().implement(EasySocial.Controller.Followers.Item,
{"{parent}":a})},updateFollowingCounter:function(b){var e=a.followingCounter().html();b=parseInt(e)+b;a.followingCounter().html(b)},updateContents:function(b){a.content().html(b)},"{filter} click":function(b,e){var d=b.data("followers-filter-type"),g=b.data("followers-filter-title"),h=b.data("followers-filter-id"),p=b.data("followers-filter-url");a.filter().removeClass("active");b.addClass("active");History.pushState({state:1},g,p);EasySocial.ajax("site/controllers/followers/filter",{id:h,type:d}).done(function(b){a.updateContents(b);
a.initItemController()})}}});EasySocial.Controller("Followers.Item",{defaultOptions:{"{unfollowButton}":"[data-followers-item-unfollow]","{composer}":"[data-followers-item-compose]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.initComposer()},initComposer:function(){a.composer().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id}})},"{unfollowButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/followers/confirmUnfollow",
{id:a.options.id}),bindings:{"{unfollowButton} click":function(){EasySocial.ajax("site/controllers/followers/unfollow",{id:a.options.id}).done(function(){a.parent.updateFollowingCounter(-1);a.element.remove();EasySocial.dialog().close()})}}})}}});g.resolve()})});EasySocial.module("site/friends/api",function(d){var g=this;EasySocial.require().library("dialog","popbox").done(function(){d(document).on("click.es.friends.cancel","[data-es-friends-cancel]",function(){var b=d(this).data("es-friends-id");
EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancel"),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:b}).done(function(){EasySocial.dialog().close()})}}})});d(document).on("click.es.friends.add","[data-es-friends-add]",function(){var b=d(this),a=b.data("es-friends-id"),c=d.Deferred();b.popbox({content:c,id:"es-wrap",type:"friends",toggle:"click"});b.popbox("show");EasySocial.ajax("site/controllers/friends/request",
{viewCallback:"popboxRequest",id:a}).done(function(a){c.resolve(a)})});g.resolve()})});EasySocial.module("site/friends/friends",function(d){var g=this;EasySocial.require().script("site/friends/list","site/friends/item","site/friends/suggest","site/conversations/composer").view("site/loading/small","site/friends/default.empty","site/friends/list.assign").done(function(b){EasySocial.Controller("Friends.Birthday",{defaultOptions:{"{messageButton}":"[data-upcoming-birthday-message-button]"}},function(a){return{init:function(){a.options.id=
a.element.data("id");a.options.name=a.element.data("name");a.options.avatar=a.element.data("avatar");a.messageButton().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id,name:a.options.name,avatar:a.options.avatar}})}}});EasySocial.Controller("Friends",{defaultOptions:{activeList:null,"{friendList}":"[data-friends-list]","{content}":"[data-friends-content]","{friendItems}":"[data-friends-items]","{friendItem}":"[data-friends-item]","{emptyList}":"[data-friends-emptyItems]",
"{activeTitle}":"[data-friends-activeTitle]","{filterItem}":"[data-friends-filter]","{friendListActions}":"[data-friendList-actions]","{addFriendToList}":"[data-friends-add]","{friendsCounter}":"[data-total-friends]","{pendingCounter}":"[data-total-friends-pending]","{suggestionCounter}":"[data-total-friends-suggestion]","{requestCount}":"[data-frields-request-sent-count]",view:{loader:"site/loading/small",emptyFriendItems:"site/friends/default.empty",addUserForm:"site/friends/list.assign"}}},function(a){return{init:function(){a.friendList().implement(EasySocial.Controller.Friends.List,
{"{parent}":a});a.initFriendItems()},initFriendItems:function(){a.friendListActions().implement(EasySocial.Controller.Friends.List.Actions,{"{parent}":a});a.friendItem().implement(EasySocial.Controller.Friends.Item,{"{parent}":a})},updateFriendsCounter:function(){EasySocial.ajax("site/controllers/friends/getCounters").done(function(b,e,d,g){a.friendsCounter().html(b);a.pendingCounter().html(e);a.requestCount().html(d);a.suggestionCounter().html(g)})},updateListCounters:function(){EasySocial.ajax("site/controllers/friends/getListCounts",
{}).done(function(a){b(a).each(function(a,c){b("[data-list-"+c.id+"]").controller().updateCounter(c.count)})})},insertItem:function(c){a.emptyList().hide();a.updateListCounters();b(c).implement(EasySocial.Controller.Friends.Item,{"{parent}":a}).prependTo(a.friendItems())},removeItem:function(b){a.friendItem("[data-friendItem-"+b+"]").remove();0>=a.friendItem().length&&a.emptyList().show();a.updateListCounters()},updateFriendRequestCount:function(b){curCount=parseInt(a.requestCount().text(),10);NaN!=
curCount&&(curCount+=b,a.requestCount().text(curCount))},updateContent:function(b){a.content().html(b);a.initFriendItems()},removeActiveFilter:function(){a.filterItem().removeClass("active")},"{filterItem} click":function(b,e){var d=b.data("filter"),g=b.data("title"),h=b.data("userid"),p=b.data("url");0<a.friendList().length&&a.friendList().controller().removeActiveList();a.filterItem().removeClass("active");b.addClass("active");History.pushState({state:1},g,p);b.addClass("loading");EasySocial.ajax("site/controllers/friends/filter",
{filter:d,userid:h}).done(function(b){a.updateContent(b)}).always(function(){b.removeClass("loading")})}}});g.resolve()})});EasySocial.module("site/friends/list",function(d){var g=this;EasySocial.require().view("site/loading/small").library("history").script("site/friends/suggest").done(function(b){EasySocial.Controller("Friends.List",{defaultOptions:{parent:null,"{item}":"[data-friends-listItem]","{items}":"[data-friends-listItems]","{loadMoreButton}":".loadMoreButton","{loadMore}":".loadMore",view:{loader:"site/loading/small",
items:"site/friends/default.lists"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Friends.List.Item,{"{parent}":a})},removeActiveList:function(){a.item().removeClass("active")},setDefault:function(b){a.item().removeClass("default");a.item(".item-"+b).addClass("default")},"{item} click":function(c){var e=b(c).data("title"),d=b(c).data("url");History.pushState({state:1},e,d);a.parent.removeActiveFilter();a.item().removeClass("active");a.item(c).addClass("active");e=b(c).data("id");
a.parent.options.activeList=e;EasySocial.ajax("site/controllers/friends/getListFriends",{id:e},{beforeSend:function(){b(c).addClass("loading")}}).done(function(e){b(c).removeClass("loading");a.parent.updateContent(e)})},"{loadMoreButton} click":function(){var b=a.loadMoreButton().data("limitstart");a.loadMore().html(a.view.loader());EasySocial.ajax("site/controllers/friends/getLists",{limitstart:b}).done(function(b){a.loadMore().hide();a.view.items({items:b}).appendTo(a.items())})}}});EasySocial.Controller("Friends.List.Item",
{defaultOptions:{id:null,"{counter}":"[data-list-counter]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},updateCounter:function(b){a.counter().html(b)}}});EasySocial.Controller("Friends.List.Actions",{defaultOptions:{"{delete}":"[data-friendListActions-delete]","{add}":"[data-friendListActions-add]","{default}":"[data-friendListActions-default]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.title=a.element.data("title");a.options.userId=
a.element.data("userid")},"{default} click":function(){EasySocial.ajax("site/controllers/friends/setDefault",{id:a.options.id}).done(function(){a.parent.friendList().controller().setDefault(a.options.id)})},"{add} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/assignList",{id:a.options.id}),bindings:{"{insertButton} click":function(){var c=this.suggest().textboxlist("controller").getAddedItems();EasySocial.ajax("site/controllers/friends/assign",{uid:b.pluck(c,"id"),
userId:a.options.userId,listId:a.options.id}).done(function(c){b("[data-assignFriends-notice]").hide();b(c).each(function(b,c){a.parent.insertItem(c);EasySocial.dialog().close()})}).fail(function(a){b("[data-assignFriends-notice]").addClass("alert alert-error").html(a.message)})}}})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmDeleteList",{id:a.options.id}),bindings:{"{deleteButton} click":function(){b("[data-friends-list-delete-form]").submit()}}})}}});
g.resolve()})});EasySocial.module("site/friends/item",function(d){var g=this;EasySocial.require().script("site/conversations/composer").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL","COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE","COM_EASYSOCIAL_FRIENDS_CANCEL_REQUEST_DIALOG_CANCELLED").done(function(b){EasySocial.Controller("Friends.Item",{defaultOptions:{id:null,name:null,friendId:null,"{removeFromList}":"[data-lists-removeFriend]","{unfriend}":"[data-friends-unfriend]","{addfriend}":"[data-friends-addfriend]",
"{block}":"[data-friends-block]","{message}":"[data-friendItem-message]","{reject}":"[data-friendItem-reject]","{approve}":"[data-friendItem-approve]","{cancelRequest}":"[data-friendItem-cancel-request]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.name=a.element.data("name");a.options.friendId=a.element.data("friendid");a.options.avatar=a.element.data("avatar");a.initConversation()},initConversation:function(){a.message().implement(EasySocial.Controller.Conversations.Composer.Dialog,
{recipient:{name:a.options.name,id:a.options.id,avatar:a.options.avatar}})},"{removeFromList} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmRemoveFromList",{id:a.options.id}),bindings:{"{removeButton} click":function(){EasySocial.ajax("site/controllers/friends/removeFromList",{listId:a.parent.options.activeList,userId:a.options.id}).done(function(){a.parent.removeItem(a.options.id);EasySocial.dialog({title:"User removed from list",content:"The user has been removed from the list.",
buttons:[{name:"Done",classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}).fail(function(a){console.log(a)})}}})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmReject",{id:a.options.id}),bindings:{"{rejectButton} click":function(){EasySocial.ajax("site/controllers/friends/reject",{id:a.options.friendId}).done(function(){a.parent.removeItem(a.options.id);a.parent.updateFriendsCounter();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRejected")})})}}})},
"{unfriend} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmUnfriend",{id:a.options.id}),bindings:{"{unfriendButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:a.options.friendId}).done(function(){a.parent.removeItem(a.options.id);a.parent.updateFriendsCounter();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRemoved",{id:a.options.id})})})}}})},"{cancelRequest} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancelRequest",
{id:a.options.id}),bindings:{"{cancelRequestButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:a.options.friendId}).done(function(){a.parent.removeItem(a.options.id);a.parent.updateFriendRequestCount(-1);EasySocial.dialog({content:EasySocial.ajax("site/views/friends/requestCancelled",{id:a.options.id})})})}}})},"{approve} click":function(b){EasySocial.ajax("site/controllers/friends/approve",{id:a.options.friendId}).done(function(){a.parent.updateFriendsCounter();
a.element.remove()})},"{addfriend} click":function(c){EasySocial.ajax("site/controllers/friends/request",{id:a.options.id}).done(function(c){a.parent.updateFriendRequestCount(1);EasySocial.dialog({title:b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE"),content:b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL",a.options.name)});a.parent.removeItem(a.options.id)}).fail(function(a){EasySocial.dialog({title:"Info",content:a})})},"{block} click":function(){console.log("block")}}});
g.resolve()})});EasySocial.module("site/notifications/list",function(d){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("NotificationsList",{defaultOptions:{"{item}":"[data-notifications-list-item]","{list}":"[data-notifications-list]","{allread}":"[data-notification-all-read]","{allclear}":"[data-notification-all-clear]","{notiLoadMoreBtn}":"[data-notification-loadmore-btn]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.NotificationsList.Item,
{"{parent}":a})},"{allread} click":function(){EasySocial.ajax("site/controllers/notifications/setAllState",{state:"read"}).done(function(){a.item().removeClass("is-read is-hidden is-unread").addClass("is-read")})},"{allclear} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/notifications/clearAllConfirm"),bindings:{"{clearButton} click":function(){EasySocial.ajax("site/controllers/notifications/setAllState",{state:"clear"}).done(function(){a.item().removeClass("is-read is-hidden is-unread is-read").addClass("is-remove");
EasySocial.dialog().close()})}}})},"{notiLoadMoreBtn} click":function(c,e){var d=b(c).data("startlimit");0>d||EasySocial.ajax("site/controllers/notifications/loadmore",{startlimit:d}).done(function(e,d){b(c).data("startlimit",d);console.log(d);0<e.length&&(b.buildHTML(e).insertBefore(a.notiLoadMoreBtn()),a.item().implement(EasySocial.Controller.NotificationsList.Item));0>d&&a.notiLoadMoreBtn().hide()}).fail(function(a){return a}).always(function(){})}}});EasySocial.Controller("NotificationsList.Item",
{defaultOptions:{"{unread}":"[data-notifications-list-item-unread]","{read}":"[data-notifications-list-item-read]","{delete}":"[data-notifications-list-item-delete]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{unread} click":function(){EasySocial.ajax("site/controllers/notifications/setState",{id:a.options.id,state:"unread"}).done(function(){a.element.removeClass("is-read is-hidden is-unread").addClass("is-unread\t")})},"{read} click":function(){EasySocial.ajax("site/controllers/notifications/setState",
{id:a.options.id,state:"read"}).done(function(){a.element.removeClass("is-read is-hidden is-unread").addClass("is-read")})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/notifications/clearConfirm"),bindings:{"{clearButton} click":function(){EasySocial.ajax("site/controllers/notifications/setState",{id:a.options.id,state:"clear"}).done(function(){a.element.removeClass("is-read is-hidden is-unread is-read").addClass("is-remove");EasySocial.dialog().close()}).fail(function(a){EasySocial.dialog({content:a.message})})}}})}}});
g.resolve()})});EasySocial.module("site/points/history",function(){var d=this;EasySocial.require().done(function(g){EasySocial.Controller("Points.History",{defaultOptions:{"{loadMore}":"[data-points-history-pagination]","{timeline}":"[data-points-history-timeline]"}},function(b){return{init:function(){},"{loadMore} click":function(a,c){var e=g(a).data("current");EasySocial.ajax("site/views/points/getHistory",{limitstart:e,id:b.options.id}).done(function(c,e,d){b.timeline().append(c);g(a).data("current",
e);d&&g(a).hide()})}}});d.resolve()})});EasySocial.module("notifications/popbox",function(d){this.resolve(function(d){return{content:EasySocial.ajax("site/controllers/notifications/getSystemItems",{layout:"popbox.notifications"}),id:"es-wrap",type:"notifications",position:"bottom"}})});EasySocial.module("conversations/popbox",function(d){this.resolve(function(d){return{content:EasySocial.ajax("site/controllers/notifications/getConversationItems",{usemax:"1",layout:"popbox.conversations"}),id:"es-wrap",
type:"notifications",position:"bottom"}})});EasySocial.module("friends/popbox",function(d){this.resolve(function(d){return{content:EasySocial.ajax("site/controllers/notifications/friendsRequests",{layout:"popbox.friends"}),id:"es-wrap",type:"notifications",position:"bottom"}})});EasySocial.module("site/profile/about",function(d){var g=this;EasySocial.require().script("field").done(function(b){EasySocial.Controller("Profile.About",{defaultOptions:{userid:null,"{stepItem}":"[data-profile-about-step-item]",
"{stepContent}":"[data-profile-about-step-content]","{fieldItem}":"[data-profile-about-fields-item]"}},function(a){return{init:function(){a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:a.options.userid,mode:"display"})},"{stepItem} click":function(b,e){var d=b.data("for");a.stepItem().removeClass("active");b.addClass("active");a.stepContent().trigger("activateTab",[d])},"{stepContent} activateTab":function(a,b,d){b=a.data("id");a.toggleClass("active",d==b)}}});g.resolve()})});
EasySocial.module("site/profile/avatar",function(d){EasySocial.Controller("Profile.Avatar",{defaultOptions:{"{menu}":"[data-avatar-menu]","{uploadButton}":"[data-avatar-upload-button]","{selectButton}":"[data-avatar-select-button]","{removeButton}":"[data-avatar-remove-button]"}},function(d){return{init:function(){},"{uploadButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/uploadAvatar")})},"{selectButton} click":function(){EasySocial.photos.selectPhoto({bindings:{"{self} photoSelected":function(b,
a,c){(b=c[0])&&EasySocial.photos.createAvatar(b.id)}}})},"{menu} dropdownOpen":function(){d.element.addClass("show-all")},"{menu} dropdownClose":function(){d.element.removeClass("show-all")},"{removeButton} click":function(){}}});this.resolve()});EasySocial.module("site/profile/edit",function(d){var g=this;EasySocial.require().script("validate","field","oauth/facebook").done(function(b){EasySocial.Controller("Profile.Edit",{defaultOptions:{userid:null,"{stepContent}":"[data-profile-edit-fields-content]",
"{stepItem}":"[data-profile-edit-fields-step]","{profileForm}":"[data-profile-fields-form]","{profileContent}":"[data-profile-edit-fields]","{fieldItem}":"[data-profile-edit-fields-item]","{save}":"[data-profile-fields-save]","{deleteProfile}":"[data-profile-edit-delete]"}},function(a){return{init:function(){a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:a.options.userid,mode:"edit"})},errorFields:[],"{fieldItem} error":function(b,e){a.triggerStepError(b)},"{fieldItem} clear":function(b,
e){a.clearStepError(b)},"{fieldItem} onError":function(b,e){a.triggerStepError(b)},triggerStepError:function(c){var e=c.data("id");c=c.parents(a.stepContent.selector).data("id");0>b.inArray(e,a.errorFields)&&a.errorFields.push(e);a.stepItem().filterBy("for",c).trigger("error")},clearStepError:function(c){var e=c.data("id");c=c.parents(a.stepContent.selector).data("id");a.errorFields=b.without(a.errorFields,e);a.stepItem().filterBy("for",c).trigger("clear")},"{stepItem} click":function(c,e){var d=
b(c).data("for");a.profileContent().show();a.stepContent().hide();a.stepItem().removeClass("active");a.stepItem(c).addClass("active");d=a.stepContent(".step-"+d);d.show();d.find(a.fieldItem.selector).trigger("show")},"{stepItem} error":function(a){a.addClass("error")},"{stepItem} clear":function(b){1>a.errorFields.length&&b.removeClass("error")},"{tabItem} click":function(c,e){var d=b(c).data("for");a.tabHeaderItem().hide();a.tabHeaderItem("."+d+"Header").show().addClass("active")},"{save} click":function(c,
e){e.preventDefault();b(c).addClass("btn-loading");a.profileForm().validate().fail(function(){b(c).removeClass("btn-loading");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/showFormError")})}).done(function(){a.profileForm().submit()});return!1},"{deleteProfile} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmDelete")})}}});g.resolve()})});EasySocial.module("validate",function(d){d.isController("EasySocial.Controller.Validator")||EasySocial.Controller("Validator",
{defaultOptions:{checks:["required","validate"],typeAttr:"data-check-type",formatAttr:"data-check-format",modifierAttr:"data-check-modifier",errorTrigger:"onError",submitTrigger:"onSubmit","{container}":"[data-check]","{notice}":"[data-check-notice]","{required}":"[data-check-required]","{validate}":"[data-check-validate]"}},function(g){return{vars:{},register:[],deferreds:[],errors:[],state:d.Deferred(),init:function(){},reset:function(){g.vars={};g.register=[];g.deferreds=[];g.errors=[];g.state=
d.Deferred();g.container().removeClass("error")},start:function(){g.reset();d.each(g.container(),function(b,a){g.vars.container=a=d(a);a.trigger(g.options.submitTrigger,[g.register]);d.each(g.getFields(),function(a,b){g.vars.field=b=d(b);d.each(g.options.checks,function(a,b){g.vars.check=b;g[b+"Check"]()})})});d.each(g.register,function(b,a){if(d.isDeferred(a))g.deferreds.push(a);else if(!a)return g.errors.push(b),!0});0<g.errors.length?g.state.reject():0<g.deferreds.length?d.when.apply(null,g.deferreds).done(function(){g.state.resolve()}).fail(function(){g.state.reject()}):
g.state.resolve();return g.state},getFields:function(){return d.merge(g.vars.container.find(g.required.selector),g.vars.container.find(g.validate.selector))},requiredCheck:function(){if(g.vars.field.is(g.required.selector)){var b=g.vars.field.attr(g.options.typeAttr)||g.vars.field.attr("type")||"text";"text"===b&&""==d.trim(g.vars.field.val())&&g.raiseError();"checkbox"===b&&1>g.vars.field.find('input[type="checkbox"]').filter(":checked").length&&g.raiseError()}},validateCheck:function(){if(void 0!==
g.vars.field.attr(g.options.formatAttr)){var b=g.vars.field.attr(g.options.formatAttr)||"",a=g.vars.field.attr(g.options.modifierAttr)||"";RegExp(b,a).test(g.vars.field.val())||g.raiseError()}},raiseError:function(){g.vars.container.addClass("error");g.vars.container.trigger(g.options.errorTrigger,[g.vars.check,g.vars.field]);g.register.push(!1)}}});d.fn.validate=function(d){return 0<this.length?this.addController("EasySocial.Controller.Validator",d).start():!1};this.resolve()});EasySocial.module("site/profile/friends",
function(d){var g=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_FRIENDS_DIALOG_CANCEL_REQUEST","COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_YES_CANCEL_MY_REQUEST_BUTTON").done(function(b){EasySocial.Controller("Profile.Friends.Request",{defaultOptions:{id:null,callback:null,"{addButton}":"[data-profileFriends-add]","{manageButton}":"[data-profileFriends-manage]","{pendingButton}":"[data-profileFriends-pending]","{respondButton}":"[data-profileFriends-respond]","{cancelRequest}":"[data-profileFriends-cancelRequest]",
"{unfriend}":"[data-friends-unfriend]","{approve}":"[data-friends-response-approve]","{reject}":"[data-friends-response-reject]","{button}":"[data-profileFriends-button]","{dropdown}":"[data-profileFriends-dropdown]",view:{loader:"site/loading/small"}}},function(a){return{init:function(){a.options.id=a.element.data("friend");a.options.target=a.element.data("id");a.options.callback=a.element.data("callback")},showDropDown:function(){a.element.addClass("open")},hideDropDown:function(){a.element.removeClass("open")},
"{addButton} click":function(b){var e=a.button();e.addClass("loading");EasySocial.ajax("site/controllers/friends/request",{id:a.options.target}).done(function(b,c){a.dropdown().remove();a.options.id=b;a.button().replaceWith(c)}).fail(function(){e.removeClass("loading")})},"{cancelRequest} click":function(b,e){a.hideDropDown();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancel"),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",
{id:a.options.id}).done(function(b){a.dropdown().remove();a.button().replaceWith(b);EasySocial.dialog().close()})}}})},"{unfriend} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmUnfriend",{id:a.options.id}),bindings:{"{unfriendButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:a.options.id}).done(function(b){a.dropdown().remove();a.button().replaceWith(b);EasySocial.dialog().close()})}}})},"{approve} click":function(b,e){var d=
a.options.id;a.dropdown().remove();EasySocial.ajax("site/controllers/friends/approve",{id:d}).done(function(b){a.button().replaceWith(b)})},"{reject} click":function(b,e){var d=a.options.id;a.dropdown().remove();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmReject"),bindings:{"{rejectButton} click":function(){EasySocial.ajax("site/controllers/friends/reject",{id:d}).done(function(b){a.button().replaceWith(b);EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRejected")})})}}})},
"{dropdown} click":function(a,b){b.stopPropagation()},"{approveRequest} click":function(){a.respondForm().find("input[name=task]").val("approve");a.respondForm().find("input[name=id]").val(a.options.friendId);a.respondForm().find("input[name=return]").val(a.options.callback);a.respondForm().submit()}}});g.resolve()})});EasySocial.module("site/profile/header",function(d){var g=this;EasySocial.require().script("site/profile/friends","site/profile/subscriptions","site/conversations/composer").done(function(b){EasySocial.Controller("Profile.Header",
{defaultOptions:{id:null,"{friendRequest}":"[data-profile-friends]","{subscribe}":"[data-profile-followers]","{conversation}":"[data-profile-conversation]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.name=a.element.data("name");a.options.avatar=a.element.data("avatar");a.friendRequest().implement(EasySocial.Controller.Profile.Friends.Request,{"{parent}":a});a.subscribe().implement(EasySocial.Controller.Profile.Subscriptions,{"{parent}":a});a.conversation().implement(EasySocial.Controller.Conversations.Composer.Dialog,
{recipient:{id:a.options.id,name:a.options.name,avatar:a.options.avatar}})}}});g.resolve()})});EasySocial.module("site/profile/subscriptions",function(d){EasySocial.Controller("Profile.Subscriptions",{defaultOptions:{id:null,"{follow}":"[data-subscription-follow]","{unfollow}":"[data-subscription-unfollow]","{message}":"[data-subscription-message]","{button}":"[data-subscription-button]"}},function(d){return{init:function(){d.options.id=d.element.data("id")},toggleDropDown:function(){d.element.toggleClass("open")},
"{unfollow} click":function(){d.toggleDropDown();EasySocial.ajax("site/controllers/profile/unfollow",{id:d.options.id,type:"user"}).done(function(b){d.button().replaceWith(b)})},"{follow} click":function(){d.toggleDropDown();EasySocial.ajax("site/controllers/profile/follow",{id:d.options.id,type:"user"}).done(function(b){d.button().replaceWith(b)})}}});this.resolve()});EasySocial.module("site/profile/miniheader",function(d){var g=this;EasySocial.require().library("scrollTo").done(function(b){EasySocial.Controller("Profile.MiniHeader",
{defaultOptions:{"{viewport}":"[data-appscroll-viewport]","{content}":"[data-appscroll-content]","{apps}":"[data-appscroll-content] li","{buttons}":"[data-appscroll-buttons]","{nextButton}":"[data-appscroll-next-button]","{prevButton}":"[data-appscroll-prev-button]"}},function(a){return{init:function(){a.setLayout();a.viewport().scrollTo(0)},"{window} resize":b.debounce(function(){a.setLayout()},300),setLayout:function(){var c=a.viewport(),e=5;b("#es-wrap.es-main").hasClass("w480")?(a.content().css({width:"auto"}),
a.enabled=!1):(a.apps().each(function(){e+=b(this).outerWidth(!0)}),e>c.width()&&(a.content().css({width:e,float:"none"}),a.buttons().css("opacity",1),a.enabled=!0))},enabled:!1,"{nextButton} click":function(){if(a.enabled){var b=a.viewport(),e=b.width()-80;b.scrollTo("+="+e+"px",800,{axis:"x",easing:"easeInOutCubic"})}},"{prevButton} click":function(){if(a.enabled){var b=a.viewport(),e=b.width()-80;b.scrollTo("-="+e+"px",800,{axis:"x",easing:"easeInOutCubic"})}}}});g.resolve()})});EasySocial.module("site/profile/notifications",
function(d){var g=this;EasySocial.require().script("site/profile/header").done(function(){EasySocial.Controller("Profile.Notifications",{defaultOptions:{"{sidebarItem}":"[data-notification-item]","{contentItem}":"[data-notification-content]","{notificationForm}":"[data-notifications-form]"}},function(b){return{init:function(){},"{sidebarItem} click":function(a,c){b.sidebarItem().removeClass("active");a.addClass("active");b.contentItem().hide();var e=a.data("alert-element");b.contentItem('[data-alert-element="'+
e+'"]').show()}}});g.resolve()})});EasySocial.module("site/profile/privacy",function(d){var g=this;EasySocial.require().script("site/profile/header").library("history","textboxlist").view("site/loading/small").done(function(b){EasySocial.Controller("Profile.Privacy",{defaultOptions:{"{sidebarItem}":"[data-profile-privacy-item]","{contentItem}":"[data-privacy-content]","{privacyItem}":"[data-privacy-item]","{privacyForm}":"[data-profile-privacy-form]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.sidebarItem().implement(EasySocial.Controller.Profile.Privacy.Sidebar,
{"{parent}":a});a.privacyItem().implement(EasySocial.Controller.Profile.Privacy.Item,{"{parent}":a})},updateContent:function(c){a.contentItem().hide();b(".privacy-content-"+c).show()}}});EasySocial.Controller("Profile.Privacy.Sidebar",{defaultOptions:{"{sidebarItem}":"[data-profile-privacy-item]"}},function(a){return{init:function(){},"{self} click":function(c){b("[data-profile-privacy-item]").removeClass("active");b(c).addClass("active");c=a.element.data("group");a.parent.updateContent(c)}}});EasySocial.Controller("Profile.Privacy.Item",
{defaultOptions:{"{selection}":"[data-privacy-select]","{hiddenCustom}":"[data-hidden-custom]","{customForm}":"[data-privacy-custom-form]","{customTextInput}":"[data-textfield]","{customItems}":"input[]","{customHideBtn}":"[data-privacy-custom-hide-button]","{customInputItem}":"[data-textboxlist-item]","{customEditBtn}":"[data-privacy-custom-edit-button]"}},function(a){return{init:function(){a.customTextInput().textboxlist({unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:2,cache:!1,query:function(b){var e=
a.getTaggedUsers();return EasySocial.ajax("site/views/privacy/getfriends",{q:b,exclude:e})}}}});a.textboxlistLib=a.customTextInput().textboxlist("controller")},getTaggedUsers:function(){var c=[],e=a.customInputItem();0<e.length&&b.each(e,function(a,e){c.push(b(e).data("id"))});return c},"{customTextInput} addItem":function(b,e,d){b=a.hiddenCustom().val();e="";""==b?e=d.id:(b=b.split(","),b.push(d.id),e=b.join(","));a.hiddenCustom().val(e)},"{customTextInput} removeItem":function(b,e,d){b="";b=[];
e=a.hiddenCustom().val().split(",");for(var g=0;g<e.length;g++)e[g]!=d.id&&b.push(e[g]);b=0>=b.length?"":b.join(",");a.hiddenCustom().val(b)},"{customEditBtn} click":function(b){a.customForm().toggle()},"{selection} change":function(b){"custom"==b.val()?(a.customForm().show(),a.customEditBtn().show()):(a.customForm().hide(),a.customEditBtn().hide())},"{customHideBtn} click":function(){a.customForm().hide();a.customEditBtn().show();a.textboxlistLib.autocomplete.hide()}}});g.resolve()})});EasySocial.module("site/profile/profile",
function(d){var g=this;EasySocial.require().script("site/profile/header").library("history").done(function(b){EasySocial.Controller("Profile",{defaultOptions:{id:null,"{header}":"[data-profile-header]","{app}":"[data-profile-apps-item]","{action}":"[data-profile-apps-menu]","{contents}":"[data-profile-real-content]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.header().implement(EasySocial.Controller.Profile.Header,{"{parent}":a});a.app().implement(EasySocial.Controller.Profile.Apps.Item,
{"{parent}":a})},"{app} click":function(c){a.app().removeClass("active");b(c).addClass("active")},updateContent:function(b){a.element.removeClass("loading");a.contents().html(b)},loading:function(){a.contents().html("");a.element.addClass("loading")}}});EasySocial.Controller("Profile.Apps.Item",{defaultOptions:{}},function(a){return{init:function(){a.options.layout=a.element.data("layout");a.options.id=a.element.data("id");a.options.url=a.element.data(a.options.layout+"-url");a.options.namespace=
a.element.data("namespace");a.options.title=a.element.data("title");a.options.description=a.element.data("description");a.options.appId=a.element.data("app-id")},"{self} click":function(b,e){e.preventDefault();"canvas"==a.options.layout?window.location=a.options.url:(History.pushState({state:1},a.options.title,a.options.url),EasySocial.ajax(a.options.namespace,{id:a.options.id,view:"profile",appId:a.options.appId},{beforeSend:function(){a.parent.loading()}}).done(function(b){a.parent.updateContent(b)}).fail(function(a){return a}))}}});
g.resolve()})});EasySocial.module("site/registrations/registrations",function(d){var g=this;EasySocial.require().script("validate","field").view("site/registration/dialog.error").language("COM_EASYSOCIAL_CLOSE_BUTTON","COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE").done(function(b){EasySocial.Controller("Registrations.Form",{defaultOptions:{previousLink:null,"{submit}":"[data-registration-submit]","{field}":"[data-registration-fields-item ]","{previous}":"[data-registration-previous]",view:{formError:"site/registration/dialog.error"}}},
function(a){return{init:function(){a.field().addController("EasySocial.Controller.Field.Base",{mode:"register"})},"{previous} click":function(b,e){e.preventDefault();window.location.href=a.options.previousLink;return!1},"{submit} click":function(c,e){e.preventDefault();b(c).addClass("btn-loading");b(a.element).validate().fail(function(){b(c).removeClass("btn-loading");EasySocial.dialog({title:b.language("COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE"),content:a.view.formError({}),width:400,height:150,
buttons:[{name:b.language("COM_EASYSOCIAL_CLOSE_BUTTON"),classNames:"btn btn-es-primary",click:function(){EasySocial.dialog().close()}}]})}).done(function(){a.element.submit()});return!1}}});g.resolve()})});EasySocial.module("site/search/item",function(d){var g=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE").done(function(b){EasySocial.Controller("Search.Item",{defaultOptions:{"{toggle}":"[data-activity-toggle]","{deleteBtn}":"[data-activity-delete]",
"{addFriendButton}":"[data-search-friend-button]","{pendingFriendButton}":"[data-search-friend-pending-button]","{dropdown}":"[data-profileFriends-dropdown]",view:{loader:"site/loading/small"}}},function(a){return{init:function(){null},"{pendingFriendButton} click":function(c){a.dropdown().html(b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE"))},"{addFriendButton} click":function(c){var e=a.element.data("friend-uid");b(c).addClass("btn-loading");EasySocial.ajax("site/controllers/friends/request",
{viewCallback:"usersRequest",id:e}).done(function(e){b(c).replaceWith(e);a.dropdown().remove();b(c).removeClass("btn-loading")}).fail(function(b){a.dropdown().html(b)})}}});g.resolve()})});EasySocial.module("site/search/list",function(d){var g=this;EasySocial.require().view("site/loading/small").script("site/search/item").language("COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS").done(function(b){EasySocial.Controller("Search.List",{defaultOptions:{"{item}":"[data-search-item]","{pagination}":"[data-search-pagination]",
"{loadmorebutton}":"[data-search-loadmore-button]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Search.Item);a.on("scroll.search",window,b._.debounce(function(){a.loading||a.pagination().visible()&&a.loadMore()},250))},"{loadmorebutton} click":function(){a.loadMore()},loadMore:function(){var c=b("[data-search-query]").val(),e=b("[data-sidebar-menu].active").data("type"),d=a.pagination().data("last-limit"),g=a.pagination().data("last-type");
"-1"==d?a.loadmorebutton.hide():(a.loading=!0,EasySocial.ajax("site/controllers/search/getItems",{next_limit:d,last_type:g,type:e,q:c,loadmore:"1"},{beforeSend:function(){a.pagination().html(a.view.loadingContent())}}).done(function(c,e,d){a.pagination().data("last-limit",d);a.pagination().data("last-type",e);a.pagination().before(c);a.item().implement(EasySocial.Controller.Search.Item);"-1"==d?a.pagination().html(""):(link='<a class="btn btn-es-primary btn-stream-updates" href="javascript:void(0);" data-search-loadmore-button><i class="ies-refresh"></i>\t'+
b.language("COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS")+"</a>",a.pagination().html(link))}).fail(function(a){return a}).always(function(){a.loading=!1}))}}});g.resolve()})});EasySocial.module("site/search/search",function(d){var g=this;EasySocial.require().library("history").script("site/search/sidebar","site/profile/friends").view("site/loading/small").done(function(b){EasySocial.Controller("Search",{defaultOptions:{items:null,"{container}":"[data-search]","{contentTitle}":"[data-search-content-title]",
"{content}":"[data-search-content]","{sidebar}":"[data-search-sidebar]","{sidebarItem}":"[data-sidebar-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Search.Sidebar,{"{parent}":a});a.sidebarItem().implement(EasySocial.Controller.Search.Sidebar.Item,{"{parent}":a})},updatingContents:function(){a.content().html(a.view.loadingContent())},updateContent:function(b){a.content().html(b)}}});g.resolve()})});EasySocial.module("site/search/sidebar",
function(d){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Search.Sidebar",{defaultOptions:{"{menuItem}":"[data-sidebar-menu]"}},function(a){return{init:function(){},"{menuItem} click":function(c,e){a.menuItem().removeClass("active");b(c).addClass("active")}}});EasySocial.Controller("Search.Sidebar.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(c,e){var d=a.element.data("type"),g=a.element.data("url"),h=b("[data-search-query]").val();
History.pushState({state:1},"",g);a.parent.updatingContents();EasySocial.ajax("site/controllers/search/getItems",{type:d,q:h}).done(function(b){a.parent.updateContent(b)}).fail(function(a){console.log(a)});a.parent.updateContent()}}});g.resolve()})});EasySocial.module("site/search/toolbar",function(d){var g=this;EasySocial.require().library("history").view("site/loading/small").done(function(b){EasySocial.Controller("Search.Toolbar",{defaultOptions:{items:null,"{searchInput}":"[data-nav-search-input]",
"{seachDropdown}":"[data-nav-search-dropdown]","{searchResult}":"li.navSearchItem",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){b(document).on("click.toolbar.search",function(c){c=c.target;c==a.element[0]||0<b(c).parents(a.element.data("directSelector")).length||a.seachDropdown().hide()})},"{self} destroy":function(){b(document).off("click.toolbar.search")},"{searchInput} keyup":b._.debounce(function(b,e){if(!a.loading){var d=b.val();3<=d.length&&(a.loading=!0,EasySocial.ajax("site/controllers/search/getItems",
{q:d,mini:"1"},{beforeSend:function(){a.seachDropdown().show();a.seachDropdown().html(a.view.loadingContent())}}).done(function(b){a.seachDropdown().html(b)}).fail(function(a){console.log(a)}).always(function(){a.loading=!1}))}},250),"{searchInput} focus":function(){cnt=a.searchResult().length;0<cnt&&a.seachDropdown().show()}}});g.resolve()})});EasySocial.module("site/stream/item",function(){var d=this;EasySocial.require().library("dialog").done(function(g){EasySocial.Controller("Stream.Item",{defaultOptions:{id:"",
context:"","{deleteFeed}":"[data-stream-delete]","{hideLink}":"[data-stream-hide]","{unHideLink}":"[data-stream-show]","{hideAppLink}":"[data-stream-hide-app]","{unHideAppLink}":"[data-stream-show-app]","{hideNotice}":"[data-stream-hide-notice]","{actions}":"[data-streamItem-actions]","{contents}":"[data-streamItem-contents]","{streamData}":"[data-stream-item]","{likes}":"[data-likes-action]","{counterBar}":"[data-stream-counter]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]",
"{share}":"[data-repost-action]","{streamCommentLink}":"[data-stream-action-comments]","{streamCommentBlock}":"[data-comments]"}},function(b){return{init:function(){b.options.id=b.element.data("id");b.options.context=b.element.data("context");b.options.ishidden=b.element.data("ishidden")},plugins:{},"{likes} onLiked":function(a,c,e){b.counterBar().removeClass("hide")},"{likes} onUnliked":function(a,c,e){a=b.likeContent().hasClass("hide");c=b.repostContent().hasClass("hide");a&&c&&b.counterBar().addClass("hide")},
"{share} create":function(a,c,e){b.counterBar().removeClass("hide")},"{streamCommentLink} click":function(){b.streamCommentBlock().toggle()},"{actions} click":function(a,c){b.actions().removeClass("active");g(a).addClass("active")},"{deleteFeed} click":function(){var a=b.options.id;EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmDelete"),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/stream/delete",{id:a}).done(function(a){EasySocial.dialog({content:a});
b.element.fadeOut()}).fail(function(a){EasySocial.dialog({content:a})})}}})},"{hideLink} click":function(){b.streamData().addClass("es-feed-loading");EasySocial.ajax("site/controllers/stream/hide",{id:b.options.id}).done(function(a){b.streamData().removeClass("es-feed-loading");b.streamData().hide();b.element.append(a)}).fail(function(a){})},"{hideAppLink} click":function(){EasySocial.ajax("site/controllers/stream/hideapp",{context:b.options.context}).done(function(a){b.streamData().hide();g(".stream-context-"+
b.options.context).addClass("hide-stream");b.element.append(a)}).fail(function(a){console.log(a)})},"{unHideLink} click":function(){EasySocial.ajax("site/controllers/stream/unhide",{id:b.options.id}).done(function(){b.hideNotice().remove();b.streamData().show()}).fail(function(a){console.log(a)})},"{unHideAppLink} click":function(){EasySocial.ajax("site/controllers/stream/unhideapp",{context:b.options.context}).done(function(){b.hideNotice().remove();b.streamData().show();g(".stream-context-"+b.options.context).removeClass("hide-stream")}).fail(function(a){console.log(a)})}}});
d.resolve()})});EasySocial.module("site/stream/stream",function(){var d=this;EasySocial.require().script("site/stream/item").view("site/loading/small").language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS").done(function(g){EasySocial.Controller("Stream",{defaultOptions:{interval:30,checknew:null,source:null,sourceId:null,autoload:!0,"{story}":"[data-story]","{share}":"[data-repost-action]","{list}":"[data-stream-list]","{newNotiBar}":"[data-stream-notification-bar]","{newNotiButton}":"[data-stream-notification-button]",
"{item}":"[data-streamItem]","{pagination}":"[data-stream-pagination]","{paginationGuest}":"[data-stream-pagination-guest]",view:{loadingContent:"site/loading/small"}}},function(b){return{init:function(){b.item().addController(EasySocial.Controller.Stream.Item);"stream"!=b.options.source&&"unity"!=b.options.source&&!0==b.options.checknew&&b.startMonitoring();if(!0==b.options.autoload)b.on("scroll.stream",window,g._.debounce(function(){b.loading||("unity"==b.options.source?b.paginationGuest().visible()&&
b.loadMoreGuest():b.pagination().visible()&&b.loadMore())},250));b.setLayout()},setLayout:function(){b.element.find("[data-es-cover]").each(function(){var a=g(this);a.height(a.width()/3)})},"{window} resize":g.debounce(function(){b.setLayout()},500),"{story} create":function(a,c,e,d){g.buildHTML(e).prependTo(b.list()).addController("EasySocial.Controller.Stream.Item");b.list().children("li.empty").remove();b.updateCurrentDate();""!=d&&b.updateExcludeIds(d)},"{share} create":function(a,c,e){g.buildHTML(e).prependTo(b.list()).addController("EasySocial.Controller.Stream.Item");
b.list().children("li.empty").remove();b.updateCurrentDate()},updateCurrentDate:function(){EasySocial.ajax("site/controllers/stream/getCurrentDate",{}).done(function(a){b.element.data("currentdate",a)}).fail(function(a){})},updateExcludeIds:function(a){ids=b.element.data("excludeids");newIds="";newIds=""!=ids&&void 0!=ids?ids+","+a:a;b.element.data("excludeids",newIds)},clearExcludeIds:function(){b.element.data("excludeids","")},startMonitoring:function(){if(b._destroyed)return b.stopMonitoring();
b.options.state=setTimeout(b.check,1E3*b.options.interval)},stopMonitoring:function(){clearTimeout(b.options.state)},"{self} destroyed":function(){b.stopMonitoring()},check:function(){b.stopMonitoring();var a=g("[data-dashboardsidebar-menu].active").data("type"),c=g("[data-dashboardsidebar-menu].active").data("id"),e=b.element.data("currentdate"),d=b.element.data("excludeids");g.trim(b.newNotiBar().html());void 0==a&&void 0==c&&"profile"==b.options.source&&(a="me",c=b.options.sourceId);EasySocial.ajax("site/controllers/stream/checkUpdates",
{type:a,id:c,currentdate:e,exclude:d,source:b.options.source,view:b.options.source},{type:"jsonp"}).done(function(a,c,e){if(b._destroyed)return b.stopMonitoring();if(0<a.length){for(e=0;e<a.length;e++)if(item=a[e],0<item.cnt){var d="[data-stream-counter-"+item.type+"]";g(d).html(item.cnt);g(d).parents("li").addClass("has-notice")}c=g.trim(c);0<c.length&&b.newNotiBar().html(c)}b.startMonitoring()})},"{newNotiButton} click":function(a,c){var e=g(a).data("type"),d=g(a).data("uid"),h=g(a).data("since");
EasySocial.ajax("site/controllers/stream/getUpdates",{type:e,id:d,currentdate:h,source:b.options.source,view:b.options.source}).done(function(a,c){var h="[data-stream-counter-",h="list"==e?h+e+"-"+d:h+e;g(h+"]").parents("li").removeClass("has-notice");b.newNotiBar().html("");g.buildHTML(a).prependTo(b.list()).addController("EasySocial.Controller.Stream.Item");b.clearExcludeIds();b.element.data("currentdate",c)})},"{paginationGuest} click":function(){b.loadMoreGuest()},loadMoreGuest:function(){var a=
b.paginationGuest(),c=a.data("nextlimit"),e=b.options.source;c&&(b.loading=!0,a.html(b.view.loadingContent({content:""})),EasySocial.ajax("site/controllers/stream/loadmoreGuest",{startlimit:c,view:e}).done(function(c,e){a.data({nextlimit:e});c=g.buildHTML(c);c.insertBefore(a).filter(b.item.selector).addController("EasySocial.Controller.Stream.Item");""==e?a.html(""):(link='<a class="btn btn-es-primary btn-stream-updates" href="javascript:void(0);"><i class="ies-refresh"></i> '+g.language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS")+
"</a>",a.html(link))}).fail(function(a){return a}).always(function(){b.loading=!1}))},"{pagination} click":function(){b.loadMore()},loadMore:function(){var a=g("[data-dashboardsidebar-menu].active"),c=a.data("type"),a=a.data("id"),e=b.pagination(),d=e.data("startdate"),h=e.data("enddate"),n=b.options.source;d&&(void 0==c&&void 0==a&&"profile"==b.options.source&&(c="me",a=b.options.sourceId),b.loading=!0,e.html(b.view.loadingContent({content:""})),EasySocial.ajax("site/controllers/stream/loadmore",
{id:a,type:c,startdate:d,enddate:h,view:n}).done(function(a,c,d){e.data({startdate:c,enddate:d});a=g.buildHTML(a);a.insertBefore(e).filter(b.item.selector).addController("EasySocial.Controller.Stream.Item");b.setLayout();""==c?e.html(""):(link='<a class="btn btn-es-primary btn-stream-updates" href="javascript:void(0);"><i class="ies-refresh"></i> '+g.language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS")+"</a>",e.html(link))}).fail(function(a){return a}).always(function(){b.loading=!1}))}}});
d.resolve()})});EasySocial.module("site/subscriptions/follow",function(){var d=this;EasySocial.require().language("COM_EASYSOCIAL_SUBSCRIPTION_INFO").done(function(g){EasySocial.Controller("Follow",{defaultOptions:{}},function(b){return{init:function(){},"{self} click":function(){EasySocial.ajax("site/controllers/subscriptions/toggle",{uid:b.element.data("id"),type:b.element.data("type"),notify:"1"}).done(function(a,c){b.element.text(c);EasySocial.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_INFO"),
content:a})}).fail(function(a){b.setMessage(a,"error")})}}});d.resolve()})});EasySocial.module("site/toolbar/conversations",function(d){var g=this;EasySocial.require().view("site/loading/small").library("tinyscrollbar").done(function(b){EasySocial.Controller("Notifications.Conversations",{defaultOptions:{interval:30,view:{loadingIcon:"site/loading/small"},"{counter}":"[data-notificationConversation-counter]","{dropdown}":"[data-notificationConversation-dropdown]","{loader}":"[data-notificationConversation-loader]",
"{items}":"[data-notificationConversation-items]","{scrollBar}":"[data-notificationConversation-scrollbar]"}},function(a){return{init:function(){a.startMonitoring()},startMonitoring:function(){a.options.state=setTimeout(a.check,1E3*a.options.interval)},stopMonitoring:function(){clearTimeout(a.options.state)},"{self} showDropdown":function(){EasySocial.ajax("site/controllers/notifications/getConversationItems",{usemax:1,beforeSend:function(){a.loader().show();a.items().hide()}}).done(function(b){a.loader().hide();
a.items().html(b);a.items().show();a.scrollBar().tinyscrollbar()})},check:function(){a.stopMonitoring();setTimeout(function(){EasySocial.ajax("site/controllers/notifications/getConversationCounter",{},{type:"jsonp"}).done(function(b){0<b?(a.element.addClass("has-notice"),a.counter().html(b)):a.element.removeClass("has-notice");a.startMonitoring()})},1E3*a.options.interval)},"{dropdown} click":function(a,b){b.stopPropagation()}}});g.resolve()})});EasySocial.module("site/toolbar/friends",function(d){var g=
this;EasySocial.require().view("site/loading/small").library("tinyscrollbar").language("COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED").done(function(b){EasySocial.Controller("Notifications.Friends",{defaultOptions:{interval:3,returnURL:"",view:{loadingIcon:"site/loading/small"},"{counter}":"[data-notificationFriends-counter]","{dropdown}":"[data-notificationFriends-dropdown]","{loader}":"[data-notificationFriends-loader]","{loadRequestsButton}":".loadRequestsButton","{itemList}":"[data-notificationFriends-list]",
"{items}":".requestItem","{scrollBar}":"[data-notificationFriends-scrollbar]"}},function(a){return{init:function(){a.startMonitoring()},startMonitoring:function(){a.options.state=setTimeout(a.check,1E3*a.options.interval)},stopMonitoring:function(){clearTimeout(a.options.state)},"{self} showDropdown":function(){a.items().remove();EasySocial.ajax("site/controllers/notifications/friendsRequests",{beforeSend:function(){a.itemList().hide();a.loader().show()}}).done(function(b){a.loader().hide();a.itemList().html(b);
a.itemList().find("[data-notification-friend-item]").implement(EasySocial.Controller.Notifications.Friends.Item);a.itemList().show();a.scrollBar().tinyscrollbar()})},check:function(){a.stopMonitoring();setTimeout(function(){EasySocial.ajax("site/controllers/notifications/friendsCounter",{},{type:"jsonp"}).done(function(b){0<b?(a.element.addClass("has-notice"),a.counter().html(b)):a.element.removeClass("has-notice");a.startMonitoring()})},1E3*a.options.interval)},"{dropdown} click":function(a,b){b.stopPropagation()}}});
EasySocial.Controller("Notifications.Friends.Item",{defaultOptions:{"{actionsWrapper}":"[data-friend-item-actions]","{acceptFriend}":"[data-friend-item-accept]","{rejectFriend}":"[data-friend-item-reject]","{actions}":"[data-friend-item-action]","{title}":"[data-friend-item-title]","{mutual}":"[data-friend-item-mutual]",view:{loader:"site/loading/small"}}},function(a){return{init:function(){},"{acceptFriend} click":function(c,e){e.stopPropagation();a.actionsWrapper().addClass("friend-adding");EasySocial.ajax("site/controllers/friends/approve",
{viewCallback:"notificationsApprove",id:b(c).data("id")}).done(function(b,c){a.actionsWrapper().removeClass("friend-adding").addClass("added-friends");a.title().html(b);a.mutual().html(c)}).fail(function(b){a.element.html(b.message)})},"{rejectFriend} click":function(c,e){e.stopPropagation();EasySocial.ajax("site/controllers/friends/reject",{id:b(c).data("id")}).done(function(c){a.actionsWrapper().html(b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED"))}).fail(function(b){a.element.html(b.message)})}}});
g.resolve()})});EasySocial.module("site/toolbar/login",function(d){var g=this;EasySocial.require().library("popbox").done(function(b){EasySocial.Controller("Toolbar.Login",{defaultOptions:{"{dropdown}":"[data-toolbar-login-dropdown]"}},function(a){return{init:function(){var b=a.dropdown().html();a.dropdown().remove();a.element.popbox({content:b,id:"es-wrap",type:"toolbar",toggle:"click"}).attr("data-popbox","")},"{self} popboxActivate":function(a,e,d){b(d.tooltip).find("label").on("click",function(a){a.stopPropagation()})}}});
g.resolve()})});EasySocial.module("site/toolbar/notifications",function(d){var g=this;EasySocial.require().script("site/toolbar/friends","site/toolbar/story","site/toolbar/system","site/toolbar/profile","site/toolbar/login","site/toolbar/conversations").done(function(b){EasySocial.Controller("Notifications",{defaultOptions:{friendsInterval:30,systemInterval:30,"{friendNotifications}":"[data-notifications-friends]","{conversationNotifications}":"[data-notifications-conversations]","{systemNotifications}":"[data-notifications-system]",
"{profileItem}":"[data-toolbar-profile]","{storyForm}":"[data-toolbar-story]","{login}":"[data-toolbar-login]","{item}":"[data-toolbar-item]"}},function(a){return{init:function(){a.login().addController(EasySocial.Controller.Toolbar.Login);a.profileItem().addController(EasySocial.Controller.Toolbar.Profile,{interval:a.options.systemInterval});a.systemNotifications().addController(EasySocial.Controller.Notifications.System,{interval:a.options.systemInterval});a.friendNotifications().addController(EasySocial.Controller.Notifications.Friends,
{interval:a.options.friendsInterval});a.conversationNotifications().addController(EasySocial.Controller.Notifications.Conversations,{interval:a.options.friendsInterval});a.storyForm().addController(EasySocial.Controller.Notifications.Story);a.setLayout();b("body").on("click.out-of-dropdown",function(){a.item().removeClass("open")})},"{window} resize":b.debounce(function(){a.setLayout()},250),setLayout:function(){var c=a.element,e=c.outerWidth(!0)-80,d=0;a.item().each(function(){d+=b(this).outerWidth(!0)});
e=d>e;c.toggleClass("narrow",e).toggleClass("wide",!e)}}});g.resolve()})});EasySocial.module("site/toolbar/story",function(d){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Notifications.Story",{defaultOptions:{"{loadFormButton}":".loadFormButton","{dropdown}":".dropdown-menu"}},function(a){return{init:function(){},"{dropdown} click":function(a,b){},"{self} hideDropdown":function(){},"{dropdown} click":function(a,b){b.stopPropagation()}}});g.resolve()})});EasySocial.module("site/toolbar/system",
function(d){var g=this;EasySocial.require().view("site/loading/small").library("tinyscrollbar").done(function(b){EasySocial.Controller("Notifications.System",{defaultOptions:{interval:30,view:{loadingIcon:"site/loading/small"},"{counter}":"[data-notificationSystem-counter]","{dropdown}":"[data-notificationSystem-dropdown]","{loader}":"[data-notificationSystem-loader]","{items}":"[data-notificationSystem-items]","{scrollBar}":"[data-notificationSystem-scrollbar]"}},function(a){return{init:function(){a.startMonitoring()},
startMonitoring:function(){a.options.state=setTimeout(a.check,1E3*a.options.interval)},stopMonitoring:function(){clearTimeout(a.options.state)},"{self} showDropdown":function(){EasySocial.ajax("site/controllers/notifications/getSystemItems",{beforeSend:function(){a.loader().show();a.items().hide()}}).done(function(b){a.loader().hide();a.items().html(b);a.items().show();a.scrollBar().tinyscrollbar()})},check:function(){a.stopMonitoring();setTimeout(function(){EasySocial.ajax("site/controllers/notifications/getSystemCounter",
{},{type:"jsonp"}).done(function(b){0<b?(a.element.addClass("has-notice"),a.counter().html(b)):a.element.removeClass("has-notice");a.startMonitoring()})},1E3*a.options.interval)},"{dropdown} click":function(a,b){b.stopPropagation()}}});g.resolve()})});EasySocial.module("site/toolbar/profile",function(d){var g=this;EasySocial.require().library("popbox").done(function(b){EasySocial.Controller("Toolbar.Profile",{defaultOptions:{"{dropdown}":"[data-toolbar-profile-dropdown]"}},function(a){return{init:function(){var b=
a.dropdown().html();a.element.popbox({content:b,id:"es-wrap",type:"toolbar",toggle:"click"}).attr("data-popbox","")},"{self} popboxActivate":function(a,e,d){b(d.tooltip).implement(EasySocial.Controller.Toolbar.Profile.Logout)}}});EasySocial.Controller("Toolbar.Profile.Logout",{defaultOptions:{"{logoutForm}":"[data-toolbar-logout-form]","{logoutButton}":"[data-toolbar-logout-button]"}},function(a){return{logout:function(){a.logoutForm().submit()},"{logoutButton} click":function(){a.logout()}}});g.resolve()})});
EasySocial.module("site/users/users",function(d){var g=this;EasySocial.require().library("history").view("site/loading/small").done(function(b){EasySocial.Controller("Users",{defaultOptions:{"{content}":"[data-users-content]","{listing}":"[data-users-listing]","{sort}":"[data-users-sort]","{filter}":"[data-users-filter]","{items}":"[data-users-item]","{pagination}":"[data-users-pagination]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.initUserController()},initUserController:function(){a.items().implement(EasySocial.Controller.Users.Item,
{"{parent}":a})},"{filter} click":function(c,e){e.preventDefault();a.sort().removeClass("active");a.filter().each(function(){b(this).parent().removeClass("active")});b(c).parent().addClass("active");var d=b(c).data("filter");a.options.filter=d;b(c).route();a.listing().html(a.view.loading());a.sort(":first").addClass("active");EasySocial.ajax("site/controllers/users/getUsers",{filter:d,showpagination:1}).done(function(b){a.content().html(b);a.initUserController()})},"{sort} click":function(c,e){e.preventDefault();
var d=b(c).data("type");b(c).route();a.sort().removeClass("active");b(c).addClass("active");a.listing().html(a.view.loading());a.pagination().remove();EasySocial.ajax("site/controllers/users/getUsers",{sort:d,filter:a.options.filter,isSort:!0,showpagination:1}).done(function(b){a.listing().html(b);a.initUserController()})}}});EasySocial.Controller("Users.Item",{defaultOptions:{id:null,"{addFriend}":"[data-users-add-friend]","{friendsButton}":"[data-users-friends-button]","{compose}":"[data-users-friends-compose]",
"{unfriend}":"[data-users-friends-unfriend]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{addFriend} click":function(c,e){b(c).addClass("btn-loading");EasySocial.ajax("site/controllers/friends/request",{viewCallback:"usersRequest",id:a.options.id}).done(function(a){b(c).replaceWith(a);b(c).removeClass("btn-loading")})}}});g.resolve()})});EasySocial.module("story",function(d){var g=this;EasySocial.require().language("COM_EASYSOCIAL_WITH_FRIENDS","COM_EASYSOCIAL_AND_ONE_OTHER",
"COM_EASYSOCIAL_AND_MANY_OTHERS","COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR").view("apps/user/links/story.attachment.item","apps/user/locations/suggestion","site/albums/upload.item").done();EasySocial.require().library("expanding").script("site/stream/item").language("COM_EASYSOCIAL_STORY_SUBMIT_ERROR","COM_EASYSOCIAL_STORY_CONTENT_EMPTY").done(function(){EasySocial.Controller("Story",{defaultOptions:{plugin:{},attachment:{limit:1,lifo:!0},"{header}":"[data-story-header]","{body}":"[data-story-body]",
"{footer}":"[data-story-footer]","{form}":"[data-story-form]","{textField}":"[data-story-textField]:not(.shadow)","{target}":"[data-story-target]","{submitButton}":"[data-story-submit]","{privacyButton}":"[data-story-privacy]","{panelContents}":"[data-story-panel-contents]","{panelContent}":"[data-story-panel-content]","{panelButton}":"[data-story-panel-button]","{attachmentContainer}":"[data-story-attachment-container]","{attachmentIcon}":"[data-story-attachment-icon]","{attachmentButtons}":"[data-story-attachment-buttons]",
"{attachmentButton}":"[data-story-attachment-button]","{attachmentItems}":"[data-story-attachment-items]","{attachmentItem}":"[data-story-attachment-item]","{attachmentContent}":"[data-story-attachment-content]","{attachmentToolbar}":"[data-story-attachment-toolbar]","{attachmentDragHandle}":"[data-story-attachment-drag-handle]","{attachmentRemoveButton}":"[data-story-attachment-remove-button]","{attachmentClearButton}":"[data-story-attachment-clear-button]","{streamContainer}":"[data-streams]","{streamItem}":"[data-streamItem]"},
hostname:"story"},function(b){return{init:function(){window.___story=b;b.id=b.element.data("story");d.each(b.options.plugin,function(a,c){var e=b.plugins[a]=c;"attachment"==e.type&&b.attachments.max++;e.selector=b.getPluginSelector(a)});d.module("story-"+b.id).resolve(b)},"{textField} click":function(a){var c=b.element;c.hasClass("active")||(c.addClass("active"),a.expandingTextarea().focus(),setTimeout(function(){c.addTransitionClass("no-transition").addClass("expanded")},500))},plugins:{},getPluginName:function(a){return d(a).data("story-plugin-name")},
getPluginSelector:function(a){return"[data-story-plugin-name="+a+"]"},hasPlugin:function(a,c){var e=b.plugins[a];return e?c?e.type===c:!0:!1},buildPluginSelectors:function(a,c,e){var f={};d.each(a,function(a,d){var g=b[d].selector+c.selector;"function"==e?f[d]=function(){return b.find(g)}:f["{"+d+"}"]=g});return f},"{self} addPlugin":function(a,c,e,f,g,h){if(b.hasPlugin(e)){a=b.plugins[e];c={};switch(a.type){case "attachment":c=b.buildPluginSelectors("attachmentIcon attachmentButton attachmentItem attachmentContent attachmentToolbar attachmentDragHandle attachmentRemoveButton".split(" "),
a,h);break;case "panel":c=b.buildPluginSelectors(["panelButton","panelContent"],a,h)}d.extend(g,c)}},"{self} registerPlugin":function(a,c,e,d){b.hasPlugin(e)&&(b.plugins[e].instance=d)},panels:{},currentPanel:null,getPanel:function(a){if(b.hasPlugin(a,"panel"))return a=b.plugins[a],b.panels[a.name]||(b.panels[a.name]={plugin:a,button:b.panelButton(a.selector),content:b.panelContent(a.selector)})},togglePanel:function(a){var c=b.currentPanel;c&&b.deactivatePanel(c);c!==a&&b.activatePanel(a)},activatePanel:function(a){var c=
b.getPanel(a);if(c){b.deactivatePanel(b.currentPanel);var e=b.panelContents();e.addClass("active");c.button.addClass("active");c.content.appendTo(e).addClass("active");b.invokePlugin(a,"activatePanel",[c]);b.trigger("activatePanel",[a])}},deactivatePanel:function(a){var c=b.getPanel(a);c&&(c.button.removeClass("active"),c.content.removeClass("active"),b.panelContents().removeClass("active"),b.invokePlugin(a,"deactivatePanel",[c]),b.trigger("deactivatePanel",[a]))},addPanelCaption:function(a,c){var e=
b.getPanel(a);e&&e.button.addClass("has-data").find(".with-data").html(c)},removePanelCaption:function(a){(a=b.getPanel(a))&&a.button.removeClass("has-data").find(".with-data").empty()},"{self} activatePanel":function(a,c,e){b.currentPanel=e},"{self} deactivatePanel":function(a,c,e){b.currentPanel===e&&(b.currentPanel=null)},"{panelButton} click":function(a,c){var e=b.getPluginName(a);b.togglePanel(e)},attachments:{length:0,max:0},currentAttachment:null,getAttachment:function(a){if(b.hasPlugin(a,
"attachment"))return b.attachments[a]},addAttachment:function(a){if(!b.hasPlugin(a,"attachment"))return!1;var c=b.plugins[a],e=b.attachments,d=e[a];if(d)return d;var g=function(){var d={plugin:c,button:b.attachmentButton(c.selector),icon:b.attachmentIcon(c.selector)};d.item=b.attachmentItem(c.selector).prependTo(b.attachmentItems());e[c.name]=d;e.length++;b.invokePlugin(a,"addAttachment",[d]);b.trigger("addAttachment",[d])},h=b.options.attachment,p=h.lifo;if(0<h.limit&&e.length>=h.limit)return p?
(g(),g=b.getPluginName(b.attachmentItem(":last")),b.removeAttachment(g),d):!1;g();return d},removeAttachment:function(a){var c=b.getAttachment(a);if(c)return b.invokePlugin(a,"removeAttachment",[c]),b.trigger("removeAttachment",[c]),c.icon.removeClass("active"),c.button.removeClass("active"),setTimeout(function(){c.item.removeClass("active")},0),delete b.attachments[a],b.attachments.length--,b.invokePlugin(a,"destroyAttachment",[c]),b.trigger("destroyAttachment",[c]),c},clearAttachment:function(){var a=
d.map(b.attachments,function(a,e){if(!/length|max/.test(e))return b.removeAttachment(e),e});b.trigger("clearAttachment",[a])},activateAttachment:function(a){var c=b.getAttachment(a);c&&(b.deactivateAttachment(b.currentAttachment),c.icon.addClass("active"),c.button.addClass("active"),setTimeout(function(){c.item.addClass("active")},0),b.invokePlugin(a,"activateAttachment",[c]),b.trigger("activateAttachment",[c]))},deactivateAttachment:function(a){var c=b.attachments[a];c&&(c.icon.removeClass("active"),
c.button.removeClass("active"),setTimeout(function(){c.item.removeClass("active")},0),b.invokePlugin(a,"deactivateAttachment",[c]),b.trigger("deactivateAttachment",[c]))},"{self} activateAttachment":function(a,c,e){a=e.plugin.name;b.currentAttachment=a;b.body().addClass("active");b.element.addClass("attaching-"+a)},"{self} deactivateAttachment":function(a,c,e){a=e.plugin.name;b.currentAttachment===a&&(b.currentAttachment=null);b.body().removeClass("active");b.element.removeClass("attaching-"+a)},
"{attachmentButton} click":function(a,c){var e=b.getPluginName(a);"text"==e?(a.addClass("active"),b.textField().focus()):(b.getAttachment(e)||b.addAttachment(e))&&b.activateAttachment(e)},"{attachmentClearButton} click":function(){b.clearAttachment()},"{self} addAttachment":function(a,c,e){a=e.plugin.name;b.attachmentButton(".for-text").removeClass("active");b.activateAttachment(a)},"{self} removeAttachment":function(a,c,e){b.element.removeClass("attaching-"+e.plugin.name)},"{self} destroyAttachment":function(a,
c,e){1>b.attachments.length&&(b.body().removeClass("active"),b.attachmentButton(".for-text").addClass("active"))},"{attachmentRemoveButton} click":function(a,c){var e=b.getPluginName(a);b.removeAttachment(e)},saving:!1,save:function(){if(!b.saving){b.saving=!0;var a=d.Deferred();a.data={};a.tasks=[];a.addData=function(c,e){var f=c.options.name;if("attachment"==c.options.type){if(f!==b.currentAttachment)return;a.data.attachment=b.currentAttachment}d.isPlainObject(e)?d.each(e,function(b,c){a.data[f+
"_"+b]=c}):a.data[f]=e};a.addTask=function(b){var e=d.Deferred();e.name=b;e.save=a;a.tasks.push(e);return e};a.process=function(){"pending"===a.state()&&d.when.apply(d,a.tasks).done(function(){a.data.content||a.data.attachment?a.resolve():a.reject(d.language("COM_EASYSOCIAL_STORY_CONTENT_EMPTY"),"warning")}).fail(a.reject);return a};b.clearMessage();b.trigger("save",[a]);b.element.addClass("saving");a.process().done(function(){EasySocial.ajax("site/controllers/story/create",a.data).done(function(){b.trigger("create",
arguments);b.clear()}).fail(function(a){b.trigger("fail",arguments);a&&b.setMessage(a.message,a.type)}).always(function(){b.element.removeClass("saving");b.saving=!1})}).fail(function(a,e){a||(a=d.language("COM_EASYSOCIAL_STORY_SUBMIT_ERROR"),e="error");b.setMessage(a,e);b.element.removeClass("saving");b.saving=!1})}},clear:function(){b.textField().val("");b.trigger("clear");b.deactivateAttachment(b.currentAttachment);b.deactivatePanel(b.currentPanel);b.attachmentButton(".for-text").addClass("active");
b.clearMessage();b.textField().focus().expandingTextarea("resize")},"{self} save":function(a,c,e){a=d.trim(b.textField().val());e.data.content=a;e.data.target=b.target().val();e.data.privacy=b.find("[data-privacy-hidden]").val();e.data.privacyCustom=b.find("[data-privacy-custom-hidden]").val()},"{submitButton} click":function(a,c){b.save()},"{privacyButton} click":function(a){setTimeout(function(){var c=a.find("[data-es-privacy-container]").hasClass("active");b.footer().toggleClass("allow-overflow",
c)},1)}}});g.resolve()})});EasySocial.module("story/friends",function(d){var g=this;EasySocial.require().library("textboxlist").language("COM_EASYSOCIAL_WITH_FRIENDS","COM_EASYSOCIAL_AND_ONE_OTHER","COM_EASYSOCIAL_AND_MANY_OTHERS").done(function(){EasySocial.Controller("Story.Friends",{defaultOptions:{"{friendList}":".es-story-friends-textbox",showSummary:!1,summarizeNamesAfter:2,concatNamesWith:", "}},function(b){return{init:function(){b.friendList().textboxlist({plugin:{autocomplete:{exclusive:!0,
cache:!1,query:b.search,filterItem:b.createMenuItem}}})},search:function(a){var c=b.getTaggedUsers();return EasySocial.ajax("site/controllers/friends/suggest",{search:a,exclude:c})},getTaggedUsers:function(){var a=[],b=d("[data-textboxlist-item]");0<b.length&&d.each(b,function(b,c){a.push(d(c).data("id"))});return a},createMenuItem:function(a,b){a.title=a.screenName;var e=d(new Image).addClass("textboxlist-menu-avatar").attr({src:a.avatar}).toHTML();a.html=e+" "+a.title;a.menuHtml=e+" "+a.title;return a},
updatePanelCaption:function(){var a=b.options,c=b.friendList().controller("textboxlist").getAddedItems(),e=c.length,f=a.summarizeNamesAfter,g=Math.max(f-1,e-1),f=e-f;a.showFriendSummary&&(e=d.language("COM_EASYSOCIAL_WITH_FRIENDS",d.map(c.slice(0,g),function(a){return a.screenName}).join(a.concatNamesWith)),1==f&&(e+=d.language("COM_EASYSOCIAL_AND_ONE_OTHER")),1<f&&(e+=d.language("COM_EASYSOCIAL_AND_MANY_OTHERS",f)));b.story.addPanelCaption("friends",e)},"{friendList} addItem":function(){b.updatePanelCaption()},
"{friendList} removeItem":function(){b.updatePanelCaption()},mention:function(a,c,e){b.search(c).done(function(a){var b=[];d.each(a,function(a,c){b.push({id:c.id,name:c.screenName,avatar:c.avatar,type:"contact"})});e(b)})},"{story} save":function(a,c,e){a=b.friendList().controller("textboxlist").getAddedItems().map(function(a){return a.id});e.addData(b,{tags:a})},"{story} clear":function(){b.friendList().controller("textboxlist").clearItems()}}});g.resolve()})});EasySocial.module("story/links",function(d){var g=
this;EasySocial.require().view("apps/user/links/story.attachment.item").done(function(){EasySocial.Controller("Story.Links",{defaultOptions:{view:{linkItem:"apps/user/links/story.attachment.item"},urlParser:/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi,"{linkForm}":"[data-story-link-form]","{linkInput}":"[data-story-link-input]","{linkContent}":"[data-story-link-content]","{linkItem}":"[data-story-link-item]","{linkTitle}":"[data-story-link-title]","{linkDescription}":"[data-story-link-description]",
"{linkImages}":"[data-story-link-images]","{linkImage}":"[data-story-link-image]","{titleTextfield}":"[data-story-link-title-textfield]","{descriptionTextfield}":"[data-story-link-description-textfield]","{attachButton}":"[data-story-link-attach-button]","{removeButton}":"[data-story-link-remove-button]","{removeThumbnail}":"[data-story-link-remove-image]"}},function(b){return{init:function(){},activateAttachment:function(){b.doNotFocus||setTimeout(function(){b.linkInput().focus();b.doNotFocus=!1},
500)},links:{},currentLink:null,crawling:!1,extractUrls:function(a){a=a.match(b.options.urlParser);return d.isArray(a)?d.map(a,function(a,b){return d.trim(a)}):[]},getLink:function(a){d.isString(a)&&(a=b.extractUrls(a));if(!(0>a.length))return a=a[0],link=b.links[a]||b.createLink(a)},createLink:function(a){var c=b.links[a]=d.Deferred();c.url=a;b.crawling=!0;EasySocial.ajax("site/controllers/crawler/fetch",{urls:[a]}).done(function(e){(e=e[a])||c.reject();c.info=e;var d=e.opengraph||{};c.data={title:d.title||
e.title,desc:d.desc||e.description,url:a,images:d.image?[d.image]:e.images};c.item=b.view.linkItem(c.data).data("link",c);c.item.addController("EasySocial.Controller.Story.Links.Item");c.resolve(c)}).fail(function(){c.reject()}).always(function(){b.crawling=!1});return c},addLink:function(a){b.linkContent().empty().append(a.item);b.linkForm().hide();b.currentLink=a},removeLink:function(){b.linkItem().detach();b.linkForm().show();b.currentLink=null},"{attachButton} click":function(){b.linkInput();
var a=b.linkForm(),c=d.trim(b.linkInput().val());""!==c&&(c=d.uri(c),/http|https/.test(c.protocol())||c.setProtocol("http"),c=c.toString(),b.linkInput().val(c),a.addClass("busy"),b.getLink(c).done(function(a){b.addLink(a)}).always(function(){a.removeClass("busy")}))},"{removeButton} click":function(a){b.currentLink.disabled=!0;b.removeLink()},"{story.textField} keypress":d._.debounce(function(a,c){if(!b.currentLink&&!b.crawling){var e=a.val();if(e=b.extractUrls(e)[0]){var d=b.links[e];d&&d.disabled||
(b.linkInput().val(e),b.doNotFocus=!0,b.attachmentButton().click(),b.attachButton().click())}}},750),"{story} save":function(a,c,e){b.currentLink&&(a={title:b.titleTextfield().val(),description:b.descriptionTextfield().val(),url:b.currentLink.url},b.removeThumbnail().is(":checked")||(a.image=b.linkImage(".active").attr("src")),e.addData(b,a))},"{story} clear":function(){b.linkInput().val("");b.removeLink()}}});EasySocial.Controller("Story.Links.Item",{defaultOptions:{"{previousImage}":"[data-story-link-image-prev]",
"{nextImage}":"[data-story-link-image-next]","{image}":"[data-story-link-image]","{imagesWrapper}":"[data-story-link-images]","{imageIndex}":"[data-story-link-image-index]","{removeThumbnail}":"[data-story-link-remove-image]","{title}":"[data-story-link-title]","{description}":"[data-story-link-description]","{titleTextfield}":"[data-story-link-title-textfield]","{descriptionTextfield}":"[data-story-link-description-textfield]"}},function(b){return{init:function(){},"{removeThumbnail} click":function(){var a=
b.removeThumbnail().is(":checked");a?b.imagesWrapper().hide():b.imagesWrapper().show();b.element.toggleClass("has-images",!a)},"{previousImage} click":function(){var a=b.image(".active").prev(),c=b.image(".active"),e=parseInt(b.imageIndex().html())-1;0<a.length&&(d(c).removeClass("active"),d(a).addClass("active"),b.imageIndex().html(e))},"{nextImage} click":function(){var a=b.image(".active").next(),c=b.image(".active"),e=parseInt(b.imageIndex().html())+1;0<a.length&&(d(c).removeClass("active"),d(a).addClass("active"),
b.imageIndex().html(e))},"{title} click":function(){var a=b.element.hasClass("editing-title");b.element.toggleClass("editing-title",!a);a||b.editTitle()},editTitleEvent:"click.es.story.editLinkTitle",editTitle:function(){b.element.addClass("editing-title");setTimeout(function(){b.titleTextfield().val(b.title().text()).focus()[0].select();d(document).on(b.editTitleEvent,function(a){a.target!==b.titleTextfield()[0]&&b.saveTitle("save")})},1)},saveTitle:function(a){a||(a=save);var c=b.titleTextfield().val();
switch(a){case "save":""===c&&(c=b.title().data("default")),b.title().html(c)}b.element.removeClass("editing-title");d(document).off(b.editTitleEvent)},"{titleTextfield} keyup":function(a,c){27==c.keyCode&&b.saveTitle("revert")},"{description} click":function(){var a=b.element.hasClass("editing-description");b.element.toggleClass("editing-description",!a);a||b.editDescription()},editDescriptionEvent:"click.es.story.editLinkDescription",editDescription:function(){b.element.addClass("editing-description");
setTimeout(function(){var a=b.description().clone(),c=a.hasClass("no-description");a.wrapInner(b.descriptionTextfield());c&&b.descriptionTextfield().val("");b.descriptionTextfield().expandingTextarea();b.descriptionTextfield().focus()[0].select();d(document).on(b.editDescriptionEvent,function(a){a.target!==b.descriptionTextfield()[0]&&b.saveDescription("save")})},1)},saveDescription:function(a){a||(a=save);var c=b.descriptionTextfield().val().replace(/\n/g,"<br//>");switch(a){case "save":a=""===c,
b.description().toggleClass("no-description",a),a&&(c=b.descriptionTextfield().attr("placeholder")),b.description().html(c)}b.descriptionTextfield().expandingTextarea("destroy");b.element.find(".textareaClone").remove();b.element.removeClass("editing-description");d(document).off(b.editDescriptionEvent)},"{descriptionTextfield} keyup":function(a,c){27==c.keyCode&&b.saveDescription("revert")}}});g.resolve()})});EasySocial.module("story/locations",function(d){var g=this;EasySocial.require().library("gmaps",
"scrollTo").view("apps/user/locations/suggestion").language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR").done(function(){EasySocial.Controller("Story.Locations",{defaultOptions:{view:{suggestion:"apps/user/locations/suggestion"},map:{lat:0,lng:0},"{form}":"[data-story-location-form]","{textField}":"[data-story-location-textField]","{detectButton}":"[data-story-location-detect-button]","{autocomplete}":"[data-story-location-autocomplete]","{suggestions}":"[data-story-location-suggestions]","{suggestion}":"[data-story-location-suggestion]",
"{viewport}":"[data-story-location-viewport]","{textbox}":"[data-story-location-textbox]","{removeButton}":"[data-story-location-remove-button]"}},function(b){return{init:function(){navigator.geolocation&&b.detectButton().show();b.textField().removeAttr("disabled")},"{window} resize":d.debounce(function(){var a=b.currentLocation;if(a){var c=b.viewport();c.data("width")!==c.width()&&(c=a.geometry.location,a=c.lat(),c=c.lng(),b.navigate(a,c))}},250),navigate:function(a,c){var e=b.viewport(),f=e.width(),
e=e.height(),g=d.GMaps.staticMapURL({size:[f,e],lat:a,lng:c,markers:[{lat:a,lng:c}]});b.viewport().css({backgroundImage:d.cssUrl(g)}).data({width:f,height:e});b.form().addClass("has-location")},locations:{},lastQueryAddress:null,"{textField} keypress":function(a,c){switch(c.keyCode){case 38:var e=d(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);b.suggestion().removeClass("active");e.addClass("active").trigger("activate");b.suggestions().scrollTo(e,{offset:-1*e.height()});
c.preventDefault();break;case 40:e=d(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active");e.addClass("active").trigger("activate");b.suggestions().scrollTo(e,{offset:-1*e.height()});c.preventDefault();break;case 13:e=b.suggestion(".active").data("location");b.set(e);b.hideSuggestions();break;case 27:b.hideSuggestions()}},"{textField} keyup":function(a,c){switch(c.keyCode){case 38:case 40:case 37:case 39:case 13:case 27:break;default:var e=
d.trim(a.val());""===e&&(b.form().removeClass("has-location"),b.hideSuggestions());var f=b.locations[e];f?(b.lastQueryAddress=e,b.suggest(f)):b.lookup(e)}},lookup:d._.debounce(function(a){b.textbox().addClass("busy");d.GMaps.geocode({address:a,callback:function(c,e){b.textbox().removeClass("busy");"OK"==e&&(b.locations[a]=c,b.suggest(c),b.lastQueryAddress=a)}})},250),suggest:function(a){var c=b.suggestions();c.empty();0>a.length||(d.each(a,function(a,d){b.view.suggestion({location:d}).data("location",
d).appendTo(c)}),b.showSuggestions())},showSuggestions:function(){b.focusSuggestion=!0;b.element.find(".es-story-footer").addClass("swap-zindex");setTimeout(function(){b.autocomplete().addClass("active")},500)},hideSuggestions:function(){b.focusSuggestion=!1;b.autocomplete().removeClass("active");setTimeout(function(){b.focusSuggestion||b.element.find(".es-story-footer").removeClass("swap-zindex")},500)},"{suggestion} activate":function(a,c){var e=a.data("location");b.navigate(e.geometry.location.lat(),
e.geometry.location.lng())},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active");a.addClass("active").trigger("activate")},"{suggestion} click":function(a,c){var e=a.data("location");b.set(e);b.hideSuggestions()},set:function(a){b.currentLocation=a;b.navigate(a.geometry.location.lat(),a.geometry.location.lng());var c=a.formatted_address;b.textField().val(c);b.lastQueryAddress=c;b.story.addPanelCaption("locations",a.formatted_address);b.form().addClass("has-location")},unset:function(){b.currentLocation=
null;b.textField().val("");b.story.removePanelCaption("locations");b.viewport().css("backgroundImage","");b.form().removeClass("has-location")},activatePanel:function(){setTimeout(function(){b.textField().focus()},500)},deactivatePanel:function(){var a=b.currentLocation;a&&b.set(a)},detectTimer:null,"{detectButton} click":function(){var a=b.story,c=b.textbox();c.addClass("busy");clearTimeout(b.detectTimer);b.detectTimer=setTimeout(function(){a.setMessage(d.language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR"));
c.removeClass("busy")},8E3);d.GMaps.geolocate({success:function(c){a.clearMessage();d.GMaps.geocode({lat:c.coords.latitude,lng:c.coords.longitude,callback:function(a,c){"OK"==c&&(b.suggest(a),b.textField().focus())}})},error:function(b){a.setMessage(b.message,"error")},always:function(){clearTimeout(b.detectTimer);c.removeClass("busy")}})},"{removeButton} click":function(){b.unset();b.hideSuggestions()},"{story} save":function(a,c,e){(a=b.currentLocation)&&e.addData(b,{short_address:a.address_components[0].long_name,
formatted_address:a.formatted_address,lat:a.geometry.location.lat(),lng:a.geometry.location.lng()})},"{story} clear":function(){b.unset();b.hideSuggestions()}}});g.resolve()})});EasySocial.module("story/photos",function(d){var g=this;EasySocial.require().script("albums/uploader").done(function(){EasySocial.Controller("Story.Photos",{defaultOptions:{"{albumView}":"[data-album-view]","{albumContent}":"[data-album-content]","{uploadButton}":"[data-album-upload-button]","{photoItemGroup}":"[data-photo-item-group]",
"{photoItem}":"[data-photo-item]","{photoImage}":"[data-photo-image]","{photoRemoveButton}":"[data-photo-remove-button]","{uploadItem}":"[data-photo-upload-item]"}},function(b){return{init:function(){b.uploader=b.albumView().addController(EasySocial.Controller.Albums.Uploader,d.extend({"{uploadButton}":b.uploadButton.selector,"{uploadItemGroup}":b.photoItemGroup.selector,"{uploadDropsite}":b.albumContent.selector},{settings:b.options.uploader}));b.photoItemGroup().css("opacity",1);b.addPlugin("uploader",
b.uploader);b.setLayout()},hasItems:function(){var a=0<b.photoItem().length,c=0<b.uploadItem().length;return a||c},setLayout:function(){b.albumView().toggleClass("has-photos",b.hasItems())},activateAttachment:function(){},removePhoto:function(a){b.photoItem().filterBy("photoId",a).remove();b.setLayout()},clearPhoto:function(){b.photoItem().remove();b.setLayout()},"{uploader} FilesAdded":function(){b.setLayout();b.uploader.start()},"{uploader} FileUploaded":function(a,c,e,f,g){a=b.uploader.getItem(f);
var h=d(d.parseHTML(d.trim(g.html)));photoData=g.data;h.data("photo",photoData).addClass("new-item").insertAfter(a.element);b.uploader.removeItem(f.id);b.setLayout();setTimeout(function(){h.removeClass("new-item")},1);b.save()},"{uploader} FileError":function(a,c,e,d,g){b.story.setMessage(g.message,"error");if(a=b.uploadingPhoto)a.reject(),delete b.uploadingPhoto},"{uploader} Error":function(a,c,e,d){b.story.setMessage(d.message,"error");if(a=b.uploadingPhoto)a.reject(),delete b.uploadingPhoto},"{photoRemoveButton} click":function(a){a=
a.parent(b.photoItem.selector).data("photoId");b.removePhoto(a)},"{story} save":function(a,c,e){b.hasItems()&&(b.uploadingPhoto=e.addTask("uploadingPhoto"),b.save())},save:function(){var a=b.uploadingPhoto;if(a&&1>b.uploadItem().length){var c=[],e=a.save;b.photoItem().each(function(){c.push(d(this).data("photoId"))});e.addData(b,c);a.resolve();delete b.uploadingPhoto}},"{story} clear":function(){b.clearPhoto()}}});g.resolve()})});EasySocial.module("stream",function(){var d=this;EasySocial.require().library("dialog").script("comment").view("site/likes/item").language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE",
"COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBSCRIBE","COM_EASYSOCIAL_STREAM_DIALOG_FEED","COM_EASYSOCIAL_STREAM_BUTTON_CLOSE").done(function(g){EasySocial.Controller("Stream.Item",{defaultOptions:{id:"","{streamItem}":".streamItem",
"{streamData}":".streamData","{streamResponds}":".stream-responds","{likeItem}":".likeItem","{likeItemList}":".likeItemList","{commentLink}":".commentLink","{commentFrame}":".commentFrame","{commentInput}":".commentInput","{followItem}":".followItem","{unfollowItem}":".unfollowItem","{hideItem}":".hideItem","{unhideItem}":".unhideItem"}},function(b){return{init:function(){b.commentFrame().implement("EasySocial.Controller.Comments",{uid:b.element.data("id"),pagination:new CommentPagination({total:b.commentFrame().data("total")}),
commentlist:new Comment.List})},"{likeItem} click":function(){EasySocial.ajax("site:/controllers/likes/toggle",{id:b.element.data("id"),type:"stream"},{success:function(a){var c="";0<a.likeCount&&(c=b.view.likeitem({likeCount:a.likeCount}),c.find(".likeText").html(a.message));b.likeItemList().html(c);b.likeItem().text(a.label)},fail:function(){}})},"{unfollowItem} click":function(){var a=b.element.data("sid");a&&g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE"),content:g.language("COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE"),
buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE"),click:function(){EasySocial.ajax("site:/controllers/subscriptions/remove",{id:a},{success:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK"),click:function(){b.unfollowItem().removeClass("unfollowItem");g.dialog().close()}}]})},fail:function(){}})}},{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),
click:function(){g.dialog().close()}}]})},"{followItem} click":function(){EasySocial.ajax("site:/controllers/subscriptions/form",{contentId:b.element.data("id"),contentType:"stream"},{success:function(a){""!=a.message?g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),click:function(){g.dialog().close()}}]}):g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:a.htmlform,
buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT"),click:function(){var a=g("#esfullname").val(),e=g("#email").val();EasySocial.ajax("site:/controllers/subscriptions/add",{contentId:b.element.data("id"),contentType:"stream",esfullname:a,email:e},{success:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK"),click:function(){b.followItem().removeClass("followItem");
g.dialog().close()}}]})},fail:function(){}})}},{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),click:function(){g.dialog().close()}}]})},fail:function(){}})},"{hideItem} click":function(){EasySocial.ajax("site:/controllers/stream/hide",{id:b.element.data("id")},{success:function(a){a="<div>"+a.message+"</div>";b.streamData().hide();b.element.append(a)},fail:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_STREAM_DIALOG_FEED"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_STREAM_BUTTON_CLOSE"),
click:function(){g.dialog().close()}}]})}})},"{unhideItem} click":function(){EasySocial.ajax("site:/controllers/stream/unhide",{id:b.element.data("id")},{success:function(a){b.streamData().show();b.element.children().last().remove()},fail:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_STREAM_DIALOG_FEED"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_STREAM_BUTTON_CLOSE"),click:function(){g.dialog().close()}}]})}})},"{commentLink} click":function(){b.commentInput().focus()}}});
d.resolve()})});EasySocial.module("tab",function(d){EasySocial.Controller("Tab",{defaultOptions:{view:{},"{tabs}":"","{tabsContent}":"","{defaultActive}":""}},function(g){return{init:function(){console.log("Tabs loaded");g.defaultActive().click()},"{tabs} click":function(b){if(d(b).hasClass("inactive"))return!1;g.tabs(".active").removeClass("active");d(b).addClass("active");g.tabsContent().hide();b=".tab-"+d(b).attr("id");g.tabsContent(b).show()}}});this.resolve()});EasySocial.module("toggle",function(d){EasySocial.Controller("Toggle",
{defaultOptions:{view:{},"{selector}":""}},function(g){return{init:function(){console.log("Toggle loaded")},"{selector} click":function(b){d(b).next().toggle();d(b).toggleClass("this-closed")}}});this.resolve()});EasySocial.module("uploader/item",function(d){EasySocial.require().view("site/uploader/preview").done(function(d){EasySocial.Controller("Uploader.Item",{defaults:{"{uploadItem}":".uploadItem","{uploadItemPreview}":".uploadItem.preview a.itemLink","{itemLink}":".itemLink","{itemDelete}":".itemDelete",
view:{preview:"site/uploader/preview"}}},function(b){return{init:function(){},"{itemDelete} click":function(a){var b=d(a).data("id");EasySocial.ajax("site:/controllers/uploader/delete",{id:b},function(){d(a).parents("li.uploadItem").remove()})},"{uploadItemPreview} click":function(a){var b=d(a).data("uri");a=d(a).data("title");d.dialog({title:a,content:d.Image.get(b)})}}})});this.resolve()});EasySocial.module("utilities/alias",function(d){EasySocial.Controller("Utilities.Alias",{defaultOptions:{"{target}":"",
"{source}":""}},function(d){return{init:function(){},convertToPermalink:function(b){return b.replace(/\s/g,"-").replace(/[^\w/-]/g,"").toLowerCase()},"{source} keyup":function(){d.target().val(d.convertToPermalink(d.source().val()))},"{target} keyup":function(){d.target().val(d.convertToPermalink(d.target().val()))}}});this.resolve()})});