function p(d){return d.Kb("ui.sortable",d.u.Db,{version:"1.11.1",Lb:"sort",ready:!1,options:{P:"parent",axis:!1,ca:!1,h:!1,cursor:"auto",wa:!1,Sa:!0,Ua:!1,za:!1,B:!1,handle:!1,f:"original",items:"> *",opacity:!1,placeholder:!1,Ca:!1,scroll:!0,D:20,F:20,scope:"default",ha:"intersect",zIndex:1E3,ob:null,tb:null,vb:null,wb:null,Eb:null,C:null,Gb:null,remove:null,sort:null,start:null,stop:null,update:null},O:function(a,b,c){return a>=b&&a<b+c},sa:function(a){return/left|right/.test(a.c("float"))||/inline|table-cell/.test(a.c("display"))},
bb:function(){var a=this.options;this.l={};this.element.ba("ui-sortable");this.refresh();this.L=this.items.length?"x"===a.axis||this.sa(this.items[0].item):!1;this.offset=this.element.offset();this.hb();this.$();this.ready=!0},mb:function(a,b){this.nb(a,b);"handle"===a&&this.$()},$:function(){this.element.find(".ui-sortable-handle").N("ui-sortable-handle");d.I(this.items,function(){(this.T.options.handle?this.item.find(this.T.options.handle):this.item).ba("ui-sortable-handle")})},eb:function(){this.element.N("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").N("ui-sortable-handle");
this.gb();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.Hb(this.Y+"-item");return this},fb:function(a,b){var c=null,f=!1,e=this;if(this.ga||this.options.disabled||"static"===this.options.type)return!1;this.ua(a);d(a.target).Va().I(function(){if(d.data(this,e.Y+"-item")===e)return c=d(this),!1});d.data(a.target,e.Y+"-item")===e&&(c=d(a.target));if(!c||this.options.handle&&!b&&(d(this.options.handle,c).find("*").pb().I(function(){this===a.target&&(f=!0)}),!f))return!1;this.a=c;this.Na();
return!0},ib:function(a,b,c){var f;b=this.options;this.w=this;this.fa();this.f=this.Ha(a);this.ia();this.Fa();this.g=this.f.g();this.offset=this.a.offset();this.offset={top:this.offset.top-this.m.top,left:this.offset.left-this.m.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this.qa(),G:this.ra()});this.f.c("position","absolute");this.v=this.f.c("position");this.ea=this.ma(a);this.Aa=a.pageX;this.Ba=a.pageY;b.wa&&this.Ea(b.wa);this.K={M:this.a.M()[0],
parent:this.a.parent()[0]};this.f[0]!==this.a[0]&&this.a.Bb();this.Ia();b.h&&this.Oa();b.cursor&&"auto"!==b.cursor&&(f=this.document.find("body"),this.Da=f.c("cursor"),f.c("cursor",b.cursor),this.Ya=d("<style>*{ cursor: "+b.cursor+" !important; }</style>").P(f));b.opacity&&(this.f.c("opacity")&&(this.va=this.f.c("opacity")),this.f.c("opacity",b.opacity));b.zIndex&&(this.f.c("zIndex")&&(this.aa=this.f.c("zIndex")),this.f.c("zIndex",b.zIndex));this.g[0]!==document&&"HTML"!==this.g[0].tagName&&(this.X=
this.g.offset());this.i("start",a,this.j());this.lb||this.ia();if(!c)for(c=this.b.length-1;0<=c;c--)this.b[c].i("activate",a,this.j(this));d.u.A&&(d.u.A.current=this);d.u.A&&!b.ya&&d.u.A.Wa(this,a);this.da=!0;this.f.ba("ui-sortable-helper");this.Ma(a);return!0},Ma:function(a){var b,c,f,e;b=this.options;c=!1;this.position=this.ma(a);this.s=this.la("absolute");this.V||(this.V=this.s);this.options.scroll&&(this.g[0]!==document&&"HTML"!==this.g[0].tagName?(this.X.top+this.g[0].offsetHeight-a.pageY<b.D?
this.g[0].scrollTop=c=this.g[0].scrollTop+b.F:a.pageY-this.X.top<b.D&&(this.g[0].scrollTop=c=this.g[0].scrollTop-b.F),this.X.left+this.g[0].offsetWidth-a.pageX<b.D?this.g[0].scrollLeft=c=this.g[0].scrollLeft+b.F:a.pageX-this.X.left<b.D&&(this.g[0].scrollLeft=c=this.g[0].scrollLeft-b.F)):(a.pageY-d(document).scrollTop()<b.D?c=d(document).scrollTop(d(document).scrollTop()-b.F):d(window).height()-(a.pageY-d(document).scrollTop())<b.D&&(c=d(document).scrollTop(d(document).scrollTop()+b.F)),a.pageX-d(document).scrollLeft()<
b.D?c=d(document).scrollLeft(d(document).scrollLeft()-b.F):d(window).width()-(a.pageX-d(document).scrollLeft())<b.D&&(c=d(document).scrollLeft(d(document).scrollLeft()+b.F))),!1!==c&&d.u.A&&!b.ya&&d.u.A.Wa(this,a));this.s=this.la("absolute");this.options.axis&&"y"===this.options.axis||(this.f[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.f[0].style.top=this.position.top+"px");for(b=this.items.length-1;0<=b;b--)if(c=this.items[b],f=c.item[0],(e=this.Ka(c))&&
c.T===this.w&&f!==this.a[0]&&this.placeholder[1===e?"next":"prev"]()[0]!==f&&!d.contains(this.placeholder[0],f)&&("semi-dynamic"===this.options.type?!d.contains(this.element[0],f):1)){this.direction=1===e?"down":"up";if("pointer"===this.options.ha||this.La(c))this.Z(a,c);else break;this.i("change",a,this.j());break}this.Ga(a);d.u.A&&d.u.A.xb(this,a);this.i("sort",a,this.j());this.V=this.s;return!1},jb:function(a,b){if(a){d.u.A&&!this.options.ya&&d.u.A.yb(this,a);if(this.options.Ca){var c=this,f=this.placeholder.offset(),
e=this.options.axis,g={};e&&"x"!==e||(g.left=f.left-this.offset.parent.left-this.m.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));e&&"y"!==e||(g.top=f.top-this.offset.parent.top-this.m.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.ga=!0;d(this.f).rb(g,parseInt(this.options.Ca,10)||500,function(){c.ja(a)})}else this.ja(a,b);return!1}},cancel:function(){if(this.da){this.kb({target:null});"original"===this.options.f?this.a.c(this.H).N("ui-sortable-helper"):
this.a.show();for(var a=this.b.length-1;0<=a;a--)this.b[a].i("deactivate",null,this.j(this)),this.b[a].l.C&&(this.b[a].i("out",null,this.j(this)),this.b[a].l.C=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.f&&this.f&&this.f[0].parentNode&&this.f.remove(),d.extend(this,{f:null,da:!1,ga:!1,ta:null}),this.K.M?d(this.K.M).Pa(this.a):d(this.K.parent).Fb(this.a));return this},Ib:function(a){var b=this.pa(a&&
a.Ra),c=[];a=a||{};d(b).I(function(){var b=(d(a.item||this).J(a.Qa||"id")||"").match(a.Ta||/(.+)[\-=_](.+)/);b&&c.push((a.key||b[1]+"[]")+"="+(a.key&&a.Ta?b[1]:b[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},Jb:function(a){var b=this.pa(a&&a.Ra),c=[];a=a||{};b.I(function(){c.push(d(a.item||this).J(a.Qa||"id")||"")});return c},Ja:function(a){var b=this.s.left,c=b+this.o.width,f=this.s.top,d=f+this.o.height,g=a.left,l=g+a.width,h=a.top,m=h+a.height,k=this.offset.click.top,n=this.offset.click.left,
n="y"===this.options.axis||b+n>g&&b+n<l,k=("x"===this.options.axis||f+k>h&&f+k<m)&&n;return"pointer"===this.options.ha||this.options.zb||"pointer"!==this.options.ha&&this.o[this.L?"width":"height"]>a[this.L?"width":"height"]?k:g<b+this.o.width/2&&c-this.o.width/2<l&&h<f+this.o.height/2&&d-this.o.height/2<m},Ka:function(a){var b="y"===this.options.axis||this.O(this.s.left+this.offset.click.left,a.left,a.width),c=this.oa(),f=this.na();return"x"!==this.options.axis&&!this.O(this.s.top+this.offset.click.top,
a.top,a.height)||!b?!1:this.L?f&&"right"===f||"down"===c?2:1:c&&("down"===c?2:1)},La:function(a){var b=this.O(this.s.top+this.offset.click.top,a.top+a.height/2,a.height);a=this.O(this.s.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this.oa(),f=this.na();return this.L&&f?"right"===f&&a||"left"===f&&!a:c&&("down"===c&&b||"up"===c&&!b)},oa:function(){var a=this.s.top-this.V.top;return 0!==a&&(0<a?"down":"up")},na:function(){var a=this.s.left-this.V.left;return 0!==a&&(0<a?"right":"left")},
refresh:function(a){this.ua(a);this.$();this.fa();return this},ka:function(){var a=this.options;return a.ca.constructor===String?[a.ca]:a.ca},pa:function(a){function b(){g.push(this)}var c,f,e,g=[],l=[],h=this.ka();if(h&&a)for(a=h.length-1;0<=a;a--)for(f=d(h[a]),c=f.length-1;0<=c;c--)(e=d.data(f[c],this.$a))&&e!==this&&!e.options.disabled&&l.push([d.U(e.options.items)?e.options.items.call(e.element):d(e.options.items,e.element).W(".ui-sortable-helper").W(".ui-sortable-placeholder"),e]);l.push([d.U(this.options.items)?
this.options.items.call(this.element,null,{options:this.options,item:this.a}):d(this.options.items,this.element).W(".ui-sortable-helper").W(".ui-sortable-placeholder"),this]);for(a=l.length-1;0<=a;a--)l[a][0].I(b);return d(g)},Na:function(){var a=this.a.find(":data("+this.Y+"-item)");this.items=d.Ab(this.items,function(b){for(var c=0;c<a.length;c++)if(a[c]===b.item[0])return!1;return!0})},ua:function(a){this.items=[];this.b=[this];var b,c,f,e,g,l=this.items,h=[[d.U(this.options.items)?this.options.items.call(this.element[0],
a,{item:this.a}):d(this.options.items,this.element),this]];if((g=this.ka())&&this.ready)for(b=g.length-1;0<=b;b--)for(f=d(g[b]),c=f.length-1;0<=c;c--)(e=d.data(f[c],this.$a))&&e!==this&&!e.options.disabled&&(h.push([d.U(e.options.items)?e.options.items.call(e.element[0],a,{item:this.a}):d(e.options.items,e.element),e]),this.b.push(e));for(b=h.length-1;0<=b;b--)for(a=h[b][1],f=h[b][0],c=0,g=f.length;c<g;c++)e=d(f[c]),e.data(this.Y+"-item",a),l.push({item:e,T:a,width:0,height:0,left:0,top:0})},fa:function(a){this.offsetParent&&
this.f&&(this.offset.parent=this.qa());var b,c,f;for(b=this.items.length-1;0<=b;b--)c=this.items[b],c.T!==this.w&&this.w&&c.item[0]!==this.a[0]||(f=this.options.Za?d(this.options.Za,c.item):c.item,a||(c.width=f.outerWidth(),c.height=f.outerHeight()),f=f.offset(),c.left=f.left,c.top=f.top);if(this.options.xa&&this.options.xa.Xa)this.options.xa.Xa.call(this);else for(b=this.b.length-1;0<=b;b--)f=this.b[b].element.offset(),this.b[b].l.left=f.left,this.b[b].l.top=f.top,this.b[b].l.width=this.b[b].element.outerWidth(),
this.b[b].l.height=this.b[b].element.outerHeight();return this},Ia:function(a){a=a||this;var b,c=a.options;c.placeholder&&c.placeholder.constructor!==String||(b=c.placeholder,c.placeholder={element:function(){var c=a.a[0].nodeName.toLowerCase(),e=d("<"+c+">",a.document[0]).ba(b||a.a[0].className+" ui-sortable-placeholder").N("ui-sortable-helper");"tr"===c?a.a.children().I(function(){d("<td>&#160;</td>",a.document[0]).J("colspan",d(this).J("colspan")||1).P(e)}):"img"===c&&e.J("src",a.a.J("src"));b||
e.c("visibility","hidden");return e},update:function(f,d){if(!b||c.Ua)d.height()||d.height(a.a.innerHeight()-parseInt(a.a.c("paddingTop")||0,10)-parseInt(a.a.c("paddingBottom")||0,10)),d.width()||d.width(a.a.innerWidth()-parseInt(a.a.c("paddingLeft")||0,10)-parseInt(a.a.c("paddingRight")||0,10))}});a.placeholder=d(c.placeholder.element.call(a.element,a.a));a.a.Pa(a.placeholder);c.placeholder.update(a,a.placeholder)},Ga:function(a){var b,c,f,e,g,l,h,m,k=e=null;for(b=this.b.length-1;0<=b;b--)d.contains(this.a[0],
this.b[b].element[0])||(this.Ja(this.b[b].l)?e&&d.contains(this.b[b].element[0],e.element[0])||(e=this.b[b],k=b):this.b[b].l.C&&(this.b[b].i("out",a,this.j(this)),this.b[b].l.C=0));if(e)if(1===this.b.length)this.b[k].l.C||(this.b[k].i("over",a,this.j(this)),this.b[k].l.C=1);else{b=1E4;f=null;e=(c=e.L||this.sa(this.a))?"left":"top";g=c?"width":"height";m=c?"clientX":"clientY";for(c=this.items.length-1;0<=c;c--)d.contains(this.b[k].element[0],this.items[c].item[0])&&this.items[c].item[0]!==this.a[0]&&
(l=this.items[c].item.offset()[e],h=!1,a[m]-l>this.items[c][g]/2&&(h=!0),Math.abs(a[m]-l)<b&&(b=Math.abs(a[m]-l),f=this.items[c],this.direction=h?"up":"down"));(f||this.options.Sa)&&this.w!==this.b[k]&&(f?this.Z(a,f,null,!0):this.Z(a,null,this.b[k].element,!0),this.i("change",a,this.j()),this.b[k].i("change",a,this.j(this)),this.w=this.b[k],this.options.placeholder.update(this.w,this.placeholder),this.b[k].i("over",a,this.j(this)),this.b[k].l.C=1)}},Ha:function(a){var b=this.options;a=d.U(b.f)?d(b.f.apply(this.element[0],
[a,this.a])):"clone"===b.f?this.a.clone():this.a;a.Va("body").length||d("parent"!==b.P?b.P:this.a[0].parentNode)[0].appendChild(a[0]);a[0]===this.a[0]&&(this.H={width:this.a[0].style.width,height:this.a[0].style.height,position:this.a.c("position"),top:this.a.c("top"),left:this.a.c("left")});a[0].style.width&&!b.za||a.width(this.a.width());a[0].style.height&&!b.za||a.height(this.a.height());return a},Ea:function(a){"string"===typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||0});
"left"in a&&(this.offset.click.left=a.left+this.m.left);"right"in a&&(this.offset.click.left=this.o.width-a.right+this.m.left);"top"in a&&(this.offset.click.top=a.top+this.m.top);"bottom"in a&&(this.offset.click.top=this.o.height-a.bottom+this.m.top)},qa:function(){this.offsetParent=this.f.offsetParent();var a=this.offsetParent.offset();"absolute"===this.v&&this.g[0]!==document&&d.contains(this.g[0],this.offsetParent[0])&&(a.left+=this.g.scrollLeft(),a.top+=this.g.scrollTop());if(this.offsetParent[0]===
document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&d.u.Cb)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.c("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.c("borderLeftWidth"),10)||0)}},ra:function(){if("relative"===this.v){var a=this.a.position();return{top:a.top-(parseInt(this.f.c("top"),10)||0)+this.g.scrollTop(),left:a.left-(parseInt(this.f.c("left"),10)||0)+this.g.scrollLeft()}}return{top:0,left:0}},Fa:function(){this.m=
{left:parseInt(this.a.c("marginLeft"),10)||0,top:parseInt(this.a.c("marginTop"),10)||0}},ia:function(){this.o={width:this.f.outerWidth(),height:this.f.outerHeight()}},Oa:function(){var a,b,c;b=this.options;"parent"===b.h&&(b.h=this.f[0].parentNode);if("document"===b.h||"window"===b.h)this.h=[0-this.offset.G.left-this.offset.parent.left,0-this.offset.G.top-this.offset.parent.top,d("document"===b.h?document:window).width()-this.o.width-this.m.left,(d("document"===b.h?document:window).height()||document.body.parentNode.scrollHeight)-
this.o.height-this.m.top];/^(document|window|parent)$/.test(b.h)||(a=d(b.h)[0],b=d(b.h).offset(),c="hidden"!==d(a).c("overflow"),this.h=[b.left+(parseInt(d(a).c("borderLeftWidth"),10)||0)+(parseInt(d(a).c("paddingLeft"),10)||0)-this.m.left,b.top+(parseInt(d(a).c("borderTopWidth"),10)||0)+(parseInt(d(a).c("paddingTop"),10)||0)-this.m.top,b.left+(c?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(d(a).c("borderLeftWidth"),10)||0)-(parseInt(d(a).c("paddingRight"),10)||0)-this.o.width-this.m.left,
b.top+(c?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(d(a).c("borderTopWidth"),10)||0)-(parseInt(d(a).c("paddingBottom"),10)||0)-this.o.height-this.m.top])},la:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,f="absolute"!==this.v||this.g[0]!==document&&d.contains(this.g[0],this.offsetParent[0])?this.g:this.offsetParent,e=/(html|body)/i.test(f[0].tagName);return{top:b.top+this.offset.G.top*c+this.offset.parent.top*c-("fixed"===this.v?-this.g.scrollTop():e?0:f.scrollTop())*
c,left:b.left+this.offset.G.left*c+this.offset.parent.left*c-("fixed"===this.v?-this.g.scrollLeft():e?0:f.scrollLeft())*c}},ma:function(a){var b,c,f=this.options;c=a.pageX;b=a.pageY;var e="absolute"!==this.v||this.g[0]!==document&&d.contains(this.g[0],this.offsetParent[0])?this.g:this.offsetParent,g=/(html|body)/i.test(e[0].tagName);"relative"!==this.v||this.g[0]!==document&&this.g[0]!==this.offsetParent[0]||(this.offset.G=this.ra());this.ea&&(this.h&&(a.pageX-this.offset.click.left<this.h[0]&&(c=
this.h[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.h[1]&&(b=this.h[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.h[2]&&(c=this.h[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.h[3]&&(b=this.h[3]+this.offset.click.top)),f.B&&(b=this.Ba+Math.round((b-this.Ba)/f.B[1])*f.B[1],b=this.h?b-this.offset.click.top>=this.h[1]&&b-this.offset.click.top<=this.h[3]?b:b-this.offset.click.top>=this.h[1]?b-f.B[1]:b+f.B[1]:b,c=this.Aa+Math.round((c-this.Aa)/f.B[0])*f.B[0],
c=this.h?c-this.offset.click.left>=this.h[0]&&c-this.offset.click.left<=this.h[2]?c:c-this.offset.click.left>=this.h[0]?c-f.B[0]:c+f.B[0]:c));return{top:b-this.offset.click.top-this.offset.G.top-this.offset.parent.top+("fixed"===this.v?-this.g.scrollTop():g?0:e.scrollTop()),left:c-this.offset.click.left-this.offset.G.left-this.offset.parent.left+("fixed"===this.v?-this.g.scrollLeft():g?0:e.scrollLeft())}},Z:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],
"down"===this.direction?b.item[0]:b.item[0].nextSibling);var e=this.R=this.R?++this.R:1;this.cb(function(){e===this.R&&this.fa(!d)})},ja:function(a,b){function c(a,b,c){return function(d){c.i(a,d,b.j(b))}}this.ga=!1;var d,e=[];!this.ta&&this.a.parent().length&&this.placeholder.sb(this.a);this.ta=null;if(this.f[0]===this.a[0]){for(d in this.H)if("auto"===this.H[d]||"static"===this.H[d])this.H[d]="";this.a.c(this.H).N("ui-sortable-helper")}else this.a.show();this.S&&!b&&e.push(function(a){this.i("receive",
a,this.j(this.S))});!this.S&&this.K.M===this.a.M().W(".ui-sortable-helper")[0]&&this.K.parent===this.a.parent()[0]||b||e.push(function(a){this.i("update",a,this.j())});this===this.w||b||(e.push(function(a){this.i("remove",a,this.j())}),e.push(function(a){return function(b){a.i("receive",b,this.j(this))}}.call(this,this.w)),e.push(function(a){return function(b){a.i("update",b,this.j(this))}}.call(this,this.w)));for(d=this.b.length-1;0<=d;d--)b||e.push(c("deactivate",this,this.b[d])),this.b[d].l.C&&
(e.push(c("out",this,this.b[d])),this.b[d].l.C=0);this.Da&&(this.document.find("body").c("cursor",this.Da),this.Ya.remove());this.va&&this.f.c("opacity",this.va);this.aa&&this.f.c("zIndex","auto"===this.aa?"":this.aa);this.da=!1;if(this.ub){if(!b){this.i("beforeStop",a,this.j());for(d=0;d<e.length;d++)e[d].call(this,a);this.i("stop",a,this.j())}return this.S=!1}b||this.i("beforeStop",a,this.j());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.f[0]!==this.a[0]&&this.f.remove();
this.f=null;if(!b){for(d=0;d<e.length;d++)e[d].call(this,a);this.i("stop",a,this.j())}this.S=!1;return!0},i:function(){!1===d.ab.prototype.i.apply(this,arguments)&&this.cancel()},j:function(a){var b=a||this;return{f:b.f,placeholder:b.placeholder||d([]),position:b.position,ea:b.ea,offset:b.s,item:b.a,sender:a?a.element:null}}})}"function"===typeof define&&define.qb?define(["jquery","./core","./mouse","./widget"],p):p(jQuery); 
