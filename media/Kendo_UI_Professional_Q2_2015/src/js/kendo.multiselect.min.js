("function"==typeof define&&define.jc?define:function(e,m){m()})(["./kendo.list","./kendo.mobile.scroller"],function(){(function(e,m){function u(a,b){var c;if(null===a&&null!==b||null!==a&&null===b)return!1;c=a.length;if(c!==b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0}var g=window.xa,r=g.Da,p=r.Nb,l=g.keys,t=g.Tb,v=g.data.Ga,h=e.Nc,w=/"/g,q=e.isArray,x="font-family font-size font-stretch font-style font-weight letter-spacing text-transform line-height".split(" "),y=p.extend({yb:function(a,
b){var c;this.Ab=".kendoMultiSelect";p.Z.yb.call(this,a,b);this.U={};this.da={};this.ob();this.jb();this.Qa();this.mb();this.Xa();this.fc(this.input);a=this.element.b("multiple","multiple").Ac();b=this.options;b.placeholder||(b.placeholder=a.data("placeholder"));if(c=a.b("id"))this.qa=c+"_tag_active",c+="_taglist",this.g.b("id",c);this.Ja(c);this.ea();this.ac();this.dc();this.ra();this.Pa();this.ab();this.Xb();this.m();b.W?this.c.fetch():b.value&&this.Ya(b.value);e(this.element).Lc("fieldset").is(":disabled")&&
this.enable(!1);g.Jc(this)},Ya:function(a,b){q(a)||a instanceof g.data.Ga||(a=[a]);if(e.va(a[0])||a[0]instanceof g.data.Ob||!this.options.v)this.o=!0,this.c.data(a),this.value(b||this.P)},options:{name:"MultiSelect",Ca:"multiple",enabled:!0,W:!0,rb:!0,xb:!0,j:"",v:"",filter:"startswith",ignoreCase:!0,za:0,tb:100,value:null,ya:null,placeholder:"",height:200,lc:{},wa:"",N:"",zc:"#:data#",wc:"#:data#"},uc:"open close change select filtering dataBinding dataBound".split(" "),Cb:function(a){this.options.c=
a;this.ea();this.a.Cb(this.c);this.options.W&&this.c.fetch()},Aa:function(a){var b=this.Wa(a);p.Z.Aa.call(this,a);this.ha(b);this.a.Aa(b);this.Sb();this.Ja(this.g.b("id"));this.ra()},i:function(a){if(a!==m)this.I&&(this.I.B("k-state-focused").M("id"),this.input.M("aria-activedescendant")),a&&(a.u("k-state-focused").b("id",this.qa),this.input.b("aria-activedescendant",this.qa)),this.I=a;else return this.I},Y:function(){return this.a.$()},ub:function(){var a=this.Ab;clearTimeout(this.G);clearTimeout(this.K);
this.l.w(a);this.g.w(a);this.input.w(a);p.Z.ub.call(this)},aa:function(){p.Z.aa.call(this);this.i(null)},ha:function(a){var b=this.options.wa||this.options.C;(b=a.wa||b||a.C)||(b="#:"+g.vb(a.j,"data")+"#");a.C=b},Pa:function(){var a=this,b=a.options.Vc,c=!!b,d=h(a.Ua,a),d={W:!1,Rc:"multiple",c:a.c,click:h(a.La,a),nc:h(a.Va,a),ic:h(a.aa,a),rc:h(a.Vb,a),pc:function(){a.D("dataBinding");a.Ia("cleanup")},qc:d,Gc:d,Sc:h(a.eb,a)},d=e.extend(a.Wa(),d,"object"===typeof b?b:{});a.ha(d);a.a=c?new g.Da.Rb(a.Fb,
d):new g.Da.Pb(a.Fb,d);a.a.value(a.P||a.options.value)},Va:function(a){"rebind"===this.f&&(this.f="",a.qb=[]);this.cb(a.qb,a.Qc)},eb:function(a){a=a.items;var b,c;for(c=0;c<a.length;c++)b=a[c],this.g.children().tc(b.index).children("span:first").ua(this.Eb(b.item))},pb:function(a){var b="input"!==a.target.nodeName.toLowerCase(),c=e(a.target),d=c.wb("k-select")||c.wb("k-icon");d&&(d=!c.sa(".k-select").children(".k-i-arrow-s").length);!b||d&&g.Db.Ic||a.preventDefault();d||(this.input[0]!==t()&&b&&this.input.focus(),
0===this.options.za&&this.open())},Ra:function(){this.m(!1);this.l.u("k-state-focused")},Sa:function(){clearTimeout(this.K);this.l.B("k-state-focused");this.m(!this.a.$()[0],!0);this.close();"filter"===this.f&&(this.f="accept",this.a.filter(!1),this.a.Ba(!0));this.element.blur()},la:function(a){var b=this.f,c=a.index(),d=this.a,k=d.value()[c],f=this.da[k];f!==m||"accept"!==b&&"filter"!==b||(f=this.U[k]);f!==m?(b=this.element[0].children[f],b.removeAttribute("selected"),b.selected=!1,d.Pc(c),a.remove()):
d.select(d.select()[c]);this.i(null);this.O();this.H()},kb:function(a){a=e(a.currentTarget);a.children(".k-i-arrow-s").length||this.la(a.sa("li"))},Wb:function(a){var b=a.disable;a=a.Oc;var c=this.l.w(".kendoMultiSelect"),d=this.g.w(".kendoMultiSelect"),k=this.element.add(this.input.w(".kendoMultiSelect"));a||b?(b?c.u("k-state-disabled"):c.B("k-state-disabled"),k.b("disabled",b).b("readonly",a).b("aria-disabled",b).b("aria-readonly",a)):(c.B("k-state-disabled").h("mouseenter.kendoMultiSelect mouseleave.kendoMultiSelect",
this.gc).h("mousedown.kendoMultiSelect touchend.kendoMultiSelect",h(this.pb,this)),this.input.h("keydown.kendoMultiSelect",h(this.Ta,this)).h("paste.kendoMultiSelect",h(this.na,this)).h("focus.kendoMultiSelect",h(this.Ra,this)).h("focusout.kendoMultiSelect",h(this.Sa,this)),k.M("disabled").M("readonly").b("aria-disabled",!1).b("aria-readonly",!1),d.h("mouseenter.kendoMultiSelect","li",function(){e(this).u("k-state-hover")}).h("mouseleave.kendoMultiSelect","li",function(){e(this).B("k-state-hover")}).h("click.kendoMultiSelect",
"li.k-button .k-select",h(this.kb,this)))},H:function(){this.options.rb?this.close():this.A.position()},close:function(){this.A.close()},open:function(){this.V&&(this.o=!1);this.o||!this.a.Dc()||"accept"===this.f?(this.T=!0,this.f="rebind",this.o=!1,this.a.filter(!1),this.a.Ba(!0),this.Na()):this.ba()&&(this.A.open(),this.Yb())},toggle:function(a){a=a!==m?a:!this.A.visible();this[a?"open":"close"]()},refresh:function(){this.a.refresh()},Ua:function(){var a=this.c.xc(),b=this.c.page(),c=a.length;this.Ia("compile");
this.$a(a);this.Ub(this.$b(c));this.T&&(this.T=!1,this.toggle(c));this.A.position();!this.options.xb||b!==m&&1!==b||this.a.first();this.nb&&this.nb.reset();this.Oa();this.cc();this.D("dataBound")},search:function(a){var b=this.options,c=b.ignoreCase,d=b.filter,k=b.j,f=this.input.F();b.placeholder===f&&(f="");clearTimeout(this.K);a="string"===typeof a?a:f;f=a.length;if(!f||f>=b.za)this.a.filter(!0),this.f="filter",this.T=!0,a={value:c?a.toLowerCase():a,ta:k,Kc:d,ignoreCase:c},this.Na(a,this.o),this.o=
!1},value:function(a){var b=this.a.value().slice(),c=this.options.ya;if(a===m)return b;a=this.ia(a);null!==c&&a.length>c&&(a=a.slice(0,c));this.a.value(a);this.S=a;this.Ma()},pa:function(a,b){var c=this.element[0].children[this.U[a]];c&&(b?c.setAttribute("selected","selected"):c.removeAttribute("selected"),c.selected=b)},Ma:function(){var a=this,b=!!a.c.view().length;0===a.a.value().length||a.V||a.fa||b||(a.fa=!0,a.c.fetch().sc(function(){a.fa=!1}))},ea:function(){var a=this.element,b=this.options,
c=b.c||{},c=q(c)?{data:c}:c;c.select=a;c.vc=[{ta:b.j},{ta:b.v}];this.c&&this.ec?this.hc():this.Za=h(this.gb,this);this.c=g.data.Ib.create(c).bind("progress",this.Za)},ab:function(){var a=this,b=a.element,c=b.b("form"),b=c?e("#"+c):b.sa("form");b[0]&&(a.bb=function(){setTimeout(function(){a.value(a.P);a.m()})},a.Zb=b.h("reset",a.bb))},bc:function(){var a=this.options.value||this.element.F();this.S=this.P=this.ia(a)},ia:function(a){var b=this;null===a?a=[]:a&&e.va(a)?a=[b.s(a)]:a&&e.va(a[0])?a=e.map(a,
function(a){return b.s(a)}):q(a)||a instanceof v||(a=[a]);return a},O:function(){var a=this.value();u(a,this.S)||(this.S=a.slice(),this.D("change"),this.element.D("change"))},La:function(a){a=a.item;this.D("select",{item:a})||(this.oa(a),this.O());this.H()},Ta:function(a){var b=this,c=a.keyCode,d=b.I,k=b.a.focus(),f=b.input.F(),h=g.Db.Ec(b.l),n=b.A.visible();if(c===l.Hb)a.preventDefault(),n?k?(this.a.next(),this.a.focus()||this.a.zb()):this.a.first():(b.open(),k||this.a.first());else if(c===l.Qb)n&&
(k&&this.a.Bb(),this.a.focus()||b.close()),a.preventDefault();else if(c===l.Fa&&!h||c===l.Ha&&h)f||(d=d?d.Bb():e(b.g[0].lastChild),d[0]&&b.i(d));else if(c===l.Ha&&!h||c===l.Fa&&h)!f&&d&&(d=d.next(),b.i(d[0]?d:null));else if(c===l.Kb&&n){if(k){if(b.D("select",{item:k})){b.H();return}b.oa(k)}b.O();b.H();a.preventDefault()}else c===l.Lb?(n?a.preventDefault():b.i(null),b.close()):c===l.Mb?n?this.a.first():f||(d=b.g[0].firstChild)&&b.i(e(d)):c===l.Jb?n?this.a.zb():f||(d=b.g[0].lastChild)&&b.i(e(d)):c!==
l.Gb&&c!==l.Ea||f?(clearTimeout(b.K),setTimeout(function(){b.ma()}),b.na()):(c!==l.Ea||d||(d=e(b.g[0].lastChild)),d&&d[0]&&b.la(d))},Oa:function(){clearTimeout(this.G);this.input.b("aria-busy",!1);this.ga.u("k-loading-hidden");this.V=!1;this.G=null},hb:function(){this.input.b("aria-busy",!0);this.ga.B("k-loading-hidden")},gb:function(){this.V=!0;this.G||(this.G=setTimeout(h(this.hb,this),100))},m:function(a,b){var c=this.input,d=t();a===m&&(a=!1,c[0]!==d&&(a=!this.a.$()[0]));this.ka="";c.Tc("k-readonly",
a).F(a?this.options.placeholder:"");c[0]!==d||b||g.mc(c[0],0,0);this.ma()},ma:function(){var a=this.l,b=a.width(),c=this.ib.text(this.input.F()),d;a.is(":visible")?d=c.width()+25:(c.L(document.documentElement),b=d=c.width()+25,c.L(a));this.input.width(d>b?b:d)},ja:function(a,b,c){var d="<option";a!==m&&(a+="",-1!==a.indexOf('"')&&(a=a.replace(w,"&quot;")),d+=' value="'+a+'"');c&&(d+=" selected");d+=">";b!==m&&(d+=g.Bc(b));return d+"</option>"},$a:function(a){var b=this.a.$(),c=this.a.value(),d=a.length,
k="",f,e,g;c.length!==b.length&&(b=this.Ka(c));var h={},l={};for(g=0;g<d;g++)f=a[g],e=this.s(f),c=this.fb(e,b),-1!==c&&b.splice(c,1),l[e]=g,k+=this.ja(e,this.lb(f),-1!==c);if(b.length)for(g=0;g<b.length;g++)f=b[g],e=this.s(f),h[e]=d,l[e]=d,d+=1,k+=this.ja(e,this.lb(f),!0);this.da=h;this.U=l;this.element.ua(k)},Ka:function(a){for(var b=this.options.v,c=this.options.j,d=[],e,f=0;f<a.length;f++)e={},e[b]=a[f],e[c]=a[f],d.push(e);return d},fb:function(a,b){for(var c=this.s,d=0;d<b.length;d++)if(a===c(b[d]))return d;
return-1},na:function(){var a=this;a.K=setTimeout(function(){var b=a.input.F();a.ka!==b&&(a.ka=b,a.search(b))},a.options.tb)},ba:function(){var a=this.options.ya;return null===a||a>this.a.value().length},ca:function(a){var b=this;b.kc(a,function(){return{elements:b.g[0].children,data:e.map(b.Y(),function(a){return{X:a}})}})},cb:function(a,b){var c=this.value(),d=this.c.total(),e=this.g,f=this.s;this.ca("cleanup");if("multiple"===this.options.Ca){for(c=b.length-1;-1<c;c--)d=b[c],e[0].removeChild(e[0].children[d.position]),
this.pa(f(d.X),!1);for(c=0;c<a.length;c++)d=a[c],e.append(this.N(d.X)),this.pa(f(d.X),!0)}else{if(!this.R||this.R<d)this.R=d;e.ua("");c.length&&e.append(this.N({values:c,Y:this.Y(),Hc:this.R,oc:d}))}this.ca("compile");this.m()},oa:function(a){"rebind"===this.f&&(this.f="");this.ba()&&(this.a.select(a),this.m(),"filter"===this.f&&(this.f="accept",this.a.filter(!1),this.a.Ba(!0)))},Qa:function(){var a=this.element[0].accessKey,b=this.J.children("input.k-input");b[0]||(b=e('<input class="k-input" style="width: 25px" />').L(this.J));
this.element.M("accesskey");this.input=b.b({accesskey:a,autocomplete:"off",role:"listbox","aria-expanded":!1})},jb:function(){var a=this.J.children("ul");a[0]||(a=e('<ul role="listbox" unselectable="on" class="k-reset"/>').L(this.J));this.g=a},ra:function(){var a=this.options,b=a.N,c=a.c,d="multiple"===a.Ca;this.element[0].length&&!c&&(a.j=a.j||"text",a.v=a.v||"value");a=d?g.C("#:"+g.vb(a.j,"data")+"#",{Uc:!1}):g.C("#:values.length# item(s) selected");this.Eb=b=b?g.C(b):a;this.N=function(a){return'<li class="k-button" unselectable="on"><span unselectable="on">'+
b(a)+'</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon '+(d?"k-i-close":"k-i-arrow-s")+'">'+(d?"delete":"open")+"</span></span></li>"}},Xa:function(){this.ga=e('<span class="k-icon k-loading k-loading-hidden"></span>').Cc(this.input)},mb:function(){var a=g.yc(this.input[0],x);a.position="absolute";a.visibility="hidden";a.top=-3333;a.left=-3333;this.ib=e("<span/>").sb(a).L(this.l)},ob:function(){var a=this.element,b=a.parent("span.k-multiselect");b[0]||(b=a.Wc('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent(),
b[0].style.cssText=a[0].style.cssText,b[0].title=a[0].title,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(a));this.l=b.u(a[0].className).sb("display","");this.J=e(b[0].firstChild)}});r.Mc(y)})(window.xa.Fc);return window.xa}); 
