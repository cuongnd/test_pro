("function"==typeof define&&define.Ab?define:function(f,m){m()})(["./kendo.draganddrop"],function(){(function(f,m){function t(a){return"undefined"!=typeof a}function p(a,b,c){return Math.max(Math.min(parseInt(a,10),Infinity===c?c:parseInt(c,10)),parseInt(b,10))}function x(a,b){return function(){var c=this.b,d=c[0].style,e=this.options;if(e.i||e.P)return this;this.ua={width:d.width,height:d.height};c.children(".k-resize-handle").m().end().children(".k-window-titlebar").find(".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize").parent().m().Gb(0).Bb(l.action({name:"Restore"}));
b.call(this);"maximize"==a?this.b.children(".k-window-titlebar").find(".k-i-pin,.k-i-unpin").parent().m():this.b.children(".k-window-titlebar").find(".k-i-pin,.k-i-unpin").parent().show();return this}}function C(){return!this.type||0<=this.type.toLowerCase().indexOf("script")}function y(a){this.c=a;this.g=new z(a.b,{filter:">.k-resize-handle",group:a.b.id+"-resizing",H:h(this.H,this),D:h(this.D,this),F:h(this.F,this)});h(this.Wa,this);h(this.kb,this)}function A(a,b){this.c=a;this.g=new z(a.b,{filter:b,
group:a.b.id+"-moving",H:h(this.H,this),D:h(this.D,this),F:h(this.F,this),na:h(this.na,this)});this.g.bc.stopPropagation=!1}var g=window.sa,u=g.wa.vb,z=g.wa.tb,B=f.Nb,D=g.wb,h=f.Wb,v=f.extend,E=f.M,q=g.$,l,F=g.Mb,G=u.extend({cb:function(a,b){var c,d={},e,r,k,d=b&&b.C&&!b.C.length;u.oa.cb.call(this,a,b);b=this.options;c=b.position;a=this.element;k=b.content;d&&(b.C=[]);this.l=f(b.l);this.ca();k&&!B(k)&&(k=b.content={url:k});a.find("script").filter(C).remove();a.parent().is(this.l)||c.top!==m&&c.left!==
m||(a.is(":visible")?d=a.offset():(e=a.a("visibility"),r=a.a("display"),a.a({visibility:"hidden",display:""}),d=a.offset(),a.a({visibility:e,display:r})),c.top===m&&(c.top=d.top),c.left===m&&(c.left=d.left));t(b.visible)&&null!==b.visible||(b.visible=a.is(":visible"));c=this.b=a.L(".k-window");a.is(".k-content")&&c[0]||(a.v("k-window-content k-content"),this.Na(a,b),c=this.b=a.L(".k-window"),this.ea());this.ka();b.pinned&&this.ib(!0);k&&this.refresh(k);b.visible&&this.S();k=c.children(".k-window-content");
this.yb(k);b.visible&&b.I&&this.B(c.is(":visible")).a({opacity:.5});c.o("mouseenter.kendoWindow",".k-window-titlebar .k-window-action",h(this.Ka,this)).o("mouseleave.kendoWindow",".k-window-titlebar .k-window-action",h(this.La,this)).o("click.kendoWindow","> .k-window-titlebar .k-window-action",h(this.Va,this));k.o("keydown.kendoWindow",h(this.Qa,this)).o("focus.kendoWindow",h(this.Pa,this)).o("blur.kendoWindow",h(this.Ja,this));this.ma();this.g();if(d=a.U("id"))d+="_wnd_title",c.children(".k-window-titlebar").children(".k-window-title").U("id",
d),k.U({role:"dialog","aria-labelledby":d});c.add(c.children(".k-resize-handle,.k-window-titlebar")).o("mousedown.kendoWindow",h(this.S,this));this.aa=g.aa(a);this.Ra=h(this.ja,this);this.ha=g.Kb().substring(0,8);f(window).o("resize.kendoWindow"+this.ha,this.Ra);b.visible&&(this.f("open"),this.f("activate"));g.Sb(this)},Ka:function(a){f(a.currentTarget).v("k-state-hover")},La:function(a){f(a.currentTarget).J("k-state-hover")},Pa:function(){this.b.v("k-state-focused")},Ja:function(){this.b.J("k-state-focused")},
ea:function(){var a=this.b,b=this.options,c=b.width,d=b.height,e=b.maxHeight,f=["minWidth","minHeight","maxWidth","maxHeight"];this.title(b.title);for(var k=0;k<f.length;k++){var h=b[f[k]];h&&Infinity!=h&&a.a(f[k],h)}e&&Infinity!=e&&this.element.a("maxHeight",e);c&&(0<c.toString().indexOf("%")?a.width(c):a.width(p(c,b.minWidth,b.maxWidth)));d&&(0<d.toString().indexOf("%")?a.height(d):a.height(p(d,b.minHeight,b.maxHeight)));b.visible||a.m()},ka:function(){var a=this.b,b=this.options.position;0===b.top&&
(b.top=b.top.toString());0===b.left&&(b.left=b.left.toString());a.a({top:b.top||"",left:b.left||""})},ca:function(){var a=this.options;!1===a.A&&(a.A={open:{j:{}},close:{m:!0,j:{}}})},xb:function(){g.resize(this.element.children())},ma:function(){var a=this.options.ta,b=this.b;this.K&&(b.R("dblclick.kendoWindow").children(".k-resize-handle").remove(),this.K.h(),this.K=null);a&&(b.o("dblclick.kendoWindow",".k-window-titlebar",h(function(a){f(a.target).L(".k-window-action").length||this.rb()},this)),
E("n e s w se sw ne nw".split(" "),function(a,d){b.append(l.mb(d))}),this.K=new y(this));b=null},g:function(){var a=this.options.draggable;this.G&&(this.G.h(),this.G=null);a&&(this.G=new A(this,a.Eb||".k-window-titlebar"))},ba:function(){var a=this.options.C,b=this.b.children(".k-window-titlebar").find(".k-window-actions"),a=f.map(a,function(a){return{name:a}});b.O(g.Xb(l.action,a))},nb:function(a){u.oa.nb.call(this,a);this.restore();this.ca();this.ea();this.ka();this.ma();this.g();this.ba()},Hb:"open activate deactivate close refresh resize resizeEnd dragstart dragend error".split(" "),
options:{name:"Window",A:{open:{j:{zoom:{direction:"in"},ab:{direction:"in"}},duration:350},close:{j:{zoom:{direction:"out",Vb:{scale:.7}},ab:{direction:"out"}},duration:350,m:!0}},title:"",C:["Close"],V:!0,I:!1,ta:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:Infinity,maxHeight:Infinity,pinned:!1,position:{},content:null,visible:null,height:null,width:null,l:"body"},Ma:function(){return-1<f.Lb("close",f.map(this.options.C,function(a){return a.toLowerCase()}))},Qa:function(a){var b=this.options,
c=g.keys,d=a.keyCode,e=this.b,f,k,h=this.options.i,w,n;a.target!=a.currentTarget||this.w||(d==c.ub&&this.Ma()&&this.da(!1),!b.draggable||a.ctrlKey||h||(f=g.N(e),d==c.Ba?k=e.a("top",f.top-10):d==c.xa?k=e.a("top",f.top+10):d==c.za?k=e.a("left",f.left-10):d==c.Aa&&(k=e.a("left",f.left+10))),b.ta&&a.ctrlKey&&!h&&(d==c.Ba?(k=!0,n=e.height()-10):d==c.xa&&(k=!0,n=e.height()+10),d==c.za?(k=!0,w=e.width()-10):d==c.Aa&&(k=!0,w=e.width()+10),k&&(c=p(w,b.minWidth,b.maxWidth),b=p(n,b.minHeight,b.maxHeight),isNaN(c)||
(e.width(c),this.options.width=c+"px"),isNaN(b)||(e.height(b),this.options.height=b+"px"),this.resize())),k&&a.preventDefault())},B:function(a){var b=this.l.children(".k-overlay"),c=this.b;b.length||(b=f("<div class='k-overlay' />"));b.insertBefore(c[0]).toggle(a).a("zIndex",parseInt(c.a("zIndex"),10)-1);return b},Ca:function(a){return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[/\bk-i-\w+\b/.exec(a[0].className)[0]]},
Va:function(a){if(!this.w){var b=f(a.target).L(".k-window-action").find(".k-icon");if(b=this.Ca(b))return a.preventDefault(),this[b](),!1}},ia:function(){var a=this,b=f(".k-window").filter(function(){var b=f(this),d=a.T(b);return(d=d&&d.options)&&d.I&&d.visible&&b.is(":visible")}).sort(function(a,b){return+f(a).a("zIndex")-+f(b).a("zIndex")}),a=null;return b},T:function(a){a=a.children(".k-window-content");return a.data("kendoWindow")||a.data("kendo"+this.options.name)},Cb:function(){var a=this.options.position,
b=this.b,c=f(window),d=0,e=0;if(this.options.i)return this;this.options.pinned||(d=c.scrollTop(),e=c.scrollLeft());e+=Math.max(0,(c.width()-b.width())/2);c=d+Math.max(0,(c.height()-b.height()-parseInt(b.a("paddingTop"),10))/2);b.a({left:e,top:c});a.top=c;a.left=e;return this},title:function(a){var b=this.b,c=this.options,d=b.children(".k-window-titlebar"),e=d.children(".k-window-title");if(!arguments.length)return e.text();!1===a?(b.v("k-window-titleless"),d.remove()):(d.length?e.O(a):(b.Ub(l.pb(c)),
this.ba(),d=b.children(".k-window-titlebar")),c=d.outerHeight(),b.a("padding-top",c),d.a("margin-top",-c));this.options.title=a;return this},content:function(a,b){var c=this.b.children(".k-window-content"),d=c.children(".km-scroll-container"),c=d[0]?d:c;if(!t(a))return c.O();this.Xa("cleanup",function(){return{elements:c.children()}});g.h(this.element.children());c.empty().O(a);this.Xa("compile",function(){for(var a=[],d=c.length;0<=--d;)a.push({Db:b});return{elements:c.children(),data:a}});return this},
open:function(){var a=this.b,b=this.options,c=b.A.open,d=a.children(".k-window-content"),e,r=f(document);if(!this.f("open")){this.w&&a.X(!0,!0);this.w=!1;this.S();b.V&&this.element.focus();b.visible=!0;if(b.I){e=this.B(!1);e.X(!0,!0);if(c.duration&&g.j.ya){var k=g.bb(e).Ib();k.duration(c.duration||0);k.Fb(.5);k.play()}else e.a("opacity",.5);e.show()}a.is(":visible")||(d.a("overflow","hidden"),a.show().X().eb({j:c.j,duration:c.duration,complete:h(this.Ea,this)}))}b.i&&(this.u=r.scrollTop(),this.s=
r.scrollLeft(),f("html, body").a("overflow","hidden"));return this},Ea:function(){this.options.V&&this.element.focus();this.f("activate");this.b.children(".k-window-content").a("overflow","")},la:function(a){var b=this.ia(),c=this.options,d=c.I&&!b.length,e=c.I?this.B(!0):f(m),c=c.A.close;d?!a&&c.duration&&g.j.ya?(a=g.bb(e).Jb(),a.duration(c.duration||0),a.Zb(.5),a.play()):this.B(!1).remove():b.length&&this.T(b.fb()).B(!0)},da:function(a){var b=this.b,c=this.options,d=c.A.open,e=c.A.close,g=f(document);
if(b.is(":visible")&&!this.f("close",{cc:!a})){if(this.w)return;this.w=!0;c.visible=!1;f(".k-window").M(function(a,c){var d=f(c).children(".k-window-content");c!=b&&0<d.find("> .k-content-frame").length&&d.children(".k-overlay").remove()});this.la();b.X().eb({j:e.j||d.j,reverse:!0===e.reverse,duration:e.duration,complete:h(this.Oa,this)})}this.options.i&&(f("html, body").a("overflow",""),this.u&&0<this.u&&g.scrollTop(this.u),this.s&&0<this.s&&g.scrollLeft(this.s))},Oa:function(){this.b.m().a("opacity",
"");this.f("deactivate");var a=this.T(this.ia().fb());a&&a.S()},close:function(){this.da(!0);return this},Da:function(a){return f(a).is(".k-window-titlebar .k-window-action,.k-window-titlebar .k-window-action .k-icon,:input,a")},Sa:function(a){var b=D(),c=this.element;return this.options.V&&!f(b).is(c)&&!this.Da(a)&&(!c.find(b).length||!c.find(a).length)},S:function(a){var b=this.b,c=b[0],d=+b.a("zIndex"),e=d;a=a&&a.target||null;f(".k-window").M(function(a,b){var e=f(b),h=e.a("zIndex"),e=e.children(".k-window-content");
isNaN(h)||(d=Math.max(+h,d));b!=c&&0<e.find("> .k-content-frame").length&&e.append(l.Z)});(!b[0].style.zIndex||e<d)&&b.a("zIndex",d+2);this.element.find("> .k-overlay").remove();this.Sa(a)&&(this.element.focus(),e=f(window).scrollTop(),a=parseInt(b.position().top,10),0<a&&a<e&&(0<e?f(window).scrollTop(a):b.a("top",e)));b=null;return this},rb:function(){return this.w?this:this[this.options.i?"restore":"maximize"]()},restore:function(){var a=this.options,b=a.minHeight,c=this.ua,d=f(document);if(!a.i&&
!a.P)return this;b&&Infinity!=b&&this.b.a("min-height",b);this.b.a({position:a.pinned?"fixed":"absolute",left:c.left,top:c.top,width:c.width,height:c.height}).J("k-window-maximized").find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize").parent().show().end().end().find(".k-i-pin,.k-i-unpin").parent().show();this.options.width=c.width;this.options.height=c.height;
f("html, body").a("overflow","");this.u&&0<this.u&&d.scrollTop(this.u);this.s&&0<this.s&&d.scrollLeft(this.s);a.i=a.P=!1;this.resize();return this},Qb:x("maximize",function(){var a=this.b,b=a.position(),c=f(document);v(this.ua,{left:b.left,top:b.top});a.a({left:0,top:0,position:"fixed"}).v("k-window-maximized");this.u=c.scrollTop();this.s=c.scrollLeft();f("html, body").a("overflow","hidden");this.options.i=!0;this.ja()}),Rb:x("minimize",function(){this.b.a({height:"",minHeight:""});this.element.m();
this.options.P=!0}),ib:function(a){var b=f(window),c=this.b,d=parseInt(c.a("top"),10),e=parseInt(c.a("left"),10);if(a||!this.options.pinned&&!this.options.i)c.a({position:"fixed",top:d-b.scrollTop(),left:e-b.scrollLeft()}),c.children(".k-window-titlebar").find(".k-i-pin").v("k-i-unpin").J("k-i-pin"),this.options.pinned=!0},ac:function(){var a=f(window),b=this.b,c=parseInt(b.a("top"),10),d=parseInt(b.a("left"),10);this.options.pinned&&!this.options.i&&(b.a({position:"",top:c+a.scrollTop(),left:d+a.scrollLeft()}),
b.children(".k-window-titlebar").find(".k-i-unpin").v("k-i-pin").J("k-i-unpin"),this.options.pinned=!1)},ja:function(){var a=this.b,b=f(window),c=g.ob.ec(),d;this.options.i&&(d=b.width()/c,b=b.height()/c-parseInt(a.a("padding-top"),10),a.a({width:d,height:b}),this.options.width=d,this.options.height=b,this.resize())},refresh:function(a){var b=this.options,c=f(this.element),d,e,g;B(a)||(a={url:a});a=v({},b.content,a);e=t(b.pa)?b.pa:a.pa;(g=a.url)?(t(e)||(e=!F(g)),e?((d=c.find(".k-content-frame")[0])?
d.src=g||d.src:c.O(l.Za(v({},b,{content:a}))),c.find(".k-content-frame").sb("load.kendoWindow").o("load.kendoWindow",h(this.Ua,this))):this.Ha(a)):(a.$&&this.content(q(a.$)({})),this.f("refresh"));c.qb("k-window-iframecontent",!!e);return this},Ua:function(){this.f("refresh")},Fa:function(){clearTimeout(this.ga);this.b.find(".k-window-titlebar .k-i-refresh").J("k-loading")},Ga:function(a,b){this.f("error",{status:b,dc:a})},Ia:function(a){return function(b){var c=b;a&&(c=q(a)(b||{}));this.content(c,
b);this.element.jb("scrollTop",0);this.f("refresh")}},Ta:function(){this.b.find(".k-window-titlebar .k-i-refresh").v("k-loading")},Ha:function(a){this.ga=setTimeout(h(this.Ta,this),100);f.zb(v({type:"GET",dataType:"html",cache:!1,error:h(this.Ga,this),complete:h(this.Fa,this),$b:h(this.Ia(a.$),this)},a))},h:function(){this.K&&this.K.h();this.G&&this.G.h();this.b.R(".kendoWindow").children(".k-window-content").R(".kendoWindow").end().find(".k-resize-handle,.k-window-titlebar").R(".kendoWindow");f(window).R("resize.kendoWindow"+
this.ha);clearTimeout(this.ga);u.oa.h.call(this);this.sb(m);g.h(this.b);this.la(!0);this.b.empty().remove();this.b=this.l=this.element=f()},Na:function(){var a=this.element,b=this.options,c,d=g.ob.Ob(a);!1===b.Yb&&a.U("style","overflow:hidden;");b=f(l.b(b));c=a.find("iframe:not(.k-content)").map(function(){var a=this.getAttribute("src");this.src="";return a});b.qb("k-rtl",d).l(this.l).append(a).find("iframe:not(.k-content)").M(function(a){this.src=c[a]});b.find(".k-window-title").a(d?"left":"right",
b.find(".k-window-actions").outerWidth()+10);a.a("visibility","").show();a.find("[data-role=editor]").M(function(){var a=f(this).data("kendoEditor");a&&a.refresh()});b=a=null}});l={b:q("<div class='k-widget k-window' />"),action:q("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),pb:q("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),
Z:"<div class='k-overlay' />",Za:q("<iframe frameborder='0' title='#= title #' class='k-content-frame' src='#= content.url #'>This page requires frames in order to show content</iframe>"),mb:q("<div class='k-resize-handle k-resize-#= data #'></div>")};y.prototype={Wa:function(){this.c.b.append(l.Z)},kb:function(){this.c.b.find(".k-overlay").remove()},H:function(a){var b=this.c,c=b.b;this.$a=parseInt(c.a("padding-top"),10);this.qa=g.N(c,"position");this.lb=a.currentTarget.jb("className").replace("k-resize-handle k-resize-",
"");this.ra={width:c.width(),height:c.height()};this.Ya=g.N(b.l,"position");c.children(".k-resize-handle").hb(a.currentTarget).m();f("body").a("cursor",a.currentTarget.a("cursor"))},D:function(a){var b=this.c,c=b.b,d=b.options,e=this.lb,f=this.Ya,k=this.qa,h=this.ra,g,n,l,m=Math.max(a.x.location,f.left);a=Math.max(a.y.location,f.top);0<=e.indexOf("e")?(g=m-k.left,c.width(p(g,d.minWidth,d.maxWidth))):0<=e.indexOf("w")&&(l=k.left+h.width,g=p(l-m,d.minWidth,d.maxWidth),c.a({left:l-g-f.left,width:g}));
0<=e.indexOf("s")?(n=a-k.top-this.$a,c.height(p(n,d.minHeight,d.maxHeight))):0<=e.indexOf("n")&&(e=k.top+h.height,n=p(e-a,d.minHeight,d.maxHeight),c.a({top:e-n-f.top,height:n}));g&&(b.options.width=g+"px");n&&(b.options.height=n+"px");b.resize()},F:function(a){var b=this.c,c=b.b;c.children(".k-resize-handle").hb(a.currentTarget).show();f("body").a("cursor","");b.aa&&b.aa.reset();27==a.keyCode&&c.a(this.qa).a(this.ra);b.f("resizeEnd");return!1},h:function(){this.g&&this.g.h();this.g=this.c=null}};
A.prototype={H:function(a){var b=this.c,c=b.element,d=c.find(".k-window-actions"),e=g.N(b.l);b.f("dragstart");b.W=g.N(b.b,"position");b.va={left:a.x.client-b.W.left,top:a.y.client-b.W.top};b.Y=0<d.length?d.outerWidth()+parseInt(d.a("right"),10)-c.outerWidth():20-c.outerWidth();b.Y-=e.left;b.gb=-e.top;b.b.append(l.Z).children(".k-resize-handle").m();f("body").a("cursor",a.currentTarget.a("cursor"))},D:function(a){var b=this.c,c=b.options.position,d=Math.max(a.y.client-b.va.top,b.gb);a=Math.max(a.x.client-
b.va.left,b.Y);var e={left:a,top:d};f(b.b).a(e);c.top=d;c.left=a},fa:function(){var a=this.c;a.b.children(".k-resize-handle").toggle(!a.options.P).end().find(".k-overlay").remove();f("body").a("cursor","")},na:function(a){this.fa();a.currentTarget.L(".k-window").a(this.c.W)},F:function(){this.fa();this.c.f("dragend");return!1},h:function(){this.g&&this.g.h();this.g=this.c=null}};g.wa.Tb(G)})(window.sa.Pb);return window.sa}); 
