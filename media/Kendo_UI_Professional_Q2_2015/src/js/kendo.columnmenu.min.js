("function"==typeof define&&define.ta?define:function(f,l){l()})(["./kendo.popup","./kendo.filtermenu","./kendo.menu"],function(){(function(f,l){function r(a){for(var b=[],c=0;c<a.length;c++)a[c].f?b=b.concat(r(a[c].f)):b.push(a[c]);return b}var e=window.V,t=e.Sa,g=f.Na,v=f.extend,m=f.Da,q=f.map,u=f.Ga,h=t.oa,z=h.extend({J:function(a,b){var c;h.I.J.call(this,a,b);a=this.element;b=this.options;this.i=b.i;this.h=b.h;this.a=a.c(e.c("field"));this.title=a.c(e.c("title"));c=a.find(".k-header-column-menu");
c[0]||(c=a.v("k-with-icon").Ma('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu"));this.link=c.c("tabindex",-1).L("click.kendoColumnMenu",g(this.O,this));this.b=f('<div class="k-column-menu"/>')},aa:function(){if(this.j=this.options.j)this.R=!0;this.R?this.Z():this.Y();this.N("compile");this.S=g(this.refresh,this);this.da();this.X();this.$();this.ma("init",{a:this.a,Aa:this.b})},ia:["init"],options:{name:"ColumnMenu",A:{Qa:"Sort Ascending",
Ra:"Sort Descending",filter:"Filter",f:"Columns",Ba:"Done",Pa:"Column Settings",Ia:"Lock",Ta:"Unlock"},filter:"",f:!0,s:!0,g:!0,fa:{left:"slide"}},Y:function(){var a=this,b=a.options;a.b.Fa(e.la(w)({K:e.K,A:b.A,s:b.s,g:b.g,f:a.u(),ka:b.f,w:b.w}));a.l=a.b.kendoPopup({anchor:a.link,open:g(a.ba,a),ra:g(a.W,a),close:function(){a.options.ga&&a.options.ga(a.element)}}).data("kendoPopup");a.m=a.b.children().kendoMenu({orientation:"vertical",xa:!1}).data("kendoMenu")},Z:function(){var a=this,b=a.options,
b=e.la(x)({K:e.K,a:a.a,title:a.title||a.a,A:b.A,s:b.s,g:b.g,f:a.u(),ka:b.f,w:b.w});a.view=a.j.append(b);a.b=a.view.element.find(".k-column-menu");a.m=new y(a.b.children(),{j:a.j});a.view.element.L("click",".k-done",function(b){a.close();b.preventDefault()})},N:function(a){var b=this;b.ua(a,function(){var a=b.b.find(".k-columns-item input["+e.c("field")+"]").map(function(){return f(this).ya("li")}),d=q(b.u(),function(a){return{za:a.ca}});return{elements:a,data:d}})},o:function(){this.N("cleanup");
h.I.o.call(this);this.U&&this.U.o();this.S&&this.h.D("change",this.S);this.options.f&&this.i&&(this.H&&(this.i.D("columnShow",this.H),this.i.D("columnHide",this.H)),this.F&&(this.i.D("columnLock",this.F),this.i.D("columnUnlock",this.F)));this.m&&(this.m.element.B(".kendoColumnMenu"),this.m.o());this.b.B(".kendoColumnMenu");this.l&&this.l.o();this.view&&this.view.Oa();this.link.B(".kendoColumnMenu");this.element=this.b=this.i=null},close:function(){this.m.close();this.l&&(this.l.close(),this.l.element.B("keydown.kendoColumnMenu"))},
O:function(a){a.preventDefault();a.stopPropagation();a=this.options;a.filter&&this.element.is(!a.filter)||(this.l||this.j||this.aa(),this.R?this.j.navigate(this.view,this.options.fa.left):this.l.toggle())},ba:function(){var a=this;f(".k-column-menu").Ka(a.b).Ca(function(){f(this).data("kendoPopup").close()});a.l.element.L("keydown.kendoColumnMenu",function(b){b.keyCode==e.keys.na&&a.close()});a.options.w&&a.ea()},W:function(){this.m.element.focus()},u:function(){var a=r(this.i.f),b=m(a,function(a){var b=
!0,k=f.trim(a.title||"").replace(/&nbsp;/gi,"");if(!1===a.m||!a.a&&!k.length)b=!1;return b});return q(b,function(b){return{ja:b.a,a:b.a||b.title,title:b.title||b.a,hidden:b.hidden,index:u(b,a),locked:!!b.locked,ca:b}})},da:function(){this.options.s&&this.refresh()},qa:function(a,b){var c=this.options.s,d=null===c.compare?l:c.compare,k=this.h,n,e=k.sort()||[];a.Ea("k-state-selected")&&c&&!1!==c.sa?(a.M("k-state-selected"),b=l):a.v("k-state-selected");if("multiple"===c.mode){c=0;for(n=e.length;c<n;c++)if(e[c].a===
this.a){e.splice(c,1);break}e.push({a:this.a,dir:b,compare:d})}else e=[{a:this.a,dir:b,compare:d}];k.sort(e)},X:function(){this.options.f&&(this.G(),this.H=g(this.G,this),this.F=g(this.T,this))},G:function(){var a,b,c,d,k,n=e.c("field"),f=e.c("locked"),p=m(this.u(),function(a){return!a.hidden});a=m(p,function(a){return a.ja});var g=m(a,function(a){return!0===a.locked}).length,h=m(a,function(a){return!0!==a.locked}).length,p=q(p,function(a){return a.a}),l=this.b.find(".k-columns-item input["+n+"]").C("disabled",
!1).C("checked",!1);a=0;for(b=l.length;a<b;a++)c=l.ha(a),k="true"===c.c(f),d=!1,-1<u(c.c(n),p)&&(d=!0,c.C("checked",d)),d&&(1==g&&k&&c.C("disabled",!0),1!=h||k||c.C("disabled",!0))},T:function(){var a,b,c,d,k=e.c("field"),f=e.c("locked");a=this.u();var g={};b=0;for(c=a.length;b<c;b++)d=a[b],g[d.field]=d;var h=this.b.find(".k-columns-item input[type=checkbox]");a=0;for(b=h.length;a<b;a++)c=h.ha(a),(d=g[c.c(k)])&&c.c(f,d.locked);this.G()},$:function(){var a="kendoFilterMenu",b=this.options;!1!==b.g&&
(b.g.Ja&&(a="kendoFilterMultiCheck",b.g.h&&(b.g.wa=b.g.h,delete b.g.h)),this.U=this.b.find(".k-filterable")[a](v(!0,{},{va:!0,h:b.h,values:b.values,a:this.a,title:this.title},b.g)).data(a))},pa:function(){},ea:function(){var a=this.a,b=this.i.f,c=m(b,function(b){return b.a==a||b.title==a})[0];if(c){var d=!0===c.locked,b=m(b,function(a){return!a.hidden&&(a.locked&&d||!a.locked&&!d)}).length,c=this.b.find(".k-lock").M("k-state-disabled"),e=this.b.find(".k-unlock").M("k-state-disabled");(d||1==b)&&c.v("k-state-disabled");
d&&1!=b||e.v("k-state-disabled");this.T()}},refresh:function(){var a=this.options.h.sort()||[],b,c=this.a,d,e;this.b.find(".k-sort-asc, .k-sort-desc").M("k-state-selected");d=0;for(e=a.length;d<e;d++)b=a[d],c==b.a&&this.b.find(".k-sort-"+b.dir).v("k-state-selected");this.link[this.P(this.h.filter())?"addClass":"removeClass"]("k-state-active")},P:function(a){var b=!1,c;if(a){a=a.filters;for(var d=0,e=a.length;d<e;d++)c=a[d],c.a==this.a?b=!0:c.filters&&(b=b||this.P(c));return b}}}),w='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>',
x='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-sprite k-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>',
y=h.extend({J:function(a,b){h.I.J.call(this,a,b);this.element.L("click.kendoColumnMenu","li.k-item:not(.k-separator):not(.k-state-disabled)","_click")},ia:["select"],O:function(a){f(a.target).is("[type=checkbox]")||a.preventDefault();this.ma("select",{item:a.currentTarget})},close:function(){this.options.j.navigate("")},o:function(){h.I.o.call(this);this.element.B(".kendoColumnMenu")}});t.La(z)})(window.V.Ha);return window.V}); 
