("function"==typeof define&&define.da?define:function(e,n){n()})(["./kendo.core","./kendo.draganddrop"],function(){(function(e){function n(a){return e('<div class="k-header k-drag-clue" />').c({width:a.width(),paddingLeft:a.c("paddingLeft"),paddingRight:a.c("paddingRight"),lineHeight:a.height()+"px",paddingTop:a.c("paddingTop"),paddingBottom:a.c("paddingBottom")}).T(a.a(d.a("title"))||a.a(d.a("field"))).ta('<span class="k-icon k-drag-status k-denied" />')}var d=window.F,p=d.H.$,l=e.ua,k=!1,q=d.wa('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',
{ya:!1}),m=e('<div class="k-grouping-dropclue"/>'),r=p.extend({U:function(a,c){var b=this,h=d.ma(),g=l(b.K,b),f;b.j=[];p.O.U.call(b,a,c);f=(k=d.va.na(a))?"right":"left";b.draggable=h=b.options.draggable||new d.H.Z(b.element,{filter:b.options.N,hint:n,group:h});b.b=e(b.options.b,b.element).qa({group:h.options.group,ha:function(a){b.v(a.draggable.currentTarget)&&(a.draggable.hint.find(".k-drag-status").G("k-denied").D("k-add"),m.c("top",b.b.position().top+3).c(f,0).L(b.b))},ia:function(b){b.draggable.hint.find(".k-drag-status").G("k-add").D("k-denied");
m.remove()},ka:function(a){var c=a.draggable.currentTarget;a=c.a(d.a("field"));var h=c.a(d.a("title")),g=b.u(a),f=b.j,f=f[f.length-1];if(c.S("k-group-indicator")||b.v(c))f?(c=b.A(d.P(m).left+parseInt(f.element.c("marginLeft"),10)*(k?-1:1)+parseInt(f.element.c("marginRight"),10)))&&b.I(e(g),c.element,c.left)&&(c.l?c.element.l(g||b.h(a,h)):c.element.aa(g||b.h(a,h)),b.i()):(b.b.append(b.h(a,h)),b.i())}}).pa({filter:"div.k-group-indicator",hint:n,group:h.options.group,fa:l(b.s,b),ja:function(a){a=a.currentTarget;
var c=parseInt(a.c("marginLeft"),10),d=a.position();a=k?d.left-c:d.left+a.outerWidth();g();m.c({top:b.b.position().top+3,left:a}).L(b.b);this.hint.find(".k-drag-status").G("k-denied").D("k-add")},ga:function(){b.J(this)},ea:l(b.w,b)}).X("click.kendoGroupable",".k-button",function(a){a.preventDefault();b.C(e(this).parent())}).X("click.kendoGroupable",".k-link",function(a){var c=e(this).parent(),h=b.h(c.a(d.a("field")),c.a(d.a("title")),"asc"==c.a(d.a("dir"))?"desc":"asc");c.l(h).remove();b.i();a.preventDefault()});
l(b.s,b);l(b.w,b);b.f=b.options.f;b.f&&b.g?b.f.Y("change",b.g):b.g=l(b.refresh,b);b.f&&b.refresh()},refresh:function(){var a=this,c=a.f;a.b&&a.b.empty().append(e.map(c.group()||[],function(b){var c=b.o,g=d.a("field"),f=a.element.find(a.options.filter).filter(function(){return e(this).a(g)===c});return a.h(b.o,f.a(d.a("title")),b.dir)}).join(""));a.B()},m:function(){p.O.m.call(this);this.b.ra(".kendoGroupable");this.b.data("kendoDropTarget")&&this.b.data("kendoDropTarget").m();this.b.data("kendoDraggable")&&
this.b.data("kendoDraggable").m();this.options.draggable||this.draggable.m();this.f&&this.g&&(this.f.Y("change",this.g),this.g=null);this.b=this.element=this.draggable=null},options:{name:"Groupable",filter:"th",N:"th",V:{empty:"Drag a column header and drop it here to group by that column"}},u:function(a){var c=e(".k-group-indicator",this.b);return e.R(c,function(b){return e(b).a(d.a("field"))===a})[0]},h:function(a,c,b){return q({o:a.replace(/"/g,"'"),dir:b,title:c,W:d.W})},M:function(){var a=e(".k-group-indicator",
this.b),c,b,h,g,f;c=this.element.find(this.options.filter).map(function(){var a=e(this),c=a.a(d.a("aggregates")),a=a.a(d.a("field"));if(c&&""!==c)for(b=c.split(","),c=[],g=0,f=b.length;g<f;g++)c.push({o:a,ba:b[g]});return c}).xa();return e.map(a,function(a){a=e(a);h=a.a(d.a("field"));return{o:h,dir:a.a(d.a("dir")),ca:c||[]}})},C:function(a){a.remove();this.B();this.i()},i:function(){this.f&&this.f.group(this.M())},A:function(a){var c=this.j;if(m.is(":visible")&&0!==c.length){a=Math.ceil(a);var b=
c[c.length-1],d=b.left,g=b.right,f=parseInt(b.element.c("marginLeft"),10),l=parseInt(b.element.c("marginRight"),10);a>=g&&!k||a<d&&k?a={left:b.element.position().left+(k?-f:b.element.outerWidth()+l),element:b.element,l:!1}:(a=e.R(c,function(b){return b.left<=a&&a<=b.right||k&&a>b.right})[0])&&(a={left:k?a.element.position().left+a.element.outerWidth()+l:a.element.position().left-f,element:a.element,l:!0});return a}},w:function(a){(a=this.A(a.x.location))&&m.c({left:a.left,right:"auto"})},v:function(a){var c=
a.a(d.a("field"));return"false"!=a.a(d.a("groupable"))&&c&&(a.S("k-group-indicator")||!this.u(c))},I:function(a,c,b){var d=a.next();return a[0]!==c[0]&&(!d[0]||c[0]!==d[0]||!k&&b>d.position().left||k&&b<d.position().left)},J:function(a){var c=a.currentTarget.a(d.a("field")),c=this.u(c);a!==this.options.draggable&&!a.la&&c&&this.C(e(c));this.s()},s:function(){m.remove();this.j=[]},K:function(){var a=e(".k-group-indicator",this.b),c;this.j=e.map(a,function(a){a=e(a);c=d.P(a).left;return{left:parseInt(c,
10),right:parseInt(c+a.outerWidth(),10),element:a}})},B:function(){var a=this.b;a&&a.is(":empty")&&a.T(this.options.V.empty)}});d.H.sa(r)})(window.F.oa);return window.F}); 
