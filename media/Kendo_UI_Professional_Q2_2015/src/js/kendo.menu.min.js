("function"==typeof define&&define.Lb?define:function(e,r){r()})(["./kendo.popup"],function(){(function(e,r){function J(a,b){a=a.split(" ")[!b+0]||a;return a.replace("top","up").replace("bottom","down")}function K(a,b,c){a=a.split(" ")[!b+0]||a;b={origin:["bottom",c?"right":"left"],position:["top",c?"right":"left"]};/left|right/.test(a)?(b.origin=["top",a],b.position[1]=g.cb[a].reverse):(b.origin[0]=a,b.position[0]=g.cb[a].reverse);b.origin=b.origin.join(" ");b.position=b.position.join(" ");return b}
function h(a,b){try{return e.contains(a,b)}catch(c){return!1}}function F(a){a=e(a);a.c("k-item").children("img").c("k-image");a.children("a").c("k-link").children("img").c("k-image");a.filter(":not([disabled])").c("k-state-default");a.filter(".k-separator:empty").append("&nbsp;");a.filter("li[disabled]").c("k-state-disabled").aa("disabled").i("aria-disabled",!0);a.filter("[role]").length||a.i("role","menuitem");a.children(".k-link").length||a.Ob().filter(function(){return!this.nodeName.match(L)&&
!(3==this.nodeType&&!e.trim(this.nodeValue))}).pc("<span class='k-link'/>");u(a);t(a)}function u(a){a=e(a);a.find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove();a.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").u(function(){var a=e(this),c=a.parent().parent();a.append("<span class='k-icon "+(c.m("k-menu-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function t(a){a=e(a);a.filter(".k-first:not(:first-child)").s("k-first");a.filter(".k-last:not(:last-child)").s("k-last");
a.filter(":first-child").c("k-first");a.filter(":last-child").c("k-last")}var g=window.sa,B=g.nc,M=g.ba,y=g.h.ub&&g.h.nb,m=e.extend,f=e.fc,C=e.u,p=g.kc,l=g.keys,z=B.Eb,L=/^(ul|a|div)$/i,v=g.h.ec,w=g.h.bc,D=v?"pointerover":w?"MSPointerOver":"mouseenter",G=v?"pointerout":w?"MSPointerOut":"mouseleave",N=y||w||v,A=e(document.documentElement),H={2:1,touch:1},q={content:p("<div class='k-content #= groupCssClass() #' tabindex='-1'>#= content(item) #</div>"),group:p("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),
ra:p("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:p("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),
qa:p("<img class='k-image' alt='' src='#= imageUrl #' />"),na:p("<span class='#= arrowClass(item, group) #'></span>"),xa:p("<span class='k-sprite #= spriteCssClass #'></span>"),empty:p("")},E={qc:function(a,b){var c="k-item",d=b.index,c=!1===b.enabled?c+" k-state-disabled":c+" k-state-default";a.hb&&0===d&&(c+=" k-first");d==a.length-1&&(c+=" k-last");b.$a&&(c+=" "+b.$a);return c},mc:function(){return"k-link"},lc:function(a){return a.url?" href='"+a.url+"'":""},Mb:function(a,b){var c="k-icon";return c=
b.kb?c+" k-i-arrow-s":c+" k-i-arrow-e"},text:function(a){return!1===a.Rb?a.text:g.Wb(a.text)},tag:function(a){return a.url?"a":"span"},Ub:function(a){return!0!==a.gb?" style='display:none'":""},Vb:function(){return"k-group k-menu-group"},content:function(a){return a.content?a.content:"&nbsp;"}},k=z.extend({V:function(a,b){z.v.V.call(this,a,b);a=this.b=this.element;b=this.options;this.ia(b);this.la();this.ca(b);this.ob=100;this.Ib();this.Fa=f(this.Ea,this);a.f("touchstart.kendoMenu MSPointerDown.kendoMenu pointerdown.kendoMenu",
".k-item:not(.k-state-disabled)",this.Fa).f("click.kendoMenu",".k-item.k-state-disabled",!1).f("click.kendoMenu",".k-item:not(.k-state-disabled)",f(this.ea,this)).f("keydown.kendoMenu",f(this.La,this)).f("focus.kendoMenu",f(this.ha,this)).f("focus.kendoMenu",".k-content",f(this.ha,this)).f("touchstart.kendoMenu MSPointerDown.kendoMenu pointerdown.kendoMenu mousedown.kendoMenu",".k-content",f(this.Pa,this)).f("blur.kendoMenu",f(this.T,this)).f("blur.kendoMenu","[tabindex]",f(this.da,this)).f(D+".kendoMenu",
".k-item:not(.k-state-disabled)",f(this.Ma,this)).f(G+".kendoMenu",".k-item:not(.k-state-disabled)",f(this.Na,this)).f(D+".kendoMenu "+G+".kendoMenu mousedown.kendoMenu click.kendoMenu",".k-item:not(.k-state-disabled) > .k-link",f(this.Sa,this));b.D&&(this.A=!1,this.P=f(this.Da,this),e(document).click(this.P));a.i("role","menubar");a[0].id&&(this.Ba=g.format("{0}_mn_active",a[0].id));g.dc(this)},fb:["open","close","activate","deactivate","select"],options:{name:"Menu",j:{open:{duration:200},close:{duration:100}},
orientation:"horizontal",direction:"default",D:!1,K:!0,pa:100,Z:r},ia:function(a){var b=this;a.ab&&(b.Va("cleanup",function(){return{elements:b.element.children()}}),b.element.empty(),b.append(a.ab,b.element),b.Va("compile",function(){return{elements:b.element.children()}}))},M:function(a){var b=this.options.j;this.ca(a);a.j=m(!0,b,a.j);"dataSource"in a&&this.ia(a);this.la();z.v.M.call(this,a)},C:function(){z.v.C.call(this);this.element.I(".kendoMenu");this.P&&e(document).za("click",this.P);g.C(this.element)},
enable:function(a,b){this.ja(a,!1!==b);return this},disable:function(a){this.ja(a,!1);return this},append:function(a,b){b=this.element.find(b);var c=this.S(a,b,b.length?b.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);C(c.items,function(){c.group.append(this);u(this)});u(b);t(c.group.find(".k-first, .k-last").add(c.items));return this},insertBefore:function(a,b){b=this.element.find(b);var c=this.S(a,b,b.parent());C(c.items,function(){b.Nb(this);u(this);t(this)});t(b);return this},
Yb:function(a,b){b=this.element.find(b);var c=this.S(a,b,b.parent());C(c.items,function(){b.Jb(this);u(this);t(this)});t(b);return this},S:function(a,b,c){b&&b.length||(c=this.element);var d=e.Zb(a),g={hb:c.m("k-menu"),kb:c.m("k-menu-horizontal"),gb:!0,length:c.children().length};b&&!c.length&&(c=e(k.va({group:g})).Wa(b));d||e.isArray(a)?a=e(e.map(d?[a]:a,function(a,b){return"string"===typeof a?e(a).get():e(k.wa({group:g,item:m(a,{index:b})})).get()})):(a="string"==typeof a&&"<"!=a.charAt(0)?this.element.find(a):
e(a),b=a.find("> ul").c("k-menu-group").i("role","menu"),a=a.filter("li"),a.add(b.find("> li")).u(function(){F(this)}));return{items:a,group:c}},remove:function(a){a=this.element.find(a);var b=a.Y(this.element,":not(.k-list) > .k-item"),c=a.parent("ul:not(.k-menu)");a.remove();c&&!c.children(":not(.k-list) > .k-item").length&&(a=c.parent(".k-animation-container"),a.length?a.remove():c.remove());b.length&&(b=b.Sb(0),u(b),t(b));return this},open:function(a){var b=this,c=b.options,d="horizontal"==c.orientation,
x=c.direction,I=g.h.lb(b.b);a=b.element.find(a);/^(top|bottom|default)$/.test(x)&&(x=I?d?(x+" left").replace("default","bottom"):"left":d?(x+" right").replace("default","bottom"):"right");a.tb().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").u(function(){var a=e(this).data("kendoPopup");a&&a.close()});a.u(function(){var a=e(this);clearTimeout(a.data("timer"));a.data("timer",setTimeout(function(){var f=a.find(".k-menu-group:first:hidden"),n;if(f[0]&&!1===b.o({item:a[0],type:"open"})){if(!f.find(".k-menu-group")[0]&&
1<f.children(".k-item").length){var k=e(window).height();n=function(){f.B({maxHeight:k-(f.outerHeight()-f.height())-g.Tb(f).bottom,overflow:"auto"})};g.h.Xa.cc&&7>=g.h.Xa.version?setTimeout(n,0):n()}else f.B({maxHeight:"",overflow:""});a.data("zIndex",a.B("zIndex"));a.B("zIndex",b.ob++);n=f.data("kendoPopup");var h=a.parent().m("k-menu"),p=h&&d,l=K(x,h,I),q=c.j.open.L,h=q!==r?q:"slideIn:"+J(x,h);n?(n=f.data("kendoPopup"),n.options.origin=l.origin,n.options.position=l.position,n.options.j.open.L=h):
n=f.mb({Ta:function(){b.o({item:this.b.parent(),type:"activate"})},bb:function(a){a.sender.element.sb("targetTransform").B({opacity:""});b.o({item:this.b.parent(),type:"deactivate"})},origin:l.origin,position:l.position,Ya:c.Z!==r?c.Z:p?"fit":"fit flip",anchor:a,Wa:a,j:{open:m(!0,{L:h},c.j.open),close:c.j.close},close:function(a){var c=a.sender.b.parent();b.o({item:c[0],type:"close"})?a.preventDefault():(c.B("zIndex",c.data("zIndex")),c.sb("zIndex"),y&&(c.s("k-state-hover"),b.T()))}}).data("kendoPopup");
f.aa("aria-hidden");n.open()}},b.options.pa))});return b},close:function(a,b){var c=this,d=c.element;a=d.find(a);a.length||(a=d.find(">.k-item"));a.u(function(){var a=e(this);!b&&c.w(a)&&(c.A=!1);clearTimeout(a.data("timer"));a.data("timer",setTimeout(function(){var b=a.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data("kendoPopup");b&&(b.close(),b.element.i("aria-hidden",!0))},c.options.pa))});return c},ja:function(a,b){this.element.find(a).u(function(){e(this).ya("k-state-default",
b).ya("k-state-disabled",!b).i("aria-disabled",!b)})},Sa:function(a){var b=e(g.oa(a)||a.target).g(":not(.k-list) > .k-item"),c=a.type==D||-1!=="mousedown".indexOf(a.type);b.qb("li.k-state-disabled").length||b.ya("k-state-hover",c||"mousedown"==a.type||"click"==a.type);this.T()},Pa:function(){this.options.K||(this.ga=!0)},da:function(a){var b=this,c=e(a?a.currentTarget:this.J()),d=b.G(c)[0];this.ga||setTimeout(function(){document.hasFocus()&&(h(d,g.ba())||!a||h(d,a.currentTarget))||b.close(d)},0);
this.ga=!1},T:function(){var a=this.J();a&&a.m("k-state-focused")&&(a.s("k-state-focused"),this.H=null)},la:function(){var a=this.element,b;a.s("k-menu-horizontal k-menu-vertical");a.c("k-widget k-reset k-header k-menu-init k-menu").c("k-menu-"+this.options.orientation);a.find("li > ul").filter(function(){return!g.h.matchesSelector.call(this,".k-menu-init div ul")}).c("k-group k-menu-group").i("role","menu").i("aria-hidden",a.is(":visible")).end().find("li > div").c("k-content").i("tabindex","-1");
b=a.find("> li,.k-menu-group > li");a.s("k-menu-init");b.u(function(){F(this)})},Ma:function(a){var b=this,c=e(a.currentTarget),d=c.children(".k-animation-container").length||c.children(".k-menu-group").length;a.Pb==c.qb(".k-menu")[0]&&(b.options.D&&!b.A||y||(v||w)&&a.pb.pointerType in H&&b.w(c.g(":not(.k-list) > .k-item"))||!h(a.currentTarget,a.relatedTarget)&&d&&b.open(c),(b.options.D&&b.A||N)&&c.tb().u(f(function(a,c){b.close(c,!0)},b)))},Na:function(a){var b=e(a.currentTarget),c=b.children(".k-animation-container").length||
b.children(".k-menu-group").length;b.Y(".k-animation-container",".k-list-container,.k-calendar-container")[0]?a.stopImmediatePropagation():this.options.D||y||(v||w)&&a.pb.pointerType in H||h(a.currentTarget,a.relatedTarget||a.target)||!c||h(a.currentTarget,g.ba())||this.close(b)},ea:function(a){var b=this.options,c=e(g.oa(a)),d=c[0]?c[0].nodeName.toUpperCase():"",f="INPUT"==d||"SELECT"==d||"BUTTON"==d||"LABEL"==d,h=c.g(".k-link"),d=c.g(":not(.k-list) > .k-item"),k=h.i("href"),l=c.i("href"),n=e("<a href='#' />").i("href"),
m=!!k&&k!==n,k=m&&!!k.match(/^#/),l=!!l&&l!==n,n=b.D&&void 0;if(!c.g("> div:not(.k-animation-container,.k-list-container)",d[0]).length)if(d.m("k-state-disabled"))a.preventDefault();else if(a.ib||!this.o({item:d[0],type:"select"})||f||a.preventDefault(),a.ib=!0,c=d.children(".k-menu-group,.k-animation-container"),c.is(":visible"),!b.K||m&&!k||c.length&&!n){if(m&&a.eb&&h[0].click(),this.w(d)&&b.D||g.h.ub||(v||w)&&this.w(d.g(":not(.k-list) > .k-item")))if(m||f||l||a.preventDefault(),this.A=!0,a=c.is(":visible")?
"close":"open",b.K||"close"!=a)this[a](d)}else d.s("k-state-hover").B("height"),this.H=this.G(d),this.close(h.Y(this.element,":not(.k-list) > .k-item")),this.A=!1,-1!="MSPointerUp".indexOf(a.type)&&a.preventDefault()},Da:function(a){h(this.element[0],a.target)||(this.A=!1)},ha:function(a){var b=a.target,c=this.J(),d=M();b==this.b[0]||e(b).is(":kendoFocusable")?d===a.currentTarget&&(c.length?this.l([],c):this.H||this.l([],this.b.children().first())):(a.stopPropagation(),e(b).g(".k-content").g(".k-menu-group").g(".k-item").c("k-state-focused"),
this.b.focus())},La:function(a){var b=a.keyCode,c=this.H,d,e,f,h=g.h.lb(this.b);if(a.target==a.currentTarget||b==l.Aa){c||(c=this.H=this.J());e=this.Ga(c);f=this.Ja(c);if(b==l.zb)d=this[h?"_itemLeft":"_itemRight"](c,e,f);else if(b==l.yb)d=this[h?"_itemRight":"_itemLeft"](c,e,f);else if(b==l.wb)d=this.Ha(c,e,f);else if(b==l.Cb)d=this.Ka(c,e,f);else if(b==l.Aa)d=this.Ia(c,e);else if(b==l.xb||b==l.Ab)d=c.children(".k-link"),0<d.length&&(this.ea({target:d[0],preventDefault:function(){},eb:!0}),this.l(c,
this.G(c)));else if(b==l.Bb){d=this.G(c);this.l(c,d);this.da();return}d&&d[0]&&(a.preventDefault(),a.stopPropagation())}},J:function(){return this.b.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},Ga:function(a){var b=this.b.m("k-menu-vertical");return a.length?a.parent().m("k-menu-group")||b:b},Ja:function(a){return a.length?0<a.children("ul.k-menu-group, div.k-animation-container").length:!1},l:function(a,b){var c=this.Ba;a.length&&b.length&&a.s("k-state-focused");b.length&&
(b[0].id&&(c=b[0].id),b.c("k-state-focused"),this.H=b,c&&(this.element.aa("aria-activedescendant"),e("#"+c).aa("id"),b.i("id",c),this.element.i("aria-activedescendant",c)))},G:function(a){return this.w(a)?a:a.Y(".k-menu","li.k-item").W()},w:function(a){return a.parent().m("k-menu")},Gb:function(a,b,c){var d;if(!a.m("k-state-disabled"))return b?c?(this.open(a),d=a.find(".k-menu-group").children().first()):"horizontal"==this.options.orientation&&(b=this.G(a),this.close(b),d=b.X(":not(.k-item.k-separator):eq(0)")):
(d=a.X(":not(.k-item.k-separator):eq(0)"),d.length||(d=a.$(":not(.k-item.k-separator):last"))),d&&!d.length?d=this.b.children(".k-item").first():d||(d=[]),this.l(a,d),d},Fb:function(a,b){var c;b?(c=a.parent().g(".k-item"),this.close(c),this.w(c)&&"horizontal"==this.options.orientation&&(c=c.$(":not(.k-item.k-separator):eq(0)"))):(c=a.$(":not(.k-item.k-separator):eq(0)"),c.length||(c=a.X(":not(.k-item.k-separator):last")));c.length||(c=this.b.children(".k-item").W());this.l(a,c);return c},Ha:function(a,
b,c){if(b)b=a.X(":not(.k-item.k-separator):eq(0)");else{if(!c||a.m("k-state-disabled"))return;this.open(a);b=a.find(".k-menu-group").children().first()}!b.length&&a.length?b=a.parent().children().first():a.length||(b=this.b.children(".k-item").first());this.l(a,b);return b},Ka:function(a,b){var c;if(b)return c=a.$(":not(.k-item.k-separator):eq(0)"),!c.length&&a.length?c=a.parent().children().W():a.length||(c=this.b.children(".k-item").W()),this.l(a,c),c},Ia:function(a,b){var c;if(b)c=a.parent().g(".k-item"),
this.close(c),this.l(a,c);else return a;return c},o:function(a){return this.vb(a.type,{type:a.type,item:a.item})},Ea:function(a){var b=this,c=e(g.oa(a)).g(":not(.k-list) > .k-item");setTimeout(function(){b.l([],c);c.children(".k-content")[0]&&c.parent().g(".k-item").s("k-state-focused")},200)},ca:function(a){a&&"animation"in a&&!a.j&&(a.j={open:{L:{}},close:{jb:!0,L:{}}})}});m(k,{wa:function(a){a=m({ac:{},group:{}},a);var b=q.empty,c=a.item;return q.item(m(a,{qa:c.Xb?q.qa:b,xa:c.ic?q.xa:b,ra:q.ra,
ua:k.ua,na:c.items||c.content?q.na:b,jc:k.va},E))},va:function(a){return q.group(m({gc:function(a){for(var c="",d=0,e=a.items,f=e?e.length:0,g=m({length:f},a.group);d<f;d++)c+=k.wa(m(a,{group:g,item:m({index:d},e[d])}));return c}},a,E))},ua:function(a){return q.content(m(a,E))}});p=k.extend({V:function(a,b){k.v.V.call(this,a,b);this.target=e(this.options.target);this.Oa();this.ma()},options:{name:"ContextMenu",filter:null,F:"contextmenu",orientation:"vertical",Ua:!1,target:"body"},fb:["open","close",
"activate","deactivate","select"],M:function(a){k.v.M.call(this,a);this.target.I(this.F+".kendoMenu",this.U);this.N&&this.N.C();this.target=e(this.options.target);a.orientation&&this.a.b[0]&&this.a.element.oc();this.ma();k.v.M.call(this,a)},C:function(){this.target.I(this.options.F+".kendoMenu");A.I(g.h.ta+".kendoMenu",this.O);this.N&&this.N.C();k.v.C.call(this)},open:function(a,b){a=e(a)[0];h(this.element[0],e(a)[0])?k.v.open.call(this,a):!1===this.o({item:this.element,type:"open"})&&(this.a.visible()&&
this.options.filter&&this.a.close(!0),b!==r?(this.a.b.jb(),this.a.open(a,b)):(this.a.options.anchor=(a?a:this.a.anchor)||this.target,this.a.open()),A.I(this.a.Qb,this.a.Hb),A.f(g.h.ta+".kendoMenu",this.O));return this},close:function(a){h(this.element[0],e(a)[0])?k.v.close.call(this,a):this.a.visible()&&!1===this.o({item:this.element,type:"close"})&&(this.a.close(),A.I(g.h.ta+".kendoMenu",this.O),this.za("select",this.fa))},Qa:function(a){var b=a,c=this.options;a.event&&(b=a.event,b.pageX=a.x.location,
b.pageY=a.y.location);!h(this.element[0],a.relatedTarget||a.target)&&(this.R=b,b.preventDefault(),b.stopImmediatePropagation(),this.element.find(".k-state-focused").s("k-state-focused"),c.filter&&g.h.matchesSelector.call(b.currentTarget,c.filter)||!c.filter)&&(c.Ua?this.open(b.currentTarget):(this.a.options.anchor=b.currentTarget,this.Ra?(a=this.target.offset(),this.open(b.pageX-a.left,b.pageY-a.top)):this.open(b.pageX,b.pageY)))},Ca:function(a){var b=e(a.relatedTarget||a.target),c=b.g(this.target.hc)[0]==
this.target[0],d=b.g(".k-item:not(.k-state-disabled)").children(".k-menu-group,.k-animation-container"),b=h(this.element[0],b[0]);this.R=a;a=3!==a.which;this.a.visible()&&(a&&c||!c)&&(this.options.K&&!d[0]&&b||!b)&&(b?this.za("select",this.fa):this.close())},ma:function(){var a=this.options,b=this.target;this.U=f(this.Qa,this);this.O=f(this.Ca,this);this.fa=f(this.close,this);b[0]&&(g.h.nb&&"contextmenu"==a.F?(this.N=new g.Db(b,{filter:a.filter,Kb:!1}),b.f(a.F+".kendoMenu",!1)):a.filter?b.f(a.F+".kendoMenu",
a.filter,this.U):b.f(a.F+".kendoMenu",this.U))},o:function(a){var b=e(this.a.options.anchor)[0],c=this.R;this.R=r;return this.vb(a.type,m({type:a.type,item:a.item||this.element[0],target:b},c?{event:c}:{}))},Oa:function(){this.ka=f(this.o,this);this.a=this.element.c("k-context-menu").mb({anchor:this.target||"body",Za:this.options.Za,Ya:this.options.Z||"fit",j:this.options.j,Ta:this.ka,bb:this.ka}).data("kendoPopup");this.Ra=h(this.target[0],this.a.element[0])}});B.rb(k);B.rb(p)})(window.sa.$b);return window.sa}); 
