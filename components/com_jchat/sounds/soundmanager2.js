(function(e,t){"use strict";function r(n,r){function on(e){return s.preferFlash&&Pt&&!s.ignoreFlash&&s.flash[e]!==t&&s.flash[e]}function un(e){return function(t){var n=this._s,r;if(!n||!n._a){if(n&&n.id){s._wD(n.id+": Ignoring "+t.type)}else{s._wD(l+"Ignoring "+t.type)}r=null}else{r=e.call(this,t)}return r}}this.setupOptions={url:n||null,flashVersion:9,debugMode:false,debugFlash:false,useConsole:true,consoleOnly:true,waitForWindowLoad:false,bgColor:"#ffffff",useHighPerformance:false,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:false,useHTML5Audio:true,html5Test:/^(probably|maybe)$/i,preferFlash:false,noSWFCache:false};this.defaultOptions={autoLoad:false,autoPlay:false,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:true,multiShotEvents:false,position:null,pan:0,stream:true,to:null,type:null,usePolicyFile:false,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:false},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.movieID="sm2-container";this.id=r||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20130101";this.version=null;this.movieURL=null;this.altURL=null;this.swfLoaded=false;this.enabled=false;this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.html5Only=false;this.ignoreFlash=false;var i,s=this,o=null,u=null,a="soundManager",f=a+": ",l="HTML5::",c,h=navigator.userAgent,p=e.location.href.toString(),d=document,v,m,g,y,b=[],w=true,E,S=false,x=false,T=false,N=false,C=false,k,L=0,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G=["log","info","warn","error"],Y=8,Z,et,tt,nt=null,rt=null,it,st,ot,ut,at,ft,lt,ct,ht,pt=false,dt=false,vt,mt,gt,yt=0,bt=null,wt,Et=[],St=null,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt=Array.prototype.slice,_t=false,Dt,Pt,Ht,Bt,jt,Ft,It,qt=h.match(/(ipad|iphone|ipod)/i),Rt=h.match(/android/i),Ut=h.match(/msie/i),zt=h.match(/webkit/i),Wt=h.match(/safari/i)&&!h.match(/chrome/i),Xt=h.match(/opera/i),Vt=h.match(/(mobile|pre\/|xoom)/i)||qt||Rt,$t=!p.match(/usehtml5audio/i)&&!p.match(/sm2\-ignorebadua/i)&&Wt&&!h.match(/silk/i)&&h.match(/OS X 10_6_([3-7])/i),Jt=e.console!==t&&console.log!==t,Kt=d.hasFocus!==t?d.hasFocus():null,Qt=Wt&&(d.hasFocus===t||!d.hasFocus()),Gt=!Qt,Yt=/(mp3|mp4|mpa|m4a|m4b)/i,Zt="about:blank",en=d.location?d.location.protocol.match(/http/i):null,tn=!en?"http:/"+"/":"",nn=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,rn=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],sn=new RegExp("\\.("+rn.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!en;ut={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.hasHTML5=function(){try{return Audio!==t&&(Xt&&opera!==t&&opera.version()<10?new Audio(null):new Audio).canPlayType!==t}catch(e){return false}}();this.setup=function(e){var n=!s.url;if(e!==t&&T&&St&&s.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t)){ct(it("setupLate"))}M(e);if(n&&X&&e.url!==t){s.beginDelayedInit()}if(!X&&e.url!==t&&d.readyState==="complete"){setTimeout(z,1)}return s};this.ok=function(){return St?T&&!N:s.useHTML5Audio&&s.hasHTML5};this.supported=this.ok;this.getMovie=function(t){return c(t)||d[t]||e[t]};this.createSound=function(e,n){function c(){f=ft(f);s.sounds[f.id]=new i(f);s.soundIDs.push(f.id);return s.sounds[f.id]}var r,o,f,l=null;r=a+".createSound(): ";o=r+it(!T?"notReady":"notOK");if(!T||!s.ok()){ct(o);return false}if(n!==t){e={id:e,url:n}}f=O(e);f.url=wt(f.url);if(f.id.toString().charAt(0).match(/^[0-9]$/)){s._wD(r+it("badID",f.id),2)}s._wD(r+f.id+" ("+f.url+")",1);if(ht(f.id,true)){s._wD(r+f.id+" exists",1);return s.sounds[f.id]}if(Tt(f)){l=c();s._wD(f.id+": Using HTML5");l._setup_html5(f)}else{if(y>8){if(f.isMovieStar===null){f.isMovieStar=!!(f.serverURL||(f.type?f.type.match(nn):false)||f.url.match(sn))}if(f.isMovieStar){s._wD(r+"using MovieStar handling");if(f.loops>1){k("noNSLoop")}}}f=lt(f,r);l=c();if(y===8){u._createSound(f.id,f.loops||1,f.usePolicyFile)}else{u._createSound(f.id,f.url,f.usePeakData,f.useWaveformData,f.useEQData,f.isMovieStar,f.isMovieStar?f.bufferTime:false,f.loops||1,f.serverURL,f.duration||null,f.autoPlay,true,f.autoLoad,f.usePolicyFile);if(!f.serverURL){l.connected=true;if(f.onconnect){f.onconnect.apply(l)}}}if(!f.serverURL&&(f.autoLoad||f.autoPlay)){l.load(f)}}if(!f.serverURL&&f.autoPlay){l.play()}return l};this.destroySound=function(e,t){if(!ht(e)){return false}var n=s.sounds[e],r;n._iO={};n.stop();n.unload();for(r=0;r<s.soundIDs.length;r++){if(s.soundIDs[r]===e){s.soundIDs.splice(r,1);break}}if(!t){n.destruct(true)}n=null;delete s.sounds[e];return true};this.load=function(e,t){if(!ht(e)){return false}return s.sounds[e].load(t)};this.unload=function(e){if(!ht(e)){return false}return s.sounds[e].unload()};this.onPosition=function(e,t,n,r){if(!ht(e)){return false}return s.sounds[e].onposition(t,n,r)};this.onposition=this.onPosition;this.clearOnPosition=function(e,t,n){if(!ht(e)){return false}return s.sounds[e].clearOnPosition(t,n)};this.play=function(e,t){var n=false;if(!T||!s.ok()){ct(a+".play(): "+it(!T?"notReady":"notOK"));return n}if(!ht(e)){if(!(t instanceof Object)){t={url:t}}if(t&&t.url){s._wD(a+'.play(): attempting to create "'+e+'"',1);t.id=e;n=s.createSound(t).play()}return n}return s.sounds[e].play(t)};this.start=this.play;this.setPosition=function(e,t){if(!ht(e)){return false}return s.sounds[e].setPosition(t)};this.stop=function(e){if(!ht(e)){return false}s._wD(a+".stop("+e+")",1);return s.sounds[e].stop()};this.stopAll=function(){var e;s._wD(a+".stopAll()",1);for(e in s.sounds){if(s.sounds.hasOwnProperty(e)){s.sounds[e].stop()}}};this.pause=function(e){if(!ht(e)){return false}return s.sounds[e].pause()};this.pauseAll=function(){var e;for(e=s.soundIDs.length-1;e>=0;e--){s.sounds[s.soundIDs[e]].pause()}};this.resume=function(e){if(!ht(e)){return false}return s.sounds[e].resume()};this.resumeAll=function(){var e;for(e=s.soundIDs.length-1;e>=0;e--){s.sounds[s.soundIDs[e]].resume()}};this.togglePause=function(e){if(!ht(e)){return false}return s.sounds[e].togglePause()};this.setPan=function(e,t){if(!ht(e)){return false}return s.sounds[e].setPan(t)};this.setVolume=function(e,t){if(!ht(e)){return false}return s.sounds[e].setVolume(t)};this.mute=function(e){var t=0;if(e instanceof String){e=null}if(!e){s._wD(a+".mute(): Muting all sounds");for(t=s.soundIDs.length-1;t>=0;t--){s.sounds[s.soundIDs[t]].mute()}s.muted=true}else{if(!ht(e)){return false}s._wD(a+'.mute(): Muting "'+e+'"');return s.sounds[e].mute()}return true};this.muteAll=function(){s.mute()};this.unmute=function(e){var t;if(e instanceof String){e=null}if(!e){s._wD(a+".unmute(): Unmuting all sounds");for(t=s.soundIDs.length-1;t>=0;t--){s.sounds[s.soundIDs[t]].unmute()}s.muted=false}else{if(!ht(e)){return false}s._wD(a+'.unmute(): Unmuting "'+e+'"');return s.sounds[e].unmute()}return true};this.unmuteAll=function(){s.unmute()};this.toggleMute=function(e){if(!ht(e)){return false}return s.sounds[e].toggleMute()};this.getMemoryUse=function(){var e=0;if(u&&y!==8){e=parseInt(u._getMemoryUse(),10)}return e};this.disable=function(n){var r;if(n===t){n=false}if(N){return false}N=true;k("shutdown",1);for(r=s.soundIDs.length-1;r>=0;r--){Z(s.sounds[s.soundIDs[r]])}A(n);Ot.remove(e,"load",H);return true};this.canPlayMIME=function(e){var t;if(s.hasHTML5){t=Nt({type:e})}if(!t&&St){t=e&&s.ok()?!!((y>8?e.match(nn):null)||e.match(s.mimePattern)):null}return t};this.canPlayURL=function(e){var t;if(s.hasHTML5){t=Nt({url:e})}if(!t&&St){t=e&&s.ok()?!!e.match(s.filePattern):null}return t};this.canPlayLink=function(e){if(e.type!==t&&e.type){if(s.canPlayMIME(e.type)){return true}}return s.canPlayURL(e.href)};this.getSoundById=function(e,t){if(!e){throw new Error(a+".getSoundById(): sID is null/_undefined")}var n=s.sounds[e];if(!n&&!t){s._wD('"'+e+'" is an invalid sound ID.',2)}return n};this.onready=function(t,n){var r="onready",i=false;if(typeof t==="function"){if(T){s._wD(it("queue",r))}if(!n){n=e}D(r,t,n);P();i=true}else{throw it("needFunction",r)}return i};this.ontimeout=function(t,n){var r="ontimeout",i=false;if(typeof t==="function"){if(T){s._wD(it("queue",r))}if(!n){n=e}D(r,t,n);P({type:r});i=true}else{throw it("needFunction",r)}return i};this._writeDebug=function(e,n){var r="soundmanager-debug",i,o;if(!s.debugMode){return false}if(Jt&&s.useConsole){if(n&&typeof n==="object"){console.log(e,n)}else if(G[n]!==t){console[G[n]](e)}else{console.log(e)}if(s.consoleOnly){return true}}i=c(r);if(!i){return false}o=d.createElement("div");if(++L%2===0){o.className="sm2-alt"}if(n===t){n=0}else{n=parseInt(n,10)}o.appendChild(d.createTextNode(e));if(n){if(n>=2){o.style.fontWeight="bold"}if(n===3){o.style.color="#ff3333"}}i.insertBefore(o,i.firstChild);i=null;return true};if(p.indexOf("sm2-debug=alert")!==-1){this._writeDebug=function(t){e.alert(t)}}this._wD=this._writeDebug;this._debug=function(){var e,t;k("currentObj",1);for(e=0,t=s.soundIDs.length;e<t;e++){s.sounds[s.soundIDs[e]]._debug()}};this.reboot=function(t,n){if(s.soundIDs.length){s._wD("Destroying "+s.soundIDs.length+" SMSound objects...")}var r,i,o;for(r=s.soundIDs.length-1;r>=0;r--){s.sounds[s.soundIDs[r]].destruct()}if(u){try{if(Ut){rt=u.innerHTML}nt=u.parentNode.removeChild(u);k("flRemoved")}catch(f){k("badRemove",2)}}rt=nt=St=u=null;s.enabled=X=T=pt=dt=S=x=N=_t=s.swfLoaded=false;s.soundIDs=[];s.sounds={};if(!t){for(r in b){if(b.hasOwnProperty(r)){for(i=0,o=b[r].length;i<o;i++){b[r][i].fired=false}}}}else{b=[]}if(!n){s._wD(a+": Rebooting...")}s.html5={usingFlash:null};s.flash={};s.html5Only=false;s.ignoreFlash=false;e.setTimeout(function(){U();if(!n){s.beginDelayedInit()}},20);return s};this.reset=function(){k("reset");return s.reboot(true,true)};this.getMoviePercent=function(){return u&&"PercentLoaded"in u?u.PercentLoaded():null};this.beginDelayedInit=function(){C=true;z();setTimeout(function(){if(dt){return false}$();R();dt=true;return true},20);B()};this.destruct=function(){s._wD(a+".destruct()");s.disable(true)};i=function(e){var n=this,r,i,a,f,l,c,h=false,p=[],d=0,v,m,g=null,b;b={duration:null,time:null};this.id=e.id;this.sID=this.id;this.url=e.url;this.options=O(e);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=false;this._a=null;this.id3={};this._debug=function(){s._wD(n.id+": Merged options:",n.options)};this.load=function(e){var r=null,i;if(e!==t){n._iO=O(e,n.options)}else{e=n.options;n._iO=e;if(g&&g!==n.url){k("manURL");n._iO.url=n.url;n.url=null}}if(!n._iO.url){n._iO.url=n.url}n._iO.url=wt(n._iO.url);n.instanceOptions=n._iO;i=n._iO;s._wD(n.id+": load ("+i.url+")");if(i.url===n.url&&n.readyState!==0&&n.readyState!==2){k("onURL",1);if(n.readyState===3&&i.onload){i.onload.apply(n,[!!n.duration])}return n}n.loaded=false;n.readyState=1;n.playState=0;n.id3={};if(Tt(i)){r=n._setup_html5(i);if(!r._called_load){n._html5_canplay=false;if(n.url!==i.url){s._wD(k("manURL")+": "+i.url);n._a.src=i.url;n.setPosition(0)}n._a.autobuffer="auto";n._a.preload="auto";n._a._called_load=true;if(i.autoPlay){n.play()}}else{s._wD(n.id+": Ignoring request to load again")}}else{try{n.isHTML5=false;n._iO=lt(ft(i));i=n._iO;if(y===8){u._load(n.id,i.url,i.stream,i.autoPlay,i.usePolicyFile)}else{u._load(n.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}}catch(o){k("smError",2);E("onload",false);J({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:true})}}n.url=i.url;return n};this.unload=function(){if(n.readyState!==0){s._wD(n.id+": unload()");if(!n.isHTML5){if(y===8){u._unload(n.id,Zt)}else{u._unload(n.id)}}else{f();if(n._a){n._a.pause();kt(n._a,Zt);g=Zt}}r()}return n};this.destruct=function(e){s._wD(n.id+": Destruct");if(!n.isHTML5){n._iO.onfailure=null;u._destroySound(n.id)}else{f();if(n._a){n._a.pause();kt(n._a);if(!_t){a()}n._a._s=null;n._a=null}}if(!e){s.destroySound(n.id,true)}};this.play=function(e,r){var i,o,a,f,p=true,d=null;i=n.id+": play(): ";r=r===t?true:r;if(!e){e={}}if(n.url){n._iO.url=n.url}n._iO=O(n._iO,n.options);n._iO=O(e,n._iO);n._iO.url=wt(n._iO.url);n.instanceOptions=n._iO;if(n._iO.serverURL&&!n.connected){if(!n.getAutoPlay()){s._wD(i+" Netstream not connected yet - setting autoPlay");n.setAutoPlay(true)}return n}if(Tt(n._iO)){n._setup_html5(n._iO);l()}if(n.playState===1&&!n.paused){o=n._iO.multiShot;if(!o){s._wD(i+"Already playing (one-shot)",1);d=n}else{s._wD(i+"Already playing (multi-shot)",1)}}if(d!==null){return d}if(e.url&&e.url!==n.url){n.load(n._iO)}if(!n.loaded){if(n.readyState===0){s._wD(i+"Attempting to load");if(!n.isHTML5){n._iO.autoPlay=true;n.load(n._iO)}else{n.load(n._iO)}n.instanceOptions=n._iO}else if(n.readyState===2){s._wD(i+"Could not load - exiting",2);d=n}else{s._wD(i+"Loading - attempting to play...")}}else{s._wD(i)}if(d!==null){return d}if(!n.isHTML5&&y===9&&n.position>0&&n.position===n.duration){s._wD(i+"Sound at end, resetting to position:0");e.position=0}if(n.paused&&n.position>=0&&(!n._iO.serverURL||n.position>0)){s._wD(i+"Resuming from paused state",1);n.resume()}else{n._iO=O(e,n._iO);if(n._iO.from!==null&&n._iO.to!==null&&n.instanceCount===0&&n.playState===0&&!n._iO.serverURL){f=function(){n._iO=O(e,n._iO);n.play(n._iO)};if(n.isHTML5&&!n._html5_canplay){s._wD(i+"Beginning load for from/to case");n.load({oncanplay:f});d=false}else if(!n.isHTML5&&!n.loaded&&(!n.readyState||n.readyState!==2)){s._wD(i+"Preloading for from/to case");n.load({onload:f});d=false}if(d!==null){return d}n._iO=m()}s._wD(i+"Starting to play");if(!n.instanceCount||n._iO.multiShotEvents||!n.isHTML5&&y>8&&!n.getAutoPlay()){n.instanceCount++}if(n._iO.onposition&&n.playState===0){c(n)}n.playState=1;n.paused=false;n.position=n._iO.position!==t&&!isNaN(n._iO.position)?n._iO.position:0;if(!n.isHTML5){n._iO=lt(ft(n._iO))}if(n._iO.onplay&&r){n._iO.onplay.apply(n);h=true}n.setVolume(n._iO.volume,true);n.setPan(n._iO.pan,true);if(!n.isHTML5){p=u._start(n.id,n._iO.loops||1,y===9?n._iO.position:n._iO.position/1e3,n._iO.multiShot);if(y===9&&!p){s._wD(i+"No sound hardware, or 32-sound ceiling hit");if(n._iO.onplayerror){n._iO.onplayerror.apply(n)}}}else{l();a=n._setup_html5();n.setPosition(n._iO.position);a.play()}}return n};this.start=this.play;this.stop=function(e){var t=n._iO,r;if(n.playState===1){s._wD(n.id+": stop()");n._onbufferchange(0);n._resetOnPosition(0);n.paused=false;if(!n.isHTML5){n.playState=0}v();if(t.to){n.clearOnPosition(t.to)}if(!n.isHTML5){u._stop(n.id,e);if(t.serverURL){n.unload()}}else{if(n._a){r=n.position;n.setPosition(0);n.position=r;n._a.pause();n.playState=0;n._onTimer();f()}}n.instanceCount=0;n._iO={};if(t.onstop){t.onstop.apply(n)}}return n};this.setAutoPlay=function(e){s._wD(n.id+": Autoplay turned "+(e?"on":"off"));n._iO.autoPlay=e;if(!n.isHTML5){u._setAutoPlay(n.id,e);if(e){if(!n.instanceCount&&n.readyState===1){n.instanceCount++;s._wD(n.id+": Incremented instance count to "+n.instanceCount)}}}};this.getAutoPlay=function(){return n._iO.autoPlay};this.setPosition=function(e){if(e===t){e=0}var r,i,o,a=n.isHTML5?Math.max(e,0):Math.min(n.duration||n._iO.duration,Math.max(e,0));r=n.position;n.position=a;o=n.position/1e3;n._resetOnPosition(n.position);n._iO.position=a;if(!n.isHTML5){i=y===9?n.position:o;if(n.readyState&&n.readyState!==2){u._setPosition(n.id,i,n.paused||!n.playState,n._iO.multiShot)}}else if(n._a){if(n._html5_canplay){if(n._a.currentTime!==o){s._wD(n.id+": setPosition("+o+")");try{n._a.currentTime=o;if(n.playState===0||n.paused){n._a.pause()}}catch(f){s._wD(n.id+": setPosition("+o+") failed: "+f.message,2)}}}else{s._wD(n.id+": setPosition("+o+"): Cannot seek yet, sound not ready")}}if(n.isHTML5){if(n.paused){n._onTimer(true)}}return n};this.pause=function(e){if(n.paused||n.playState===0&&n.readyState!==1){return n}s._wD(n.id+": pause()");n.paused=true;if(!n.isHTML5){if(e||e===t){u._pause(n.id,n._iO.multiShot)}}else{n._setup_html5().pause();f()}if(n._iO.onpause){n._iO.onpause.apply(n)}return n};this.resume=function(){var e=n._iO;if(!n.paused){return n}s._wD(n.id+": resume()");n.paused=false;n.playState=1;if(!n.isHTML5){if(e.isMovieStar&&!e.serverURL){n.setPosition(n.position)}u._pause(n.id,e.multiShot)}else{n._setup_html5().play();l()}if(!h&&e.onplay){e.onplay.apply(n);h=true}else if(e.onresume){e.onresume.apply(n)}return n};this.togglePause=function(){s._wD(n.id+": togglePause()");if(n.playState===0){n.play({position:y===9&&!n.isHTML5?n.position:n.position/1e3});return n}if(n.paused){n.resume()}else{n.pause()}return n};this.setPan=function(e,r){if(e===t){e=0}if(r===t){r=false}if(!n.isHTML5){u._setPan(n.id,e)}n._iO.pan=e;if(!r){n.pan=e;n.options.pan=e}return n};this.setVolume=function(e,r){if(e===t){e=100}if(r===t){r=false}if(!n.isHTML5){u._setVolume(n.id,s.muted&&!n.muted||n.muted?0:e)}else if(n._a){n._a.volume=Math.max(0,Math.min(1,e/100))}n._iO.volume=e;if(!r){n.volume=e;n.options.volume=e}return n};this.mute=function(){n.muted=true;if(!n.isHTML5){u._setVolume(n.id,0)}else if(n._a){n._a.muted=true}return n};this.unmute=function(){n.muted=false;var e=n._iO.volume!==t;if(!n.isHTML5){u._setVolume(n.id,e?n._iO.volume:n.options.volume)}else if(n._a){n._a.muted=false}return n};this.toggleMute=function(){return n.muted?n.unmute():n.mute()};this.onPosition=function(e,r,i){p.push({position:parseInt(e,10),method:r,scope:i!==t?i:n,fired:false});return n};this.onposition=this.onPosition;this.clearOnPosition=function(e,t){var n;e=parseInt(e,10);if(isNaN(e)){return false}for(n=0;n<p.length;n++){if(e===p[n].position){if(!t||t===p[n].method){if(p[n].fired){d--}p.splice(n,1)}}}};this._processOnPosition=function(){var e,t,r=p.length;if(!r||!n.playState||d>=r){return false}for(e=r-1;e>=0;e--){t=p[e];if(!t.fired&&n.position>=t.position){t.fired=true;d++;t.method.apply(t.scope,[t.position])}}return true};this._resetOnPosition=function(e){var t,n,r=p.length;if(!r){return false}for(t=r-1;t>=0;t--){n=p[t];if(n.fired&&e<=n.position){n.fired=false;d--}}return true};m=function(){var e=n._iO,t=e.from,r=e.to,i,o;o=function(){s._wD(n.id+': "To" time of '+r+" reached.");n.clearOnPosition(r,o);n.stop()};i=function(){s._wD(n.id+': Playing "from" '+t);if(r!==null&&!isNaN(r)){n.onPosition(r,o)}};if(t!==null&&!isNaN(t)){e.position=t;e.multiShot=false;i()}return e};c=function(){var e,t=n._iO.onposition;if(t){for(e in t){if(t.hasOwnProperty(e)){n.onPosition(parseInt(e,10),t[e])}}}};v=function(){var e,t=n._iO.onposition;if(t){for(e in t){if(t.hasOwnProperty(e)){n.clearOnPosition(parseInt(e,10))}}}};l=function(){if(n.isHTML5){vt(n)}};f=function(){if(n.isHTML5){mt(n)}};r=function(e){if(!e){p=[];d=0}h=false;n._hasTimer=null;n._a=null;n._html5_canplay=false;n.bytesLoaded=null;n.bytesTotal=null;n.duration=n._iO&&n._iO.duration?n._iO.duration:null;n.durationEstimate=null;n.buffered=[];n.eqData=[];n.eqData.left=[];n.eqData.right=[];n.failures=0;n.isBuffering=false;n.instanceOptions={};n.instanceCount=0;n.loaded=false;n.metadata={};n.readyState=0;n.muted=false;n.paused=false;n.peakData={left:0,right:0};n.waveformData={left:[],right:[]};n.playState=0;n.position=null;n.id3={}};r();this._onTimer=function(e){var t,r=false,i,s={};if(n._hasTimer||e){if(n._a&&(e||(n.playState>0||n.readyState===1)&&!n.paused)){t=n._get_html5_duration();if(t!==b.duration){b.duration=t;n.duration=t;r=true}n.durationEstimate=n.duration;i=n._a.currentTime*1e3||0;if(i!==b.time){b.time=i;r=true}if(r||e){n._whileplaying(i,s,s,s,s)}}return r}};this._get_html5_duration=function(){var e=n._iO,t=n._a&&n._a.duration?n._a.duration*1e3:e&&e.duration?e.duration:null,r=t&&!isNaN(t)&&t!==Infinity?t:null;return r};this._apply_loop=function(e,t){if(!e.loop&&t>1){s._wD("Note: Native HTML5 looping is infinite.",1)}e.loop=t>1?"loop":""};this._setup_html5=function(e){var t=O(n._iO,e),s=decodeURI,u=_t?o:n._a,a=s(t.url),f;if(_t){if(a===Dt){f=true}}else if(a===g){f=true}if(u){if(u._s){if(_t){if(u._s&&u._s.playState&&!f){u._s.stop()}}else if(!_t&&a===s(g)){n._apply_loop(u,t.loops);return u}}if(!f){r(false);u.src=t.url;n.url=t.url;g=t.url;Dt=t.url;u._called_load=false}}else{if(t.autoLoad||t.autoPlay){n._a=new Audio(t.url)}else{n._a=Xt&&opera.version()<10?new Audio(null):new Audio}u=n._a;u._called_load=false;if(_t){o=u}}n.isHTML5=true;n._a=u;u._s=n;i();n._apply_loop(u,t.loops);if(t.autoLoad||t.autoPlay){n.load()}else{u.autobuffer=false;u.preload="auto"}return u};i=function(){function t(e,t,r){return n._a?n._a.addEventListener(e,t,r||false):null}if(n._a._added_events){return false}var e;n._a._added_events=true;for(e in jt){if(jt.hasOwnProperty(e)){t(e,jt[e])}}return true};a=function(){function t(e,t,r){return n._a?n._a.removeEventListener(e,t,r||false):null}var e;s._wD(n.id+": Removing event listeners");n._a._added_events=false;for(e in jt){if(jt.hasOwnProperty(e)){t(e,jt[e])}}};this._onload=function(e){var t,r=!!e||!n.isHTML5&&y===8&&n.duration;t=n.id+": ";s._wD(t+(r?"onload()":"Failed to load? - "+n.url),r?1:2);if(!r&&!n.isHTML5){if(s.sandbox.noRemote===true){s._wD(t+it("noNet"),1)}if(s.sandbox.noLocal===true){s._wD(t+it("noLocal"),1)}}n.loaded=r;n.readyState=r?3:2;n._onbufferchange(0);if(n._iO.onload){n._iO.onload.apply(n,[r])}return true};this._onbufferchange=function(e){if(n.playState===0){return false}if(e&&n.isBuffering||!e&&!n.isBuffering){return false}n.isBuffering=e===1;if(n._iO.onbufferchange){s._wD(n.id+": Buffer state change: "+e);n._iO.onbufferchange.apply(n)}return true};this._onsuspend=function(){if(n._iO.onsuspend){s._wD(n.id+": Playback suspended");n._iO.onsuspend.apply(n)}return true};this._onfailure=function(e,t,r){n.failures++;s._wD(n.id+": Failures = "+n.failures);if(n._iO.onfailure&&n.failures===1){n._iO.onfailure(n,e,t,r)}else{s._wD(n.id+": Ignoring failure")}};this._onfinish=function(){var e=n._iO.onfinish;n._onbufferchange(0);n._resetOnPosition(0);if(n.instanceCount){n.instanceCount--;if(!n.instanceCount){v();n.playState=0;n.paused=false;n.instanceCount=0;n.instanceOptions={};n._iO={};f();if(n.isHTML5){n.position=0}}if(!n.instanceCount||n._iO.multiShotEvents){if(e){s._wD(n.id+": onfinish()");e.apply(n)}}}};this._whileloading=function(e,t,r,i){var s=n._iO;n.bytesLoaded=e;n.bytesTotal=t;n.duration=Math.floor(r);n.bufferLength=i;if(!n.isHTML5&&!s.isMovieStar){if(s.duration){n.durationEstimate=n.duration>s.duration?n.duration:s.duration}else{n.durationEstimate=parseInt(n.bytesTotal/n.bytesLoaded*n.duration,10)}}else{n.durationEstimate=n.duration}if(!n.isHTML5){n.buffered=[{start:0,end:n.duration}]}if((n.readyState!==3||n.isHTML5)&&s.whileloading){s.whileloading.apply(n)}};this._whileplaying=function(e,r,i,s,o){var u=n._iO,a;if(isNaN(e)||e===null){return false}n.position=Math.max(0,e);n._processOnPosition();if(!n.isHTML5&&y>8){if(u.usePeakData&&r!==t&&r){n.peakData={left:r.leftPeak,right:r.rightPeak}}if(u.useWaveformData&&i!==t&&i){n.waveformData={left:i.split(","),right:s.split(",")}}if(u.useEQData){if(o!==t&&o&&o.leftEQ){a=o.leftEQ.split(",");n.eqData=a;n.eqData.left=a;if(o.rightEQ!==t&&o.rightEQ){n.eqData.right=o.rightEQ.split(",")}}}}if(n.playState===1){if(!n.isHTML5&&y===8&&!n.position&&n.isBuffering){n._onbufferchange(0)}if(u.whileplaying){u.whileplaying.apply(n)}}return true};this._oncaptiondata=function(e){s._wD(n.id+": Caption data received.");n.captiondata=e;if(n._iO.oncaptiondata){n._iO.oncaptiondata.apply(n,[e])}};this._onmetadata=function(e,t){s._wD(n.id+": Metadata received.");var r={},i,o;for(i=0,o=e.length;i<o;i++){r[e[i]]=t[i]}n.metadata=r;if(n._iO.onmetadata){n._iO.onmetadata.apply(n)}};this._onid3=function(e,t){s._wD(n.id+": ID3 data received.");var r=[],i,o;for(i=0,o=e.length;i<o;i++){r[e[i]]=t[i]}n.id3=O(n.id3,r);if(n._iO.onid3){n._iO.onid3.apply(n)}};this._onconnect=function(e){e=e===1;s._wD(n.id+": "+(e?"Connected.":"Failed to connect? - "+n.url),e?1:2);n.connected=e;if(e){n.failures=0;if(ht(n.id)){if(n.getAutoPlay()){n.play(t,n.getAutoPlay())}else if(n._iO.autoLoad){n.load()}}if(n._iO.onconnect){n._iO.onconnect.apply(n,[e])}}};this._ondataerror=function(e){if(n.playState>0){s._wD(n.id+": Data error: "+e);if(n._iO.ondataerror){n._iO.ondataerror.apply(n)}}};this._debug()};V=function(){return d.body||d._docElement||d.getElementsByTagName("div")[0]};c=function(e){return d.getElementById(e)};O=function(e,n){var r=e||{},i,o;i=n===t?s.defaultOptions:n;for(o in i){if(i.hasOwnProperty(o)&&r[o]===t){if(typeof i[o]!=="object"||i[o]===null){r[o]=i[o]}else{r[o]=O(r[o],i[o])}}}return r};_={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};M=function(e,n){var r,i=true,o=n!==t,u=s.setupOptions,a=_;if(e===t){i=[];for(r in u){if(u.hasOwnProperty(r)){i.push(r)}}for(r in a){if(a.hasOwnProperty(r)){if(typeof s[r]==="object"){i.push(r+": {...}")}else if(s[r]instanceof Function){i.push(r+": function() {...}")}else{i.push(r)}}}s._wD(it("setup",i.join(", ")));return false}for(r in e){if(e.hasOwnProperty(r)){if(typeof e[r]!=="object"||e[r]===null||e[r]instanceof Array||e[r]instanceof RegExp){if(o&&a[n]!==t){s[n][r]=e[r]}else if(u[r]!==t){s.setupOptions[r]=e[r];s[r]=e[r]}else if(a[r]===t){ct(it(s[r]===t?"setupUndef":"setupError",r),2);i=false}else{if(s[r]instanceof Function){s[r].apply(s,e[r]instanceof Array?e[r]:[e[r]])}else{s[r]=e[r]}}}else{if(a[r]===t){ct(it(s[r]===t?"setupUndef":"setupError",r),2);i=false}else{return M(e[r],r)}}}}return i};Ot=function(){function r(e){var n=Mt.call(e),r=n.length;if(t){n[1]="on"+n[1];if(r>3){n.pop()}}else if(r===3){n.push(false)}return n}function i(e,r){var i=e.shift(),s=[n[r]];if(t){i[s](e[0],e[1])}else{i[s].apply(i,e)}}function s(){i(r(arguments),"add")}function o(){i(r(arguments),"remove")}var t=e.attachEvent,n={add:t?"attachEvent":"addEventListener",remove:t?"detachEvent":"removeEventListener"};return{add:s,remove:o}}();jt={abort:un(function(){s._wD(this._s.id+": abort")}),canplay:un(function(){var e=this._s,n;if(e._html5_canplay){return true}e._html5_canplay=true;s._wD(e.id+": canplay");e._onbufferchange(0);n=e._iO.position!==t&&!isNaN(e._iO.position)?e._iO.position/1e3:null;if(e.position&&this.currentTime!==n){s._wD(e.id+": canplay: Setting position to "+n);try{this.currentTime=n}catch(r){s._wD(e.id+": canplay: Setting position of "+n+" failed: "+r.message,2)}}if(e._iO._oncanplay){e._iO._oncanplay()}}),canplaythrough:un(function(){var e=this._s;if(!e.loaded){e._onbufferchange(0);e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration());e._onload(true)}}),ended:un(function(){var e=this._s;s._wD(e.id+": ended");e._onfinish()}),error:un(function(){s._wD(this._s.id+": HTML5 error, code "+this.error.code);this._s._onload(false)}),loadeddata:un(function(){var e=this._s;s._wD(e.id+": loadeddata");if(!e._loaded&&!Wt){e.duration=e._get_html5_duration()}}),loadedmetadata:un(function(){s._wD(this._s.id+": loadedmetadata")}),loadstart:un(function(){s._wD(this._s.id+": loadstart");this._s._onbufferchange(1)}),play:un(function(){s._wD(this._s.id+": play()");this._s._onbufferchange(0)}),playing:un(function(){s._wD(this._s.id+": playing");this._s._onbufferchange(0)}),progress:un(function(e){var t=this._s,n,r,i,o=0,u=e.type==="progress",a=e.target.buffered,f=e.loaded||0,l=e.total||1,c=1e3;t.buffered=[];if(a&&a.length){for(n=0,r=a.length;n<r;n++){t.buffered.push({start:a.start(n)*c,end:a.end(n)*c})}o=(a.end(0)-a.start(0))*c;f=o/(e.target.duration*c);if(u&&a.length>1){i=[];r=a.length;for(n=0;n<r;n++){i.push(e.target.buffered.start(n)*c+"-"+e.target.buffered.end(n)*c)}s._wD(this._s.id+": progress, timeRanges: "+i.join(", "))}if(u&&!isNaN(f)){s._wD(this._s.id+": progress, "+Math.floor(f*100)+"% loaded")}}if(!isNaN(f)){t._onbufferchange(0);t._whileloading(f,l,t._get_html5_duration());if(f&&l&&f===l){jt.canplaythrough.call(this,e)}}}),ratechange:un(function(){s._wD(this._s.id+": ratechange")}),suspend:un(function(e){var t=this._s;s._wD(this._s.id+": suspend");jt.progress.call(this,e);t._onsuspend()}),stalled:un(function(){s._wD(this._s.id+": stalled")}),timeupdate:un(function(){this._s._onTimer()}),waiting:un(function(){var e=this._s;s._wD(this._s.id+": waiting");e._onbufferchange(1)})};Tt=function(e){var t;if(e.serverURL||e.type&&on(e.type)){t=false}else{t=e.type?Nt({type:e.type}):Nt({url:e.url})||s.html5Only}return t};kt=function(e,t){if(e){e.src=t;e._called_load=false}if(_t){Dt=null}};Nt=function(e){if(!s.useHTML5Audio||!s.hasHTML5){return false}var n=e.url||null,r=e.type||null,i=s.audioFormats,o,u,a,f;if(r&&s.html5[r]!==t){return s.html5[r]&&!on(r)}if(!Ct){Ct=[];for(f in i){if(i.hasOwnProperty(f)){Ct.push(f);if(i[f].related){Ct=Ct.concat(i[f].related)}}}Ct=new RegExp("\\.("+Ct.join("|")+")(\\?.*)?$","i")}a=n?n.toLowerCase().match(Ct):null;if(!a||!a.length){if(!r){o=false}else{u=r.indexOf(";");a=(u!==-1?r.substr(0,u):r).substr(6)}}else{a=a[1]}if(a&&s.html5[a]!==t){o=s.html5[a]&&!on(a)}else{r="audio/"+a;o=s.html5.canPlayType({type:r});s.html5[a]=o;o=o&&s.html5[r]&&!on(r)}return o};At=function(){function a(t){var n,r,i,o=false,u=false;if(!e||typeof e.canPlayType!=="function"){return o}if(t instanceof Array){for(r=0,i=t.length;r<i;r++){if(s.html5[t[r]]||e.canPlayType(t[r]).match(s.html5Test)){u=true;s.html5[t[r]]=true;s.flash[t[r]]=!!t[r].match(Yt)}}o=u}else{n=e&&typeof e.canPlayType==="function"?e.canPlayType(t):false;o=!!(n&&n.match(s.html5Test))}return o}if(!s.useHTML5Audio||!s.hasHTML5){return false}var e=Audio!==t?Xt&&opera.version()<10?new Audio(null):new Audio:null,n,r,i={},o,u;o=s.audioFormats;for(n in o){if(o.hasOwnProperty(n)){r="audio/"+n;i[n]=a(o[n].type);i[r]=i[n];if(n.match(Yt)){s.flash[n]=true;s.flash[r]=true}else{s.flash[n]=false;s.flash[r]=false}if(o[n]&&o[n].related){for(u=o[n].related.length-1;u>=0;u--){i["audio/"+o[n].related[u]]=i[n];s.html5[o[n].related[u]]=i[n];s.flash[o[n].related[u]]=i[n]}}}}i.canPlayType=e?a:null;s.html5=O(s.html5,i);return true};q={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:a+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:f+"Verify that %s is a valid path.",tryDebug:"Try "+a+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:f+"Non-HTTP page ("+d.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:f+"Special case: Waiting for SWF to load with window focus...",waitForever:f+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:f+"Waiting for 100% SWF load...",needFunction:f+"Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:f+"_debug(): Current sound objects",waitOnload:f+"Waiting for window.onload()",docLoaded:f+"Document already loaded",onload:f+"initComplete(): calling soundManager.onload()",onloadOK:a+".onload() complete",didInit:f+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:f+"Failed to remove Flash node.",shutdown:a+".disable(): Shutting down",queue:f+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+ut.swfTimedout+" CSS...",fbLoaded:"Flash loaded",flRemoved:f+"Flash movie removed.",fbHandler:f+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:a+".load(): current URL already assigned.",badFV:a+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:f+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:f+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:a+".setup(): allowed parameters: %s",setupError:a+'.setup(): "%s" cannot be assigned with this method.',setupUndef:a+'.setup(): Could not find option "%s"',setupLate:a+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:f+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:a+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."};it=function(){var e=Mt.call(arguments),t=e.shift(),n=q&&q[t]?q[t]:"",r,i;if(n&&e&&e.length){for(r=0,i=e.length;r<i;r++){n=n.replace("%s",e[r])}}return n};ft=function(e){if(y===8&&e.loops>1&&e.stream){k("as2loop");e.stream=false}return e};lt=function(e,t){if(e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)){s._wD((t||"")+it("policy"));e.usePolicyFile=true}return e};ct=function(e){if(console!==t&&console.warn!==t){console.warn(e)}else{s._wD(e)}};v=function(){return false};Z=function(e){var t;for(t in e){if(e.hasOwnProperty(t)&&typeof e[t]==="function"){e[t]=v}}t=null};et=function(e){if(e===t){e=false}if(N||e){s.disable(e)}};tt=function(e){var t=null,n;if(e){if(e.match(/\.swf(\?.*)?$/i)){t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4);if(t){return e}}else if(e.lastIndexOf("/")!==e.length-1){e+="/"}}n=(e&&e.lastIndexOf("/")!==-1?e.substr(0,e.lastIndexOf("/")+1):"./")+s.movieURL;if(s.noSWFCache){n+="?ts="+(new Date).getTime()}return n};F=function(){y=parseInt(s.flashVersion,10);if(y!==8&&y!==9){s._wD(it("badFV",y,Y));s.flashVersion=y=Y}var e=s.debugMode||s.debugFlash?"_debug.swf":".swf";if(s.useHTML5Audio&&!s.html5Only&&s.audioFormats.mp4.required&&y<9){s._wD(it("needfl9"));s.flashVersion=y=9}s.version=s.versionNumber+(s.html5Only?" (HTML5-only mode)":y===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(y>8){s.defaultOptions=O(s.defaultOptions,s.flash9Options);s.features.buffering=true;s.defaultOptions=O(s.defaultOptions,s.movieStarOptions);s.filePatterns.flash9=new RegExp("\\.(mp3|"+rn.join("|")+")(\\?.*)?$","i");s.features.movieStar=true}else{s.features.movieStar=false}s.filePattern=s.filePatterns[y!==8?"flash9":"flash8"];s.movieURL=(y===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e);s.features.peakData=s.features.waveformData=s.features.eqData=y>8};K=function(e,t){if(!u){return false}u._setPolling(e,t)};Q=function(){if(s.debugURLParam.test(p)){s.debugMode=true}if(c(s.debugID)){return false}var e,t,n,r,i;if(s.debugMode&&!c(s.debugID)&&(!Jt||!s.useConsole||!s.consoleOnly)){e=d.createElement("div");e.id=s.debugID+"-toggle";r={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};e.appendChild(d.createTextNode("-"));e.onclick=at;e.title="Toggle SM2 debug console";if(h.match(/msie 6/i)){e.style.position="absolute";e.style.cursor="hand"}for(i in r){if(r.hasOwnProperty(i)){e.style[i]=r[i]}}t=d.createElement("div");t.id=s.debugID;t.style.display=s.debugMode?"block":"none";if(s.debugMode&&!c(e.id)){try{n=V();n.appendChild(e)}catch(o){throw new Error(it("domError")+" \n"+o.toString())}n.appendChild(t)}}n=null};ht=this.getSoundById;k=function(e,t){return!e?"":s._wD(it(e),t)};at=function(){var e=c(s.debugID),t=c(s.debugID+"-toggle");if(!e){return false}if(w){t.innerHTML="+";e.style.display="none"}else{t.innerHTML="-";e.style.display="block"}w=!w};E=function(n,r,i){if(e.sm2Debugger!==t){try{sm2Debugger.handleEvent(n,r,i)}catch(s){}}return true};ot=function(){var e=[];if(s.debugMode){e.push(ut.sm2Debug)}if(s.debugFlash){e.push(ut.flashDebug)}if(s.useHighPerformance){e.push(ut.highPerf)}return e.join(" ")};st=function(){var e=it("fbHandler"),t=s.getMoviePercent(),n=ut,r={type:"FLASHBLOCK"};if(s.html5Only){return false}if(!s.ok()){if(St){s.oMC.className=ot()+" "+n.swfDefault+" "+(t===null?n.swfTimedout:n.swfError);s._wD(e+": "+it("fbTimeout")+(t?" ("+it("fbLoaded")+")":""))}s.didFlashBlock=true;P({type:"ontimeout",ignoreInit:true,error:r});J(r)}else{if(s.didFlashBlock){s._wD(e+": Unblocked")}if(s.oMC){s.oMC.className=[ot(),n.swfDefault,n.swfLoaded+(s.didFlashBlock?" "+n.swfUnblocked:"")].join(" ")}}};D=function(e,n,r){if(b[e]===t){b[e]=[]}b[e].push({method:n,scope:r||null,fired:false})};P=function(e){if(!e){e={type:s.ok()?"onready":"ontimeout"}}if(!T&&e&&!e.ignoreInit){return false}if(e.type==="ontimeout"&&(s.ok()||N&&!e.ignoreInit)){return false}var t={success:e&&e.ignoreInit?s.ok():!N},n=e&&e.type?b[e.type]||[]:[],r=[],i,o,u=[t],a=St&&!s.ok();if(e.error){u[0].error=e.error}for(i=0,o=n.length;i<o;i++){if(n[i].fired!==true){r.push(n[i])}}if(r.length){for(i=0,o=r.length;i<o;i++){if(r[i].scope){r[i].method.apply(r[i].scope,u)}else{r[i].method.apply(this,u)}if(!a){r[i].fired=true}}}return true};H=function(){e.setTimeout(function(){if(s.useFlashBlock){st()}P();if(typeof s.onload==="function"){k("onload",1);s.onload.apply(e);k("onloadOK",1)}if(s.waitForWindowLoad){Ot.add(e,"load",H)}},1)};Ht=function(){if(Pt!==t){return Pt}var n=false,r=navigator,i=r.plugins,s,o,u,a=e.ActiveXObject;if(i&&i.length){o="application/x-shockwave-flash";u=r.mimeTypes;if(u&&u[o]&&u[o].enabledPlugin&&u[o].enabledPlugin.description){n=true}}else if(a!==t&&!h.match(/MSAppHost/i)){try{s=new a("ShockwaveFlash.ShockwaveFlash")}catch(f){}n=!!s;s=null}Pt=n;return n};xt=function(){var e,t,n=true,r=s.audioFormats,i=qt&&!!h.match(/os (1|2|3_0|3_1)/i);if(i){s.hasHTML5=false;s.html5Only=true;if(s.oMC){s.oMC.style.display="none"}n=false}else{if(s.useHTML5Audio){if(!s.html5||!s.html5.canPlayType){s._wD("SoundManager: No HTML5 Audio() support detected.");s.hasHTML5=false}if($t){s._wD(f+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(!Pt?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1)}}}if(s.useHTML5Audio&&s.hasHTML5){for(t in r){if(r.hasOwnProperty(t)){if(r[t].required&&!s.html5.canPlayType(r[t].type)||s.preferFlash&&(s.flash[t]||s.flash[r[t].type])){e=true}}}}if(s.ignoreFlash){e=false}s.html5Only=s.hasHTML5&&s.useHTML5Audio&&!e;return!s.html5Only};wt=function(e){var t,n,r=0,i;if(e instanceof Array){for(t=0,n=e.length;t<n;t++){if(e[t]instanceof Object){if(s.canPlayMIME(e[t].type)){r=t;break}}else if(s.canPlayURL(e[t])){r=t;break}}if(e[r].url){e[r]=e[r].url}i=e[r]}else{i=e}return i};vt=function(t){if(!t._hasTimer){t._hasTimer=true;if(!Vt&&s.html5PollingInterval){if(bt===null&&yt===0){bt=e.setInterval(gt,s.html5PollingInterval)}yt++}}};mt=function(e){if(e._hasTimer){e._hasTimer=false;if(!Vt&&s.html5PollingInterval){yt--}}};gt=function(){var t;if(bt!==null&&!yt){e.clearInterval(bt);bt=null;return false}for(t=s.soundIDs.length-1;t>=0;t--){if(s.sounds[s.soundIDs[t]].isHTML5&&s.sounds[s.soundIDs[t]]._hasTimer){s.sounds[s.soundIDs[t]]._onTimer()}}};J=function(n){n=n!==t?n:{};if(typeof s.onerror==="function"){s.onerror.apply(e,[{type:n.type!==t?n.type:null}])}if(n.fatal!==t&&n.fatal){s.disable()}};Bt=function(){if(!$t||!Ht()){return false}var e=s.audioFormats,t,n;for(n in e){if(e.hasOwnProperty(n)){if(n==="mp3"||n==="mp4"){s._wD(a+": Using flash fallback for "+n+" format");s.html5[n]=false;if(e[n]&&e[n].related){for(t=e[n].related.length-1;t>=0;t--){s.html5[e[n].related[t]]=false}}}}}};this._setSandboxType=function(e){var n=s.sandbox;n.type=e;n.description=n.types[n.types[e]!==t?e:"unknown"];if(n.type==="localWithFile"){n.noRemote=true;n.noLocal=false;k("secNote",2)}else if(n.type==="localWithNetwork"){n.noRemote=false;n.noLocal=true}else if(n.type==="localTrusted"){n.noRemote=false;n.noLocal=false}};this._externalInterfaceOK=function(e,t){if(s.swfLoaded){return false}var n;E("swf",true);E("flashtojs",true);s.swfLoaded=true;Qt=false;if($t){Bt()}if(!t||t.replace(/\+dev/i,"")!==s.versionNumber.replace(/\+dev/i,"")){n=a+': Fatal: JavaScript file build "'+s.versionNumber+'" does not match Flash SWF build "'+t+'" at '+s.url+". Ensure both are up-to-date.";setTimeout(function(){throw new Error(n)},0);return false}setTimeout(g,Ut?100:1)};$=function(e,n){function r(){var e=[],t,n=[],r=" + ";t="SoundManager "+s.version+(!s.html5Only&&s.useHTML5Audio?s.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");if(!s.html5Only){if(s.preferFlash){e.push("preferFlash")}if(s.useHighPerformance){e.push("useHighPerformance")}if(s.flashPollingInterval){e.push("flashPollingInterval ("+s.flashPollingInterval+"ms)")}if(s.html5PollingInterval){e.push("html5PollingInterval ("+s.html5PollingInterval+"ms)")}if(s.wmode){e.push("wmode ("+s.wmode+")")}if(s.debugFlash){e.push("debugFlash")}if(s.useFlashBlock){e.push("flashBlock")}}else{if(s.html5PollingInterval){e.push("html5PollingInterval ("+s.html5PollingInterval+"ms)")}}if(e.length){n=n.concat([e.join(r)])}s._wD(t+(n.length?r+n.join(", "):""),1);Ft()}function C(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(S&&x){return false}if(s.html5Only){F();r();s.oMC=c(s.movieID);g();S=true;x=true;return false}var i=n||s.url,o=s.altURL||i,u="JS/Flash audio component (SoundManager 2)",a=V(),f=ot(),l=null,p=d.getElementsByTagName("html")[0],v,m,y,b,w,E,T,N;l=p&&p.dir&&p.dir.match(/rtl/i);e=e===t?s.id:e;F();s.url=tt(en?i:o);n=s.url;s.wmode=!s.wmode&&s.useHighPerformance?"transparent":s.wmode;if(s.wmode!==null&&(h.match(/msie 8/i)||!Ut&&!s.useHighPerformance)&&navigator.platform.match(/win32|win64/i)){Et.push(q.spcWmode);s.wmode=null}v={name:e,id:e,src:n,quality:"high",allowScriptAccess:s.allowScriptAccess,bgcolor:s.bgColor,pluginspage:tn+"www.macromedia.com/go/getflashplayer",title:u,type:"application/x-shockwave-flash",wmode:s.wmode,hasPriority:"true"};if(s.debugFlash){v.FlashVars="debug=1"}if(!s.wmode){delete v.wmode}if(Ut){m=d.createElement("div");b=['<object id="'+e+'" data="'+n+'" type="'+v.type+'" title="'+v.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+tn+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',C("movie",n),C("AllowScriptAccess",s.allowScriptAccess),C("quality",v.quality),s.wmode?C("wmode",s.wmode):"",C("bgcolor",s.bgColor),C("hasPriority","true"),s.debugFlash?C("FlashVars",v.FlashVars):"","</object>"].join("")}else{m=d.createElement("embed");for(y in v){if(v.hasOwnProperty(y)){m.setAttribute(y,v[y])}}}Q();f=ot();a=V();if(a){s.oMC=c(s.movieID)||d.createElement("div");if(!s.oMC.id){s.oMC.id=s.movieID;s.oMC.className=ut.swfDefault+" "+f;E=null;w=null;if(!s.useFlashBlock){if(s.useHighPerformance){E={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}}else{E={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"};if(l){E.left=Math.abs(parseInt(E.left,10))+"px"}}}if(zt){s.oMC.style.zIndex=1e4}if(!s.debugFlash){for(T in E){if(E.hasOwnProperty(T)){s.oMC.style[T]=E[T]}}}try{if(!Ut){s.oMC.appendChild(m)}a.appendChild(s.oMC);if(Ut){w=s.oMC.appendChild(d.createElement("div"));w.className=ut.swfBox;w.innerHTML=b}x=true}catch(k){throw new Error(it("domError")+" \n"+k.toString())}}else{N=s.oMC.className;s.oMC.className=(N?N+" ":ut.swfDefault)+(f?" "+f:"");s.oMC.appendChild(m);if(Ut){w=s.oMC.appendChild(d.createElement("div"));w.className=ut.swfBox;w.innerHTML=b}x=true}}S=true;r();return true};R=function(){if(s.html5Only){$();return false}if(u){return false}if(!s.url){k("noURL");return false}u=s.getMovie(s.id);if(!u){if(!nt){$(s.id,s.url)}else{if(!Ut){s.oMC.appendChild(nt)}else{s.oMC.innerHTML=rt}nt=null;S=true}u=s.getMovie(s.id)}if(typeof s.oninitmovie==="function"){setTimeout(s.oninitmovie,1)}It();return true};B=function(){setTimeout(j,1e3)};j=function(){var t,n=false;if(!s.url){return false}if(pt){return false}pt=true;Ot.remove(e,"load",B);if(Qt&&!Kt){k("waitFocus");return false}if(!T){t=s.getMoviePercent();if(t>0&&t<100){n=true}}setTimeout(function(){t=s.getMoviePercent();if(n){pt=false;s._wD(it("waitSWF"));e.setTimeout(B,1);return false}if(!T){s._wD(a+": No Flash response within expected time. Likely causes: "+(t===0?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(s.debugFlash?" "+it("checkSWF"):""),2);if(!en&&t){k("localFail",2);if(!s.debugFlash){k("tryDebug",2)}}if(t===0){s._wD(it("swf404",s.url),1)}E("flashtojs",false,": Timed out"+en?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!T&&Gt){if(t===null){if(s.useFlashBlock||s.flashLoadTimeout===0){if(s.useFlashBlock){st()}k("waitForever")}else{k("waitForever");P({type:"ontimeout",ignoreInit:true})}}else{if(s.flashLoadTimeout===0){k("waitForever")}else{et(true)}}}},s.flashLoadTimeout)};I=function(){function t(){Ot.remove(e,"focus",I)}if(Kt||!Qt){t();return true}Gt=true;Kt=true;k("gotFocus");pt=false;B();t();return true};It=function(){if(Et.length){s._wD("SoundManager 2: "+Et.join(" "),1);Et=[]}};Ft=function(){It();var e,t=[];if(s.useHTML5Audio&&s.hasHTML5){for(e in s.audioFormats){if(s.audioFormats.hasOwnProperty(e)){t.push(e+" = "+s.html5[e]+(!s.html5[e]&&Pt&&s.flash[e]?" (using flash)":s.preferFlash&&s.flash[e]&&Pt?" (preferring flash)":!s.html5[e]?" ("+(s.audioFormats[e].required?"required, ":"")+"and no flash support)":""))}}s._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}};A=function(t){if(T){return false}if(s.html5Only){k("sm2Loaded");T=true;H();E("onload",true);return true}var n=s.useFlashBlock&&s.flashLoadTimeout&&!s.getMoviePercent(),r=true,i;if(!n){T=true;if(N){i={type:!Pt&&St?"NO_FLASH":"INIT_TIMEOUT"}}}s._wD("SoundManager 2 "+(N?"failed to load":"loaded")+" ("+(N?"Flash security/load error":"OK")+")",N?2:1);if(N||t){if(s.useFlashBlock&&s.oMC){s.oMC.className=ot()+" "+(s.getMoviePercent()===null?ut.swfTimedout:ut.swfError)}P({type:"ontimeout",error:i,ignoreInit:true});E("onload",false);J(i);r=false}else{E("onload",true)}if(!N){if(s.waitForWindowLoad&&!C){k("waitOnload");Ot.add(e,"load",H)}else{if(s.waitForWindowLoad&&C){k("docLoaded")}H()}}return r};m=function(){var e,n=s.setupOptions;for(e in n){if(n.hasOwnProperty(e)){if(s[e]===t){s[e]=n[e]}else if(s[e]!==n[e]){s.setupOptions[e]=s[e]}}}};g=function(){function t(){Ot.remove(e,"load",s.beginDelayedInit)}if(T){k("didInit");return false}if(s.html5Only){if(!T){t();s.enabled=true;A()}return true}R();try{u._externalInterfaceTest(false);K(true,s.flashPollingInterval||(s.useHighPerformance?10:50));if(!s.debugMode){u._disableDebug()}s.enabled=true;E("jstoflash",true);if(!s.html5Only){Ot.add(e,"unload",v)}}catch(n){s._wD("js/flash exception: "+n.toString());E("jstoflash",false);J({type:"JS_TO_FLASH_EXCEPTION",fatal:true});et(true);A();return false}A();t();return true};z=function(){if(X){return false}X=true;m();Q();(function(){var n="sm2-usehtml5audio=",r="sm2-preferflash=",i=null,o=null,u=e.console!==t&&typeof console.log==="function",a=p.toLowerCase();if(a.indexOf(n)!==-1){i=a.charAt(a.indexOf(n)+n.length)==="1";if(u){console.log((i?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter")}s.setup({useHTML5Audio:i})}if(a.indexOf(r)!==-1){o=a.charAt(a.indexOf(r)+r.length)==="1";if(u){console.log((o?"Enabling ":"Disabling ")+"preferFlash via URL parameter")}s.setup({preferFlash:o})}})();if(!Pt&&s.hasHTML5){s._wD("SoundManager: No Flash detected"+(!s.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."),1);s.setup({useHTML5Audio:true,preferFlash:false})}At();s.html5.usingFlash=xt();St=s.html5.usingFlash;if(!Pt&&St){Et.push(q.needFlash);s.setup({flashLoadTimeout:1})}if(d.removeEventListener){d.removeEventListener("DOMContentLoaded",z,false)}R();return true};Lt=function(){if(d.readyState==="complete"){z();d.detachEvent("onreadystatechange",Lt)}return true};W=function(){C=true;Ot.remove(e,"load",W)};U=function(){if(Vt){if(!s.setupOptions.useHTML5Audio||s.setupOptions.preferFlash){Et.push(q.mobileUA)}s.setupOptions.useHTML5Audio=true;s.setupOptions.preferFlash=false;if(qt||Rt&&!h.match(/android\s2\.3/i)){Et.push(q.globalHTML5);if(qt){s.ignoreFlash=true}_t=true}}};U();Ht();Ot.add(e,"focus",I);Ot.add(e,"load",B);Ot.add(e,"load",W);if(d.addEventListener){d.addEventListener("DOMContentLoaded",z,false)}else if(d.attachEvent){d.attachEvent("onreadystatechange",Lt)}else{E("onload",false);J({type:"NO_DOM2_EVENTS",fatal:true})}}var n=null;if(e.SM2_DEFER===undefined||!SM2_DEFER){n=new r}e.SoundManager=r;e.soundManager=n})(window)